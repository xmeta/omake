<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>



<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="GENERATOR" content="hevea 1.08">
<LINK rel="stylesheet" type="text/css" href="omake-doc.css">
<TITLE>
Description
</TITLE>
</HEAD>
<BODY >

<img src="images/omake-manual.gif" border="0" align="top"><br>

<TABLE CELLSPACING=2 CELLPADDING=0>
<TR><TD ALIGN=left NOWRAP>Jump to:</TD>
<TD VALIGN=top ALIGN=center NOWRAP>&nbsp;&nbsp;</TD>
<TD ALIGN=left NOWRAP><A HREF="http://omake.metaprl.org/">OMake Home</A>
&bull;&nbsp;<A HREF="omake.html">Guide Home</A>
&bull;&nbsp;<A HREF="omake-doc.html">Guide (single-page)</A>
&bull;&nbsp;<A HREF="omake-toc.html">Contents (short)</A>
&bull;&nbsp;<A HREF="omake-contents.html">Contents (long)</A></TD>
</TR>
<TR><TD ALIGN=left NOWRAP>Index:</TD>
<TD VALIGN=top ALIGN=center NOWRAP>&nbsp;&nbsp;</TD>
<TD ALIGN=left NOWRAP><A HREF="omake-all-index.html">All</A>
&bull;&nbsp;<A HREF="omake-var-index.html">Variables</A>
&bull;&nbsp;<A HREF="omake-fun-index.html">Functions</A>
&bull;&nbsp;<A HREF="omake-obj-index.html">Objects</A>
&bull;&nbsp;<A HREF="omake-target-index.html">Targets</A></TD>
</TR></TABLE>

<H1 CLASS="chapter"><A NAME="htoc1">Chapter&nbsp;1</A>&nbsp;&nbsp;Description</H1><UL>
<LI><A HREF="omake.html#toc1">Automatic dependency analysis</A>
<LI><A HREF="omake.html#toc2">Content-based dependency analysis</A>
<LI><A HREF="omake.html#toc3">Guide</A>
</UL>

<A NAME="chapter:omake"></A>
<BR>
<BR>
<TT>omake</TT> is designed for building projects that might have source files in several directories.
Projects are normally specified using an <TT>OMakefile</TT> in each of the project directories, and an
<TT>OMakeroot</TT> file in the root directory of the project. The <TT>OMakeroot</TT> file specifies
general build rules, and the <TT>OMakefile</TT>s specify the build parameters specific to each of the
subdirectories. When <TT>omake</TT> runs, it walks the configuration tree, evaluating rules from all
of the <TT>OMakefile</TT>s. The project is then built from the entire collection of build rules.<BR>
<BR>
<A NAME="toc1"></A>
<H2 CLASS="section"><A NAME="htoc2">1.1</A>&nbsp;&nbsp;Automatic dependency analysis</H2>
Dependency analysis has always been problematic with the <TT>make</TT>(1) program. <TT>omake</TT>
addresses this by adding the <CODE>.SCANNER</CODE> target, which specifies a command to produce
dependencies. For example, the following rule
<PRE CLASS="verbatim">
    .SCANNER: %.o: %.c
        $(CC) $(INCLUDE) -MM $&lt;
</PRE>
is the standard way to generate dependencies for <CODE>.c</CODE> files. <TT>omake</TT> will automatically
run the scanner when it needs to determine dependencies for a file.<BR>
<BR>
<A NAME="toc2"></A>
<H2 CLASS="section"><A NAME="htoc3">1.2</A>&nbsp;&nbsp;Content-based dependency analysis</H2>
Dependency analysis in omake uses MD5 digests to determine whether files have changed. After each
run, <TT>omake</TT> stores the dependency information in a file called <TT>.omakedb</TT> in the project
root directory. When a rule is considered for execution, the command is not executed if the target,
dependencies, and command sequence are unchanged since the last run of <TT>omake</TT>. As an
optimization, <TT>omake</TT> does not recompute the digest for a file that has an unchanged
modification time, size, and inode number.<BR>
<BR>
See the following manual pages for more information.<BR>
<BR>
<A NAME="toc3"></A>
<H2 CLASS="section"><A NAME="htoc4">1.3</A>&nbsp;&nbsp;Guide</H2>
<A NAME="section:guide"></A>
If you are new to OMake, you the <A HREF="omake-quickstart.html">omake-quickstart</A> presents a short
introduction that describes how to set up a project. The
<A HREF="omake-build-examples.html">omake-build-examples</A> gives larger examples of build projects, and
<A HREF="omake-language-examples.html">omake-language-examples</A> presents programming examples.
<DL CLASS="description" COMPACT=compact><DT CLASS="dt-description">
<B>Quickstart </B><A HREF="omake-quickstart.html#chapter:quickstart"><B>2</B></A><DD CLASS="dd-description">
A quickstart guide to using <TT>omake</TT>.
<DT CLASS="dt-description"><B>Build examples </B><A HREF="omake-build-examples.html#chapter:build-examples"><B>3</B></A><DD CLASS="dd-description">
Advanced build examples.
<DT CLASS="dt-description"><B>The OMake language&nbsp;</B><A HREF="omake-language.html#chapter:language"><B>4</B></A><DD CLASS="dd-description">
The <TT>omake</TT> language, including a description of objects, expressions, and values.
<DT CLASS="dt-description"><B>Language examples </B><A HREF="omake-language-examples.html#chapter:language-examples"><B>5</B></A><DD CLASS="dd-description">
Advanced language examples.
<DT CLASS="dt-description"><B>Build rules&nbsp;</B><A HREF="omake-rules.html#chapter:rules"><B>6</B></A><DD CLASS="dd-description">
Using <TT>omake</TT> rules to build program.
<DT CLASS="dt-description"><B>Base builtin functions&nbsp;</B><A HREF="omake-base.html#chapter:base"><B>7</B></A><DD CLASS="dd-description">
Functions and variables in the core standard library.
<DT CLASS="dt-description"><B>System functions&nbsp;</B><A HREF="omake-system.html#chapter:system"><B>8</B></A><DD CLASS="dd-description">
Functions on files, input/output, and system commands.
<DT CLASS="dt-description"><B>Shell commands&nbsp;</B><A HREF="omake-shell.html#chapter:shell"><B>9</B></A><DD CLASS="dd-description">
Using the <TT>omake</TT> shell for command-line interpretation.
<DT CLASS="dt-description"><B>The standard objects Pervasives.om&nbsp;</B><A HREF="omake-pervasives.html#chapter:pervasives"><B>10</B></A><DD CLASS="dd-description">
Pervasives defines the built-in objects.
<DT CLASS="dt-description"><B>Standard build functions&nbsp;</B><A HREF="omake-rule.html#chapter:rule"><B>11</B></A><DD CLASS="dd-description">
The standard build library.
<DT CLASS="dt-description"><B>The interactive command interpreter&nbsp;</B><A HREF="osh.html#chapter:osh"><B>12</B></A><DD CLASS="dd-description">
The <TT>osh</TT> command-line interpreter.
<DT CLASS="dt-description"><B>Appendices</B><DD CLASS="dd-description">
<DL CLASS="description" COMPACT=compact><DT CLASS="dt-description">
<B>OMake command-line options&nbsp;</B><A HREF="omake-options.html#chapter:options"><B>A</B></A><DD CLASS="dd-description">
Command-line options for <TT>omake</TT>.
<DT CLASS="dt-description"><B>The OMake language grammar&nbsp;</B><A HREF="omake-grammar.html#chapter:grammar"><B>B</B></A><DD CLASS="dd-description">
A more precise specification of the OMake language.
</DL>
<DT CLASS="dt-description"><A HREF="omake-doc.html"><B>All the documentation on a single page</B></A><DD CLASS="dd-description">
All the OMake documentation in a single page.
</DL>


<TABLE CELLSPACING=2 CELLPADDING=0>
<TR><TD ALIGN=left NOWRAP>Jump to:</TD>
<TD VALIGN=top ALIGN=center NOWRAP>&nbsp;&nbsp;</TD>
<TD ALIGN=left NOWRAP><A HREF="http://omake.metaprl.org/">OMake Home</A>
&bull;&nbsp;<A HREF="omake.html">Guide Home</A>
&bull;&nbsp;<A HREF="omake-doc.html">Guide (single-page)</A>
&bull;&nbsp;<A HREF="omake-toc.html">Contents (short)</A>
&bull;&nbsp;<A HREF="omake-contents.html">Contents (long)</A></TD>
</TR>
<TR><TD ALIGN=left NOWRAP>Index:</TD>
<TD VALIGN=top ALIGN=center NOWRAP>&nbsp;&nbsp;</TD>
<TD ALIGN=left NOWRAP><A HREF="omake-all-index.html">All</A>
&bull;&nbsp;<A HREF="omake-var-index.html">Variables</A>
&bull;&nbsp;<A HREF="omake-fun-index.html">Functions</A>
&bull;&nbsp;<A HREF="omake-obj-index.html">Objects</A>
&bull;&nbsp;<A HREF="omake-target-index.html">Targets</A></TD>
</TR></TABLE>
</BODY>
</HTML>
