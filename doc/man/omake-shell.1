'\" t
.\" Manual page created with latex2man
.\" NOTE: This file is generated, DO NOT EDIT.
.de Vb
.ft CW
.nf
..
.de Ve
.ft R

.fi
..
.TH "OMAKE\-SHELL" "1" "April 11, 2006" "Build Tools " "Build Tools "
.SH NAME

omake
is a flexible build system designed for building a wide variety of projects.
This document describes the usage and syntax of shell commands.
For an overview of omake,
see the
.\"omake.html
omake(1)
man page.
.PP
.SH SHELL COMMANDS

.PP
Shell commands (commands to be executed by the operating system) can be freely mixed with other
code.
.PP
\fBNOTE\fP:
the syntax and shell usage is identical on all platforms, including Win32. To avoid
portability problems on Win32, it is recommended that you avoid the use of the native shell
interpreter cmd\&.
.PP
.Vb
    LIB = $(dir lib)
    println(The contents of the $(LIB) directory is:)
    ls $(LIB)
.Ve
.PP
.SS BASIC COMMANDS
.PP
The syntax of shell commands is similar to the syntax used by the Unix shell bash\&. In
general, a command is a \fIpipeline\fP\&.
A basic command is part of a pipeline. It is specified
with the name of an executable and some arguments. Here are some examples.
.PP
.Vb
    ls
    ls \-AF .
    echo Hello world
.Ve
.PP
The command is found using the current search path in the variable PATH[], which should
define an array of directories containing executables.
.PP
A command may also be prefixed by environment variable definitions.
.PP
.Vb
    # Prints "Hello world"
    env X="Hello world" Y=2 printenv X
    # Pass the include path to the Visual C++
    env include="c:\\Program Files\\Microsoft SDK\\include" cl foo.cpp
.Ve
.PP
.SS GLOBBING
.PP
Commands may contain wildcard patterns. A pattern specifies a set of files through a limited kind
of regular expression. Patterns are expanded before the function is executed.
.PP
.Vb
   # List all files with a .c suffix
   ls *.c

   # List all files with a single character prefix, and .c suffix
   ls ?.c

   # Rename the file hello.ml to foo.ml
   mv {hello,foo}.ml
.Ve
.PP
.SS BACKGROUND JOBS
.PP
The command may also be placed in the background by placing an ampersand after the command. Control
returns to the shell without waiting for the job to complete. The job continues to run in the
background.
.PP
.Vb
    gcc \-o hugeprogram *.c &
.Ve
.PP
.SS FILE REDIRECTION
.PP
Input and output can be redirected to files by using the <, >, and >&
directives after the command.
.PP
.Vb
    # Write to the "foo" file
    echo Hello world > foo

    # Redirect input from the foo file
    cat < foo

    # Redirect standard output and errors to the foo file
    gcc \-o boo *.c >& foo
.Ve
.PP
.SS PIPELINES
.PP
Pipelines are sequences of commands, where the output from each command is sent to the next.
Pipelines are defined with the | and |& syntax. With | the output is
redirected, but errors are not. With |& both output and errors are redirected.
.PP
.Vb
   # Send the output of the ls command to the printer
   ls *.c | lpr

   # Send output and errors to jyh as email
   gcc \-o hugefile *.c |& mail jyh
.Ve
.PP
.SS CONDITIONAL EXECUTION
.PP
Commands may also be composed though conditional evaluation using the || and &&
syntax. Every command has an integer exit code, which may be zero or some other integer. A command
is said to \fIsucceed\fP
if its exit code is zero. The expression command1 && command2
executes command2 only if command1 succeeds. The expression
command1 || command2 executes command2 only if command1 fails.
.PP
.Vb
   # Display the x/y file if possible
   cd x && cat y

   # Run foo.exe, or print an error message
   (test \-x foo.exe && foo.exe) || echo "foo.exe is not executable"
.Ve
.PP
.SS GROUPING
.PP
Parenthesis are used for grouping in a pipeline or conditional command. In the following
expression, the test function is used to test whether the foo.exe file is executable.
If it is, the foo.exe file is executed. If the file is not executable (or if the
foo.exe command fails), the message "foo.exe is not executable" is printed.
.PP
.Vb
   # Run foo.exe, or print an error message
   (test \-x foo.exe && foo.exe) || echo "foo.exe is not executable"
.Ve
.PP
.SS WHAT IS A SHELL COMMAND?
.PP
Syntactially, shell commands are any line that is not one of the following:
.PP
.TP
.B *
A variable definition of the form VAR=string
.TP
.B *
A function call f(...) or method call o.f(...)
.TP
.B *
A rule definition containing a colon string: ...
.TP
.B *
A special command, including the following:
.RS
.TP
.B *
if ...
.TP
.B *
switch ...
.TP
.B *
match ...
.TP
.B *
section ...
.TP
.B *
return ...
.RE
.RS
.PP
.RE
.PP
Commands may also be builtin (aliases). See the documentation for the Shell object, defined
in Pervasives for more information.
.PP
.SH REFERENCES

.PP
.SS SEE ALSO
.PP
.\"omake.html
omake(1),
.\"omake\-quickstart.html
omake\-quickstart(1),
.\"omake\-options.html
omake\-options(1),
.\"omake\-root.html
omake\-root(1),
.\"omake\-language.html
omake\-language(1),
.\"omake\-shell.html
omake\-shell(1),
.\"omake\-rules.html
omake\-rules(1),
.\"omake\-base.html
omake\-base(1),
.\"omake\-system.html
omake\-system(1),
.\"omake\-pervasives.html
omake\-pervasives(1),
.\"osh.html
osh(1),
\fImake\fP(1)
.PP
.SS VERSION
.PP
Version: 0.9.6.9 of April 11, 2006\&.
.PP
.SS LICENSE AND COPYRIGHT
.PP
(C)2003\-2006, Mojave Group, Caltech
.PP
This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.
.PP
This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU General Public License for more details.
.PP
You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
.PP
.SS AUTHOR
.PP
Jason Hickey \fIet. al.\fP.br
Caltech 256\-80
.br
Pasadena, CA 91125, USA
.br
Email: \fBomake\-devel@metaprl.org\fP
.br
WWW: \fBhttp://www.cs.caltech.edu/~jyh\fP
.PP
.\" NOTE: This file is generated, DO NOT EDIT.
