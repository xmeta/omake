<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="generator" content="hevea 2.06">
<style type="text/css">
.c000{border-spacing:6px;border-collapse:separate;}
.c001{font-family:monospace}
.c002{font-family:monospace;font-weight:bold}
.c003{font-style:italic}
.c004{font-weight:bold}
.c005{text-align:center;white-space:nowrap}
.c006{text-align:left;white-space:nowrap}
.c007{text-align:right;white-space:nowrap}
.c008{vertical-align:top;text-align:left;}
.li-itemize{margin:1ex 0ex;}
.li-enumerate{margin:1ex 0ex;}
.dd-description{margin:0ex 0ex 1ex 4ex;}
.dt-description{margin:0ex;}
.toc{list-style:none;}
div.footnotetext P{margin:0px; text-indent:1em;}
.title{margin:2ex auto;text-align:center}
.titlemain{margin:1ex 2ex 2ex 1ex;}
.titlerest{margin:0ex 2ex;}
.center{text-align:center;margin-left:auto;margin-right:auto;}
div table{margin-left:inherit;margin-right:inherit;margin-bottom:2px;margin-top:2px}
td table{margin:auto;}
table{border-collapse:collapse;}
td{padding:0;}
pre{text-align:left;margin-left:0ex;margin-right:auto;}
blockquote{margin-left:4ex;margin-right:4ex;text-align:left;}
td p{margin:0px;}
.hbar{border:none;height:2px;width:100%;background-color:black;}
.verbatim{margin-left:3ex; background:#ddeeff;}
CODE{padding-left:0.2ex; padding-right:0.2ex; background:#eef7ff;}
</style>
<title>The OMake user guide and reference manual
</title>
</head>
<body>
<!--HEVEA command line is: /usr/bin/hevea -fix -I ../src -I ../tex -pedantic -O -exec xxdate.exe -s omake-doc -->
<!--CUT STYLE book--><!--HTMLHEAD-->

<img src="../images/omake-manual.gif" border="0" align="top" alt=""><br>

<table class="c000 cellpading0"><tr><td class="c006">Jump to:</td><td class="c005">&#XA0;&#XA0;</td><td class="c006"><a href="../index.html">OMake Home</a>
&bull;&nbsp;<a href="omake.html">Guide Home</a>
&bull;&nbsp;<a href="omake-doc.html">Guide (single-page)</a>
&bull;&nbsp;<a href="omake-toc.html">Contents (short)</a>
&bull;&nbsp;<a href="omake-contents.html">Contents (long)</a></td></tr>
<tr><td class="c006">Index:</td><td class="c005">&#XA0;&#XA0;</td><td class="c006"><a href="omake-all-index.html">All</a>
&bull;&nbsp;<a href="omake-var-index.html">Variables</a>
&bull;&nbsp;<a href="omake-fun-index.html">Functions</a>
&bull;&nbsp;<a href="omake-obj-index.html">Objects</a>
&bull;&nbsp;<a href="omake-target-index.html">Targets</a>
&bull;&nbsp;<a href="omake-option-index.html">Options</a>
</td></tr>
</table>
<!--ENDHTML-->
<!--CUT DEF chapter 1 --><table class="title"><tr><td style="padding:1ex"><h1 class="titlemain">The OMake user guide and reference manual</h1><h3 class="titlerest">Jason Hickey, Aleksey Nogin, <em>et. al.</em></h3><h3 class="titlerest">21<sup>st</sup>July,&#XA0;2013</h3></td></tr>
</table><p>
<a href="omake-doc.html">All the documentation on a single page</a></p><p><span class="c004">OMake table of contents</span>
</p><!--TOC chapter id="chapter:contents" Contents-->
<h1 class="chapter" id="chapter:contents">Contents</h1><!--SEC END --><ul class="toc"><li class="li-toc">
<a href="#sec2">Chapter&#XA0;1&#XA0;&#XA0;Guide</a>
</li><li class="li-toc"><a href="#sec3">Chapter&#XA0;2&#XA0;&#XA0;OMake quickstart guide</a>
<ul class="toc"><li class="li-toc">
<a href="#sec4">2.1&#XA0;&#XA0;Description</a>
<ul class="toc"><li class="li-toc">
<a href="#sec5">2.1.1&#XA0;&#XA0;Automatic dependency analysis</a>
</li><li class="li-toc"><a href="#sec6">2.1.2&#XA0;&#XA0;Content-based dependency analysis</a>
</li></ul>
</li><li class="li-toc"><a href="#sec7">2.2&#XA0;&#XA0;For users already familiar with make</a>
</li><li class="li-toc"><a href="#sec8">2.3&#XA0;&#XA0;Building a small C program</a>
</li><li class="li-toc"><a href="#sec9">2.4&#XA0;&#XA0;Larger projects</a>
</li><li class="li-toc"><a href="#sec10">2.5&#XA0;&#XA0;Subdirectories</a>
</li><li class="li-toc"><a href="#sec11">2.6&#XA0;&#XA0;Other things to consider</a>
</li><li class="li-toc"><a href="#sec12">2.7&#XA0;&#XA0;Building OCaml programs</a>
</li><li class="li-toc"><a href="#sec13">2.8&#XA0;&#XA0;The OMakefile and OMakeroot files</a>
</li><li class="li-toc"><a href="#sec14">2.9&#XA0;&#XA0;Multiple version support</a>
</li><li class="li-toc"><a href="#sec15">2.10&#XA0;&#XA0;Notes</a>
</li></ul>
</li><li class="li-toc"><a href="#sec16">Chapter&#XA0;3&#XA0;&#XA0;Additional build examples</a>
<ul class="toc"><li class="li-toc">
<a href="#sec17">3.1&#XA0;&#XA0;OMakeroot vs. OMakefile</a>
</li><li class="li-toc"><a href="#sec18">3.2&#XA0;&#XA0;An example C project</a>
</li><li class="li-toc"><a href="#sec19">3.3&#XA0;&#XA0;An example OCaml project</a>
</li><li class="li-toc"><a href="#sec20">3.4&#XA0;&#XA0;Handling new languages</a>
<ul class="toc"><li class="li-toc">
<a href="#sec21">3.4.1&#XA0;&#XA0;Defining a default compilation rule</a>
</li><li class="li-toc"><a href="#sec22">3.4.2&#XA0;&#XA0;Defining a rule for linking</a>
</li><li class="li-toc"><a href="#sec23">3.4.3&#XA0;&#XA0;Dependency scanning</a>
</li><li class="li-toc"><a href="#sec24">3.4.4&#XA0;&#XA0;Pulling it all together</a>
</li><li class="li-toc"><a href="#sec25">3.4.5&#XA0;&#XA0;Finishing up</a>
</li></ul>
</li><li class="li-toc"><a href="#sec26">3.5&#XA0;&#XA0;Collapsing the hierarchy, .SUBDIRS bodies</a>
<ul class="toc"><li class="li-toc">
<a href="#sec27">3.5.1&#XA0;&#XA0;Using glob patterns</a>
</li><li class="li-toc"><a href="#sec28">3.5.2&#XA0;&#XA0;Simplified sub-configurations</a>
</li><li class="li-toc"><a href="#sec29">3.5.3&#XA0;&#XA0;Computing the subdirectory list</a>
</li><li class="li-toc"><a href="#sec30">3.5.4&#XA0;&#XA0;Temporary directories</a>
</li></ul>
</li></ul>
</li><li class="li-toc"><a href="#sec31">Chapter&#XA0;4&#XA0;&#XA0;OMake concepts and syntax</a>
<ul class="toc"><li class="li-toc">
<a href="#sec32">4.1&#XA0;&#XA0;Variables</a>
</li><li class="li-toc"><a href="#sec33">4.2&#XA0;&#XA0;Adding to a variable definition</a>
</li><li class="li-toc"><a href="#sec34">4.3&#XA0;&#XA0;Arrays</a>
</li><li class="li-toc"><a href="#sec35">4.4&#XA0;&#XA0;Special characters and quoting</a>
</li><li class="li-toc"><a href="#sec36">4.5&#XA0;&#XA0;Function definitions</a>
<ul class="toc"><li class="li-toc">
<a href="#sec37">4.5.1&#XA0;&#XA0;Keyword arguments</a>
</li></ul>
</li><li class="li-toc"><a href="#sec38">4.6&#XA0;&#XA0;Curried functions</a>
</li><li class="li-toc"><a href="#sec39">4.7&#XA0;&#XA0;Comments</a>
</li><li class="li-toc"><a href="#sec40">4.8&#XA0;&#XA0;File inclusion</a>
</li><li class="li-toc"><a href="#sec41">4.9&#XA0;&#XA0;Scoping, sections</a>
</li><li class="li-toc"><a href="#sec42">4.10&#XA0;&#XA0;Conditionals</a>
</li><li class="li-toc"><a href="#sec43">4.11&#XA0;&#XA0;Matching</a>
</li><li class="li-toc"><a href="#sec44">4.12&#XA0;&#XA0;Objects</a>
</li><li class="li-toc"><a href="#sec45">4.13&#XA0;&#XA0;Classes</a>
</li><li class="li-toc"><a href="#sec46">4.14&#XA0;&#XA0;Inheritance</a>
</li><li class="li-toc"><a href="#sec47">4.15&#XA0;&#XA0;static.</a>
<ul class="toc"><li class="li-toc">
<a href="#sec48">4.15.1&#XA0;&#XA0;.STATIC</a>
<ul class="toc"><li class="li-toc">
<a href="#sec49">4.15.1.1&#XA0;&#XA0;.MEMO</a>
</li><li class="li-toc"><a href="#sec50">4.15.1.2&#XA0;&#XA0;:key:</a>
</li></ul>
</li></ul>
</li><li class="li-toc"><a href="#sec51">4.16&#XA0;&#XA0;Constants</a>
</li></ul>
</li><li class="li-toc"><a href="#sec52">Chapter&#XA0;5&#XA0;&#XA0;Variables and Naming</a>
<ul class="toc"><li class="li-toc">
<a href="#sec53">5.1&#XA0;&#XA0;private.</a>
</li><li class="li-toc"><a href="#sec54">5.2&#XA0;&#XA0;this.</a>
</li><li class="li-toc"><a href="#sec55">5.3&#XA0;&#XA0;global.</a>
</li><li class="li-toc"><a href="#sec56">5.4&#XA0;&#XA0;protected.</a>
</li><li class="li-toc"><a href="#sec57">5.5&#XA0;&#XA0;public.</a>
</li><li class="li-toc"><a href="#sec58">5.6&#XA0;&#XA0;Qualified blocks</a>
</li><li class="li-toc"><a href="#sec59">5.7&#XA0;&#XA0;declare</a>
</li></ul>
</li><li class="li-toc"><a href="#sec60">Chapter&#XA0;6&#XA0;&#XA0;Expressions and values</a>
<ul class="toc"><li class="li-toc">
<a href="#sec61">6.1&#XA0;&#XA0;Dynamic scoping</a>
</li><li class="li-toc"><a href="#sec62">6.2&#XA0;&#XA0;Functional evaluation</a>
</li><li class="li-toc"><a href="#sec63">6.3&#XA0;&#XA0;Exporting the environment</a>
<ul class="toc"><li class="li-toc">
<a href="#sec64">6.3.1&#XA0;&#XA0;Export regions</a>
</li><li class="li-toc"><a href="#sec65">6.3.2&#XA0;&#XA0;Returning values from exported regions</a>
</li></ul>
</li><li class="li-toc"><a href="#sec66">6.4&#XA0;&#XA0;Objects</a>
</li><li class="li-toc"><a href="#sec67">6.5&#XA0;&#XA0;Field and method calls</a>
</li><li class="li-toc"><a href="#sec68">6.6&#XA0;&#XA0;Method override</a>
</li><li class="li-toc"><a href="#sec69">6.7&#XA0;&#XA0;Super calls</a>
</li></ul>
</li><li class="li-toc"><a href="#sec70">Chapter&#XA0;7&#XA0;&#XA0;Additional language examples</a>
<ul class="toc"><li class="li-toc">
<a href="#sec71">7.1&#XA0;&#XA0;Strings and arrays</a>
</li><li class="li-toc"><a href="#sec72">7.2&#XA0;&#XA0;Quoted strings</a>
</li><li class="li-toc"><a href="#sec73">7.3&#XA0;&#XA0;Files and directories</a>
</li><li class="li-toc"><a href="#sec74">7.4&#XA0;&#XA0;Iteration, mapping, and foreach</a>
</li><li class="li-toc"><a href="#sec75">7.5&#XA0;&#XA0;Lazy expressions</a>
<ul class="toc"><li class="li-toc">
<a href="#sec76">7.5.1&#XA0;&#XA0;A larger example of lazy expressions</a>
</li></ul>
</li><li class="li-toc"><a href="#sec77">7.6&#XA0;&#XA0;Scoping and exports</a>
</li><li class="li-toc"><a href="#sec78">7.7&#XA0;&#XA0;Shell aliases</a>
</li><li class="li-toc"><a href="#sec79">7.8&#XA0;&#XA0;Input/output redirection on the cheap</a>
</li></ul>
</li><li class="li-toc"><a href="#sec80">Chapter&#XA0;8&#XA0;&#XA0;Rules</a>
<ul class="toc"><li class="li-toc">
<a href="#sec81">8.1&#XA0;&#XA0;Implicit rules</a>
</li><li class="li-toc"><a href="#sec82">8.2&#XA0;&#XA0;Bounded implicit rules</a>
</li><li class="li-toc"><a href="#sec83">8.3&#XA0;&#XA0;section</a>
</li><li class="li-toc"><a href="#sec84">8.4&#XA0;&#XA0;section rule</a>
</li><li class="li-toc"><a href="#sec85">8.5&#XA0;&#XA0;Special dependencies</a>
<ul class="toc"><li class="li-toc">
<a href="#sec86">8.5.1&#XA0;&#XA0;:exists:</a>
</li><li class="li-toc"><a href="#sec87">8.5.2&#XA0;&#XA0;:effects:</a>
</li><li class="li-toc"><a href="#sec88">8.5.3&#XA0;&#XA0;:value:</a>
</li></ul>
</li><li class="li-toc"><a href="#sec89">8.6&#XA0;&#XA0;<CODE>.SCANNER</CODE> rules</a>
<ul class="toc"><li class="li-toc">
<a href="#sec90">8.6.1&#XA0;&#XA0;Named scanners, and the <CODE>:scanner:</CODE> dependencies</a>
</li><li class="li-toc"><a href="#sec91">8.6.2&#XA0;&#XA0;Notes</a>
</li></ul>
</li><li class="li-toc"><a href="#sec92">8.7&#XA0;&#XA0;.DEFAULT</a>
</li><li class="li-toc"><a href="#sec93">8.8&#XA0;&#XA0;.SUBDIRS</a>
</li><li class="li-toc"><a href="#sec94">8.9&#XA0;&#XA0;.INCLUDE</a>
</li><li class="li-toc"><a href="#sec95">8.10&#XA0;&#XA0;.PHONY</a>
</li><li class="li-toc"><a href="#sec96">8.11&#XA0;&#XA0;Rule scoping</a>
<ul class="toc"><li class="li-toc">
<a href="#sec97">8.11.1&#XA0;&#XA0;Scoping of implicit rules</a>
</li><li class="li-toc"><a href="#sec98">8.11.2&#XA0;&#XA0;Scoping of <CODE>.SCANNER</CODE> rules</a>
</li><li class="li-toc"><a href="#sec99">8.11.3&#XA0;&#XA0;Scoping for <CODE>.PHONY</CODE> targets</a>
</li></ul>
</li><li class="li-toc"><a href="#sec100">8.12&#XA0;&#XA0;Running OMake from a subdirectory</a>
<ul class="toc"><li class="li-toc">
<a href="#sec101">8.12.1&#XA0;&#XA0;Phony targets in a subdirectory</a>
</li><li class="li-toc"><a href="#sec102">8.12.2&#XA0;&#XA0;Hierarchy of <CODE>.PHONY</CODE> targets</a>
</li></ul>
</li><li class="li-toc"><a href="#sec103">8.13&#XA0;&#XA0;Pathnames in rules</a>
</li></ul>
</li><li class="li-toc"><a href="#sec104">Chapter&#XA0;9&#XA0;&#XA0;Base library</a>
<ul class="toc"><li class="li-toc">
<a href="#sec105">9.1&#XA0;&#XA0;Builtin variables</a>
</li><li class="li-toc"><a href="#sec121">9.2&#XA0;&#XA0;Logic, Boolean functions, and control flow</a>
<ul class="toc"><li class="li-toc">
<a href="#sec122">9.2.1&#XA0;&#XA0;not</a>
</li><li class="li-toc"><a href="#sec123">9.2.2&#XA0;&#XA0;equal</a>
</li><li class="li-toc"><a href="#sec124">9.2.3&#XA0;&#XA0;and</a>
</li><li class="li-toc"><a href="#sec125">9.2.4&#XA0;&#XA0;or</a>
</li><li class="li-toc"><a href="#sec126">9.2.5&#XA0;&#XA0;if</a>
</li><li class="li-toc"><a href="#sec127">9.2.6&#XA0;&#XA0;switch, match</a>
</li><li class="li-toc"><a href="#sec128">9.2.7&#XA0;&#XA0;try</a>
</li><li class="li-toc"><a href="#sec129">9.2.8&#XA0;&#XA0;raise</a>
</li><li class="li-toc"><a href="#sec130">9.2.9&#XA0;&#XA0;exit</a>
</li><li class="li-toc"><a href="#sec131">9.2.10&#XA0;&#XA0;defined</a>
</li><li class="li-toc"><a href="#sec132">9.2.11&#XA0;&#XA0;defined-env</a>
</li><li class="li-toc"><a href="#sec133">9.2.12&#XA0;&#XA0;getenv</a>
</li><li class="li-toc"><a href="#sec134">9.2.13&#XA0;&#XA0;setenv</a>
</li><li class="li-toc"><a href="#sec135">9.2.14&#XA0;&#XA0;unsetenv</a>
</li><li class="li-toc"><a href="#sec136">9.2.15&#XA0;&#XA0;get-registry</a>
</li><li class="li-toc"><a href="#sec137">9.2.16&#XA0;&#XA0;getvar</a>
</li><li class="li-toc"><a href="#sec138">9.2.17&#XA0;&#XA0;setvar</a>
</li></ul>
</li><li class="li-toc"><a href="#sec139">9.3&#XA0;&#XA0;Arrays and sequences</a>
<ul class="toc"><li class="li-toc">
<a href="#sec140">9.3.1&#XA0;&#XA0;array</a>
</li><li class="li-toc"><a href="#sec141">9.3.2&#XA0;&#XA0;split</a>
</li><li class="li-toc"><a href="#sec142">9.3.3&#XA0;&#XA0;concat</a>
</li><li class="li-toc"><a href="#sec143">9.3.4&#XA0;&#XA0;length</a>
</li><li class="li-toc"><a href="#sec144">9.3.5&#XA0;&#XA0;nth</a>
</li><li class="li-toc"><a href="#sec145">9.3.6&#XA0;&#XA0;replace-nth</a>
</li><li class="li-toc"><a href="#sec146">9.3.7&#XA0;&#XA0;nth-hd</a>
</li><li class="li-toc"><a href="#sec147">9.3.8&#XA0;&#XA0;nth-tl</a>
</li><li class="li-toc"><a href="#sec148">9.3.9&#XA0;&#XA0;subrange</a>
</li><li class="li-toc"><a href="#sec149">9.3.10&#XA0;&#XA0;rev</a>
</li><li class="li-toc"><a href="#sec150">9.3.11&#XA0;&#XA0;join</a>
</li><li class="li-toc"><a href="#sec151">9.3.12&#XA0;&#XA0;string</a>
</li><li class="li-toc"><a href="#sec152">9.3.13&#XA0;&#XA0;string-length</a>
</li><li class="li-toc"><a href="#sec153">9.3.14&#XA0;&#XA0;string-escaped, ocaml-escaped, html-escaped, html-pre-escaped</a>
</li><li class="li-toc"><a href="#sec154">9.3.15&#XA0;&#XA0;c-escaped, id-escaped, sql-escaped, uri-escaped</a>
</li><li class="li-toc"><a href="#sec155">9.3.16&#XA0;&#XA0;hexify, unhexify</a>
</li><li class="li-toc"><a href="#sec156">9.3.17&#XA0;&#XA0;decode-uri, encode-uri</a>
</li><li class="li-toc"><a href="#sec157">9.3.18&#XA0;&#XA0;quote</a>
</li><li class="li-toc"><a href="#sec158">9.3.19&#XA0;&#XA0;quote-argv</a>
</li><li class="li-toc"><a href="#sec159">9.3.20&#XA0;&#XA0;html-string</a>
</li><li class="li-toc"><a href="#sec160">9.3.21&#XA0;&#XA0;addsuffix</a>
</li><li class="li-toc"><a href="#sec161">9.3.22&#XA0;&#XA0;mapsuffix</a>
</li><li class="li-toc"><a href="#sec162">9.3.23&#XA0;&#XA0;addsuffixes, addprefixes</a>
</li><li class="li-toc"><a href="#sec163">9.3.24&#XA0;&#XA0;removeprefix</a>
</li><li class="li-toc"><a href="#sec164">9.3.25&#XA0;&#XA0;removesuffix</a>
</li><li class="li-toc"><a href="#sec165">9.3.26&#XA0;&#XA0;replacesuffixes</a>
</li><li class="li-toc"><a href="#sec166">9.3.27&#XA0;&#XA0;addprefix</a>
</li><li class="li-toc"><a href="#sec167">9.3.28&#XA0;&#XA0;mapprefix</a>
</li><li class="li-toc"><a href="#sec168">9.3.29&#XA0;&#XA0;add-wrapper</a>
</li><li class="li-toc"><a href="#sec169">9.3.30&#XA0;&#XA0;set</a>
</li><li class="li-toc"><a href="#sec170">9.3.31&#XA0;&#XA0;mem</a>
</li><li class="li-toc"><a href="#sec171">9.3.32&#XA0;&#XA0;intersection</a>
</li><li class="li-toc"><a href="#sec172">9.3.33&#XA0;&#XA0;intersects</a>
</li><li class="li-toc"><a href="#sec173">9.3.34&#XA0;&#XA0;set-diff</a>
</li><li class="li-toc"><a href="#sec174">9.3.35&#XA0;&#XA0;filter</a>
</li><li class="li-toc"><a href="#sec175">9.3.36&#XA0;&#XA0;filter-out</a>
</li><li class="li-toc"><a href="#sec176">9.3.37&#XA0;&#XA0;capitalize</a>
</li><li class="li-toc"><a href="#sec177">9.3.38&#XA0;&#XA0;uncapitalize</a>
</li><li class="li-toc"><a href="#sec178">9.3.39&#XA0;&#XA0;uppercase</a>
</li><li class="li-toc"><a href="#sec179">9.3.40&#XA0;&#XA0;lowercase</a>
</li><li class="li-toc"><a href="#sec180">9.3.41&#XA0;&#XA0;system</a>
</li><li class="li-toc"><a href="#sec181">9.3.42&#XA0;&#XA0;shell</a>
</li><li class="li-toc"><a href="#sec182">9.3.43&#XA0;&#XA0;export</a>
</li><li class="li-toc"><a href="#sec183">9.3.44&#XA0;&#XA0;while</a>
</li><li class="li-toc"><a href="#sec184">9.3.45&#XA0;&#XA0;break</a>
</li><li class="li-toc"><a href="#sec185">9.3.46&#XA0;&#XA0;random, random-init</a>
</li></ul>
</li><li class="li-toc"><a href="#sec186">9.4&#XA0;&#XA0;Arithmetic</a>
<ul class="toc"><li class="li-toc">
<a href="#sec187">9.4.1&#XA0;&#XA0;int</a>
</li><li class="li-toc"><a href="#sec188">9.4.2&#XA0;&#XA0;float</a>
</li><li class="li-toc"><a href="#sec189">9.4.3&#XA0;&#XA0;Basic arithmetic</a>
</li><li class="li-toc"><a href="#sec190">9.4.4&#XA0;&#XA0;Comparisons</a>
</li></ul>
</li><li class="li-toc"><a href="#sec191">9.5&#XA0;&#XA0;First-class functions</a>
<ul class="toc"><li class="li-toc">
<a href="#sec192">9.5.1&#XA0;&#XA0;fun</a>
</li><li class="li-toc"><a href="#sec193">9.5.2&#XA0;&#XA0;apply</a>
</li><li class="li-toc"><a href="#sec194">9.5.3&#XA0;&#XA0;applya</a>
</li><li class="li-toc"><a href="#sec195">9.5.4&#XA0;&#XA0;create-map, create-lazy-map</a>
</li></ul>
</li><li class="li-toc"><a href="#sec196">9.6&#XA0;&#XA0;Iteration and mapping</a>
<ul class="toc"><li class="li-toc">
<a href="#sec197">9.6.1&#XA0;&#XA0;foreach</a>
</li></ul>
</li><li class="li-toc"><a href="#sec198">9.7&#XA0;&#XA0;Boolean tests</a>
<ul class="toc"><li class="li-toc">
<a href="#sec199">9.7.1&#XA0;&#XA0;sequence-forall</a>
</li><li class="li-toc"><a href="#sec200">9.7.2&#XA0;&#XA0;sequence-exists</a>
</li><li class="li-toc"><a href="#sec201">9.7.3&#XA0;&#XA0;sequence-sort</a>
</li><li class="li-toc"><a href="#sec202">9.7.4&#XA0;&#XA0;compare</a>
</li></ul>
</li></ul>
</li><li class="li-toc"><a href="#sec203">Chapter&#XA0;10&#XA0;&#XA0;File, I/O and system operations</a>
<ul class="toc"><li class="li-toc">
<a href="#sec204">10.1&#XA0;&#XA0;File names</a>
<ul class="toc"><li class="li-toc">
<a href="#sec205">10.1.1&#XA0;&#XA0;file, dir</a>
</li><li class="li-toc"><a href="#sec206">10.1.2&#XA0;&#XA0;tmpfile</a>
</li><li class="li-toc"><a href="#sec207">10.1.3&#XA0;&#XA0;in</a>
</li><li class="li-toc"><a href="#sec208">10.1.4&#XA0;&#XA0;basename</a>
</li><li class="li-toc"><a href="#sec209">10.1.5&#XA0;&#XA0;dirname</a>
</li><li class="li-toc"><a href="#sec210">10.1.6&#XA0;&#XA0;rootname</a>
</li><li class="li-toc"><a href="#sec211">10.1.7&#XA0;&#XA0;dirof</a>
</li><li class="li-toc"><a href="#sec212">10.1.8&#XA0;&#XA0;fullname</a>
</li><li class="li-toc"><a href="#sec213">10.1.9&#XA0;&#XA0;absname</a>
</li><li class="li-toc"><a href="#sec214">10.1.10&#XA0;&#XA0;homename</a>
</li><li class="li-toc"><a href="#sec215">10.1.11&#XA0;&#XA0;suffix</a>
</li></ul>
</li><li class="li-toc"><a href="#sec216">10.2&#XA0;&#XA0;Path search</a>
<ul class="toc"><li class="li-toc">
<a href="#sec217">10.2.1&#XA0;&#XA0;which</a>
</li><li class="li-toc"><a href="#sec218">10.2.2&#XA0;&#XA0;where</a>
</li><li class="li-toc"><a href="#sec219">10.2.3&#XA0;&#XA0;rehash</a>
</li><li class="li-toc"><a href="#sec220">10.2.4&#XA0;&#XA0;exists-in-path</a>
</li><li class="li-toc"><a href="#sec221">10.2.5&#XA0;&#XA0;digest, digest-optional, digest-string</a>
</li><li class="li-toc"><a href="#sec222">10.2.6&#XA0;&#XA0;find-in-path, find-in-path-optional</a>
</li><li class="li-toc"><a href="#sec223">10.2.7&#XA0;&#XA0;digest-in-path, digest-in-path-optional</a>
</li></ul>
</li><li class="li-toc"><a href="#sec224">10.3&#XA0;&#XA0;File stats</a>
<ul class="toc"><li class="li-toc">
<a href="#sec225">10.3.1&#XA0;&#XA0;file-exists, target-exists, target-is-proper</a>
</li><li class="li-toc"><a href="#sec226">10.3.2&#XA0;&#XA0;stat-reset</a>
</li><li class="li-toc"><a href="#sec227">10.3.3&#XA0;&#XA0;filter-exists, filter-targets, filter-proper-targets</a>
</li><li class="li-toc"><a href="#sec229">10.3.4&#XA0;&#XA0;find-targets-in-path, find-targets-in-path-optional</a>
</li><li class="li-toc"><a href="#sec230">10.3.5&#XA0;&#XA0;find-ocaml-targets-in-path-optional</a>
</li><li class="li-toc"><a href="#sec231">10.3.6&#XA0;&#XA0;file-sort</a>
<ul class="toc"><li class="li-toc">
<a href="#sec232">10.3.6.1&#XA0;&#XA0;sort rule</a>
</li></ul>
</li><li class="li-toc"><a href="#sec233">10.3.7&#XA0;&#XA0;file-check-sort</a>
</li></ul>
</li><li class="li-toc"><a href="#sec234">10.4&#XA0;&#XA0;Globbing and file listings</a>
<ul class="toc"><li class="li-toc">
<a href="#sec235">10.4.1&#XA0;&#XA0;glob</a>
</li><li class="li-toc"><a href="#sec236">10.4.2&#XA0;&#XA0;ls</a>
</li><li class="li-toc"><a href="#sec237">10.4.3&#XA0;&#XA0;subdirs</a>
</li></ul>
</li><li class="li-toc"><a href="#sec238">10.5&#XA0;&#XA0;Filesystem operations</a>
<ul class="toc"><li class="li-toc">
<a href="#sec239">10.5.1&#XA0;&#XA0;mkdir</a>
</li><li class="li-toc"><a href="#sec240">10.5.2&#XA0;&#XA0;Stat</a>
</li><li class="li-toc"><a href="#sec241">10.5.3&#XA0;&#XA0;stat, lstat</a>
</li><li class="li-toc"><a href="#sec242">10.5.4&#XA0;&#XA0;unlink</a>
</li><li class="li-toc"><a href="#sec243">10.5.5&#XA0;&#XA0;rename</a>
</li><li class="li-toc"><a href="#sec244">10.5.6&#XA0;&#XA0;link</a>
</li><li class="li-toc"><a href="#sec245">10.5.7&#XA0;&#XA0;symlink, symlink-raw</a>
</li><li class="li-toc"><a href="#sec246">10.5.8&#XA0;&#XA0;readlink, readlink-raw</a>
</li><li class="li-toc"><a href="#sec247">10.5.9&#XA0;&#XA0;chmod</a>
</li><li class="li-toc"><a href="#sec248">10.5.10&#XA0;&#XA0;chown</a>
</li><li class="li-toc"><a href="#sec249">10.5.11&#XA0;&#XA0;utimes</a>
</li><li class="li-toc"><a href="#sec250">10.5.12&#XA0;&#XA0;truncate</a>
</li><li class="li-toc"><a href="#sec251">10.5.13&#XA0;&#XA0;umask</a>
</li></ul>
</li><li class="li-toc"><a href="#sec252">10.6&#XA0;&#XA0;vmount</a>
<ul class="toc"><li class="li-toc">
<a href="#sec253">10.6.1&#XA0;&#XA0;vmount</a>
</li><li class="li-toc"><a href="#sec254">10.6.2&#XA0;&#XA0;add-project-directories</a>
</li><li class="li-toc"><a href="#sec255">10.6.3&#XA0;&#XA0;remove-project-directories</a>
</li></ul>
</li><li class="li-toc"><a href="#sec256">10.7&#XA0;&#XA0;File predicates</a>
<ul class="toc"><li class="li-toc">
<a href="#sec257">10.7.1&#XA0;&#XA0;test</a>
</li><li class="li-toc"><a href="#sec258">10.7.2&#XA0;&#XA0;find</a>
</li></ul>
</li><li class="li-toc"><a href="#sec259">10.8&#XA0;&#XA0;IO functions</a>
<ul class="toc"><li class="li-toc">
<a href="#sec260">10.8.1&#XA0;&#XA0;Standard channels</a>
</li><li class="li-toc"><a href="#sec264">10.8.2&#XA0;&#XA0;open-in-string</a>
</li><li class="li-toc"><a href="#sec265">10.8.3&#XA0;&#XA0;open-out-string, out-contents</a>
</li><li class="li-toc"><a href="#sec266">10.8.4&#XA0;&#XA0;fopen</a>
</li><li class="li-toc"><a href="#sec267">10.8.5&#XA0;&#XA0;close</a>
</li><li class="li-toc"><a href="#sec268">10.8.6&#XA0;&#XA0;read, input-line</a>
</li><li class="li-toc"><a href="#sec269">10.8.7&#XA0;&#XA0;write</a>
</li><li class="li-toc"><a href="#sec270">10.8.8&#XA0;&#XA0;lseek</a>
</li><li class="li-toc"><a href="#sec271">10.8.9&#XA0;&#XA0;rewind</a>
</li><li class="li-toc"><a href="#sec272">10.8.10&#XA0;&#XA0;tell</a>
</li><li class="li-toc"><a href="#sec273">10.8.11&#XA0;&#XA0;flush</a>
</li><li class="li-toc"><a href="#sec274">10.8.12&#XA0;&#XA0;channel-name</a>
</li><li class="li-toc"><a href="#sec275">10.8.13&#XA0;&#XA0;dup</a>
</li><li class="li-toc"><a href="#sec276">10.8.14&#XA0;&#XA0;dup2</a>
</li><li class="li-toc"><a href="#sec277">10.8.15&#XA0;&#XA0;set-nonblock</a>
</li><li class="li-toc"><a href="#sec278">10.8.16&#XA0;&#XA0;set-close-on-exec-mode</a>
</li><li class="li-toc"><a href="#sec279">10.8.17&#XA0;&#XA0;pipe</a>
</li><li class="li-toc"><a href="#sec280">10.8.18&#XA0;&#XA0;mkfifo</a>
</li><li class="li-toc"><a href="#sec281">10.8.19&#XA0;&#XA0;select</a>
</li><li class="li-toc"><a href="#sec282">10.8.20&#XA0;&#XA0;lockf</a>
</li><li class="li-toc"><a href="#sec283">10.8.21&#XA0;&#XA0;InetAddr</a>
</li><li class="li-toc"><a href="#sec284">10.8.22&#XA0;&#XA0;Host</a>
</li><li class="li-toc"><a href="#sec285">10.8.23&#XA0;&#XA0;gethostbyname</a>
</li><li class="li-toc"><a href="#sec286">10.8.24&#XA0;&#XA0;Protocol</a>
</li><li class="li-toc"><a href="#sec287">10.8.25&#XA0;&#XA0;getprotobyname</a>
</li><li class="li-toc"><a href="#sec288">10.8.26&#XA0;&#XA0;Service</a>
</li><li class="li-toc"><a href="#sec289">10.8.27&#XA0;&#XA0;getservbyname</a>
</li><li class="li-toc"><a href="#sec290">10.8.28&#XA0;&#XA0;socket</a>
</li><li class="li-toc"><a href="#sec291">10.8.29&#XA0;&#XA0;bind</a>
</li><li class="li-toc"><a href="#sec292">10.8.30&#XA0;&#XA0;listen</a>
</li><li class="li-toc"><a href="#sec293">10.8.31&#XA0;&#XA0;accept</a>
</li><li class="li-toc"><a href="#sec294">10.8.32&#XA0;&#XA0;connect</a>
</li><li class="li-toc"><a href="#sec295">10.8.33&#XA0;&#XA0;getchar</a>
</li><li class="li-toc"><a href="#sec296">10.8.34&#XA0;&#XA0;gets</a>
</li><li class="li-toc"><a href="#sec297">10.8.35&#XA0;&#XA0;fgets</a>
</li></ul>
</li><li class="li-toc"><a href="#sec298">10.9&#XA0;&#XA0;Printing functions</a>
</li><li class="li-toc"><a href="#sec299">10.10&#XA0;&#XA0;Value printing functions</a>
<ul class="toc"><li class="li-toc">
<a href="#sec300">10.10.1&#XA0;&#XA0;Miscellaneous functions</a>
<ul class="toc"><li class="li-toc">
<a href="#sec301">10.10.1.1&#XA0;&#XA0;set-channel-line</a>
</li></ul>
</li></ul>
</li><li class="li-toc"><a href="#sec302">10.11&#XA0;&#XA0;Higher-level IO functions</a>
<ul class="toc"><li class="li-toc">
<a href="#sec303">10.11.1&#XA0;&#XA0;Regular expressions</a>
</li><li class="li-toc"><a href="#sec304">10.11.2&#XA0;&#XA0;cat</a>
</li><li class="li-toc"><a href="#sec305">10.11.3&#XA0;&#XA0;grep</a>
</li><li class="li-toc"><a href="#sec306">10.11.4&#XA0;&#XA0;scan</a>
</li><li class="li-toc"><a href="#sec307">10.11.5&#XA0;&#XA0;awk</a>
</li><li class="li-toc"><a href="#sec308">10.11.6&#XA0;&#XA0;fsubst</a>
</li><li class="li-toc"><a href="#sec309">10.11.7&#XA0;&#XA0;lex</a>
</li><li class="li-toc"><a href="#sec310">10.11.8&#XA0;&#XA0;lex-search</a>
</li><li class="li-toc"><a href="#sec311">10.11.9&#XA0;&#XA0;Lexer</a>
</li><li class="li-toc"><a href="#sec312">10.11.10&#XA0;&#XA0;Lexer matching</a>
</li><li class="li-toc"><a href="#sec313">10.11.11&#XA0;&#XA0;Extending lexer definitions</a>
</li><li class="li-toc"><a href="#sec314">10.11.12&#XA0;&#XA0;Threading the lexer object</a>
</li><li class="li-toc"><a href="#sec315">10.11.13&#XA0;&#XA0;Parser</a>
</li><li class="li-toc"><a href="#sec316">10.11.14&#XA0;&#XA0;Calling the parser</a>
</li><li class="li-toc"><a href="#sec317">10.11.15&#XA0;&#XA0;Parsing control</a>
</li><li class="li-toc"><a href="#sec318">10.11.16&#XA0;&#XA0;Extending parsers</a>
</li><li class="li-toc"><a href="#sec319">10.11.17&#XA0;&#XA0;Passwd</a>
</li><li class="li-toc"><a href="#sec320">10.11.18&#XA0;&#XA0;getpwnam, getpwuid</a>
</li><li class="li-toc"><a href="#sec321">10.11.19&#XA0;&#XA0;getpwents</a>
</li><li class="li-toc"><a href="#sec322">10.11.20&#XA0;&#XA0;Group</a>
</li><li class="li-toc"><a href="#sec323">10.11.21&#XA0;&#XA0;getgrnam, getgrgid</a>
</li><li class="li-toc"><a href="#sec324">10.11.22&#XA0;&#XA0;tgetstr</a>
</li><li class="li-toc"><a href="#sec325">10.11.23&#XA0;&#XA0;xterm-escape-begin, xterm-escape-end</a>
</li><li class="li-toc"><a href="#sec326">10.11.24&#XA0;&#XA0;xterm-escape</a>
</li><li class="li-toc"><a href="#sec327">10.11.25&#XA0;&#XA0;prompt-invisible-begin, prompt-invisible-end</a>
</li><li class="li-toc"><a href="#sec328">10.11.26&#XA0;&#XA0;prompt-invisible</a>
</li><li class="li-toc"><a href="#sec329">10.11.27&#XA0;&#XA0;gettimeofday</a>
</li><li class="li-toc"><a href="#sec330">10.11.28&#XA0;&#XA0;Tm</a>
</li><li class="li-toc"><a href="#sec331">10.11.29&#XA0;&#XA0;gmtime, localtime</a>
</li><li class="li-toc"><a href="#sec332">10.11.30&#XA0;&#XA0;mktime, normalize-time</a>
</li></ul>
</li></ul>
</li><li class="li-toc"><a href="#sec333">Chapter&#XA0;11&#XA0;&#XA0;Shell commands</a>
<ul class="toc"><li class="li-toc">
<a href="#sec334">11.1&#XA0;&#XA0;Simple commands</a>
</li><li class="li-toc"><a href="#sec335">11.2&#XA0;&#XA0;Globbing</a>
</li><li class="li-toc"><a href="#sec336">11.3&#XA0;&#XA0;Background jobs</a>
</li><li class="li-toc"><a href="#sec337">11.4&#XA0;&#XA0;File redirection</a>
</li><li class="li-toc"><a href="#sec338">11.5&#XA0;&#XA0;Pipelines</a>
</li><li class="li-toc"><a href="#sec339">11.6&#XA0;&#XA0;Conditional execution</a>
</li><li class="li-toc"><a href="#sec340">11.7&#XA0;&#XA0;Grouping</a>
</li><li class="li-toc"><a href="#sec341">11.8&#XA0;&#XA0;What is a shell command?</a>
</li><li class="li-toc"><a href="#sec342">11.9&#XA0;&#XA0;Basic builtin functions</a>
<ul class="toc"><li class="li-toc">
<a href="#sec343">11.9.1&#XA0;&#XA0;echo</a>
</li><li class="li-toc"><a href="#sec344">11.9.2&#XA0;&#XA0;cd</a>
</li></ul>
</li><li class="li-toc"><a href="#sec345">11.10&#XA0;&#XA0;Job control builtin functions</a>
<ul class="toc"><li class="li-toc">
<a href="#sec346">11.10.1&#XA0;&#XA0;jobs</a>
</li><li class="li-toc"><a href="#sec347">11.10.2&#XA0;&#XA0;bg</a>
</li><li class="li-toc"><a href="#sec348">11.10.3&#XA0;&#XA0;fg</a>
</li><li class="li-toc"><a href="#sec349">11.10.4&#XA0;&#XA0;stop</a>
</li><li class="li-toc"><a href="#sec350">11.10.5&#XA0;&#XA0;wait</a>
</li><li class="li-toc"><a href="#sec351">11.10.6&#XA0;&#XA0;kill</a>
</li></ul>
</li><li class="li-toc"><a href="#sec352">11.11&#XA0;&#XA0;Command history</a>
<ul class="toc"><li class="li-toc">
<a href="#sec353">11.11.1&#XA0;&#XA0;history</a>
</li></ul>
</li></ul>
</li><li class="li-toc"><a href="#sec354">Chapter&#XA0;12&#XA0;&#XA0;The standard objects</a>
<ul class="toc"><li class="li-toc">
<a href="#sec355">12.1&#XA0;&#XA0;Pervasives objects</a>
<ul class="toc"><li class="li-toc">
<a href="#sec356">12.1.1&#XA0;&#XA0;Object</a>
</li><li class="li-toc"><a href="#sec357">12.1.2&#XA0;&#XA0;Map</a>
</li><li class="li-toc"><a href="#sec358">12.1.3&#XA0;&#XA0;Number</a>
</li><li class="li-toc"><a href="#sec359">12.1.4&#XA0;&#XA0;Int</a>
</li><li class="li-toc"><a href="#sec360">12.1.5&#XA0;&#XA0;Float</a>
</li><li class="li-toc"><a href="#sec361">12.1.6&#XA0;&#XA0;Sequence</a>
</li><li class="li-toc"><a href="#sec362">12.1.7&#XA0;&#XA0;Array</a>
</li><li class="li-toc"><a href="#sec363">12.1.8&#XA0;&#XA0;String</a>
</li><li class="li-toc"><a href="#sec364">12.1.9&#XA0;&#XA0;Fun</a>
</li><li class="li-toc"><a href="#sec365">12.1.10&#XA0;&#XA0;Rule</a>
</li><li class="li-toc"><a href="#sec366">12.1.11&#XA0;&#XA0;Target</a>
</li><li class="li-toc"><a href="#sec367">12.1.12&#XA0;&#XA0;Node</a>
</li><li class="li-toc"><a href="#sec368">12.1.13&#XA0;&#XA0;File</a>
</li><li class="li-toc"><a href="#sec369">12.1.14&#XA0;&#XA0;Dir</a>
</li><li class="li-toc"><a href="#sec370">12.1.15&#XA0;&#XA0;Channel</a>
</li><li class="li-toc"><a href="#sec371">12.1.16&#XA0;&#XA0;InChannel</a>
</li><li class="li-toc"><a href="#sec372">12.1.17&#XA0;&#XA0;OutChannel</a>
</li><li class="li-toc"><a href="#sec373">12.1.18&#XA0;&#XA0;Location</a>
</li><li class="li-toc"><a href="#sec374">12.1.19&#XA0;&#XA0;Exception</a>
</li><li class="li-toc"><a href="#sec375">12.1.20&#XA0;&#XA0;RuntimeException</a>
</li><li class="li-toc"><a href="#sec376">12.1.21&#XA0;&#XA0;UnbuildableException</a>
</li><li class="li-toc"><a href="#sec377">12.1.22&#XA0;&#XA0;Shell</a>
</li></ul>
</li></ul>
</li><li class="li-toc"><a href="#sec378">Chapter&#XA0;13&#XA0;&#XA0;Build functions and utilities</a>
<ul class="toc"><li class="li-toc">
<a href="#sec379">13.1&#XA0;&#XA0;Builtin .PHONY targets</a>
</li><li class="li-toc"><a href="#sec380">13.2&#XA0;&#XA0;Options and versioning</a>
<ul class="toc"><li class="li-toc">
<a href="#sec381">13.2.1&#XA0;&#XA0;OMakeFlags</a>
</li><li class="li-toc"><a href="#sec382">13.2.2&#XA0;&#XA0;OMakeVersion</a>
</li><li class="li-toc"><a href="#sec383">13.2.3&#XA0;&#XA0;cmp-versions</a>
</li><li class="li-toc"><a href="#sec384">13.2.4&#XA0;&#XA0;DefineCommandVars</a>
</li></ul>
</li><li class="li-toc"><a href="#sec385">13.3&#XA0;&#XA0;Examining the dependency graph</a>
<ul class="toc"><li class="li-toc">
<a href="#sec386">13.3.1&#XA0;&#XA0;dependencies, dependencies-all, dependencies-proper</a>
</li><li class="li-toc"><a href="#sec387">13.3.2&#XA0;&#XA0;target</a>
</li><li class="li-toc"><a href="#sec388">13.3.3&#XA0;&#XA0;find-build-targets</a>
</li><li class="li-toc"><a href="#sec389">13.3.4&#XA0;&#XA0;project-directories</a>
</li><li class="li-toc"><a href="#sec390">13.3.5&#XA0;&#XA0;rule</a>
</li><li class="li-toc"><a href="#sec391">13.3.6&#XA0;&#XA0;build</a>
</li></ul>
</li><li class="li-toc"><a href="#sec392">13.4&#XA0;&#XA0;The OMakeroot file</a>
<ul class="toc"><li class="li-toc">
<a href="#sec393">13.4.1&#XA0;&#XA0;Variables</a>
</li><li class="li-toc"><a href="#sec400">13.4.2&#XA0;&#XA0;System variables</a>
</li></ul>
</li><li class="li-toc"><a href="#sec409">13.5&#XA0;&#XA0;Building C and C++ code</a>
<ul class="toc"><li class="li-toc">
<a href="#sec410">13.5.1&#XA0;&#XA0;Autoconfiguration variables</a>
<ul class="toc"><li class="li-toc">
<a href="#sec411">13.5.1.1&#XA0;&#XA0;Unix-like systems</a>
</li><li class="li-toc"><a href="#sec414">13.5.1.2&#XA0;&#XA0;Win32</a>
</li></ul>
</li><li class="li-toc"><a href="#sec417">13.5.2&#XA0;&#XA0;C and C++ configuration variables</a>
</li><li class="li-toc"><a href="#sec436">13.5.3&#XA0;&#XA0;Generated C files</a>
<ul class="toc"><li class="li-toc">
<a href="#sec437">13.5.3.1&#XA0;&#XA0;CGeneratedFiles, LocalCGeneratedFiles</a>
</li></ul>
</li><li class="li-toc"><a href="#sec438">13.5.4&#XA0;&#XA0;Building C programs and Libraries</a>
<ul class="toc"><li class="li-toc">
<a href="#sec439">13.5.4.1&#XA0;&#XA0;StaticCLibrary, DynamicCLibrary</a>
</li><li class="li-toc"><a href="#sec441">13.5.4.2&#XA0;&#XA0;StaticCLibraryCopy, DynamicCLibraryCopy</a>
</li><li class="li-toc"><a href="#sec442">13.5.4.3&#XA0;&#XA0;StaticCLibraryInstall, DynamicCLibraryInstall</a>
</li><li class="li-toc"><a href="#sec443">13.5.4.4&#XA0;&#XA0;StaticCObject, StaticCObjectCopy, StaticCObjectInstall</a>
</li><li class="li-toc"><a href="#sec444">13.5.4.5&#XA0;&#XA0;CProgram</a>
</li><li class="li-toc"><a href="#sec445">13.5.4.6&#XA0;&#XA0;CProgramCopy</a>
</li><li class="li-toc"><a href="#sec446">13.5.4.7&#XA0;&#XA0;CProgramInstall</a>
</li><li class="li-toc"><a href="#sec447">13.5.4.8&#XA0;&#XA0;CXXProgram, CXXProgramInstall</a>
</li><li class="li-toc"><a href="#sec448">13.5.4.9&#XA0;&#XA0;StaticCXXLibrary, StaticCXXLibraryCopy, StaticCXXLibraryInstall, DynamicCXXLibrary, DynamicCXXLibraryCopy, DynamicCXXLibraryInstall</a>
</li></ul>
</li></ul>
</li><li class="li-toc"><a href="#sec449">13.6&#XA0;&#XA0;Building OCaml code</a>
<ul class="toc"><li class="li-toc">
<a href="#sec450">13.6.1&#XA0;&#XA0;Autoconfiguration variables for OCaml compilation</a>
</li><li class="li-toc"><a href="#sec456">13.6.2&#XA0;&#XA0;Configuration variables for OCaml compilation</a>
</li><li class="li-toc"><a href="#sec477">13.6.3&#XA0;&#XA0;OCaml command flags</a>
</li><li class="li-toc"><a href="#sec487">13.6.4&#XA0;&#XA0;Library variables</a>
</li><li class="li-toc"><a href="#sec493">13.6.5&#XA0;&#XA0;Generated OCaml Files</a>
<ul class="toc"><li class="li-toc">
<a href="#sec494">13.6.5.1&#XA0;&#XA0;OCamlGeneratedFiles, LocalOCamlGeneratedFiles</a>
</li><li class="li-toc"><a href="#sec495">13.6.5.2&#XA0;&#XA0;Automatic discovery of generated files during dependency analysis</a>
</li></ul>
</li><li class="li-toc"><a href="#sec496">13.6.6&#XA0;&#XA0;Using the Menhir parser generator</a>
<ul class="toc"><li class="li-toc">
<a href="#sec497">13.6.6.1&#XA0;&#XA0;OCamlLibrary</a>
</li><li class="li-toc"><a href="#sec498">13.6.6.2&#XA0;&#XA0;OCamlPackage</a>
</li><li class="li-toc"><a href="#sec499">13.6.6.3&#XA0;&#XA0;OCamlLibraryCopy</a>
</li><li class="li-toc"><a href="#sec500">13.6.6.4&#XA0;&#XA0;OCamlLibraryInstall</a>
</li><li class="li-toc"><a href="#sec501">13.6.6.5&#XA0;&#XA0;OCamlProgram</a>
</li><li class="li-toc"><a href="#sec502">13.6.6.6&#XA0;&#XA0;OCamlProgramCopy</a>
</li><li class="li-toc"><a href="#sec503">13.6.6.7&#XA0;&#XA0;OCamlProgramInstall</a>
</li></ul>
</li></ul>
</li><li class="li-toc"><a href="#sec504">13.7&#XA0;&#XA0;Building L<sup>A</sup>T<sub>E</sub>X files</a>
<ul class="toc"><li class="li-toc">
<a href="#sec505">13.7.1&#XA0;&#XA0;Configuration variables</a>
</li><li class="li-toc"><a href="#sec518">13.7.2&#XA0;&#XA0;Building L<sup>A</sup>T<sub>E</sub>X documents</a>
<ul class="toc"><li class="li-toc">
<a href="#sec519">13.7.2.1&#XA0;&#XA0;LaTeXDocument</a>
</li><li class="li-toc"><a href="#sec523">13.7.2.2&#XA0;&#XA0;TeXGeneratedFiles, LocalTeXGeneratedFiles</a>
</li><li class="li-toc"><a href="#sec524">13.7.2.3&#XA0;&#XA0;LaTeXDocumentCopy</a>
</li><li class="li-toc"><a href="#sec525">13.7.2.4&#XA0;&#XA0;LaTeXDocumentInstall</a>
</li></ul>
</li></ul>
</li></ul>
</li><li class="li-toc"><a href="#sec526">Chapter&#XA0;14&#XA0;&#XA0;Autoconfiguration functions and variables</a>
<ul class="toc"><li class="li-toc">
<a href="#sec527">14.1&#XA0;&#XA0;General-purpose autoconfiguration functions</a>
<ul class="toc"><li class="li-toc">
<a href="#sec528">14.1.1&#XA0;&#XA0;ConfMsgChecking, ConfMsgResult</a>
</li><li class="li-toc"><a href="#sec529">14.1.2&#XA0;&#XA0;ConfMsgWarn, ConfMsgError</a>
</li><li class="li-toc"><a href="#sec530">14.1.3&#XA0;&#XA0;ConfMsgYesNo, ConfMsgFound</a>
</li><li class="li-toc"><a href="#sec531">14.1.4&#XA0;&#XA0;TryCompileC, TryLinkC, TryRunC</a>
</li><li class="li-toc"><a href="#sec532">14.1.5&#XA0;&#XA0;RunCProg</a>
</li><li class="li-toc"><a href="#sec533">14.1.6&#XA0;&#XA0;CheckCHeader, VerboseCheckCHeader</a>
</li><li class="li-toc"><a href="#sec534">14.1.7&#XA0;&#XA0;CheckCLib, VerboseCheckCLib</a>
</li><li class="li-toc"><a href="#sec535">14.1.8&#XA0;&#XA0;CheckProg</a>
</li></ul>
</li><li class="li-toc"><a href="#sec536">14.2&#XA0;&#XA0;Translating <CODE>autoconf</CODE> scripts</a>
</li><li class="li-toc"><a href="#sec537">14.3&#XA0;&#XA0;Predefined configuration tests</a>
<ul class="toc"><li class="li-toc">
<a href="#sec538">14.3.1&#XA0;&#XA0;NCurses library configuration</a>
</li><li class="li-toc"><a href="#sec543">14.3.2&#XA0;&#XA0;ReadLine library configuration</a>
</li><li class="li-toc"><a href="#sec548">14.3.3&#XA0;&#XA0;Snprintf configuration</a>
</li></ul>
</li></ul>
</li><li class="li-toc"><a href="#sec550">Chapter&#XA0;15&#XA0;&#XA0;The OSH shell</a>
<ul class="toc"><li class="li-toc">
<a href="#sec551">15.1&#XA0;&#XA0;Startup</a>
</li><li class="li-toc"><a href="#sec554">15.2&#XA0;&#XA0;Aliases</a>
</li><li class="li-toc"><a href="#sec555">15.3&#XA0;&#XA0;Interactive syntax</a>
</li></ul>
</li><li class="li-toc"><a href="#sec556">Appendix&#XA0;A&#XA0;&#XA0;Synopsis</a>
<ul class="toc"><li class="li-toc">
<a href="#sec557">A.1&#XA0;&#XA0;General usage</a>
</li><li class="li-toc"><a href="#sec558">A.2&#XA0;&#XA0;Output control</a>
<ul class="toc"><li class="li-toc">
<a href="#sec559">A.2.1&#XA0;&#XA0;<span class="c001">-s</span></a>
</li><li class="li-toc"><a href="#sec560">A.2.2&#XA0;&#XA0;<span class="c001">-S</span></a>
</li><li class="li-toc"><a href="#sec561">A.2.3&#XA0;&#XA0;<span class="c001">-w</span></a>
</li><li class="li-toc"><a href="#sec562">A.2.4&#XA0;&#XA0;<span class="c001">--progress</span></a>
</li><li class="li-toc"><a href="#sec563">A.2.5&#XA0;&#XA0;<span class="c001">--print-status</span></a>
</li><li class="li-toc"><a href="#sec564">A.2.6&#XA0;&#XA0;<span class="c001">--print-exit</span></a>
</li><li class="li-toc"><a href="#sec565">A.2.7&#XA0;&#XA0;<span class="c001">--verbose</span></a>
</li><li class="li-toc"><a href="#sec566">A.2.8&#XA0;&#XA0;<span class="c001">--output-normal</span></a>
</li><li class="li-toc"><a href="#sec567">A.2.9&#XA0;&#XA0;<span class="c001">--output-postpone</span></a>
</li><li class="li-toc"><a href="#sec568">A.2.10&#XA0;&#XA0;<span class="c001">--output-only-errors</span></a>
</li><li class="li-toc"><a href="#sec569">A.2.11&#XA0;&#XA0;<span class="c001">--output-at-end</span></a>
</li><li class="li-toc"><a href="#sec570">A.2.12&#XA0;&#XA0;<span class="c001">-o</span></a>
</li></ul>
</li><li class="li-toc"><a href="#sec571">A.3&#XA0;&#XA0;Build options</a>
<ul class="toc"><li class="li-toc">
<a href="#sec572">A.3.1&#XA0;&#XA0;<span class="c001">-k</span></a>
</li><li class="li-toc"><a href="#sec573">A.3.2&#XA0;&#XA0;<span class="c001">-n</span></a>
</li><li class="li-toc"><a href="#sec574">A.3.3&#XA0;&#XA0;<span class="c001">-p</span></a>
</li><li class="li-toc"><a href="#sec575">A.3.4&#XA0;&#XA0;<span class="c001">-P</span></a>
</li><li class="li-toc"><a href="#sec576">A.3.5&#XA0;&#XA0;<span class="c001">-R</span></a>
</li><li class="li-toc"><a href="#sec577">A.3.6&#XA0;&#XA0;<span class="c001">-t</span></a>
</li><li class="li-toc"><a href="#sec578">A.3.7&#XA0;&#XA0;<span class="c001">-U</span></a>
</li><li class="li-toc"><a href="#sec579">A.3.8&#XA0;&#XA0;<span class="c001">--depend</span></a>
</li><li class="li-toc"><a href="#sec580">A.3.9&#XA0;&#XA0;<span class="c001">--configure</span></a>
</li><li class="li-toc"><a href="#sec581">A.3.10&#XA0;&#XA0;<span class="c001">--force-dotomake</span></a>
</li><li class="li-toc"><a href="#sec582">A.3.11&#XA0;&#XA0;<span class="c001">--dotomake</span></a>
</li><li class="li-toc"><a href="#sec583">A.3.12&#XA0;&#XA0;<span class="c001">-j</span></a>
</li><li class="li-toc"><a href="#sec584">A.3.13&#XA0;&#XA0;<span class="c001">--print-dependencies</span></a>
</li><li class="li-toc"><a href="#sec585">A.3.14&#XA0;&#XA0;<span class="c001">--show-dependencies</span></a>
</li><li class="li-toc"><a href="#sec586">A.3.15&#XA0;&#XA0;<span class="c001">--all-dependencies</span></a>
</li><li class="li-toc"><a href="#sec587">A.3.16&#XA0;&#XA0;<span class="c001">--verbose-dependencies</span></a>
</li><li class="li-toc"><a href="#sec588">A.3.17&#XA0;&#XA0;<span class="c001">--install</span></a>
</li><li class="li-toc"><a href="#sec589">A.3.18&#XA0;&#XA0;<span class="c001">--install-all</span></a>
</li><li class="li-toc"><a href="#sec590">A.3.19&#XA0;&#XA0;<span class="c001">--install-force</span></a>
</li><li class="li-toc"><a href="#sec591">A.3.20&#XA0;&#XA0;<span class="c001">--absname</span></a>
</li><li class="li-toc"><a href="#sec592">A.3.21&#XA0;&#XA0;<span class="c001">variable definition</span></a>
</li></ul>
</li><li class="li-toc"><a href="#sec593">A.4&#XA0;&#XA0;Additional options</a>
</li><li class="li-toc"><a href="#sec594">A.5&#XA0;&#XA0;Environment variables</a>
<ul class="toc"><li class="li-toc">
<a href="#sec595">A.5.1&#XA0;&#XA0;<span class="c001">OMAKEFLAGS</span></a>
</li><li class="li-toc"><a href="#sec596">A.5.2&#XA0;&#XA0;<span class="c001">OMAKELIB</span></a>
</li></ul>
</li><li class="li-toc"><a href="#sec597">A.6&#XA0;&#XA0;Functions</a>
<ul class="toc"><li class="li-toc">
<a href="#sec598">A.6.1&#XA0;&#XA0;<span class="c001">OMakeFlags</span></a>
</li></ul>
</li><li class="li-toc"><a href="#sec599">A.7&#XA0;&#XA0;Option processing</a>
</li><li class="li-toc"><a href="#sec600">A.8&#XA0;&#XA0;.omakerc</a>
</li></ul>
</li><li class="li-toc"><a href="#sec601">Appendix&#XA0;B&#XA0;&#XA0;OMake grammar</a>
<ul class="toc"><li class="li-toc">
<a href="#sec602">B.1&#XA0;&#XA0;OMake lexical conventions</a>
<ul class="toc"><li class="li-toc">
<a href="#sec603">B.1.1&#XA0;&#XA0;Comments</a>
</li><li class="li-toc"><a href="#sec604">B.1.2&#XA0;&#XA0;Special characters</a>
</li><li class="li-toc"><a href="#sec605">B.1.3&#XA0;&#XA0;Identifiers</a>
</li><li class="li-toc"><a href="#sec606">B.1.4&#XA0;&#XA0;Command identifiers</a>
</li><li class="li-toc"><a href="#sec607">B.1.5&#XA0;&#XA0;Variable references</a>
</li><li class="li-toc"><a href="#sec608">B.1.6&#XA0;&#XA0;String constants</a>
</li></ul>
</li><li class="li-toc"><a href="#sec609">B.2&#XA0;&#XA0;The OMake grammar</a>
<ul class="toc"><li class="li-toc">
<a href="#sec610">B.2.1&#XA0;&#XA0;Expressions</a>
<ul class="toc"><li class="li-toc">
<a href="#sec611">B.2.1.1&#XA0;&#XA0;Inline applications</a>
</li></ul>
</li><li class="li-toc"><a href="#sec612">B.2.2&#XA0;&#XA0;Statements and programs</a>
<ul class="toc"><li class="li-toc">
<a href="#sec613">B.2.2.1&#XA0;&#XA0;Special forms</a>
</li><li class="li-toc"><a href="#sec614">B.2.2.2&#XA0;&#XA0;Variable definitions</a>
</li><li class="li-toc"><a href="#sec615">B.2.2.3&#XA0;&#XA0;Applications and function definitions</a>
</li><li class="li-toc"><a href="#sec616">B.2.2.4&#XA0;&#XA0;Objects</a>
</li><li class="li-toc"><a href="#sec617">B.2.2.5&#XA0;&#XA0;Rules</a>
</li><li class="li-toc"><a href="#sec618">B.2.2.6&#XA0;&#XA0;Shell commands</a>
</li></ul>
</li></ul>
</li><li class="li-toc"><a href="#sec619">B.3&#XA0;&#XA0;Dollar modifiers</a>
</li><li class="li-toc"><a href="#sec620">B.4&#XA0;&#XA0;Programming syntax</a>
<ul class="toc"><li class="li-toc">
<a href="#sec621">B.4.1&#XA0;&#XA0;Examples</a>
</li></ul>
</li></ul>
</li><li class="li-toc"><a href="#sec628">Appendix&#XA0;C&#XA0;&#XA0;References</a>
<ul class="toc"><li class="li-toc">
<a href="#sec629">C.1&#XA0;&#XA0;See Also</a>
</li><li class="li-toc"><a href="#sec630">C.2&#XA0;&#XA0;Version</a>
</li><li class="li-toc"><a href="#sec631">C.3&#XA0;&#XA0;License and Copyright</a>
</li><li class="li-toc"><a href="#sec632">C.4&#XA0;&#XA0;Author</a>
</li></ul>
</li></ul><!--NAME omake-contents.html-->

<!--TOC chapter id="sec2" Guide-->
<h1 class="chapter" id="sec2">Chapter&#XA0;1&#XA0;&#XA0;Guide</h1><!--SEC END --><p>
<a id="chapter:omake"></a>
<a id="section:guide"></a>
</p><!--NAME omake.html-->
<p>If you are new to OMake, you the <a href="omake-quickstart.html">omake-quickstart</a> presents a short
introduction that describes how to set up a project. The
<a href="omake-build-examples.html">omake-build-examples</a> gives larger examples of build projects, and
<a href="omake-language-examples.html">omake-language-examples</a> presents programming examples.</p><dl class="description"><dt class="dt-description">
<span class="c004">Quickstart&#XA0;</span><a href="#chapter%3Aquickstart"><span class="c004">2</span></a></dt><dd class="dd-description">
A quickstart guide to using <span class="c001">omake</span>.
</dd><dt class="dt-description"><span class="c004">Build examples&#XA0;</span><a href="#chapter%3Abuild-examples"><span class="c004">3</span></a></dt><dd class="dd-description">
Advanced build examples.
</dd><dt class="dt-description"><span class="c004">The OMake language&#XA0;</span><a href="#chapter%3Alanguage"><span class="c004">4</span></a></dt><dd class="dd-description">
The <span class="c001">omake</span> language, including a description of objects, expressions, and values.
</dd><dt class="dt-description"><span class="c004">Variables and naming&#XA0;</span><a href="#chapter%3Anaming"><span class="c004">5</span></a></dt><dd class="dd-description">
Variables, names, and environments.
</dd><dt class="dt-description"><span class="c004">Language discussion&#XA0;</span><a href="#chapter%3Aextra"><span class="c004">6</span></a></dt><dd class="dd-description">
Further discussion on the language, including scoping, evaluation, and objects.
</dd><dt class="dt-description"><span class="c004">Language examples&#XA0;</span><a href="#chapter%3Alanguage-examples"><span class="c004">7</span></a></dt><dd class="dd-description">
Additional language examples.
</dd><dt class="dt-description"><span class="c004">Build rules&#XA0;</span><a href="#chapter%3Arules"><span class="c004">8</span></a></dt><dd class="dd-description">
Defining and using rules to build programs.
</dd><dt class="dt-description"><span class="c004">Base builtin functions&#XA0;</span><a href="#chapter%3Abase"><span class="c004">9</span></a></dt><dd class="dd-description">
Functions and variables in the core standard library.
</dd><dt class="dt-description"><span class="c004">System functions&#XA0;</span><a href="#chapter%3Asystem"><span class="c004">10</span></a></dt><dd class="dd-description">
Functions on files, input/output, and system commands.
</dd><dt class="dt-description"><span class="c004">Shell commands&#XA0;</span><a href="#chapter%3Ashell"><span class="c004">11</span></a></dt><dd class="dd-description">
Using the <span class="c001">omake</span> shell for command-line interpretation.
</dd><dt class="dt-description"><span class="c004">The standard objects&#XA0;</span><a href="#chapter%3Apervasives"><span class="c004">12</span></a></dt><dd class="dd-description">
Pervasives defines the built-in objects.
</dd><dt class="dt-description"><span class="c004">Standard build definitions&#XA0;</span><a href="#chapter%3Abuild"><span class="c004">13</span></a></dt><dd class="dd-description">
The build specifications for programming languages in the OMake standard library.
</dd><dt class="dt-description"><span class="c004">Standard autoconfiguration functions and variables&#XA0;</span><a href="#chapter%3Aautoconf"><span class="c004">14</span></a></dt><dd class="dd-description">
The utilities provoded by the OMake standard library to simplify
programming of autoconfiguration tests.
</dd><dt class="dt-description"><span class="c004">The interactive command interpreter&#XA0;</span><a href="#chapter%3Aosh"><span class="c004">15</span></a></dt><dd class="dd-description">
The <span class="c001">osh</span> command-line interpreter.
</dd><dt class="dt-description"><span class="c004">Appendices</span></dt><dd class="dd-description">
<dl class="description"><dt class="dt-description">
<span class="c004">OMake command-line options&#XA0;</span><a href="#chapter%3Aoptions"><span class="c004">A</span></a></dt><dd class="dd-description">
Command-line options for <span class="c001">omake</span>.
</dd><dt class="dt-description"><span class="c004">The OMake language grammar&#XA0;</span><a href="#chapter%3Agrammar"><span class="c004">B</span></a></dt><dd class="dd-description">
A more precise specification of the OMake language.
</dd></dl>
</dd><dt class="dt-description"><a href="omake-doc.html"><span class="c004">All the documentation on a single page</span></a></dt><dd class="dd-description">
All the OMake documentation in a single page.
</dd></dl>
<!--TOC chapter id="sec3" OMake quickstart guide-->
<h1 class="chapter" id="sec3">Chapter&#XA0;2&#XA0;&#XA0;OMake quickstart guide</h1><!--SEC END --><p>
<a id="chapter:quickstart"></a>
</p><!--NAME omake-quickstart.html-->

<!--TOC section id="sec4" Description-->
<h2 class="section" id="sec4">2.1&#XA0;&#XA0;Description</h2><!--SEC END --><p><span class="c001">omake</span> is designed for building projects that might have source files in several directories.
Projects are normally specified using an <span class="c001">OMakefile</span> in each of the project directories, and an
<span class="c001">OMakeroot</span> file in the root directory of the project. The <span class="c001">OMakeroot</span> file specifies
general build rules, and the <span class="c001">OMakefile</span>s specify the build parameters specific to each of the
subdirectories. When <span class="c001">omake</span> runs, it walks the configuration tree, evaluating rules from all
of the <span class="c001">OMakefile</span>s. The project is then built from the entire collection of build rules.</p>
<!--TOC subsection id="sec5" Automatic dependency analysis-->
<h3 class="subsection" id="sec5">2.1.1&#XA0;&#XA0;Automatic dependency analysis</h3><!--SEC END --><p>Dependency analysis has always been problematic with the <span class="c001">make</span>(1) program. <span class="c001">omake</span>
addresses this by adding the <code>.SCANNER</code> target, which specifies a command to produce
dependencies. For example, the following rule</p><pre class="verbatim">    .SCANNER: %.o: %.c
        $(CC) $(INCLUDE) -MM $&lt;
</pre><p>is the standard way to generate dependencies for <code>.c</code> files. <span class="c001">omake</span> will automatically
run the scanner when it needs to determine dependencies for a file.</p>
<!--TOC subsection id="sec6" Content-based dependency analysis-->
<h3 class="subsection" id="sec6">2.1.2&#XA0;&#XA0;Content-based dependency analysis</h3><!--SEC END --><p>Dependency analysis in omake uses MD5 digests to determine whether files have changed. After each
run, <span class="c001">omake</span> stores the dependency information in a file called <span class="c001">.omakedb</span> in the project
root directory. When a rule is considered for execution, the command is not executed if the target,
dependencies, and command sequence are unchanged since the last run of <span class="c001">omake</span>. As an
optimization, <span class="c001">omake</span> does not recompute the digest for a file that has an unchanged
modification time, size, and inode number.</p>
<!--TOC section id="sec7" For users already familiar with make-->
<h2 class="section" id="sec7">2.2&#XA0;&#XA0;For users already familiar with make</h2><!--SEC END --><p>For users already familiar with the <span class="c001">make</span>(1) command, here is a list of
differences to keep in mind when using <span class="c001">omake</span>.</p><ul class="itemize"><li class="li-itemize">
In <span class="c001">omake</span>, you are much less likely to define build rules of your own.
The system provides many standard functions (like <a href="#fun%3AStaticCLibrary"><CODE>StaticCLibrary</CODE></a> and <a href="#fun%3ACProgram"><CODE>CProgram</CODE></a>),
described in Chapter&#XA0;<a href="#chapter%3Abuild">13</a>, to specify these builds more simply.
</li><li class="li-itemize">Implicit rules using <code>.SUFFIXES</code> and the <code>.suf1.suf2:</code> are not supported.
You should use wildcard patterns instead <code>%.suf2: %.suf1</code>.
</li><li class="li-itemize">Scoping is significant: you should define variables and <code>.PHONY</code>
targets (see Section&#XA0;<a href="#target%3A.PHONY">8.10</a>) before they are used.
</li><li class="li-itemize">Subdirectories are incorporated into a project using the
<code>.SUBDIRS:</code> target (see Section&#XA0;<a href="#target%3A.SUBDIRS">8.8</a>).
</li></ul>
<!--TOC section id="sec8" Building a small C program-->
<h2 class="section" id="sec8">2.3&#XA0;&#XA0;Building a small C program</h2><!--SEC END --><p>To start a new project, the easiest method is to change directories to the project
root and use the command <code>omake --install</code> to install default <span class="c001">OMakefile</span>s.</p><pre class="verbatim">    $ cd ~/newproject
    $ omake --install
    *** omake: creating OMakeroot
    *** omake: creating OMakefile
    *** omake: project files OMakefile and OMakeroot have been installed
    *** omake: you should edit these files before continuing
</pre><p>The default <span class="c001">OMakefile</span> contains sections for building C and OCaml programs.
For now, we&#X2019;ll build a simple C project.</p><p>Suppose we have a C file called <code>hello_code.c</code> containing the following code:</p><pre class="verbatim">    #include &lt;stdio.h&gt;

    int main(int argc, char **argv)
    {
        printf("Hello world\n");
        return 0;
    }
</pre><p>To build the program a program <code>hello</code> from this file, we can use the
<a href="#fun%3ACProgram"><CODE>CProgram</CODE> function</a>.
The <span class="c001">OMakefile</span> contains just one line that specifies that the program <code>hello</code> is
to be built from the source code in the <code>hello_code.c</code> file (note that file suffixes
are not passed to these functions).</p><pre class="verbatim">    CProgram(hello, hello_code)
</pre><p>Now we can run <span class="c001">omake</span> to build the project. Note that the first time we run <span class="c001">omake</span>,
it both scans the <code>hello_code.c</code> file for dependencies, and compiles it using the <code>cc</code>
compiler. The status line printed at the end indicates how many files were scanned, how many
were built, and how many MD5 digests were computed.</p><pre class="verbatim">    $ omake hello
    *** omake: reading OMakefiles
    *** omake: finished reading OMakefiles (0.0 sec)
    - scan . hello_code.o
    + cc -I. -MM hello_code.c
    - build . hello_code.o
    + cc -I. -c -o hello_code.o hello_code.c
    - build . hello
    + cc -o hello hello_code.o
    *** omake: done (0.5 sec, 1/6 scans, 2/6 rules, 5/22 digests)
    $ omake
    *** omake: reading OMakefiles
    *** omake: finished reading OMakefiles (0.1 sec)
    *** omake: done (0.1 sec, 0/4 scans, 0/4 rules, 0/9 digests)
</pre><p>If we want to change the compile options, we can redefine the <code>CC</code> and <code>CFLAGS</code>
variables <em>before</em> the <code>CProgram</code> line. In this example, we will use the <code>gcc</code>
compiler with the <code>-g</code> option. In addition, we will specify a <code>.DEFAULT</code> target
to be built by default. The <code>EXE</code> variable is defined to be <code>.exe</code> on <code>Win32</code>
systems; it is empty otherwise.</p><pre class="verbatim">    CC = gcc
    CFLAGS += -g
    CProgram(hello, hello_code)
    .DEFAULT: hello$(EXE)
</pre><p>Here is the corresponding run for <span class="c001">omake</span>.</p><pre class="verbatim">    $ omake
    *** omake: reading OMakefiles
    *** omake: finished reading OMakefiles (0.0 sec)
    - scan . hello_code.o
    + gcc -g -I. -MM hello_code.c
    - build . hello_code.o
    + gcc -g -I. -c -o hello_code.o hello_code.c
    - build . hello
    + gcc -g -o hello hello_code.o
    *** omake: done (0.4 sec, 1/7 scans, 2/7 rules, 3/22 digests)
</pre><p>We can, of course, include multiple files in the program. Suppose we write a new
file <code>hello_helper.c</code>. We would include this in the project as follows.</p><pre class="verbatim">    CC = gcc
    CFLAGS += -g
    CProgram(hello, hello_code hello_helper)
    .DEFAULT: hello$(EXE)
</pre>
<!--TOC section id="sec9" Larger projects-->
<h2 class="section" id="sec9">2.4&#XA0;&#XA0;Larger projects</h2><!--SEC END --><p>As the project grows it is likely that we will want to build libraries of code.
Libraries can be built using the <code>StaticCLibrary</code> function. Here is an example
of an <span class="c001">OMakefile</span> with two libraries.</p><pre class="verbatim">    CC = gcc
    CFLAGS += -g

    FOO_FILES = foo_a foo_b
    BAR_FILES = bar_a bar_b bar_c

    StaticCLibrary(libfoo, $(FOO_FILES))
    StaticCLibrary(libbar, $(BAR_FILES))

    # The hello program is linked with both libraries
    LIBS = libfoo libbar
    CProgram(hello, hello_code hello_helper)

    .DEFAULT: hello$(EXE)
</pre>
<!--TOC section id="sec10" Subdirectories-->
<h2 class="section" id="sec10">2.5&#XA0;&#XA0;Subdirectories</h2><!--SEC END --><p>As the project grows even further, it is a good idea to split it into several directories.
Suppose we place the <code>libfoo</code> and <code>libbar</code> into subdirectories.</p><p>In each subdirectory, we define an <span class="c001">OMakefile</span> for that directory. For example, here
is an example <span class="c001">OMakefile</span> for the <code>foo</code> subdirectory.</p><pre class="verbatim">    INCLUDES += .. ../bar

    FOO_FILES = foo_a foo_b
    StaticCLibrary(libfoo, $(FOO_FILES))
</pre><p>Note the the <code>INCLUDES</code> variable is defined to include the other directories in the project.</p><p>Now, the next step is to link the subdirectories into the main project. The project <span class="c001">OMakefile</span>
should be modified to include a <code>.SUBDIRS:</code> target.</p><pre class="verbatim">    # Project configuration
    CC = gcc
    CFLAGS += -g

    # Subdirectories
    .SUBDIRS: foo bar

    # The libraries are now in subdirectories
    LIBS = foo/libfoo bar/libbar

    CProgram(hello, hello_code hello_helper)

    .DEFAULT: hello$(EXE)
</pre><p>Note that the variables <code>CC</code> and <code>CFLAGS</code> are defined <em>before</em> the <code>.SUBDIRS</code>
target. These variables remain defined in the subdirectories, so that <code>libfoo</code> and <code>libbar</code>
use <code>gcc -g</code>.</p><p>If the two directories are to be configured differently, we have two choices. The <span class="c001">OMakefile</span>
in each subdirectory can be modified with its configuration (this is how it would normally be done).
Alternatively, we can also place the change in the root <span class="c001">OMakefile</span>.</p><pre class="verbatim">    # Default project configuration
    CC = gcc
    CFLAGS += -g

    # libfoo uses the default configuration
    .SUBDIRS: foo

    # libbar uses the optimizing compiler
    CFLAGS += -O3
    .SUBDIRS: bar

    # Main program
    LIBS = foo/libfoo bar/libbar
    CProgram(hello, hello_code hello_helper)

    .DEFAULT: hello$(EXE)
</pre><p>Note that the way we have specified it, the <code>CFLAGS</code> variable also contains the <code>-O3</code>
option for the <code>CProgram</code>, and <code>hello_code.c</code> and <code>hello_helper.c</code> file will both be
compiled with the <code>-O3</code> option. If we want to make the change truly local to <code>libbar</code>, we
can put the <code>bar</code> subdirectory in its own scope using the <code>section</code> form.</p><pre class="verbatim">    # Default project configuration
    CC = gcc
    CFLAGS += -g

    # libfoo uses the default configuration
    .SUBDIRS: foo

    # libbar uses the optimizing compiler
    section
        CFLAGS += -O3
        .SUBDIRS: bar

    # Main program does not use the optimizing compiler
    LIBS = foo/libfoo bar/libbar
    CProgram(hello, hello_code hello_helper)

    .DEFAULT: hello$(EXE)
</pre><p>Later, suppose we decide to port this project to <code>Win32</code>, and we discover that we need
different compiler flags and an additional library.</p><pre class="verbatim">    # Default project configuration
    if $(equal $(OSTYPE), Win32)
        CC = cl /nologo
        CFLAGS += /DWIN32 /MT
        export
    else
        CC = gcc
        CFLAGS += -g
        export

    # libfoo uses the default configuration
    .SUBDIRS: foo

    # libbar uses the optimizing compiler
    section
        CFLAGS += $(if $(equal $(OSTYPE), Win32), $(EMPTY), -O3)
        .SUBDIRS: bar

    # Default libraries
    LIBS = foo/libfoo bar/libbar

    # We need libwin32 only on Win32
    if $(equal $(OSTYPE), Win32)
       LIBS += win32/libwin32

       .SUBDIRS: win32
       export

    # Main program does not use the optimizing compiler
    CProgram(hello, hello_code hello_helper)

    .DEFAULT: hello$(EXE)
</pre><p>Note the use of the <code>export</code> directives to export the variable definitions from the
if-statements. Variables in <span class="c001">omake</span> are <em>scoped</em>&#X2014;variables in nested blocks (blocks
with greater indentation), are not normally defined in outer blocks. The <code>export</code> directive
specifies that the variable definitions in the nested blocks should be exported to their parent
block.</p><p>Finally, for this example, we decide to copy all libraries into a common <code>lib</code> directory. We
first define a directory variable, and replace occurrences of the <code>lib</code> string with the
variable.</p><pre class="verbatim">    # The common lib directory
    LIB = $(dir lib)

    # phony target to build just the libraries
    .PHONY: makelibs

    # Default project configuration
    if $(equal $(OSTYPE), Win32)
        CC = cl /nologo
        CFLAGS += /DWIN32 /MT
        export
    else
        CC = gcc
        CFLAGS += -g
        export

    # libfoo uses the default configuration
    .SUBDIRS: foo

    # libbar uses the optimizing compiler
    section
        CFLAGS += $(if $(equal $(OSTYPE), Win32), $(EMPTY), -O3)
        .SUBDIRS: bar

    # Default libraries
    LIBS = $(LIB)/libfoo $(LIB)/libbar

    # We need libwin32 only on Win32
    if $(equal $(OSTYPE), Win32)
       LIBS += $(LIB)/libwin32

       .SUBDIRS: win32
       export

    # Main program does not use the optimizing compiler
    CProgram(hello, hello_code hello_helper)

    .DEFAULT: hello$(EXE)
</pre><p>In each subdirectory, we modify the <span class="c001">OMakefile</span>s in the library directories to install them
into the <code>$(LIB)</code> directory. Here is the relevant change to <span class="c001">foo/OMakefile</span>.</p><pre class="verbatim">    INCLUDES += .. ../bar

    FOO_FILES = foo_a foo_b
    StaticCLibraryInstall(makelib, $(LIB), libfoo, $(FOO_FILES))
</pre><p>Directory (and file names) evaluate to relative pathnames. Within the <code>foo</code> directory, the
<code>$(LIB)</code> variable evaluates to <code>../lib</code>.</p><p>As another example, instead of defining the <code>INCLUDES</code> variable separately
in each subdirectory, we can define it in the toplevel as follows.</p><pre class="verbatim">    INCLUDES = $(ROOT) $(dir foo bar win32)
</pre><p>In the <code>foo</code> directory, the <code>INCLUDES</code> variable will evaluate to
the string <code>.. . ../bar ../win32</code>. In the <code>bar</code> directory,
it would be <code>.. ../foo . ../win32</code>. In the root directory it
would be <code>. foo bar win32</code>.</p>
<!--TOC section id="sec11" Other things to consider-->
<h2 class="section" id="sec11">2.6&#XA0;&#XA0;Other things to consider</h2><!--SEC END --><p><span class="c001">omake</span> also handles recursive subdirectories. For example, suppose the <code>foo</code>
directory itself contains several subdirectories. The <span class="c001">foo/OMakefile</span> would then
contain its own <code>.SUBDIRS</code> target, and each of its subdirectories would
contain its own <code>OMakefile</code>.</p>
<!--TOC section id="sec12" Building OCaml programs-->
<h2 class="section" id="sec12">2.7&#XA0;&#XA0;Building OCaml programs</h2><!--SEC END --><p>By default, <span class="c001">omake</span> is also configured with functions for building OCaml programs.
The functions for OCaml program use the <code>OCaml</code> prefix. For example, suppose
we reconstruct the previous example in OCaml, and we have a file called <code>hello_code.ml</code>
that contains the following code.</p><pre class="verbatim">   open Printf

   let () = printf "Hello world\n"
</pre><p>An example <span class="c001">OMakefile</span> for this simple project would contain the following.</p><pre class="verbatim">    # Use the byte-code compiler
    BYTE_ENABLED = true
    NATIVE_ENABLED = false
    OCAMLCFLAGS += -g

    # Build the program
    OCamlProgram(hello, hello_code)
    .DEFAULT: hello.run
</pre><p>Next, suppose the we have two library subdirectories: the <code>foo</code> subdirectory
is written in C, the <code>bar</code> directory is written in OCaml, and we need to
use the standard OCaml <code>Unix</code> module.</p><pre class="verbatim">    # Default project configuration
    if $(equal $(OSTYPE), Win32)
        CC = cl /nologo
        CFLAGS += /DWIN32 /MT
        export
    else
        CC = gcc
        CFLAGS += -g
        export

    # Use the byte-code compiler
    BYTE_ENABLED = true
    NATIVE_ENABLED = false
    OCAMLCFLAGS += -g

    # library subdirectories
    INCLUDES += $(dir foo bar)
    OCAMLINCLUDES += $(dir foo bar)
    .SUBDIRS: foo bar

    # C libraries
    LIBS = foo/libfoo

    # OCaml libraries
    OCAML_LIBS = bar/libbar

    # Also use the Unix module
    OCAML_OTHER_LIBS = unix

    # The main program
    OCamlProgram(hello, hello_code hello_helper)

    .DEFAULT: hello
</pre><p>The <span class="c001">foo/OMakefile</span> would be configured as a C library.</p><pre class="verbatim">    FOO_FILES = foo_a foo_b
    StaticCLibrary(libfoo, $(FOO_FILES))
</pre><p>The <span class="c001">bar/OMakefile</span> would build an ML library.</p><pre class="verbatim">   BAR_FILES = bar_a bar_b bar_c
   OCamlLibrary(libbar, $(BAR_FILES))
</pre>
<!--TOC section id="sec13" The OMakefile and OMakeroot files-->
<h2 class="section" id="sec13">2.8&#XA0;&#XA0;The OMakefile and OMakeroot files</h2><!--SEC END --><p>
<a id="section:omakeroot"></a>
<a id="hevea_default0"></a>
<a id="hevea_default1"></a></p><p><span class="c001">OMake</span> uses the <span class="c001">OMakefile</span> and <span class="c001">OMakeroot</span> files for configuring a project. The
syntax of these files is the same, but their role is slightly different. For one thing, every
project must have exactly one <span class="c001">OMakeroot</span> file in the project root directory. This file serves
to identify the project root, and it contains code that sets up the project. In contrast, a
multi-directory project will often have an <span class="c001">OMakefile</span> in each of the project subdirectories,
specifying how to build the files in that subdirectory.</p><p>Normally, the <span class="c001">OMakeroot</span> file is boilerplate. The following listing is a typical example.</p><pre class="verbatim">    include $(STDLIB)/build/Common
    include $(STDLIB)/build/C
    include $(STDLIB)/build/OCaml
    include $(STDLIB)/build/LaTeX

    # Redefine the command-line variables
    DefineCommandVars(.)

    # The current directory is part of the project
    .SUBDIRS: .
</pre><p>The <code>include</code> lines include the standard configuration files needed for the project. The
<code>$(STDLIB)</code> represents the <span class="c001">omake</span> library directory. The only required configuration
file is <code>Common</code>. The others are optional; for example, the <code>$(STDLIB)/build/OCaml</code> file
is needed only when the project contains programs written in OCaml.</p><p>The <code>DefineCommandVars</code> function defines any variables specified on the command line (as
arguments of the form <code>VAR=&lt;value&gt;</code>). The <code>.SUBDIRS</code> line specifies that the current
directory is part of the project (so the <code>OMakefile</code> should be read).</p><p>Normally, the <code>OMakeroot</code> file should be small and project-independent. Any project-specific
configuration should be placed in the <code>OMakefiles</code> of the project.</p>
<!--TOC section id="sec14" Multiple version support-->
<h2 class="section" id="sec14">2.9&#XA0;&#XA0;Multiple version support</h2><!--SEC END --><p>
<a id="hevea_default2"></a></p><p>OMake version <code>0.9.6</code> introduced preliminary support for multiple, simultaneous versions of a
project. Versioning uses the <code>vmount(dir1, dir2)</code> function, which defines a &#X201C;virtual mount&#X201D;
of directory <code>dir1</code> over directory <code>dir2</code>. A &#X201C;virtual mount&#X201D; is like a transparent
mount in Unix, where the files from <code>dir1</code> appear in the <code>dir2</code> namespace, but new files
are created in <code>dir2</code>. More precisely, the filename <code>dir2/foo</code> refers to: a) the file
<code>dir1/foo</code> if it exists, or b) <code>dir2/foo</code> otherwise.</p><p>The <code>vmount</code> function makes it easy to specify multiple versions of a project. Suppose we have
a project where the source files are in the directory <code>src/</code>, and we want to compile two
versions, one with debugging support and one optimized. We create two directories, <span class="c001">debug</span> and
<span class="c001">opt</span>, and mount the <span class="c001">src</span> directory over them.</p><pre class="verbatim">    section
        CFLAGS += -g
        vmount(-l, src, debug)
        .SUBDIRS: debug

    section
        CFLAGS += -O3
        vmount(-l, src, opt)
        .SUBDIRS: opt
</pre><p>Here, we are using <code>section</code> blocks to define the scope of the <code>vmount</code>&#X2014;you may not need
them in your project.</p><p>The <code>-l</code> option is optional. It specifies that files form the <code>src</code> directory should be
linked into the target directories (or copied, if the system is Win32). The links are added as
files are referenced. If no options are given, then files are not copied or linked, but filenames
are translated to refer directly to the <code>src/</code> files.</p><p>Now, when a file is referenced in the <code>debug</code> directory, it is linked from the <code>src</code>
directory if it exists. For example, when the file <code>debug/OMakefile</code> is read, the
<code>src/OMakefile</code> is linked into the <code>debug/</code> directory.</p><p>The <code>vmount</code> model is fairly transparent. The <code>OMakefile</code>s can be written <em>as if</em>
referring to files in the <code>src/</code> directory&#X2014;they need not be aware of mounting.
However, there are a few points to keep in mind.</p>
<!--TOC section id="sec15" Notes-->
<h2 class="section" id="sec15">2.10&#XA0;&#XA0;Notes</h2><!--SEC END --><ul class="itemize"><li class="li-itemize">
When using the <code>vmount</code> function for versioning, it wise to keep the source files
distinct from the compiled versions. For example, suppose the source directory contained a file
<code>src/foo.o</code>. When mounted, the <code>foo.o</code> file will be the same in all versions, which is
probably not what you want. It is better to keep the <code>src/</code> directory pristine, containing no
compiled code.</li><li class="li-itemize">When using the <code>vmount -l</code> option, files are linked into the version directory only if
they are referenced in the project. Functions that examine the filesystem (like <code>$(ls ...)</code>)
may produce unexpected results.
</li></ul>
<!--TOC chapter id="sec16" Additional build examples-->
<h1 class="chapter" id="sec16">Chapter&#XA0;3&#XA0;&#XA0;Additional build examples</h1><!--SEC END --><p>
<a id="chapter:build-examples"></a>
<a id="hevea_default3"></a>
</p><!--NAME omake-build-examples.html-->
<p>Let&#X2019;s explain the OMake build model a bit more.
One issue that dominates this discussion is that OMake is based on global project analysis. That
means you define a configuration for the <em>entire</em> project, and you run <em>one</em> instance of omake.</p><p>For single-directory projects this doesn&#X2019;t mean much. For multi-directory projects it means a lot.
With GNU make, you would usually invoke the <code>make</code> program recursively for each directory in
the project. For example, suppose you had a project with some project root directory, containing a
directory of sources <code>src</code>, which in turn contains subdirectories <code>lib</code> and <code>main</code>.
So your project looks like this nice piece of ASCII art.</p><pre class="verbatim">    my_project/
    |--&gt; Makefile
    `--&gt; src/
         |---&gt; Makefile
         |---&gt; lib/
         |     |---&gt; Makefile
         |     `---&gt; source files...
         `---&gt; main/
               |---&gt; Makefile
               `---&gt; source files...
</pre><p>Typically, with GNU make, you would start an instance of <code>make</code> in <code>my_project/</code>; this
would in term start an instance of <code>make</code> in the <code>src/</code> directory; and this would start
new instances in <code>lib/</code> and <code>main/</code>. Basically, you count up the number of
<code>Makefile</code>s in the project, and that is the number of instances of <code>make</code> processes that
will be created.</p><p>The number of processes is no big deal with today&#X2019;s machines (sometimes contrary the the author&#X2019;s opinion, we
no longer live in the 1970s). The problem with the scheme was that each <code>make</code> process had a
separate configuration, and it took a lot of work to make sure that everything was consistent.
Furthermore, suppose the programmer runs <code>make</code> in the <code>main/</code> directory, but the
<code>lib/</code> is out-of-date. In this case, <code>make</code> would happily crank away, perhaps trying to
rebuild files in <code>lib/</code>, perhaps just giving up.</p><p>With OMake this changes entirely. Well, not entirely. The source structure is quite similar, we
merely add some Os to the ASCII art.</p><pre class="verbatim">    my_project/
    |--&gt; OMakeroot   (or Root.om)
    |--&gt; OMakefile
    `--&gt; src/
         |---&gt; OMakefile
         |---&gt; lib/
         |     |---&gt; OMakefile
         |     `---&gt; source files...
         `---&gt; main/
               |---&gt; OMakefile
               `---&gt; source files...
</pre><p><a id="hevea_default4"></a>
<a id="hevea_default5"></a>
The role of each <code>&lt;dir&gt;/OMakefile</code> plays the same role as each <code>&lt;dir&gt;/Makefile</code>: it
describes how to build the source files in <code>&lt;dir&gt;</code>. The OMakefile retains much of syntax and
structure of the Makefile, but in most cases it is much simpler.</p><p>One minor difference is the presence of the OMakeroot in the project root. The main purpose of this
file is to indicate where the project root <em>is</em> in the first place (in case <code>omake</code> is
invoked from a subdirectory). The <code>OMakeroot</code> serves as the bootstrap file; omake starts by
reading this file first. Otherwise, the syntax and evaluation of <code>OMakeroot</code> is no different
from any other <code>OMakefile</code>.</p><p>The <em>big</em> difference is that OMake performs a <em>global</em> analysis. Here is what happens
when <code>omake</code> starts.</p><p><a id="hevea_default6"></a>
</p><ol class="enumerate" type=1><li class="li-enumerate">
omake locates that OMakeroot file, and reads it.
</li><li class="li-enumerate">Each OMakefile points to its subdirectory OMakefiles using the .SUBDIRS target.
For example, <code>my_project/OMakefile</code> has a rule,<pre class="verbatim">    .SUBDIRS: src
</pre><p>and the <code>my_project/src/OMakefile</code> has a rule,</p><pre class="verbatim">    .SUBDIRS: lib main
</pre><p><code>omake</code> uses these rules to read and evaluate every <code>OMakefile</code> in the project.
Reading and evaluation is fast. This part of the process is cheap.</p></li><li class="li-enumerate">Now that the entire configuration is read, <code>omake</code> determines which files are out-of-date
(using a global analysis), and starts the build process. This may take a while, depending on what
exactly needs to be done.
</li></ol><p>There are several advantages to this model. First, since analysis is global, it is much easier to
ensure that the build configuration is consistent&#X2013;after all, there is only one configuration.
Another benefit is that the build configuration is inherited, and can be re-used, down the
hierarchy. Typically, the root <code>OMakefile</code> defines some standard boilerplate and
configuration, and this is inherited by subdirectories that tweak and modify it (but do not need to
restate it entirely). The disadvantage of course is space, since this is global analysis after all.
In practice rarely seems to be a concern; omake takes up much less space than your web browser even
on large projects.</p><p>Some notes to the GNU/BSD make user.
</p><ul class="itemize"><li class="li-itemize">
OMakefiles are a lot like Makefiles. The syntax is similar, and there many of the builtin
functions are similar. However, the two build systems are not the same. Some evil features (in the authors&#X2019;
opinions) have been dropped in OMake, and some new features have been added.</li><li class="li-itemize">OMake works the same way on all platforms, including Win32. The standard configuration does
the right thing, but if you care about porting your code to multiple platforms, and you use some
tricky features, you may need to condition parts of your build config on the <code>$(OSTYPE)</code>
variable.</li><li class="li-itemize">A minor issue is that OMake dependency analysis is based on MD5 file digests. That is,
dependencies are based on file <em>contents</em>, not file <em>modification times</em>. Say goodbye to
false rebuilds based on spurious timestamp changes and mismatches between local time and fileserver
time.
</li></ul>
<!--TOC section id="sec17" OMakeroot vs. OMakefile-->
<h2 class="section" id="sec17">3.1&#XA0;&#XA0;OMakeroot vs. OMakefile</h2><!--SEC END --><p>Before we begin with examples, let&#X2019;s ask the first question, &#X201C;What is the difference between the
project root OMakeroot and OMakefile?&#X201D; A short answer is, there is no difference, but you must
have an OMakeroot file (or Root.om file).</p><p>However, the normal style is that OMakeroot is boilerplate and is more-or-less the same for all
projects. The OMakefile is where you put all your project-specific stuff.</p><p>To get started, you don&#X2019;t have to do this yourself. In most cases you just perform the following
step in your project root directory.</p><ul class="itemize"><li class="li-itemize">
Run <code>omake --install</code> in your project root.
</li></ul><p>This will create the initial OMakeroot and OMakefile files that you can edit to get started.</p>
<!--TOC section id="sec18" An example C project-->
<h2 class="section" id="sec18">3.2&#XA0;&#XA0;An example C project</h2><!--SEC END --><p>To begin, let&#X2019;s start with a simple example. Let&#X2019;s say that we have a full directory tree,
containing the following files.</p><pre class="verbatim">    my_project/
    |--&gt; OMakeroot
    |--&gt; OMakefile
    `--&gt; src/
         |---&gt; OMakefile
         |---&gt; lib/
         |     |---&gt; OMakefile
         |     |---&gt; ouch.c
         |     |---&gt; ouch.h
         |     `---&gt; bandaid.c
         `---&gt; main/
               |---&gt; OMakefile
               |---&gt; horsefly.c
               |---&gt; horsefly.h
               `---&gt; main.c
</pre><p>Here is an example listing.</p><pre class="verbatim">my_project/OMakeroot:
    # Include the standard configuration for C applications
    open build/C
    
    # Process the command-line vars
    DefineCommandVars()
    
    # Include the OMakefile in this directory.
    .SUBDIRS: .

my_project/OMakefile:
    # Set up the standard configuration
    CFLAGS += -g

    # Include the src subdirectory
    .SUBDIRS: src

my_project/src/OMakefile:
    # Add any extra options you like
    CFLAGS += -O2

    # Include the subdirectories
    .SUBDIRS: lib main

my_project/src/lib/OMakefile:
    # Build the library as a static library.
    # This builds libbug.a on Unix/OSX, or libbug.lib on Win32.
    # Note that the source files are listed _without_ suffix.
    StaticCLibrary(libbug, ouch bandaid)

my_project/src/main/OMakefile:
    # Some files include the .h files in ../lib
    INCLUDES += ../lib

    # Indicate which libraries we want to link against.
    LIBS[] +=
        ../lib/libbug

    # Build the program.
    # Builds horsefly.exe on Win32, and horsefly on Unix.
    # The first argument is the name of the executable.
    # The second argument is an array of object files (without suffix)
    # that are part of the program.
    CProgram(horsefly, horsefly main)

    # Build the program by default (in case omake is called
    # without any arguments).  EXE is defined as .exe on Win32,
    # otherwise it is empty.
    .DEFAULT: horsefly$(EXE)
</pre><p>Most of the configuration here is defined in the file <code>build/C.om</code> (which is part of the OMake
distribution). This file takes care of a lot of work, including:
</p><ul class="itemize"><li class="li-itemize">
Defining the <code>StaticCLibrary</code> and <code>CProgram</code> functions, which describe the canonical
way to build C libraries and programs.
</li><li class="li-itemize">Defining a mechanism for <em>scanning</em> each of the source programs to discover dependencies.
That is, it defines .SCANNER rules for C source files.
</li></ul><p>Variables are inherited down the hierarchy, so for example, the value of CFLAGS in
src/main/OMakefile is &#X201C;<code>-g -O2</code>&#X201D;.</p>
<!--TOC section id="sec19" An example OCaml project-->
<h2 class="section" id="sec19">3.3&#XA0;&#XA0;An example OCaml project</h2><!--SEC END --><p>Let&#X2019;s repeat the example, assuming we are using OCaml instead of C.
This time, the directory tree looks like this.</p><pre class="verbatim">    my_project/
    |--&gt; OMakeroot
    |--&gt; OMakefile
    `--&gt; src/
         |---&gt; OMakefile
         |---&gt; lib/
         |     |---&gt; OMakefile
         |     |---&gt; ouch.ml
         |     |---&gt; ouch.mli
         |     `---&gt; bandaid.ml
         `---&gt; main/
               |---&gt; OMakefile
               |---&gt; horsefly.ml
               |---&gt; horsefly.mli
               `---&gt; main.ml
</pre><p>The listing is only a bit different.</p><pre class="verbatim">my_project/OMakeroot:
    # Include the standard configuration for OCaml applications
    open build/OCaml
    
    # Process the command-line vars
    DefineCommandVars()
    
    # Include the OMakefile in this directory.
    .SUBDIRS: .

my_project/OMakefile:
    # Set up the standard configuration
    OCAMLFLAGS += -Wa

    # Do we want to use the bytecode compiler,
    # or the native-code one?  Let's use both for
    # this example.
    NATIVE_ENABLED = true
    BYTE_ENABLED = true

    # Include the src subdirectory
    .SUBDIRS: src

my_project/src/OMakefile:
    # Include the subdirectories
    .SUBDIRS: lib main

my_project/src/lib/OMakefile:
    # Let's do aggressive inlining on native code
    OCAMLOPTFLAGS += -inline 10

    # Build the library as a static library.
    # This builds libbug.a on Unix/OSX, or libbug.lib on Win32.
    # Note that the source files are listed _without_ suffix.
    OCamlLibrary(libbug, ouch bandaid)

my_project/src/main/OMakefile:
    # These files depend on the interfaces in ../lib
    OCAMLINCLUDES += ../lib

    # Indicate which libraries we want to link against.
    OCAML_LIBS[] +=
        ../lib/libbug

    # Build the program.
    # Builds horsefly.exe on Win32, and horsefly on Unix.
    # The first argument is the name of the executable.
    # The second argument is an array of object files (without suffix)
    # that are part of the program.
    OCamlProgram(horsefly, horsefly main)

    # Build the program by default (in case omake is called
    # without any arguments).  EXE is defined as .exe on Win32,
    # otherwise it is empty.
    .DEFAULT: horsefly$(EXE)
</pre><p>In this case, most of the configuration here is defined in the file <code>build/OCaml.om</code>. In this
particular configuration, files in <code>my_project/src/lib</code> are compiled aggressively with the
option <code>-inline 10</code>, but files in <code>my_project/src/lib</code> are compiled normally.</p>
<!--TOC section id="sec20" Handling new languages-->
<h2 class="section" id="sec20">3.4&#XA0;&#XA0;Handling new languages</h2><!--SEC END --><p>
<a id="hevea_default7"></a></p><p>The previous two examples seem to be easy enough, but they rely on the OMake standard library (the
files <code>build/C</code> and <code>build/OCaml</code>) to do all the work. What happens if we want to write a
build configuration for a language that is not already supported in the OMake standard library?</p><p>For this example, let&#X2019;s suppose we are adopting a new language. The language uses the standard
compile/link model, but is not in the OMake standard library. Specifically, let&#X2019;s say we have the
following setup.</p><ul class="itemize"><li class="li-itemize">
Source files are defined in files with a <code>.cat</code> suffix (for Categorical Abstract Terminology).
</li><li class="li-itemize"><code>.cat</code> files are compiled with the <code>catc</code> compiler to produce <code>.woof</code> files
(Wicked Object-Oriented Format).
</li><li class="li-itemize"><code>.woof</code> files are linked by the <code>catc</code> compiler with the <code>-c</code> option to produce
a <code>.dog</code> executable (Digital Object Group). The <code>catc</code> also defines a <code>-a</code> option to
combine several <code>.woof</code> files into a library.
</li><li class="li-itemize">Each <code>.cat</code> can refer to other source files. If a source file <code>a.cat</code> contains a
line <code>open b</code>, then <code>a.cat</code> depends on the file <code>b.woof</code>, and <code>a.cat</code> must be
recompiled if <code>b.woof</code> changes. The <code>catc</code> function takes a <code>-I</code> option to define a
search path for dependencies.
</li></ul><p>To define a build configuration, we have to do three things.
</p><ol class="enumerate" type=1><li class="li-enumerate">
Define a <code>.SCANNER</code> rule for discovering dependency information for the source files.
</li><li class="li-enumerate">Define a generic rule for compiling a <code>.cat</code> file to a <code>.woof</code> file.
</li><li class="li-enumerate">Define a rule (as a function) for linking <code>.woof</code> files to produce a <code>.dog</code> executable.
</li></ol><p>Initially, these definitions will be placed in the project root <code>OMakefile</code>.</p>
<!--TOC subsection id="sec21" Defining a default compilation rule-->
<h3 class="subsection" id="sec21">3.4.1&#XA0;&#XA0;Defining a default compilation rule</h3><!--SEC END --><p>Let&#X2019;s start with part 2, defining a generic compilation rule. We&#X2019;ll define the build rule as an
<em>implicit</em> rule. To handle the include path, we&#X2019;ll define a variable <code>CAT_INCLUDES</code> that
specifies the include path. This will be an array of directories. To define the options, we&#X2019;ll use
a lazy variable (Section&#XA0;<a href="#section%3Alazy">7.5</a>). In case there
are any other standard flags, we&#X2019;ll define a <code>CAT_FLAGS</code> variable.</p><pre class="verbatim">   # Define the catc command, in case we ever want to override it
   CATC = catc

   # The default flags are empty
   CAT_FLAGS =
   
   # The directories in the include path (empty by default)
   INCLUDES[] =

   # Compute the include options from the include path
   PREFIXED_INCLUDES[] = $`(mapprefix -I, $(INCLUDES))

   # The default way to build a .woof file
   %.woof: %.cat
       $(CATC) $(PREFIXED_INCLUDES) $(CAT_FLAGS) -c $&lt;
</pre><p>The final part is the build rule itself, where we call the <code>catc</code> compiler with the include
path, and the <code>CAT_FLAGS</code> that have been defined. The <code>$&lt;</code> variable represents the source
file.</p>
<!--TOC subsection id="sec22" Defining a rule for linking-->
<h3 class="subsection" id="sec22">3.4.2&#XA0;&#XA0;Defining a rule for linking</h3><!--SEC END --><p>For linking, we&#X2019;ll define another rule describing how to perform linking. Instead of defining an
implicit rule, we&#X2019;ll define a function that describes the linking step. The function will take two
arguments; the first is the name of the executable (without suffix), and the second is the files to
link (also without suffixes). Here is the code fragment.</p><pre class="verbatim">    # Optional link options
    CAT_LINK_FLAGS =

    # The function that defines how to build a .dog program
    CatProgram(program, files) =
        # Add the suffixes
        file_names = $(addsuffix .woof, $(files))
        prog_name = $(addsuffix .dog, $(program))

        # The build rule
        $(prog_name): $(file_names)
            $(CATC) $(PREFIXED_INCLUDES) $(CAT_FLAGS) $(CAT_LINK_FLAGS) -o $@ $+

        # Return the program name
        value $(prog_name)
</pre><p>The <code>CAT_LINK_FLAGS</code> variable is defined just in case we want to pass additional flags specific
to the link step. Now that this function is defined, whenever we want to define a rule for building
a program, we simply call the rule. The previous implicit rule specifies how to compile each source file,
and the <code>CatProgram</code> function specifies how to build the executable.</p><pre class="verbatim">    # Build a rover.dog program from the source
    # files neko.cat and chat.cat.
    # Compile it by default.
    .DEFAULT: $(CatProgram rover, neko chat)
</pre>
<!--TOC subsection id="sec23" Dependency scanning-->
<h3 class="subsection" id="sec23">3.4.3&#XA0;&#XA0;Dependency scanning</h3><!--SEC END --><p>
<a id="section:scanner-exm"></a><a id="hevea_default8"></a></p><p>That&#X2019;s it, almost. The part we left out was automated dependency scanning. This is one of the
nicer features of OMake, and one that makes build specifications easier to write and more robust.
Strictly speaking, it isn&#X2019;t required, but you definitely want to do it.</p><p>The mechanism is to define a <code>.SCANNER</code> rule, which is like a normal rule, but it specifies how
to compute dependencies, not the target itself. In this case, we want to define a <code>.SCANNER</code>
rule of the following form.</p><pre class="verbatim">    .SCANNER: %.woof: %.cat
        &lt;commands&gt;
</pre><p>This rule specifies that a <code>.woof</code> file may have additional dependencies that can be extracted
from the corresponding <code>.cat</code> file by executing the <code>&lt;commands&gt;</code>. The <em>result</em> of
executing the <code>&lt;commands&gt;</code> should be a sequence of dependencies in OMake format, printed to the
standard output.</p><p>As we mentioned, each <code>.cat</code> file specifies dependencies on <code>.woof</code> files with an
<code>open</code> directive. For example, if the <code>neko.cat</code> file contains a line <code>open chat</code>,
then <code>neko.woof</code> depends on <code>chat.woof</code>. In this case, the <code>&lt;commands&gt;</code> should print
the following line.</p><pre class="verbatim">    neko.woof: chat.woof
</pre><p>For an analogy that might make this clearer, consider the C programming language, where a <code>.o</code>
file is produced by compiling a <code>.c</code> file. If a file <code>foo.c</code> contains a line like
<code>#include "fum.h"</code>, then <code>foo.c</code> should be recompiled whenever <code>fum.h</code> changes. That
is, the file <code>foo.o</code> <em>depends</em> on the file <code>fum.h</code>. In the OMake parlance, this is
called an <em>implicit</em> dependency, and the <code>.SCANNER</code> <code>&lt;commands&gt;</code> would print a line
like the following.</p><pre class="verbatim">    foo.o: fum.h
</pre><p><a id="hevea_default9"></a> Now, returning to the animal world, to compute the dependencies of <code>neko.woof</code>, we
should scan <code>neko.cat</code>, line-by-line, looking for lines of the form <code>open &lt;name&gt;</code>. We
could do this by writing a program, but it is easy enough to do it in <code>omake</code> itself. We can
use the builtin <a href="#fun%3Aawk"><CODE>awk</CODE> function</a> to scan the source file. One slight complication
is that the dependencies depend on the <code>INCLUDE</code> path. We&#X2019;ll use the
<a href="#fun%3Afind-in-path"><CODE>find-in-path</CODE> function</a> to find them. Here we go.</p><pre class="verbatim">    .SCANNER: %.woof: %.cat
        section
            # Scan the file
            deps[] =
            awk($&lt;)
            case $'^open'
                deps[] += $2
                export

            # Remove duplicates, and find the files in the include path
            deps = $(find-in-path $(INCLUDES), $(set $(deps)))

            # Print the dependencies
            println($"$@: $(deps)")
</pre><p>Let&#X2019;s look at the parts. First, the entire body is defined in a <code>section</code> because we are
computing it internally, not as a sequence of shell commands.</p><p>We use the <code>deps</code> variable to collect all the dependencies. The <code>awk</code> function scans the
source file (<code>$&lt;</code>) line-by-line. For lines that match the regular expression <code>^open</code>
(meaning that the line begins with the word <code>open</code>), we add the second word on the line to the
<code>deps</code> variable. For example, if the input line is <code>open chat</code>, then we would add the
<code>chat</code> string to the <code>deps</code> array. All other lines in the source file are ignored.</p><p>Next, the <code>$(set $(deps))</code> expression removes any duplicate values in the <code>deps</code> array
(sorting the array alphabetically in the process). The <code>find-in-path</code> function then finds the
actual location of each file in the include path.</p><p>The final step is print the result as the string <code>$"$@: $(deps)"</code> The quotations are added to
flatten the <code>deps</code> array to a simple string.</p>
<!--TOC subsection id="sec24" Pulling it all together-->
<h3 class="subsection" id="sec24">3.4.4&#XA0;&#XA0;Pulling it all together</h3><!--SEC END --><p>To complete the example, let&#X2019;s pull it all together into a single project, much like our previous
example.</p><pre class="verbatim">    my_project/
    |--&gt; OMakeroot
    |--&gt; OMakefile
    `--&gt; src/
         |---&gt; OMakefile
         |---&gt; lib/
         |     |---&gt; OMakefile
         |     |---&gt; neko.cat
         |     `---&gt; chat.cat
         `---&gt; main/
               |---&gt; OMakefile
               `---&gt; main.cat
</pre><p>The listing for the entire project is as follows. Here, we also include a function
<code>CatLibrary</code> to link several <code>.woof</code> files into a library.</p><pre class="verbatim">my_project/OMakeroot:
    # Process the command-line vars
    DefineCommandVars()
    
    # Include the OMakefile in this directory.
    .SUBDIRS: .

my_project/OMakefile:
   ########################################################################
   # Standard config for compiling .cat files
   #

   # Define the catc command, in case we ever want to override it
   CATC = catc

   # The default flags are empty
   CAT_FLAGS =
   
   # The directories in the include path (empty by default)
   INCLUDES[] =

   # Compute the include options from the include path
   PREFIXED_INCLUDES[] = $`(mapprefix -I, $(INCLUDES))

   # Dependency scanner for .cat files
   .SCANNER: %.woof: %.cat
        section
            # Scan the file
            deps[] =
            awk($&lt;)
            case $'^open'
                deps[] += $2
                export

            # Remove duplicates, and find the files in the include path
            deps = $(find-in-path $(INCLUDES), $(set $(deps)))

            # Print the dependencies
            println($"$@: $(deps)")

   # The default way to compile a .cat file
   %.woof: %.cat
       $(CATC) $(PREFIXED_INCLUDES) $(CAT_FLAGS) -c $&lt;

   # Optional link options
   CAT_LINK_FLAGS =

   # Build a library for several .woof files
   CatLibrary(lib, files) =
       # Add the suffixes
       file_names = $(addsuffix .woof, $(files))
       lib_name = $(addsuffix .woof, $(lib))

       # The build rule
       $(lib_name): $(file_names)
           $(CATC) $(PREFIXED_INCLUDES) $(CAT_FLAGS) $(CAT_LINK_FLAGS) -a $@ $+

       # Return the program name
       value $(lib_name)

   # The function that defines how to build a .dog program
   CatProgram(program, files) =
       # Add the suffixes
       file_names = $(addsuffix .woof, $(files))
       prog_name = $(addsuffix .dog, $(program))

       # The build rule
       $(prog_name): $(file_names)
           $(CATC) $(PREFIXED_INCLUDES) $(CAT_FLAGS) $(CAT_LINK_FLAGS) -o $@ $+

       # Return the program name
       value $(prog_name)

   ########################################################################
   # Now the program proper
   #

   # Include the src subdirectory
   .SUBDIRS: src

my_project/src/OMakefile:
   .SUBDIRS: lib main

my_project/src/lib/OMakefile:
   CatLibrary(cats, neko chat)

my_project/src/main/OMakefile:
   # Allow includes from the ../lib directory
   INCLUDES[] += ../lib

   # Build the program
   .DEFAULT: $(CatProgram main, main ../cats)
</pre><p>Some notes. The configuration in the project <code>OMakeroot</code> defines the standard configuration, including
the dependency scanner, the default rule for compiling source files, and functions for building
libraries and programs.</p><p>These rules and functions are inherited by subdirectories, so the <code>.SCANNER</code> and build rules
are used automatically in each subdirectory, so you don&#X2019;t need to repeat them.</p>
<!--TOC subsection id="sec25" Finishing up-->
<h3 class="subsection" id="sec25">3.4.5&#XA0;&#XA0;Finishing up</h3><!--SEC END --><p>At this point we are done, but there are a few things we can consider.</p><p>First, the rules for building cat programs is defined in the project <code>OMakefile</code>. If you had
another cat project somewhere, you would need to copy the <code>OMakeroot</code> (and modify it as
needed). Instead of that, you should consider moving the configuration to a shared library
directory, in a file like <code>Cat.om</code>. That way, instead of copying the code, you could include
the shared copy with an OMake command <code>open Cat</code>. The share directory should be added to your
<code>OMAKEPATH</code> environment variable to ensure that <code>omake</code> knows how to find it.</p><p>Better yet, if you are happy with your work, consider submitting it as a standard configuration (by
sending a request to <code>omake@metaprl.org</code>) so that others can make use of it too.</p>
<!--TOC section id="sec26" Collapsing the hierarchy, .SUBDIRS bodies-->
<h2 class="section" id="sec26">3.5&#XA0;&#XA0;Collapsing the hierarchy, .SUBDIRS bodies</h2><!--SEC END --><p>
<a id="hevea_default10"></a></p><p>Some projects have many subdirectories that all have the same configuration. For instance, suppose
you have a project with many subdirectories, each containing a set of images that are to be composed
into a web page. Apart from the specific images, the configuration of each file is the same.</p><p>To make this more concrete, suppose the project has four subdirectories <code>page1</code>, <code>page2</code>,
<code>page3</code>, and <code>page4</code>. Each contains two files <code>image1.jpg</code> and <code>image2.jpg</code>
that are part of a web page generated by a program <code>genhtml</code>.</p><p>Instead of of defining a <code>OMakefile</code> in each directory, we can define it as a body to the
<code>.SUBDIRS</code> command.</p><pre class="verbatim">    .SUBDIRS: page1 page2 page3 page4
        index.html: image1.jpg image2jpg
            genhtml $+ &gt; $@
</pre><p>The body of the <code>.SUBDIRS</code> is interpreted exactly as if it were the <code>OMakefile</code>, and it
can contain any of the normal statements. The body is evaluated <em>in the subdirectory</em> for each
of the subdirectories. We can see this if we add a statement that prints the current directory
(<code>$(CWD)</code>).</p><pre class="verbatim">    .SUBDIRS: page1 page2 page3 page4
        println($(absname $(CWD)))
        index.html: image1.jpg image2jpg
            genhtml $+ &gt; $@
  # prints
    /home/jyh/.../page1
    /home/jyh/.../page2
    /home/jyh/.../page3
    /home/jyh/.../page4
</pre>
<!--TOC subsection id="sec27" Using glob patterns-->
<h3 class="subsection" id="sec27">3.5.1&#XA0;&#XA0;Using glob patterns</h3><!--SEC END --><p>Of course, this specification is quite rigid. In practice, it is likely that each subdirectory will
have a different set of images, and all should be included in the web page. One of the easier
solutions is to use one of the directory-listing functions, like
<a href="#fun%3Aglob"><CODE>glob</CODE></a> or <a href="#fun%3Als"><CODE>ls</CODE></a>.
The <code>glob</code> function takes a shell pattern, and returns an array of
file with matching filenames in the current directory.</p><pre class="verbatim">    .SUBDIRS: page1 page2 page3 page4
        IMAGES = $(glob *.jpg)
        index.html: $(IMAGES)
            genhtml $+ &gt; $@
</pre>
<!--TOC subsection id="sec28" Simplified sub-configurations-->
<h3 class="subsection" id="sec28">3.5.2&#XA0;&#XA0;Simplified sub-configurations</h3><!--SEC END --><p>Another option is to add a configuration file in each of the subdirectories that defines
directory-specific information. For this example, we might define a file <code>BuildInfo.om</code> in
each of the subdirectories that defines a list of images in that directory. The <code>.SUBDIRS</code>
line is similar, but we include the BuildInfo file.</p><pre class="verbatim">    .SUBDIRS: page1 page2 page3 page4
        include BuildInfo   # Defines the IMAGES variable

        index.html: $(IMAGES)
            genhtml $+ &gt; $@
</pre><p>Where we might have the following configurations.</p><pre class="verbatim">   page1/BuildInfo.om:
       IMAGES[] = image.jpg
   page2/BuildInfo.om:
       IMAGES[] = ../common/header.jpg winlogo.jpg
   page3/BuildInfo.om:
       IMAGES[] = ../common/header.jpg unixlogo.jpg daemon.jpg
   page4/BuildInfo.om:
       IMAGES[] = fee.jpg fi.jpg foo.jpg fum.jpg
</pre>
<!--TOC subsection id="sec29" Computing the subdirectory list-->
<h3 class="subsection" id="sec29">3.5.3&#XA0;&#XA0;Computing the subdirectory list</h3><!--SEC END --><p>The other hardcoded specification is the list of subdirectories <code>page1</code>, ..., <code>page4</code>.
Rather than editing the project <code>OMakefile</code> each time a directory is added, we could compute it
(again with <code>glob</code>).</p><pre class="verbatim">    .SUBDIRS: $(glob page*)
        index.html: $(glob *.jpg)
            genhtml $+ &gt; $@
</pre><p>Alternately, the directory structure may be hierarchical. Instead of using <code>glob</code>, we could
use the <code>subdirs</code> function, returns each of the directories in a hierarchy. For example, this
is the result of evaluating the <code>subdirs</code> function in the omake project root. The <code>P</code>
option, passed as the first argument, specifies that the listing is &#X201C;proper,&#X201D; it should not
include the <code>omake</code> directory itself.</p><pre class="verbatim">    osh&gt; subdirs(P, .)
    - : &lt;array
            /home/jyh/.../omake/mk : Dir
            /home/jyh/.../omake/RPM : Dir
            ...
            /home/jyh/.../omake/osx_resources : Dir&gt;
</pre><p>Using <code>subdirs</code>, our example is now as follows.</p><pre class="verbatim">    .SUBDIRS: $(subdirs P, .)
        index.html: $(glob *.jpg)
            genhtml $+ &gt; $@
</pre><p>In this case, <em>every</em> subdirectory will be included in the project.</p><p>If we are using the <code>BuildInfo.om</code> option. Instead of including every subdirectory, we could
include only those that contain a <code>BuildInfo.om</code> file. For this purpose, we can use the
<code>find</code> function, which traverses the directory hierarchy looking for files that match a test
expression. In our case, we want to search for files with the name <code>BuildInfo.om</code>.
Here is an example call.</p><pre class="verbatim">    osh&gt; FILES = $(find . -name BuildInfo.om)
    - : &lt;array
            /home/jyh/.../omake/doc/html/BuildInfo.om : File
            /home/jyh/.../omake/src/BuildInfo.om : File
            /home/jyh/.../omake/tests/simple/BuildInfo.om : File&gt;
    osh&gt; DIRS = $(dirof $(FILES))
    - : &lt;array
            /home/jyh/.../omake/doc/html : Dir
            /home/jyh/.../omake/src : Dir
            /home/jyh/.../omake/tests/simple : Dir&gt;
</pre><p>In this example, there are three <code>BuildInfo.om</code> files, in the <code>doc/html</code>, <code>src</code>, and
<code>tests/simple</code> directories. The <code>dirof</code> function returns the directories for each of the
files.</p><p>Returning to our original example, we modify it as follows.</p><pre class="verbatim">    .SUBDIRS: $(dirof $(find . -name BuildInfo.om))
        include BuildInfo   # Defines the IMAGES variable

        index.html: $(IMAGES)
            genhtml $+ &gt; $@
</pre>
<!--TOC subsection id="sec30" Temporary directories-->
<h3 class="subsection" id="sec30">3.5.4&#XA0;&#XA0;Temporary directories</h3><!--SEC END --><p>Sometimes, your project may include temporary directories&#X2013;directories where you place intermediate
results. these directories are deleted whenever the project is cleanup up. This means, in
particular, that you can&#X2019;t place an <code>OMakefile</code> in a temporary directory, because it will be
removed when the directory is removed.</p><p>Instead, if you need to define a configuration for any of these directories, you will need to define
it using a <code>.SUBDIRS</code> body.</p><pre class="verbatim">    section
        CREATE_SUBDIRS = true

        .SUBDIRS: tmp
            # Compute an MD5 digest
            %.digest: %.comments
               echo $(digest $&lt;) &gt; $@

            # Extract comments from the source files
            %.comments: ../src/%.src
               grep '^#' $&lt; &gt; $@

            .DEFAULT: foo.digest

    .PHONY: clean

    clean:
        rm -rf tmp        
</pre><p>In this example, we define the <code>CREATE_SUBDIRS</code> variable as true, so that the <code>tmp</code>
directory will be created if it does not exist. The <code>.SUBDIRS</code> body in this example is a bit
contrived, but it illustrates the kind of specification you might expect. The <code>clean</code>
phony-target indicates that the <code>tmp</code> directory should be removed when the project is cleaned
up.</p>
<!--TOC chapter id="sec31" OMake concepts and syntax-->
<h1 class="chapter" id="sec31">Chapter&#XA0;4&#XA0;&#XA0;OMake concepts and syntax</h1><!--SEC END --><p>
<a id="chapter:language"></a>
</p><!--NAME omake-language.html-->
<p>Projects are specified to <span class="c001">omake</span> with <span class="c001">OMakefile</span>s. The <span class="c001">OMakefile</span> has a format
similar to a <span class="c001">Makefile</span>. An <span class="c001">OMakefile</span> has three main kinds of syntactic objects:
variable definitions, function definitions, and rule definitions.</p>
<!--TOC section id="sec32" Variables-->
<h2 class="section" id="sec32">4.1&#XA0;&#XA0;Variables</h2><!--SEC END --><p>
<a id="section:variables"></a></p><p>Variables are defined with the following syntax. The name is any sequence of alphanumeric
characters, underscore <code>_</code>, and hyphen <code>-</code>.</p><pre class="verbatim">   &lt;name&gt; = &lt;value&gt;
</pre><p>Values are defined as a sequence of literal characters and variable expansions. A variable
expansion has the form <code>$(&lt;name&gt;)</code>, which represents the value of the <code>&lt;name&gt;</code>
variable in the current environment. Some examples are shown below.</p><pre class="verbatim">   CC = gcc
   CFLAGS = -Wall -g
   COMMAND = $(CC) $(CFLAGS) -O2
</pre><p>In this example, the value of the <code>COMMAND</code> variable is the string <code>gcc -Wall -g -O2</code>.</p><p>Unlike <span class="c001">make</span>(1), variable expansion is <em>eager</em> and <em>pure</em> (see also the section
on Scoping). That is, variable values are expanded immediately and new variable definitions do not
affect old ones. For example, suppose we extend the previous example with following variable
definitions.</p><pre class="verbatim">   X = $(COMMAND)
   COMMAND = $(COMMAND) -O3
   Y = $(COMMAND)
</pre><p>In this example, the value of the <code>X</code> variable is the string <code>gcc -Wall -g -O2</code> as
before, and the value of the <code>Y</code> variable is <code>gcc -Wall -g -O2 -O3</code>.</p>
<!--TOC section id="sec33" Adding to a variable definition-->
<h2 class="section" id="sec33">4.2&#XA0;&#XA0;Adding to a variable definition</h2><!--SEC END --><p>Variables definitions may also use the += operator, which adds the new text to an existing
definition. The following two definitions are equivalent.</p><pre class="verbatim">   # Add options to the CFLAGS variable
   CFLAGS = $(CFLAGS) -Wall -g

   # The following definition is equivalent
   CFLAGS += -Wall -g
</pre>
<!--TOC section id="sec34" Arrays-->
<h2 class="section" id="sec34">4.3&#XA0;&#XA0;Arrays</h2><!--SEC END --><p>
<a id="hevea_default11"></a></p><p>Arrays can be defined by appending the <code>[]</code> sequence to the variable name and defining initial
values for the elements as separate lines. Whitespace on each line is
taken literally. The following code sequence prints <code>c d e</code>.</p><pre class="verbatim">    X[] =
        a b
        c d e
        f

    println($(nth 1, $(X)))
</pre>
<!--TOC section id="sec35" Special characters and quoting-->
<h2 class="section" id="sec35">4.4&#XA0;&#XA0;Special characters and quoting</h2><!--SEC END --><p>
<a id="hevea_default12"></a></p><p>The following characters are special to <span class="c001">omake</span>: <code>$():,=#\</code>. To treat
any of these characters as normal text, they should be escaped with the backslash
character <code>\</code>.</p><pre class="verbatim">    DOLLAR = \$
</pre><p>Newlines may also be escaped with a backslash to concatenate several lines.</p><pre class="verbatim">    FILES = a.c\
            b.c\
            c.c
</pre><p>Note that the backslash is <em>not</em> an escape for any other character, so the following
works as expected (that is, it preserves the backslashes in the string).</p><pre class="verbatim">    DOSTARGET = C:\WINDOWS\control.ini
</pre><p>An alternative mechanism for quoting special text is the use <code>$"..."</code> escapes. The number of
double-quotations is arbitrary. The outermost quotations are not included in the text.</p><pre class="verbatim">    A = $""String containing "quoted text" ""
    B = $"""Multi-line
        text.
        The # character is not special"""
</pre>
<!--TOC section id="sec36" Function definitions-->
<h2 class="section" id="sec36">4.5&#XA0;&#XA0;Function definitions</h2><!--SEC END --><p>
<a id="section:functions"></a>
<a id="hevea_default13"></a></p><p>Functions are defined using the following syntax.</p><pre class="verbatim">   &lt;name&gt;(&lt;params&gt;) =
      &lt;indented-body&gt;
</pre><p>The parameters are a comma-separated list of identifiers, and the body must be placed on a separate
set of lines that are indented from the function definition itself. For example, the following text
defines a function that concatenates its arguments, separating them with a colon.</p><pre class="verbatim">    ColonFun(a, b) =
        return($(a):$(b))
</pre><p><a id="hevea_default14"></a>The <code>return</code> expression can be used to return a value from the function. A <code>return</code>
statement is not required; if it is omitted, the returned value is the value of the last expression
in the body to be evaluated. NOTE: as of version <code>0.9.6</code>, <code>return</code> is a control
operation, causing the function to immediately return. In the following example, when the argument
<code>a</code> is true, the function <code>f</code> immediately returns the value 1 without evaluating the print
statement.</p><pre class="verbatim">    f(a) =
       if $(a)
          return 1
       println(The argument is false)
       return 0
</pre><p><a id="hevea_default15"></a>In many cases, you may wish to return a value from a section or code block without returning from
the function. In this case, you would use the <code>value</code> operator. In fact, the <code>value</code>
operator is not limited to functions, it can be used any place where a value is required. In the
following definition, the variable <code>X</code> is defined as 1 or 2, depending on the value of <span class="c003">a</span>,
then result is printed, and returned from the function.</p><pre class="verbatim">    f_value(a) =
       X =
          if $(a)
             value 1
          else
             value 2
       println(The value of X is $(X))
       value $(X)
</pre><p>Functions are called using the GNU-make syntax, <code>$(&lt;name&gt; &lt;args))</code>,
where <code>&lt;args&gt;</code> is a comma-separated list of values. For example,
in the following program, the variable <code>X</code> contains the
value <code>foo:bar</code>.</p><pre class="verbatim">   X = $(ColonFun foo, bar)
</pre><p>If the value of a function is not needed, the function may also be called
using standard function call notation. For example, the following program
prints the string &#X201C;She says: Hello world&#X201D;.</p><pre class="verbatim">    Printer(name) =
        println($(name) says: Hello world)

    Printer(She)
</pre>
<!--TOC subsection id="sec37" Keyword arguments-->
<h3 class="subsection" id="sec37">4.5.1&#XA0;&#XA0;Keyword arguments</h3><!--SEC END --><p>
<a id="section:keyword-arguments"></a>
<a id="hevea_default16"></a></p><p><span class="c003">This feature was introduced in version 0.9.8.6.</span></p><p>Functions can also have keyword parameters and arguments. The syntax of a keyword
parameter/argument is <code>[~|?]&lt;id&gt; [= &lt;expression&gt;]</code>, where the keyword name <code>&lt;id&gt;</code>
is preceeded by the character <code>~</code> (for required arguments), or <code>?</code> (for optional
arguments). If a default value <code>= &lt;expression&gt;</code> is provided, the argument is
always optional.</p><p>Keyword arguments and normal anonymous arguments are completely separate. Also, it is an error to
pass a keyword argument to a function that does not define it as a keyword parameter.</p><pre class="verbatim">    osh&gt;f(x, ?y = 1, z) =
           add($(mul $x, 100), $(mul $y, 10), $z)
    - : &lt;fun 0&gt;
    osh&gt;f(1, ~y = 2, 3)
    - : 123 : Int
    osh&gt;f(1, 3, ~y = 2)
    - : 123 : Int
    osh&gt;f(1, 3)
    - : 113 : Int
    osh&gt;f(1, 2, 3)
    *** omake error:
       File -: line 11, characters 0-10
       arity mismatch: expected 2 args, got 3
    osh&gt;f(~z = 7)
    *** omake error:
       File -: line 12, characters 0-8
       no such keyword: z
</pre><p>An optional keyword argument defaults to the empty value.</p><pre class="verbatim">    osh&gt; g(?x) =
             println($"&gt;&gt;&gt;$x&lt;&lt;&lt;")
    - : &lt;fun 0&gt;
    osh&gt; g()
    &gt;&gt;&gt;&lt;&lt;&lt;
    osh&gt; g(~x = xxx)
    &gt;&gt;&gt;xxx&lt;&lt;&lt;
</pre><p>It is an error to omit a required keyword argument.</p><pre class="verbatim">    osh&gt; h(~x, ~y) =
             println(x = $x; y = $y)
    - : &lt;fun 0&gt;
    osh&gt; h(~y = 2, ~x = 1)
    x = 1; y = 2
    osh&gt; h(~y = 2)
    *** omake error:
       File -: line 11, characters 0-9
       keyword argument is required: x
</pre>
<!--TOC section id="sec38" Curried functions-->
<h2 class="section" id="sec38">4.6&#XA0;&#XA0;Curried functions</h2><!--SEC END --><p><span class="c003">This feature was introduced in version 0.9.8.6.</span></p><p>Functions that are marked with the classifier <code>curry</code> can be called with &#X201C;too many&#X201D; arguments.
It is expected that a curried function returns a function that consumes the remaining arguments.
All arguments must be specified.</p><pre class="verbatim">    osh&gt;curry.f(x, y) =
            println($"Got two arguments: x = $x, y = $y")
            g(z) =
               add($x, $y, $z)
    osh&gt; f(1, 2, 3)
    Got two arguments: x = 1, y = 2
    - : 6 : Int
    osh&gt; f(1, 2)
    Got two arguments: x = 1, y = 2
    *** omake error:
       File -: line 62, characters 0-7
       arity mismatch: expected 1 args, got 0
</pre><p>The function <code>apply</code> can be used to compute partial applications, whether or not the function
is labeled as a curried function.</p><pre class="verbatim">    osh&gt; f1(a, ~b = 2, ~c = 3, d) =
            println($"a = $a, b = $b, c = $c, d = $d")
    - : &lt;fun 0&gt;
    osh&gt; f2 = $(apply $(f1), ~c = 13, 11)
    - : &lt;curry 0&gt;
    osh&gt; f2(14, ~b = 12)
    a = 11, b = 12, c = 13, d = 14
    osh&gt; f2(24)
    a = 11, b = 2, c = 13, d = 24
</pre>
<!--TOC section id="sec39" Comments-->
<h2 class="section" id="sec39">4.7&#XA0;&#XA0;Comments</h2><!--SEC END --><p>Comments begin with the <code>#</code> character and continue to the end of the line.</p>
<!--TOC section id="sec40" File inclusion-->
<h2 class="section" id="sec40">4.8&#XA0;&#XA0;File inclusion</h2><!--SEC END --><p>
<a id="section:include"></a>
<a id="hevea_default17"></a><a id="hevea_fun0"></a><a id="hevea_default18"></a></p><p>Files may be included with the <code>include</code> or <code>open</code> form. The included file must use
the same syntax as an <span class="c001">OMakefile</span>.</p><pre class="verbatim">    include $(Config_file)
</pre><p>The <code>open</code> operation is similar to an <code>include</code>, but the file is included at most once.
</p><pre class="verbatim">    open Config

    # Repeated opens are ignored, so this
    # line has no effect.
    open Config
</pre><p>If the file specified is not an absolute filenmame, both <code>include</code> and
<code>open</code> operations search for the file based on the
<a href="#var%3AOMAKEPATH"><CODE>OMAKEPATH</CODE> variable</a>. In case of the <code>open</code> directive, the search is
performed at <em>parse</em> time, and the argument to <code>open</code> may not
contain any expressions.</p>
<!--TOC section id="sec41" Scoping, sections-->
<h2 class="section" id="sec41">4.9&#XA0;&#XA0;Scoping, sections</h2><!--SEC END --><p>
<a id="section:section"></a>
<a id="hevea_default19"></a></p><p>Scopes in <span class="c001">omake</span> are defined by indentation level. When indentation is
increased, such as in the body of a function, a new scope is introduced.</p><p>The <code>section</code> form can also be used to define a new scope. For example, the following code
prints the line <code>X = 2</code>, followed by the line <code>X = 1</code>.</p><pre class="verbatim">    X = 1
    section
        X = 2
        println(X = $(X))

    println(X = $(X))
</pre><p>This result may seem surprising&#X2013;the variable definition within the
<code>section</code> is not visible outside the scope of the <code>section</code>.</p><p>The <code>export</code> form, which will be described in detail in
Section&#XA0;<a href="#section%3Aexport">6.3</a>, can be used to circumvent this restriction by
exporting variable values from an inner scope.
For example, if we modify the previous example
by adding an <code>export</code> expression, the new value for the <code>X</code>
variable is retained, and the code prints the line <code>X = 2</code> twice.</p><pre class="verbatim">    X = 1
    section
        X = 2
        println(X = $(X))
        export

    println(X = $(X))
</pre><p>There are also cases where separate scoping is quite important. For example,
each <span class="c001">OMakefile</span> is evaluated in its own scope. Since each part of a project
may have its own configuration, it is important that variable definitions in one
<span class="c001">OMakefile</span> do not affect the definitions in another.</p><p>To give another example, in some cases it is convenient to specify a
separate set of variables for different build targets. A frequent
idiom in this case is to use the <code>section</code> command to define a
separate scope.</p><pre class="verbatim">   section
      CFLAGS += -g
      %.c: %.y
          $(YACC) $&lt;
      .SUBDIRS: foo

   .SUBDIRS: bar baz
</pre><p>In this example, the <code>-g</code> option is added to the <code>CFLAGS</code>
variable by the <code>foo</code> subdirectory, but not by the <code>bar</code> and
<code>baz</code> directories. The implicit rules are scoped as well and in this
example, the newly added yacc rule will be inherited by the <code>foo</code>
subdirectory, but not by the <code>bar</code> and <code>baz</code> ones; furthermore
this implicit rule will not be in scope in the current directory.</p>
<!--TOC section id="sec42" Conditionals-->
<h2 class="section" id="sec42">4.10&#XA0;&#XA0;Conditionals</h2><!--SEC END --><p>
<a id="section:conditionals"></a>
<a id="hevea_default20"></a>
<a id="hevea_default21"></a></p><p>Top level conditionals have the following form.</p><pre class="verbatim">    if &lt;test&gt;
       &lt;true-clause&gt;
    elseif &lt;test2&gt;
       &lt;elseif-clause&gt;
    else
       &lt;else-clause&gt;
</pre><p>The <code>&lt;test&gt;</code> expression is evaluated, and if it evaluates to a <em>true</em> value (see
Section&#XA0;<a href="#section%3Alogic">9.2</a> for more information on logical values, and Boolean functions), the code
for the <code>&lt;true-clause&gt;</code> is evaluated; otherwise the remaining clauses are evaluated. There may
be multiple <code>elseif</code> clauses; both the <code>elseif</code> and <code>else</code> clauses are optional.
Note that the clauses are indented, so they introduce new scopes.</p><p>When viewed as a predicate, a value corresponds to the Boolean <em>false</em>, if its string
representation is the empty string, or one of the strings <code>false</code>, <code>no</code>, <code>nil</code>,
<code>undefined</code>, or <code>0</code>. All other values are <em>true</em>.</p><p>The following example illustrates a typical use of a conditional. The
<code>OSTYPE</code> variable is the current machine architecture.</p><pre class="verbatim">    # Common suffixes for files
    if $(equal $(OSTYPE), Win32)
       EXT_LIB = .lib
       EXT_OBJ = .obj
       EXT_ASM = .asm
       EXE = .exe
       export
    elseif $(mem $(OSTYPE), Unix Cygwin)
       EXT_LIB = .a
       EXT_OBJ = .o
       EXT_ASM = .s
       EXE =
       export
    else
       # Abort on other architectures
       eprintln(OS type $(OSTYPE) is not recognized)
       exit(1)
</pre>
<!--TOC section id="sec43" Matching-->
<h2 class="section" id="sec43">4.11&#XA0;&#XA0;Matching</h2><!--SEC END --><p>
<a id="section:match"></a>
<a id="hevea_default22"></a><a id="hevea_fun1"></a>
<a id="hevea_default23"></a><a id="hevea_fun2"></a></p><p>Pattern matching is performed with the <code>switch</code> and <code>match</code> forms.</p><pre class="verbatim">    switch &lt;string&gt;
    case &lt;pattern1&gt;
        &lt;clause1&gt;
    case &lt;pattern2&gt;
        &lt;clause2&gt;
    ...
    default
       &lt;default-clause&gt;
</pre><p>The number of cases is arbitrary.
The <code>default</code> clause is optional; however, if it is used it should
be the last clause in the pattern match.</p><p>For <code>switch</code>, the string is compared with the patterns literally.</p><pre class="verbatim">    switch $(HOST)
    case mymachine
        println(Building on mymachine)
    default
        println(Building on some other machine)
</pre><p>Patterns need not be constant strings. The following function tests
for a literal match against <code>pattern1</code>, and a match against
<code>pattern2</code> with <code>##</code> delimiters.</p><pre class="verbatim">   Switch2(s, pattern1, pattern2) =
      switch $(s)
      case $(pattern1)
          println(Pattern1)
      case $"##$(pattern2)##"
          println(Pattern2)
      default
          println(Neither pattern matched)
</pre><p>For <code>match</code> the patterns are <span class="c001">egrep</span>(1)-style regular expressions.
The numeric variables <code>$1, $2, ...</code> can be used to retrieve values
that are matched by <code>\(...\)</code> expressions.</p><pre class="verbatim">    match $(NODENAME)@$(SYSNAME)@$(RELEASE)
    case $"mymachine.*@\(.*\)@\(.*\)"
        println(Compiling on mymachine; sysname $1 and release $2 are ignored)

    case $".*@Linux@.*2\.4\.\(.*\)"
        println(Compiling on a Linux 2.4 system; subrelease is $1)

    default
        eprintln(Machine configuration not implemented)
        exit(1)
</pre>
<!--TOC section id="sec44" Objects-->
<h2 class="section" id="sec44">4.12&#XA0;&#XA0;Objects</h2><!--SEC END --><p>
<a id="section:objects"></a>
<a id="hevea_default24"></a></p><p>OMake is an object-oriented language. Generally speaking, an object is a value that contains fields
and methods. An object is defined with a <code>.</code> suffix for a variable. For example, the
following object might be used to specify a point (1, 5) on the two-dimensional plane.</p><pre class="verbatim">    Coord. =
        x = 1
        y = 5
        print(message) =
           println($"$(message): the point is ($(x), $(y)")

    # Define X to be 5
    X = $(Coord.x)

    # This prints the string, "Hi: the point is (1, 5)"
    Coord.print(Hi)
</pre><p>The fields <code>x</code> and <code>y</code> represent the coordinates of the point. The method <code>print</code>
prints out the position of the point.</p>
<!--TOC section id="sec45" Classes-->
<h2 class="section" id="sec45">4.13&#XA0;&#XA0;Classes</h2><!--SEC END --><p>
<a id="hevea_default25"></a></p><p>We can also define <em>classes</em>. For example, suppose we wish to define a generic <code>Point</code>
class with some methods to create, move, and print a point. A class is really just an object with
a name, defined with the <code>class</code> directive.</p><pre class="verbatim">    Point. =
        class Point

        # Default values for the fields
        x = 0
        y = 0

        # Create a new point from the coordinates
        new(x, y) =
           this.x = $(x)
           this.y = $(y)
           return $(this)

        # Move the point to the right
        move-right() =
           x = $(add $(x), 1)
           return $(this)

        # Print the point
        print() =
           println($"The point is ($(x), $(y)")

    p1 = $(Point.new 1, 5)
    p2 = $(p1.move-right)

    # Prints "The point is (1, 5)"
    p1.print()

    # Prints "The point is (2, 5)"
    p2.print()
</pre><p>Note that the variable <code>$(this)</code> is used to refer to the current object. Also, classes and
objects are <em>functional</em>&#X2014;the <code>new</code> and <code>move-right</code> methods return new objects. In
this example, the object <code>p2</code> is a different object from <code>p1</code>, which retains the original
(1, 5) coordinates.</p>
<!--TOC section id="sec46" Inheritance-->
<h2 class="section" id="sec46">4.14&#XA0;&#XA0;Inheritance</h2><!--SEC END --><p>
<a id="hevea_default26"></a></p><p>Classes and objects support inheritance (including multiple inheritance) with the <code>extends</code>
directive. The following definition of <code>Point3D</code> defines a point with <code>x</code>, <code>y</code>, and
<code>z</code> fields. The new object inherits all of the methods and fields of the parent classes/objects.</p><pre class="verbatim">    Z. =
       z = 0

    Point3D. =
       extends $(Point)
       extends $(Z)
       class Point3D

       print() =
          println($"The 3D point is ($(x), $(y), $(z))")

    # The "new" method was not redefined, so this
    # defines a new point (1, 5, 0).
    p = $(Point3D.new 1, 5)
</pre>
<!--TOC section id="sec47" static.-->
<h2 class="section" id="sec47">4.15&#XA0;&#XA0;static.</h2><!--SEC END --><p>
<a id="section:static."></a>
<a id="hevea_default27"></a></p><p>The <code>static.</code> object is used to specify values that are persistent across runs of OMake. They
are frequently used for configuring a project. Configuring a project can be expensive, so the
<code>static.</code> object ensure that the configuration is performed just once. In the following
(somewhat trivial) example, a <code>static</code> section is used to determine if the L<sup>A</sup>T<sub>E</sub>X command is
available. The <code>$(where latex)</code> function returns the full pathname for <code>latex</code>, or
<code>false</code> if the command is not found.</p><pre class="verbatim">   static. =
      LATEX_ENABLED = false
      print(--- Determining if LaTeX is installed )
      if $(where latex)
          LATEX_ENABLED = true
          export

      if $(LATEX_ENABLED)
         println($'(enabled)')
      else
         println($'(disabled)')
</pre><p>The OMake standard library provides a number of useful functions for
programming the <code>static.</code> tests, as described in
Chapter&#XA0;<a href="#chapter%3Aautoconf">14</a>. Using the standard library, the above can
be rewritten as</p><pre class="verbatim">   open configure/Configure
   static. =
      LATEX_ENABLED = $(CheckProg latex)
</pre><p>As a matter of style, a <code>static.</code> section that is used for configuration should print what it
is doing using the <a href="#fun%3AConfMsgChecking"><CODE>ConfMsgChecking</CODE></a> and
<a href="#fun%3AConfMsgResult"><CODE>ConfMsgResult</CODE></a> functions (of course, most of helper functions in
the standard library would do that automatically).</p>
<!--TOC subsection id="sec48" .STATIC-->
<h3 class="subsection" id="sec48">4.15.1&#XA0;&#XA0;.STATIC</h3><!--SEC END --><p>
<a id="section:.STATIC"></a>
<a id="hevea_default28"></a>
<a id="hevea_target0"></a></p><p><span class="c003">This feature was introduced in version 0.9.8.5.</span></p><p>There is also a rule form of static section. The syntax can be any of the following three forms.</p><pre class="verbatim">    # Export all variables defined by the body
    .STATIC:
        &lt;body&gt;

    # Specify file-dependencies
    .STATIC: &lt;dependencies&gt;
        &lt;body&gt;

    # Specify which variables to export, as well as file dependencies
    .STATIC: &lt;vars&gt;: &lt;dependencies&gt;
        &lt;body&gt;
</pre><p>The <code>&lt;vars&gt;</code> are the variable names to be defined, the <code>&lt;dependencies&gt;</code> are file
dependencies&#X2014;the rule is re-evaluated if one of the dependencies is changed. The <code>&lt;vars&gt;</code>
and <code>&lt;dependencies&gt;</code> can be omitted; if so, all variables defined in the <code>&lt;body&gt;</code> are
exported.</p><p>For example, the final example of the previous section can also be implemented as follows.</p><pre class="verbatim">    open configure/Configure
    .STATIC:
        LATEX_ENABLED = $(CheckProg latex)
</pre><p>The effect is much the same as using <code>static.</code> (instead of <code>.STATIC</code>). However, in most
cases <code>.STATIC</code> is preferred, for two reasons.</p><p>First, a <code>.STATIC</code> section is lazy, meaning that it is not evaluated until one of its variables
is resolved. In this example, if <code>$(LATEX_ENABLED)</code> is never evaluated, the section need never
be evaluated either. This is in contrast to the <code>static.</code> section, which always evaluates its
body at least once.</p><p>A second reason is that a <code>.STATIC</code> section allows for file dependencies, which are useful when
the <code>.STATIC</code> section is used for memoization. For example, suppose we wish to create a
dictionary from a table that has key-value pairs. By using a <code>.STATIC</code> section, we can perform
this computation only when the input file changes (not on every fun of <code>omake</code>). In the
following example the <a href="#fun%3Aawk"><CODE>awk</CODE> function</a> is used to parse the file <code>table-file</code>.
When a line is encountered with the form <span class="c003">key</span><code> = </code><span class="c003">value</span>, the key/value pair is
added the the <code>TABLE</code>.</p><pre class="verbatim">    .STATIC: table-file
        TABLE = $(Map)
        awk(table-file)
        case $'^\([[:alnum:]]+\) *= *\(.*\)'
            TABLE = $(TABLE.add $1, $2)
            export
</pre><p>It is appropriate to think of a <code>.STATIC</code> section as a rule that must be recomputed whenever
the dependencies of the rule change. The targets of the rule are the variables it exports (in this
case, the <code>TABLE</code> variable).</p>
<!--TOC subsubsection id="sec49" .MEMO-->
<h4 class="subsubsection" id="sec49">4.15.1.1&#XA0;&#XA0;.MEMO</h4><!--SEC END --><p>
<a id="section:.MEMO"></a>
<a id="hevea_default29"></a>
<a id="hevea_target1"></a></p><p>A <code>.MEMO</code> rule is just like a <code>.STATIC</code> rule, except that the results are not saved
between independent runs of <code>omake</code>.</p>
<!--TOC subsubsection id="sec50" :key:-->
<h4 class="subsubsection" id="sec50">4.15.1.2&#XA0;&#XA0;:key:</h4><!--SEC END --><p>
<a id="hevea_default30"></a></p><p>The <code>.STATIC</code> and <code>.MEMO</code> rules also accept a <code>:key:</code> value, which specifies a
&#X201C;key&#X201D; associated with the values being computed. It is useful to think of a <code>.STATIC</code> rule
as a dictionary that associates keys with their values. When a <code>.STATIC</code> rule is evaluated,
the result is saved in the table with the <code>:key:</code> defined by the rule (if a <code>:key:</code> is not
specified, a default key is used instead). In other words, a rule is like a function. The
<code>:key:</code> specifies the function &#X201C;argument&#X201D;, and the rule body computes the result.</p><p>To illustrate, let&#X2019;s use a <code>.MEMO</code> rule to implement a Fibonacci function.</p><pre class="verbatim">    fib(i) =
        i = $(int $i)
        .MEMO: :key: $i
            println($"Computing fib($i)...")
            result =
                if $(or $(eq $i, 0), $(eq $i, 1))
                    value $i
                else
                    add($(fib $(sub $i, 1)), $(fib $(sub $i, 2)))
        value $(result)

    println($"fib(10) = $(fib 10)")
    println($"fib(12) = $(fib 12)")
</pre><p>When this script is run, it produces the following output.</p><pre class="verbatim">    Computing fib(10)...
    Computing fib(9)...
    Computing fib(8)...
    Computing fib(7)...
    Computing fib(6)...
    Computing fib(5)...
    Computing fib(4)...
    Computing fib(3)...
    Computing fib(2)...
    Computing fib(1)...
    Computing fib(0)...
    fib(10) = 55
    Computing fib(12)...
    Computing fib(11)...
    fib(12) = 144
</pre><p>Note that the Fibonacci computation is performed just once for each value of the argument, rather
than an exponential number of times. In other words, the <code>.MEMO</code> rule has performed a
memoization, hence the name. Note that if <code>.STATIC</code> were used instead, the values would be
saved across runs of <code>omake</code>.</p><p>As a general guideline, whenever you use a <code>.STATIC</code> or <code>.MEMO</code> rule within a function
body, you will usually want to use a <code>:key:</code> value to index the rule by the function argument.
However, this is not required. In the following, the <code>.STATIC</code> rule is used to perform some
expensive computation once.</p><pre class="verbatim">    f(x) =
        .STATIC:
            y = $(expensive-computation)
        add($x, $y)
</pre><p>Additonal care should be taken for recursive functions, like the Fibonacci function. If the
<code>:key:</code> is omitted, then the rule would be defined in terms of itself, resulting in a cyclic
dependency. Here is the output of the Fibonacci program with an omitted <code>:key:</code>.</p><pre class="verbatim">    Computing fib(10)...
    Computing fib(8)...
    Computing fib(6)...
    Computing fib(4)...
    Computing fib(2)...
    Computing fib(0)...
    fib(10) = 0
    fib(12) = 0
</pre><p>The reason for this behavior is that the <code>result</code> value is not saved until the base case
<code>i = 0 || i = 1</code> is reached, so <code>fib</code> calls itself recursively until reaching
<code>fib(0)</code>, whereupon the <code>result</code> value is fixed at 0.</p><p>In any case, recursive definitions are perfectly acceptable, but you will usually want a
<code>:key:</code> argument so that each recursive call has a different <code>:key:</code>. In most cases, this
means that the <code>:key:</code> should include all arguments to the function.</p>
<!--TOC section id="sec51" Constants-->
<h2 class="section" id="sec51">4.16&#XA0;&#XA0;Constants</h2><!--SEC END --><p>
<a id="hevea_default31"></a></p><p>Internally, OMake represents values in several forms, which we list here.</p><ul class="itemize"><li class="li-itemize">
int<ul class="itemize"><li class="li-itemize">
Constructor: <code>$(int &lt;i&gt;)</code>&#XA0;<a href="#function%3Aint">9.4.1</a>.
</li><li class="li-itemize">Object: <code>Int</code>&#XA0;<a href="#object%3AInt">12.1.4</a>.
</li><li class="li-itemize">An integer is a represented with finite precision using the OCaml representation (31 bits on a
32 platform, and 63 bits on a 64 bit platform).
</li><li class="li-itemize">See also: arithmetic&#XA0;<a href="#function%3Aadd">9.4.3</a>.
</li></ul></li><li class="li-itemize">float<ul class="itemize"><li class="li-itemize">
Constructor: <code>$(float &lt;x&gt;)</code>&#XA0;<a href="#function%3Afloat">9.4.2</a>.
</li><li class="li-itemize">Object: <code>Float</code>&#XA0;<a href="#object%3AFloat">12.1.5</a>.
</li><li class="li-itemize">A float is a floating-point value, represented in IEEE 64-bit format.
</li><li class="li-itemize">See also: arithmetic&#XA0;<a href="#function%3Aadd">9.4.3</a>.
</li></ul></li><li class="li-itemize">array<ul class="itemize"><li class="li-itemize">
Constructor: <code>$(array &lt;v1&gt;, ..., &lt;vn&gt;)</code>&#XA0;<a href="#function%3Aarray">9.3.1</a>.
</li><li class="li-itemize">Object: <code>Array</code>&#XA0;<a href="#object%3AArray">12.1.7</a>.
</li><li class="li-itemize">An array is a finite list of values.
Arrays are also defined with an array definition
<pre class="verbatim">    X[] =
        &lt;v1&gt;
        ...
        &lt;vn&gt;
</pre></li><li class="li-itemize">See also: <code>nth</code>&#XA0;<a href="#function%3Anth">9.3.5</a>, <code>nth-tl</code>&#XA0;<a href="#function%3Anth-tl">9.3.8</a>,
<code>length</code>&#XA0;<a href="#function%3Alength">9.3.4</a>, &#X2026;
</li></ul></li><li class="li-itemize">string<ul class="itemize"><li class="li-itemize">
Object: <code>String</code>&#XA0;<a href="#object%3AString">12.1.8</a>.
</li><li class="li-itemize">By default, all constant character sequences represent strings, so the simple way to construct
a string is to write it down. Internally, the string may be parsed as several pieces.
A string often represents an array of values separated by whitespace.
<pre class="verbatim">    osh&gt;S = This is a string
    - : &lt;sequence
       "This" : Sequence
       ' ' : White
       "is" : Sequence
       ' ' : White
       "a" : Sequence
       ' ' : White
       "string" : Sequence&gt;
       : Sequence
    osh&gt;length($S)
    - : 4 : Int
</pre></li><li class="li-itemize">A <em>data</em> string is a string where whitespace is taken literally. It represents a single value,
not an array. The constructors are the quotations <code>$"..."</code> and <code>$'...'</code>.<pre class="verbatim">    osh&gt;S = $'''This is a string'''
    - : &lt;data "This is a string"&gt; : String
</pre></li><li class="li-itemize">See also: Quoted strings&#XA0;<a href="#section%3Aquoted-strings">7.2</a>.
</li></ul></li><li class="li-itemize">file<ul class="itemize"><li class="li-itemize">
Constructor: <code>$(file &lt;names&gt;)</code>&#XA0;<a href="#function%3Afile">10.1.1</a>.
</li><li class="li-itemize">Object: <code>File</code>&#XA0;<a href="#object%3AFile">12.1.13</a>.
</li><li class="li-itemize">A file object represents the abstract name for a file. The file object can be viewed as an
absolute name; the string representation depends on the current directory.<pre class="verbatim">    osh&gt;name = $(file foo)
    - : /Users/jyh/projects/omake/0.9.8.x/foo : File
    osh&gt;echo $(name)
    foo
    osh&gt;cd ..
    - : /Users/jyh/projects/omake : Dir
    osh&gt;echo $(name)
    0.9.8.x/foo
</pre></li><li class="li-itemize">See also: <code>vmount</code>&#XA0;<a href="#function%3Avmount">10.6.1</a>.
</li></ul></li><li class="li-itemize">directory<ul class="itemize"><li class="li-itemize">
Constructor: <code>$(dir &lt;names&gt;)</code>&#XA0;<a href="#function%3Adir">10.1.1</a>.
</li><li class="li-itemize">Object: <code>Dir</code>&#XA0;<a href="#object%3ADir">12.1.14</a>.
</li><li class="li-itemize">A directory object is like a file object, but it represents a directory.
</li></ul></li><li class="li-itemize">map (dictionary)
<ul class="itemize"><li class="li-itemize">
Object: <code>Map</code>&#XA0;<a href="#object%3AMap">12.1.2</a>.
</li><li class="li-itemize">A map/dictionary is a table that maps values to values. The <code>Map</code> object is the empty
map. The data structure is persistent, and all operations are pure and functional. The special syntax
<code>$|key|</code> can be used for keys that are strings.<pre class="verbatim">    osh&gt;table = $(Map)
    osh&gt;table = $(table.add x, int)
    osh&gt;table. +=
            $|y| = int
    osh&gt;table.find(y)
    - : "int" : Sequence
</pre></li></ul></li><li class="li-itemize">channel<ul class="itemize"><li class="li-itemize">
Constructor: <code>$(fopen &lt;filename&gt;, &lt;mode&gt;)</code>&#XA0;<a href="#function%3Afopen">10.8.4</a>.
</li><li class="li-itemize">Objects: <code>InChannel</code>&#XA0;<a href="#object%3AInChannel">12.1.16</a>, <code>OutChannel</code>&#XA0;<a href="#object%3AOutChannel">12.1.17</a>.
</li><li class="li-itemize">Channels are used for buffered input/output.
</li></ul></li><li class="li-itemize">function<ul class="itemize"><li class="li-itemize">
Constructor: <code>$(fun &lt;params&gt; =&gt; &lt;body&gt;)</code>&#XA0;<a href="#function%3Afun">9.5.1</a>.
</li><li class="li-itemize">Object: <code>Fun</code>&#XA0;<a href="#object%3AFun">12.1.9</a>.
</li><li class="li-itemize">Functions can be defined in several ways.
<ul class="itemize"><li class="li-itemize">
As an anonymous function,
<pre class="verbatim">    $(fun i, j =&gt; $(add $i, $j))
</pre></li><li class="li-itemize">As a named function,
<pre class="verbatim">    f(i, j) =
        add($i, $j)
</pre></li><li class="li-itemize">(<span class="c003">This feature was introduced in version 0.9.8.6.</span>)
As an anonymous function argument.
<pre class="verbatim">    osh&gt;foreach(i =&gt; $(add $i, 1), 1 2 3)
    - : &lt;array 2 3 4&gt; : Array
</pre></li></ul>
</li></ul></li><li class="li-itemize">lexer<ul class="itemize"><li class="li-itemize">
Object: <code>Lexer</code>&#XA0;<a href="#object%3ALexer">10.11.9</a>.
</li><li class="li-itemize">This object represents a lexer.
</li></ul></li><li class="li-itemize">parser<ul class="itemize"><li class="li-itemize">
Object: <code>Parser</code>&#XA0;<a href="#object%3AParser">10.11.13</a>.
</li><li class="li-itemize">This object represents a parser.
</li></ul></li></ul>
<!--TOC chapter id="sec52" Variables and Naming-->
<h1 class="chapter" id="sec52">Chapter&#XA0;5&#XA0;&#XA0;Variables and Naming</h1><!--SEC END --><p>
<a id="chapter:naming"></a>
</p><!--NAME omake-language-naming.html-->
<p>During evaluation, there are three different kinds of namespaces. Variables can be <em>private</em>,
or they may refer to fields in the current <em>this</em> object, or they can be part of the
<em>global</em> namespace. The namespace can be specified directly by including an explicit qualifier
before the variable name. The three namespaces are separate; a variable can be bound in one or more
simultaneously.</p><pre class="verbatim">    # private namespace
    private.X = 1
    # current object
    this.X = 2
    # public, globally defined
    global.X = 3
</pre>
<!--TOC section id="sec53" private.-->
<h2 class="section" id="sec53">5.1&#XA0;&#XA0;private.</h2><!--SEC END --><p>
<a id="section:private"></a><a id="hevea_default32"></a></p><p>The <code>private.</code> qualifier is used to define variables that are private to the current file/scope.
The values are not accessible outside the scope. Private variables are statically (lexically) scoped.</p><pre class="verbatim">    Obj. =
       private.X = 1

       print() =
          println(The value of X is: $X)

    # Prints:
    #    The private value of X is: 1
    Obj.print()

    # This is an error--X is private in Obj
    y = $(Obj.X)
</pre><p>In addition, private definitions do not affect the global value of a variable.</p><pre class="verbatim">   # The public value of x is 1
   x = 1

   # This object uses a private value of x
   Obj. =
       private.x = 2

       print() =
          x = 3
          println(The private value of x is: $x)
          println(The public value of x is: $(public.x))
          f()

   # Prints:
   #    The private value of x is: 3
   #    The public value of x is: 1
   Obj.print()
</pre><p>Private variables have two additional properties.</p><ol class="enumerate" type=1><li class="li-enumerate">
Private variables are local to the file in which they are defined.
</li><li class="li-enumerate">Private variables are not exported by the <code>export</code> directive, unless they are
mentioned explicitly in the <code>export</code> directive.<pre class="verbatim">       private. =
          FLAG = true

       section
          FLAG = false
          export

       # FLAG is still true
       section
          FLAG = false
          export FLAG

       # FLAG is now false
  </pre></li></ol>
<!--TOC section id="sec54" this.-->
<h2 class="section" id="sec54">5.2&#XA0;&#XA0;this.</h2><!--SEC END --><p>
<a id="hevea_default33"></a></p><p>The <code>this.</code> qualifier is used to define fields that are local to an object.
Object variables are dynamically scoped.</p><pre class="verbatim">    X = 1
    f() =
       println(The public value of X is: $(X))

    # Prints:
    #    The public value of X is: 2
    section
       X = 2
       f()

    # X is a protected field in the object
    Obj. =
       this.X = 3

       print() =
          println(The value of this.X is: $(X))
          f()

    # Prints:
    #    The value of this.X is: 3
    #    The public value of X is: 1
    Obj.print()

    # This is legal, it defines Y as 3
    Y = $(Obj.X)
</pre><p>In general, it is a good idea to define object variables as protected. The resulting code is more
modular because variables in your object will not produce unexpected clashes with variables defined
in other parts of the project.</p>
<!--TOC section id="sec55" global.-->
<h2 class="section" id="sec55">5.3&#XA0;&#XA0;global.</h2><!--SEC END --><p>
<a id="section:global"></a><a id="hevea_default34"></a></p><p>The <code>global.</code> qualifier is used to specify global dynamically-scoped variables. In the following
example, the <code>global.</code> definition specifies that the binding <code>X = 4</code> is to be dynamically
scoped. Global variables <em>are not</em> defined as fields of an object.</p><pre class="verbatim">    X = 1
    f() =
       println(The global value of X is: $(X))

    # Prints:
    #    The global value of X is: 2
    section
       X = 2
       f()

    Obj. =
       this.X = 3

       print() =
          println(The protected value of X is: $(X))
          global.X = 4
          f()

    # Prints:
    #    The protected value of X is: 3
    #    The global value of X is: 4
    Obj.print()
</pre>
<!--TOC section id="sec56" protected.-->
<h2 class="section" id="sec56">5.4&#XA0;&#XA0;protected.</h2><!--SEC END --><p>
<a id="section:protected"></a><a id="hevea_default35"></a></p><p>In OMake 0.9.8, <code>protected</code> is a synonym for <code>this</code>.</p><pre class="verbatim">    osh&gt;protected.x = 1
    - : "1" : Sequence
    osh&gt;value $(this.x)
    - : "1" : Sequence
</pre><p>In 0.9.9, this will change, so that the qualifier <code>protected</code> means (in 0.9.9) that a variable
is local to the current object or file, and may not be accessed outside it.</p>
<!--TOC section id="sec57" public.-->
<h2 class="section" id="sec57">5.5&#XA0;&#XA0;public.</h2><!--SEC END --><p>
<a id="section:public"></a><a id="hevea_default36"></a></p><p>In OMake 0.9.8, <code>public</code> is a synonym for <code>global</code>.</p><pre class="verbatim">    osh&gt;public.x = 1
    - : "1" : Sequence
    osh&gt;value $(global.x)
    - : "1" : Sequence
</pre><p>In 0.9.9, this will change, so that the qualifier <code>public</code> means (in 0.9.9) that a variable
is to be accessible from outside the current file or object.</p>
<!--TOC section id="sec58" Qualified blocks-->
<h2 class="section" id="sec58">5.6&#XA0;&#XA0;Qualified blocks</h2><!--SEC END --><p>If several qualified variables are defined simultaneously, a block form of qualifier can be defined.
The syntax is similar to an object definition, where the name of the object is the qualifier itself.
For example, the following program defines two private variables <code>X</code> and <code>Y</code>.</p><pre class="verbatim">    private. =
        X = 1
        Y = 2
</pre><p>The qualifier specifies a default namespace for new definitions in the block. The contents of the
block is otherwise general.</p><pre class="verbatim">    private. =
        X = 1
        Y = 2
        public.Z = $(add $X, $Y)
        # Prints "The value of Z is 3"
        echo The value of Z is $Z
</pre><p>Stylistically, it is usually better to avoid large qualified blocks because the qualifier status can
be easy to forget. For example, consider the following fragment.</p><pre class="verbatim">    private. =
        # Large code sequence
        ...
        # build foo.o with -g option (ERROR)
        CFLAGS = -g
        foo.o:
</pre><p>In this case, the programmer probably forgot that the definition of the variable <code>CFLAGS</code> is in
the <code>private</code> block, so a fresh variable <code>private.CFLAGS</code> is being defined, not the global
one. The target <code>foo.o</code> does <em>not</em> use this definition of <code>CFLAGS</code>.</p>
<!--TOC section id="sec59" declare-->
<h2 class="section" id="sec59">5.7&#XA0;&#XA0;declare</h2><!--SEC END --><p>
<a id="section:declare"></a><a id="hevea_default37"></a></p><p>When a variable name is unqualified, its namespace is determined by the most recent definition or
declaration that is in scope for that variable. We have already seen this in the examples, where a
variable definition is qualified, but the subsequent uses are not qualified explicitly. In the
following example, the first occurrence of <code>$X</code> refers to the <em>private</em> definition,
because that is the most recent. The public definition of <code>X</code> is still <code>0</code>, but the
variable must be qualified explicitly in order to access the public value.</p><pre class="verbatim">    public.X = 0
    private.X = 1

    public.print() =
        println(The value of private.X is: $X)
        println(The value of public.X is: $(public.X))
</pre><p>Sometimes it can be useful to declare a variable without defining it. For example, we might have a
function that uses a variable <code>X</code> that is to be defined later in the program. The
<code>declare</code> directive can be used for this.</p><pre class="verbatim">    declare public.X

    public.print() =
        println(The value of X is $X)

    # Prints "The value of X is 2"
    X = 2
    print()
</pre><p>Finally, what about variables that are used but not explicitly qualified? In this case, the following rules are used.</p><ul class="itemize"><li class="li-itemize">
If the variable is a function parameter, it is private.
</li><li class="li-itemize">If the variable is defined in an object, it is qualified with <code>this.</code>.
</li><li class="li-itemize">Otherwise, the variable is public.
</li></ul>
<!--TOC chapter id="sec60" Expressions and values-->
<h1 class="chapter" id="sec60">Chapter&#XA0;6&#XA0;&#XA0;Expressions and values</h1><!--SEC END --><p>
<a id="chapter:extra"></a>
</p><!--NAME omake-detail.html-->
<p><span class="c001">omake</span> provides a full programming-language including many
system and IO functions. The language is object-oriented &#X2013; everything is
an object, including the base values like numbers and strings. However,
the <span class="c001">omake</span> language differs from other scripting languages in
three main respects.</p><ul class="itemize"><li class="li-itemize">
Scoping is dynamic.
</li><li class="li-itemize">Apart from IO, the language is entirely functional &#X2013; there is no
assignment operator in the language.
</li><li class="li-itemize">Evaluation is normally eager &#X2013; that is, expressions are evaluated as soon
as they are encountered.
</li></ul><p>To illustrate these features, we will use the <span class="c001">osh</span>(1) omake program shell.
The <span class="c001">osh</span>(1) program provides a toploop, where expressions can be entered
and the result printed. <span class="c001">osh</span>(1) normally interprets input as command text
to be executed by the shell, so in many cases we will use the <code>value</code>
form to evaluate an expression directly.</p><pre class="verbatim">    osh&gt; 1
    *** omake error: File -: line 1, characters 0-1 command not found: 1
    osh&gt; value 1
    - : "1" : Sequence
    osh&gt; ls -l omake
    -rwxrwxr-x  1 jyh jyh 1662189 Aug 25 10:24 omake*
</pre>
<!--TOC section id="sec61" Dynamic scoping-->
<h2 class="section" id="sec61">6.1&#XA0;&#XA0;Dynamic scoping</h2><!--SEC END --><p>Dynamic scoping means that the value of a variable is determined by the most
recent binding of the variable in scope at runtime. Consider the following
program.</p><pre class="verbatim">    OPTIONS = a b c
    f() =
       println(OPTIONS = $(OPTIONS))
    g() =
       OPTIONS = d e f
       f()
</pre><p>If <code>f()</code> is called without redefining the <code>OPTIONS</code> variable,
the function should print the string <code>OPTIONS = a b c</code>.</p><p>In contrast, the function <code>g()</code> redefines the <code>OPTIONS</code>
variable and evaluates <code>f()</code> in that scope, which now prints the
string <code>OPTIONS = d e f</code>.</p><p>The body of <code>g</code> defines a local scope &#X2013; the redefinition of the
<code>OPTIONS</code> variable is local to <code>g</code> and does not persist
after the function terminates.</p><pre class="verbatim">    osh&gt; g()
    OPTIONS = d e f
    osh&gt; f()
    OPTIONS = a b c
</pre><p>Dynamic scoping can be tremendously helpful for simplifying the code
in a project. For example, the <span class="c001">OMakeroot</span> file defines a set of
functions and rules for building projects using such variables as
<code>CC</code>, <code>CFLAGS</code>, etc. However, different parts of a project
may need different values for these variables. For example, we may
have a subdirectory called <code>opt</code> where we want to use the
<code>-03</code> option, and a subdirectory called <code>debug</code> where we
want to use the <code>-g</code> option. Dynamic scoping allows us to redefine
these variables in the parts of the project without having to
redefine the functions that use them.</p><pre class="verbatim">    section
       CFLAGS = -O3
       .SUBDIRS: opt
    section
       CFLAGS = -g
       .SUBDIRS: debug
</pre><p>However, dynamic scoping also has drawbacks. First, it can become
confusing: you might have a variable that is intended to be private,
but it is accidentally redefined elsewhere. For example, you might
have the following code to construct search paths.</p><pre class="verbatim">   PATHSEP = :
   make-path(dirs) =
      return $(concat $(PATHSEP), $(dirs))

   make-path(/bin /usr/bin /usr/X11R6/bin)
   - : "/bin:/usr/bin:/usr/X11R6/bin" : String
</pre><p>However, elsewhere in the project, the <code>PATHSEP</code> variable is
redefined as a directory separator <code>/</code>, and your function
suddenly returns the string <code>/bin//usr/bin//usr/X11R6/bin</code>,
obviously not what you want.</p><p>The <code>private</code> block is used to solve this problem. Variables
that are defined in a <code>private</code> block use static scoping &#X2013; that
is, the value of the variable is determined by the most recent
definition in scope in the source text.</p><pre class="verbatim">   private
      PATHSEP = :
   make-path(dirs) =
      return $(concat $(PATHSEP), $(dirs))

   PATHSEP = /
   make-path(/bin /usr/bin /usr/X11R6/bin)
   - : "/bin:/usr/bin:/usr/X11R6/bin" : String
</pre>
<!--TOC section id="sec62" Functional evaluation-->
<h2 class="section" id="sec62">6.2&#XA0;&#XA0;Functional evaluation</h2><!--SEC END --><p>Apart from I/O, <span class="c001">omake</span> programs are entirely functional. This has two parts:</p><ul class="itemize"><li class="li-itemize">
There is no assignment operator.
</li><li class="li-itemize">Functions are values, and may be passed as arguments, and returned from
functions just like any other value.
</li></ul><p>The second item is straightforward. For example, the following program defines
an increment function by returning a function value.</p><pre class="verbatim">   incby(n) =
      g(i) =
         return $(add $(i), $(n))
      return $(g)

   f = $(incby 5)

   value $(f 3)
   - : 8 : Int
</pre><p>The first item may be the most confusing initially. Without assignment, how is
it possible for a subproject to modify the global behavior of the project? In fact,
the omission is intentional. Build scripts are much easier to write when there
is a guarantee that subprojects do not interfere with one another.</p><p>However, there are times when a subproject needs to propagate
information back to its parent object, or when an inner scope needs to
propagate information back to the outer scope.</p>
<!--TOC section id="sec63" Exporting the environment-->
<h2 class="section" id="sec63">6.3&#XA0;&#XA0;Exporting the environment</h2><!--SEC END --><p>
<a id="section:export"></a><a id="hevea_default38"></a>
The <code>export</code> directive can be used to propagate all or part of an inner scope back to its
parent. If used without
arguments, the entire scope is propagated back to the parent; otherwise the arguments specify which
part of the environment to propagate. The most common usage is to export some or all of the definitions in a
conditional block. In the following example, the variable <code>B</code> is bound to 2 after the
conditional. The <code>A</code> variable is not redefined.</p><pre class="verbatim">    if $(test)
       A = 1
       B = $(add $(A), 1)
       export B
    else
       B = 2
       export
</pre><p>If the <code>export</code> directive is used without an argument, all of the following is exported:
</p><ul class="itemize"><li class="li-itemize">
The values of all the dynamically scoped variables (as described in
Section&#XA0;<a href="#section%3Apublic">5.5</a>).
</li><li class="li-itemize">The current working directory.
</li><li class="li-itemize">The current Unix environment.
</li><li class="li-itemize">The current implicit rules and implicit dependencies (see also
Section&#XA0;<a href="#section%3Aimplicit-scoping">8.11.1</a>).
</li><li class="li-itemize">The current set of &#X201C;phony&#X201D; target declarations (see Sections&#XA0;<a href="#target%3A.PHONY">8.10</a>
and&#XA0;<a href="#section%3APHONY-scoping">8.11.3</a>).
</li></ul><p>If the <code>export</code> directive is used with an argument, the argument expression is evaluated
and the resulting value is interpreted as follows:
</p><ul class="itemize"><li class="li-itemize">
If the value is empty, everything is exported, as described above.
</li><li class="li-itemize">If the value represents a environment (or a partial environment) captured using the
<a href="#fun%3Aexport"><CODE>export</CODE> function</a>, then the corresponding environment or partial
environment is exported.
</li><li class="li-itemize">Otherwise, the value must be a sequence of strings specifying which items are to be propagated
back. The following strings have special meaning:
<ul class="itemize"><li class="li-itemize">
<a id="hevea_default39"></a><code>.RULE</code> &#X2014; implicit rules and implicit dependencies.
</li><li class="li-itemize"><a id="hevea_default40"></a><code>.PHONY</code> &#X2014; the set of &#X201C;phony&#X201D; target declarations.
</li></ul>
All other strings are interpreted as names of the variables that need to be propagated back.
</li></ul><p>For example, in the following (somewhat artificial) example, the variables <code>A</code> and <code>B</code>
will be exported, and the implicit rule will remain in the environment after the section ends, but
the variable <code>TMP</code> and the target <code>tmp_phony</code> will remain unchanged.</p><pre class="verbatim">section
   A = 1
   B = 2
   TMP = $(add $(A), $(B))

   .PHONY: tmp_phony

   tmp_phony:
      prepare_foo

   %.foo: %.bar tmp_phony
      compute_foo $(TMP) $&lt; $@
   export A B .RULE
</pre>
<!--TOC subsection id="sec64" Export regions-->
<h3 class="subsection" id="sec64">6.3.1&#XA0;&#XA0;Export regions</h3><!--SEC END --><p><span class="c003">This feature was introduced in version 0.9.8.5.</span></p><p>The <code>export</code> directive does not need to occur at the end of a block. An export is valid from
the point where it is specified to the end of the block in which it is contained. In other words,
the export is used in the program that follows it. This can be especially useful for reducing the
amount of code you have to write. In the following example, the variable <code>CFLAGS</code> is exported
from the both branches of the conditional.</p><pre class="verbatim">    export CFLAGS
    if $(equal $(OSTYPE), Win32)
        CFLAGS += /DWIN32
    else
        CFLAGS += -UWIN32
</pre>
<!--TOC subsection id="sec65" Returning values from exported regions-->
<h3 class="subsection" id="sec65">6.3.2&#XA0;&#XA0;Returning values from exported regions</h3><!--SEC END --><p><span class="c003">This feature was introduced in version 0.9.8.5.</span></p><p>The use of export does not affect the value returned by a block. The value is computed as usual, as
the value of the last statement in the block, ignoring the export. For example, suppose we wish to
implement a table that maps strings to unique integers. Consider the following program.</p><pre class="verbatim">    # Empty map
    table = $(Map)

    # Add an entry to the table
    intern(s) =
        export
        if $(table.mem $s)
            table.find($s)
        else
            private.i = $(table.length)
            table = $(table.add $s, $i)
            value $i

    intern(foo)
    intern(boo)
    intern(moo)
    # Prints "boo = 1"
    println($"boo = $(intern boo)")
</pre><p>Given a string <code>s</code>, the function <code>intern</code> returns either the value already associated with
<code>s</code>, or assigns a new value. In the latter case, the table is updated with the new value. The
<code>export</code> at the beginning of the function means that the variable <code>table</code> is to be
exported. The bindings for <code>s</code> and <code>i</code> are not exported, because they are private.</p><p><a id="section:eager"></a></p><p>Evaluation in <span class="c001">omake</span> is eager. That is, expressions are evaluated as soon as they are
encountered by the evaluator. One effect of this is that the right-hand-side of a variable
definition is expanded when the variable is defined.</p><pre class="verbatim">    osh&gt; A = 1
    - : "1"
    osh&gt; A = $(A)$(A)
    - : "11"
</pre><p>In the second definition, <code>A = $(A)$(A)</code>, the right-hand-side is evaluated first, producing the
sequence <code>11</code>. Then the variable <code>A</code> is <em>redefined</em> as the new value. When combined
with dynamic scoping, this has many of the same properties as conventional imperative programming.</p><pre class="verbatim">    osh&gt; A = 1
    - : "1"
    osh&gt; printA() =
        println($"A = $A")
    osh&gt; A = $(A)$(A)
    - : "11"
    osh&gt; printA()
    11
</pre><p>In this example, the print function is defined in the scope of <code>A</code>. When it is called on
the last line, the dynamic value of <code>A</code> is <code>11</code>, which is what is printed.</p><p>However, dynamic scoping and imperative programming should not be confused. The following example
illustrates a difference. The second <code>printA</code> is not in the scope of the definition
<code>A = x$(A)$(A)x</code>, so it prints the original value, <code>1</code>.</p><pre class="verbatim">    osh&gt; A = 1
    - : "1"
    osh&gt; printA() =
        println($"A = $A")
    osh&gt; section
             A = x$(A)$(A)x
             printA()
    x11x
    osh&gt; printA()
    1
</pre><p>See also Section&#XA0;<a href="#section%3Alazy">7.5</a> for further ways to control the evaluation order through the use
of &#X201C;lazy&#X201D; expressions.</p>
<!--TOC section id="sec66" Objects-->
<h2 class="section" id="sec66">6.4&#XA0;&#XA0;Objects</h2><!--SEC END --><p><span class="c001">omake</span> is an object-oriented language. Everything is an object, including
base values like numbers and strings. In many projects, this may not be so apparent
because most evaluation occurs in the default toplevel object, the <code>Pervasives</code>
object, and few other objects are ever defined.</p><p>However, objects provide additional means for data structuring, and in some cases
judicious use of objects may simplify your project.</p><p>Objects are defined with the following syntax. This defines <code>name</code>
to be an object with several methods an values.</p><pre class="verbatim">    name. =                     # += may be used as well
       extends parent-object    # optional
       class class-name         # optional

       # Fields
       X = value
       Y = value

       # Methods
       f(args) =
          body
       g(arg) =
          body
</pre><p>An <code>extends</code> directive specifies that this object inherits from
the specified <code>parent-object</code>. The object may have any number of
<code>extends</code> directives. If there is more than on <code>extends</code>
directive, then fields and methods are inherited from all parent
objects. If there are name conflicts, the later definitions override
the earlier definitions.</p><p>The <code>class</code> directive is optional. If specified, it defines a name
for the object that can be used in <code>instanceof</code> operations, as well
as <code>::</code> scoping directives discussed below.</p><p>The body of the object is actually an arbitrary program. The
variables defined in the body of the object become its fields, and the
functions defined in the body become its methods.</p>
<!--TOC section id="sec67" Field and method calls-->
<h2 class="section" id="sec67">6.5&#XA0;&#XA0;Field and method calls</h2><!--SEC END --><p>The fields and methods of an object are named using <code>object.name</code> notation.
For example, let&#X2019;s define a one-dimensional point value.</p><pre class="verbatim">   Point. =
      class Point

      # Default value
      x = $(int 0)

      # Create a new point
      new(x) =
         x = $(int $(x))
         return $(this)

      # Move by one
      move() =
         x = $(add $(x), 1)
         return $(this)

   osh&gt; p1 = $(Point.new 15)
   osh&gt; value $(p1.x)
   - : 15 : Int

   osh&gt; p2 = $(p1.move)
   osh&gt; value $(p2.x)
   - : 16 : Int
</pre><p>The <code>$(this)</code> variable always represents the current object.
The expression <code>$(p1.x)</code> fetches the value of the <code>x</code> field
in the <code>p1</code> object. The expression <code>$(Point.new 15)</code>
represents a method call to the <code>new</code> method of the <code>Point</code>
object, which returns a new object with 15 as its initial value. The
expression <code>$(p1.move)</code> is also a method call, which returns a
new object at position 16.</p><p>Note that objects are functional &#X2014; it is not possible to modify the fields
or methods of an existing object in place. Thus, the <code>new</code> and <code>move</code>
methods return new objects.</p>
<!--TOC section id="sec68" Method override-->
<h2 class="section" id="sec68">6.6&#XA0;&#XA0;Method override</h2><!--SEC END --><p>Suppose we wish to create a new object that moves by 2 units, instead of
just 1. We can do it by overriding the <code>move</code> method.</p><pre class="verbatim">   Point2. =
      extends $(Point)

      # Override the move method
      move() =
         x = $(add $(x), 2)
         return $(this)

   osh&gt; p2 = $(Point2.new 15)
   osh&gt; p3 = $(p2.move)
   osh&gt; value $(p3.x)
   - : 17 : Int
</pre><p>However, by doing this, we have completely replaced the old <code>move</code> method.</p>
<!--TOC section id="sec69" Super calls-->
<h2 class="section" id="sec69">6.7&#XA0;&#XA0;Super calls</h2><!--SEC END --><p>Suppose we wish to define a new <code>move</code> method that just calls the old one twice.
We can refer to the old definition of move using a super call, which uses the notation
<code>$(classname::name &lt;args&gt;)</code>. The <code>classname</code> should be the name of the
superclass, and <code>name</code> the field or method to be referenced. An alternative
way of defining the <code>Point2</code> object is then as follows.</p><pre class="verbatim">   Point2. =
      extends $(Point)

      # Call the old method twice
      move() =
         this = $(Point::move)
         return $(Point::move)
</pre><p>Note that the first call to <code>$(Point::move)</code> redefines the
current object (the <code>this</code> variable). This is because the method
returns a new object, which is re-used for the second call.</p>
<!--TOC chapter id="sec70" Additional language examples-->
<h1 class="chapter" id="sec70">Chapter&#XA0;7&#XA0;&#XA0;Additional language examples</h1><!--SEC END --><p>
<a id="chapter:language-examples"></a>
</p><!--NAME omake-language-examples.html-->
<p>In this section, we&#X2019;ll explore the core language through a series of examples (examples of the build
system are the topic of the Chapter&#XA0;<a href="#chapter%3Abuild-examples">3</a>).</p><p>For most of these examples, we&#X2019;ll use the <code>osh</code> command interpreter. For simplicity, the
values printed by <code>osh</code> have been abbreviated.</p>
<!--TOC section id="sec71" Strings and arrays-->
<h2 class="section" id="sec71">7.1&#XA0;&#XA0;Strings and arrays</h2><!--SEC END --><p>The basic OMake values are strings, sequences, and arrays of values. Sequences are like arrays of
values separated by whitespace; the sequences are split on demand by functions that expect arrays.</p><pre class="verbatim">   osh&gt; X = 1 2
   - : "1 2" : Sequence
   osh&gt; addsuffix(.c, $X)
   - : &lt;array 1.c 2.c&gt; : Array
</pre><p>Sometimes you want to define an array explicitly. For this, use the <code>[]</code> brackets after the
variable name, and list each array entry on a single indented line.</p><pre class="verbatim">   osh&gt; A[] =
           Hello world
           $(getenv HOME)
   - : &lt;array "Hello world" "/home/jyh"&gt; : Array
</pre><p>One central property of arrays is that whitespace in the elements is taken literally. This can be
useful, especially for filenames that contain whitespace. </p><pre class="verbatim">   # List the current files in the directory
    osh&gt; ls -Q
    "fee"  "fi"  "foo"  "fum"
    osh&gt; NAME[] = 
            Hello world
    - : &lt;array "Hello world"&gt; : Array
    osh&gt; touch $(NAME)
    osh&gt; ls -Q
    "fee"  "fi"  "foo"  "fum"  "Hello world"
</pre>
<!--TOC section id="sec72" Quoted strings-->
<h2 class="section" id="sec72">7.2&#XA0;&#XA0;Quoted strings</h2><!--SEC END --><p>
<a id="section:quoted-strings"></a>
<a id="hevea_default41"></a></p><p>A <code>String</code> is a single value; whitespace is taken literally in a string. Strings are introduced
with quotes. There are four kinds of quoted elements; the kind is determined by the opening quote.
The symbols <code>'</code> (single-quote) and <code>"</code> (double-quote) introduce the normal shell-style
quoted elements. The quotation symbols are <em>included</em> in the result string. Variables are
always expanded within a quote of this kind. Note that the <span class="c001">osh</span>(1)
(Chapter&#XA0;<a href="#chapter%3Aosh">15</a>) printer
escapes double-quotes within the string; these are only for printing, they are not part of the
string itself.</p><pre class="verbatim">    osh&gt; A = 'Hello "world"'
    - : "'Hello \"world\"'" : String
    osh&gt; B = "$(A)"
    - : "\"'Hello \"world\"'\"" : String
    osh&gt; C = 'Hello \'world\''
    - : "'Hello 'world''" : String
</pre><p>A second kind of quote is introduced with the <code>$'</code> and <code>$"</code>
quotes. The number of opening and closing quote symbols is arbitrary.
These quotations have several properties:
</p><ul class="itemize"><li class="li-itemize">
The quote delimiters are not part of the string.
</li><li class="li-itemize">Backslash <code>\</code> symbols within the string are treated as normal characters.
</li><li class="li-itemize">The strings may span several lines.
</li><li class="li-itemize">Variables are expanded within <code>$"</code> sequences, but not within <code>$'</code>
sequences.
</li></ul><pre class="verbatim">    osh&gt; A = $'''Here $(IS) an '''' \(example\) string['''
    - : "Here $(IS) an '''' \\(example\\) string[" : String
    osh&gt; B = $""""A is "$(A)" """"
    - : "A is \"Here $(IS) an '''' \\(example\\) string[\" " : String
    osh&gt; value $(A.length)
    - : 38 : Int
    osh&gt; value $(A.nth 5)
    - : "$" : String
    osh&gt; value $(A.rev)
    - : "[gnirts )\\elpmaxe(\\ '''' na )SI($ ereH" : String
</pre><p>Strings and sequences both have the property that they can be merged
with adjacent non-whitespace text.</p><pre class="verbatim">    osh&gt; A = a b c
    - : "a b c" : Sequence
    osh&gt; B = $(A).c
    - : &lt;sequence "a b c" : Sequence ".c" : Sequence&gt; : Sequence
    osh&gt; value $(nth 2, $(B))
    - : "c.c" : String
    osh&gt; value $(length $(B))
    - : 3 : Int
</pre><p>Arrays are different. The elements of an array are never merged with
adjacent text of any kind. Arrays are defined by adding square
brackets <code>[]</code> after a variable name and defining the elements
with an indented body. The elements may include whitespace.</p><pre class="verbatim">    osh&gt; A[] =
            a b
            foo bar
    - : &lt;array
           "a b" : Sequence
           "foo bar" : Sequence&gt;
           : Array
    osh&gt; echo $(A).c
    a b foo bar .c
    osh&gt; value $(A.length)
    - : 2 : Int
    osh&gt; value $(A.nth 1)
    - : "foo bar" : Sequence
</pre><p>Arrays are quite helpful on systems where filenames often contain whitespace.</p><pre class="verbatim">    osh&gt; FILES[] =
             c:\Documents and Settings\jyh\one file
             c:\Program Files\omake\second file

    osh&gt; CFILES = $(addsuffix .c, $(FILES))
    osh&gt; echo $(CFILES)
    c:\Documents and Settings\jyh\one file.c c:\Program Files\omake\second file.c
</pre>
<!--TOC section id="sec73" Files and directories-->
<h2 class="section" id="sec73">7.3&#XA0;&#XA0;Files and directories</h2><!--SEC END --><p>OMake projects usually span multiple directories, and different parts of the project execute
commands in different directories. There is a need to define a location-independent name for a file
or directory.</p><p>This is done with the <code>$(file &lt;names&gt;)</code> and <code>$(dir &lt;names&gt;)</code> functions.</p><pre class="verbatim">   osh&gt; mkdir tmp
   osh&gt; F = $(file fee)
   osh&gt; section:
            cd tmp
            echo $F
   ../fee
   osh&gt; echo $F
   fee
</pre><p>Note the use of a <code>section:</code> to limit the scope of the <code>cd</code> command. The section
temporarily changes to the <code>tmp</code> directory where the name of the file is <code>../fee</code>. Once
the section completes, we are still in the current directory, where the name of the file is
<code>fee</code>.</p><p>One common way to use the file functions is to define proper file names in your project
<code>OMakefile</code>, so that references within the various parts of the project will refer to the same
file.</p><pre class="verbatim">    osh&gt; cat OMakefile
    ROOT = $(dir .)
    TMP  = $(dir tmp)
    BIN  = $(dir bin)
    ...
</pre>
<!--TOC section id="sec74" Iteration, mapping, and foreach-->
<h2 class="section" id="sec74">7.4&#XA0;&#XA0;Iteration, mapping, and foreach</h2><!--SEC END --><p>Most builtin functions operate transparently on arrays.</p><pre class="verbatim">    osh&gt; addprefix(-D, DEBUG WIN32)
    - : -DDEBUG -DWIN32 : Array
    osh&gt; mapprefix(-I, /etc /tmp)
    - : -I /etc -I /tmp : Array
    osh&gt; uppercase(fee fi foo fum)
    - : FEE FI FOO FUM : Array
</pre><p>The <code>mapprefix</code> and <code>addprefix</code> functions are slightly different (the <code>addsuffix</code> and
<code>mapsuffix</code> functions are similar). The <code>addprefix</code> adds the prefex to each array
element. The <code>mapprefix</code> doubles the length of the array, adding the prefix as a new array
element before each of the original elements.</p><p>Even though most functions work on arrays, there are times when you will want to do it yourself.
The <code>foreach</code> function is the way to go. The <code>foreach</code> function has two forms, but the
form with a body is most useful. In this form, the function takes two arguments and a body. The
second argument is an array, and the first is a variable. The body is evaluated once for each
element of the array, where the variable is bound to the element. Let&#X2019;s define a function to add 1
to each element of an array of numbers.</p><pre class="verbatim">   osh&gt; add1(l) =
            foreach(i =&gt; $l):
                add($i, 1)
   osh&gt; add1(7 21 75)
   - : 8 22 76 : Array
</pre><p>Sometimes you have an array of filenames, and you want to define a rule for each of them. Rules are
not special, you can define them anywhere a statement is expected. Say we want to write a function
that describes how to process each file, placing the result in the <code>tmp/</code> directory.</p><pre class="verbatim">   TMP = $(dir tmp)

   my-special-rule(files) =
      foreach(name =&gt; $(files))
         $(TMP)/$(name): $(name)
            process $&lt; &gt; $@
</pre><p>Later, in some other part of the project, we may decide that we want to use this function to process some files.</p><pre class="verbatim">   # These are the files to process in src/lib
   MY_SPECIAL_FILES[] =
       fee.src
       fi.src
       file with spaces in its name.src
   my-special-rule($(MY_SPECIAL_FILES))
</pre><p>The result of calling <code>my-special-rule</code> is
exactly the same as if we had written the following three rules explicitly.</p><pre class="verbatim">    $(TMP)/fee.src: fee.src
        process fee &gt; $@
    $(TMP)/fi.src: fi.src
        process fi.src &gt; $@
    $(TMP)/$"file with spaces in its name.src": $"file with spaces in its name.src"
        process $&lt; &gt; $@
</pre><p>Of course, writing these rules is not nearly as pleasant as calling the function. The usual
properties of function abstraction give us the usual benefits. The code is less redundant, and
there is a single location (the <code>my-special-rule</code> function) that defines the build rule.
Later, if we want to modify/update the rule, we need do so in only one location.</p>
<!--TOC section id="sec75" Lazy expressions-->
<h2 class="section" id="sec75">7.5&#XA0;&#XA0;Lazy expressions</h2><!--SEC END --><p>
<a id="section:lazy"></a></p><p>Evaluation in <span class="c001">omake</span> is normally eager. That is, expressions
are evaluated as soon as they are encountered by the evaluator. One effect
of this is that the right-hand-side of a variable definition is expanded
when the variable is defined.</p><p>There are two ways to control this behavior. The <code>$`(v)</code> form
introduces lazy behavior, and the <code>$,(v)</code> form restores
eager behavior. Consider the following sequence.</p><pre class="verbatim">    osh&gt; A = 1
    - : "1" : Sequence
    osh&gt; B = 2
    - : "2" : Sequence
    osh&gt; C = $`(add $(A), $,(B))
    - : $(apply add $(apply A) "2" : Sequence)
    osh&gt; println(C = $(C))
    C = 3
    osh&gt; A = 5
    - : "5" : Sequence
    osh&gt; B = 6
    - : "6" : Sequence
    osh&gt; println(C = $(C))
    C = 7
</pre><p>The definition <code>C = $`(add $(A), $,(B))</code> defines a lazy application.
The <code>add</code> function is not applied in this case until its value is needed.
Within this expression, the value <code>$,(B)</code> specifies that <code>B</code> is
to be evaluated immediately, even though it is defined in a lazy expression.</p><p>The first time that we print the value of <code>C</code>, it evaluates to 3
since <code>A</code> is 1 and <code>B</code> is 2. The second time we evaluate <code>C</code>,
it evaluates to 7 because <code>A</code> has been redefined to <code>5</code>. The second
definition of <code>B</code> has no effect, since it was evaluated at definition time.</p>
<!--TOC subsection id="sec76" A larger example of lazy expressions-->
<h3 class="subsection" id="sec76">7.5.1&#XA0;&#XA0;A larger example of lazy expressions</h3><!--SEC END --><p>Lazy expressions are not evaluated until their result is needed. Some people,
including this author, frown on overuse of lazy expressions, mainly because it is difficult to know
when evaluation actually happens. However, there are cases where they pay off.</p><p>One example comes from option processing. Consider the specification of &#X201C;include&#X201D; directories on
the command line for a C compiler. If we want to include files from /home/jyh/include and ../foo,
we specify it on the command line with the options <code>-I/home/jyh/include -I../foo</code>.</p><p>Suppose we want to define a generic rule for building C files. We could define a <code>INCLUDES</code>
array to specify the directories to be included, and then define a generic implicit rule in our root
OMakefile.</p><pre class="verbatim">    # Generic way to compile C files.
    CFLAGS = -g
    INCLUDES[] =
    %.o: %.c
       $(CC) $(CFLAGS) $(INCLUDES) -c $&lt;

    # The src directory builds my_widget+ from 4 source files.
    # It reads include files from the include directory.
    .SUBDIRS: src
        FILES = fee fi foo fum
        OFILES = $(addsuffix .o, $(FILES))
        INCLUDES[] += -I../include
        my_widget: $(OFILES)
           $(CC) $(CFLAGS) -o $@ $(OFILES)
</pre><p>But this is not quite right. The problem is that INCLUDES is an array of options, not directories.
If we later wanted to recover the directories, we would have to strip the leading <code>-I</code> prefix,
which is a hassle. Furthermore, we aren&#X2019;t using proper names for the directories. The solution
here is to use a lazy expression. We&#X2019;ll define INCLUDES as a directory array, and a new variable
<code>PREFIXED_INCLUDES</code> that adds the -I prefix. The <code>PREFIXED_INCLUDES</code> is computed lazily,
ensuring that the value uses the most recent value of the INCLUDES variable.</p><pre class="verbatim">    # Generic way to compile C files.
    CFLAGS = -g
    INCLUDES[] =
    PREFIXED_INCLUDES[] = $`(addprefix -I, $(INCLUDES))
    %.o: %.c
       $(CC) $(CFLAGS) $(PREFIXED_INCLUDES) -c $&lt;

    # For this example, we define a proper name for the include directory
    STDINCLUDE = $(dir include)

    # The src directory builds my_widget+ from 4 source files.
    # It reads include files from the include directory.
    .SUBDIRS: src
        FILES = fee fi foo fum
        OFILES = $(addsuffix .o, $(FILES))
        INCLUDES[] += $(STDINCLUDE)
        my_widget: $(OFILES)
           $(CC) $(CFLAGS) -o $@ $(OFILES)
</pre><p>Note that there is a close connection between lazy values and functions. In the example above, we
could equivalently define <code>PREFIXED_INCLUDES</code> as a function with zero arguments.</p><pre class="verbatim">    PREFIXED_INCLUDES() =
        addprefix(-I, $(INCLUDES))
</pre>
<!--TOC section id="sec77" Scoping and exports-->
<h2 class="section" id="sec77">7.6&#XA0;&#XA0;Scoping and exports</h2><!--SEC END --><p>The OMake language is functional (apart from IO and shell commands). This comes in two parts:
functions are first-class, and variables are immutable (there is no assignment operator). The
latter property may seem strange to users used to GNU make, but it is actually a central point of
OMake. Since variables can&#X2019;t be modified, it is impossible (or at least hard) for one part of the
project to interfere with another.</p><p>To be sure, pure functional programming can be awkward. In OMake, each new indentation level
introduces a new scope, and new definitions in that scope are lost when the scope ends. If OMake
were overly strict about scoping, we would wind up with a lot of convoluted code.</p><pre class="verbatim">   osh&gt; X = 1
   osh&gt; setenv(BOO, 12)
   osh&gt; if $(equal $(OSTYPE), Win32)
            setenv(BOO, 17)
            X = 2
   osh&gt; println($X $(getenv BOO))
   1 12
</pre><p>The <code>export</code> command presents a way out. It takes care of &#X201C;exporting&#X201D; a value (or the entire
variable environment) from an inner scope to an outer one.</p><pre class="verbatim">   osh&gt; X = 1
   osh&gt; setenv(BOO, 12)
   osh&gt; if $(equal $(OSTYPE), Win32)
            setenv(BOO, 17)
            X = 2
            export
   osh&gt; println($X $(getenv BOO))
   2 17
</pre><p>Exports are especially useful in loop to export values from one iteration of a loop to the next.</p><pre class="verbatim">   # Ok, let's try to add up the elements of the array
   osh&gt;sum(l) =
           total = 0
           foreach(i =&gt; $l)
               total = $(add $(total), $i)
           value $(total)
   osh&gt;sum(1 2 3)
   - : 0 : Int

   # Oops, that didn't work!
   osh&gt;sum(l) =
           total = 0
           foreach(i =&gt; $l)
               total = $(add $(total), $i)
               export
           value $(total)
   osh&gt;sum(1 2 3)
   - : 6 : Int
</pre><p>A <code>while</code> loop is another form of loop, with an auto-export.</p><pre class="verbatim">    osh&gt;i = 0
    osh&gt;total = 0
    osh&gt;while $(lt $i, 10)
            total = $(add $(total), $i)
            i = $(add $i, 1)
    osh&gt;println($(total))
    45
</pre>
<!--TOC section id="sec78" Shell aliases-->
<h2 class="section" id="sec78">7.7&#XA0;&#XA0;Shell aliases</h2><!--SEC END --><p>Sometimes you may want to define an <em>alias</em>, an OMake command that masquerades as a real shell
command. You can do this by adding your function as a method to the <code>Shell</code> object.</p><p>For an example, suppose we use the <code>awk</code> function to print out all the comments in a file.</p><pre class="verbatim">    osh&gt;cat comment.om
    # Comment function
    comments(filename) =
        awk($(filename))
        case $'^#'
            println($0)
    # File finished
    osh&gt;include comment
    osh&gt;comments(comment.om)
    # Comment function
    # File finished
</pre><p>To add it as an alias, add the method (using += to preserve the existing entries in the Shell).</p><pre class="verbatim">   osh&gt;Shell. +=
           printcom(argv) =
               comments($(nth 0, $(argv)))
   osh&gt;printcom comment.om &gt; output.txt
   osh&gt;cat output.txt
   # Comment function
   # File finished
</pre><p>A shell command is passed an array of arguments <code>argv</code>. This does <em>not</em> include the name
of the alias.</p>
<!--TOC section id="sec79" Input/output redirection on the cheap-->
<h2 class="section" id="sec79">7.8&#XA0;&#XA0;Input/output redirection on the cheap</h2><!--SEC END --><p>As it turns out, scoping also provides a nice alternate way to perform redirection. Suppose you
have already written a lot of code that prints to the standard output channel, but now you decide
you want to redirect it. One way to do it is using the technique in the previous example: define
your function as an alias, and then use shell redirection to place the output where you want.</p><p>There is an alternate method that is easier in some cases. The variables <code>stdin</code>,
<code>stdout</code>, and <code>stderr</code> define the standard I/O channels. To redirect output, redefine
these variables as you see fit. Of course, you would normally do this in a nested scope, so that
the outer channels are not affected.</p><pre class="verbatim">    osh&gt;f() =
            println(Hello world)
    osh&gt;f()
    Hello world
    osh&gt;section:
            stdout = $(fopen output.txt, w)
            f()
            close($(stdout))
    osh&gt;cat output.txt
    Hello world
</pre><p>This also works for shell commands. If you like to gamble, you can try the following example.</p><pre class="verbatim">    osh&gt;f() =
            println(Hello world)
    osh&gt;f()
    Hello world
    osh&gt;section:
            stdout = $(fopen output.txt, w)
            f()
            cat output.txt
            close($(stdout))
    osh&gt;cat output.txt
    Hello world
    Hello world
</pre>
<!--TOC chapter id="sec80" Rules-->
<h1 class="chapter" id="sec80">Chapter&#XA0;8&#XA0;&#XA0;Rules</h1><!--SEC END --><p>
<a id="chapter:rules"></a>
</p><!--NAME omake-rules.html-->
<p>Rules are used by OMake to specify how to build files. At its simplest, a rule has the following
form.</p><pre class="verbatim">    &lt;target&gt;: &lt;dependencies&gt;
        &lt;commands&gt;
</pre><p>The <code>&lt;target&gt;</code> is the name of a file to be built. The <code>&lt;dependencies&gt;</code> are a list of
files that are needed before the <code>&lt;target&gt;</code> can be built. The <code>&lt;commands&gt;</code> are a list of
indented lines specifying commands to build the target. For example, the following rule specifies
how to compile a file <code>hello.c</code>.</p><pre class="verbatim">    hello.o: hello.c
        $(CC) $(CFLAGS) -c -o hello.o hello.c
</pre><p>This rule states that the <span class="c001">hello.o</span> file depends on the <span class="c001">hello.c</span> file. If the
<span class="c001">hello.c</span> file has changed, the command <code>$(CC) $(CFLAGS) -c -o hello.o hello.c</code> is to
be executed to update the target file <code>hello.o</code>.</p><p>A rule can have an arbitrary number of commands. The individual command lines are executed
independently by the command shell. The commands do not have to begin with a tab, but they must be
indented from the dependency line.</p><p>In addition to normal variables, the following special variables may be used in the body of a rule.</p><ul class="itemize"><li class="li-itemize">
<code>$*</code><a id="hevea_default42"></a><a id="hevea_var0"></a>: the target name, without a suffix.
</li><li class="li-itemize"><code>$@</code><a id="hevea_default43"></a><a id="hevea_var1"></a>: the target name.
</li><li class="li-itemize"><code>$^</code><a id="hevea_default44"></a><a id="hevea_var2"></a>: a list of the sources, in alphabetical order, with
duplicates removed.
</li><li class="li-itemize"><code>$+</code><a id="hevea_default45"></a><a id="hevea_var3"></a>: all the sources, in the original order.
</li><li class="li-itemize"><code>$&lt;</code><a id="hevea_default46"></a><a id="hevea_var4"></a>: the first source.
</li></ul><p>For example, the above <code>hello.c</code> rule may be simplified as follows.</p><pre class="verbatim">    hello.o: hello.c
        $(CC) $(CFLAGS) -c -o $@ $&lt;
</pre><p>Unlike normal values, the variables in a rule body are expanded lazily, and binding is dynamic. The
following function definition illustrates some of the issues.</p><pre class="verbatim">    CLibrary(name, files) =
        OFILES = $(addsuffix .o, $(files))

        $(name).a: $(OFILES)
            $(AR) cq $@ $(OFILES)
</pre><p>This function defines a rule to build a program called <code>$(name)</code> from a list of <code>.o</code>
files. The files in the argument are specified without a suffix, so the first line of the function
definition defines a variable <code>OFILES</code> that adds the <code>.o</code> suffix to each of the file
names. The next step defines a rule to build a target library <code>$(name).a</code> from the
<code>$(OFILES)</code> files. The expression <code>$(AR)</code> is evaluated when the function is called, and
the value of the variable <code>AR</code> is taken from the caller&#X2019;s scope (see also the section on
Scoping).</p>
<!--TOC section id="sec81" Implicit rules-->
<h2 class="section" id="sec81">8.1&#XA0;&#XA0;Implicit rules</h2><!--SEC END --><p>
<a id="hevea_default47"></a></p><p>Rules may also be implicit. That is, the files may be specified by wildcard patterns.
The wildcard character is <code>%</code>. For example, the following rule specifies a default
rule for building <code>.o</code> files.</p><pre class="verbatim">    %.o: %.c
        $(CC) $(CFLAGS) -c -o $@ $*.c
</pre><p>This rule is a template for building an arbitrary <code>.o</code> file from
a <code>.c</code> file.</p><p>By default, implicit rules are only used for the targets in the current
directory. However subdirectories included via the <code>.SUBDIRS</code> rules
inherit all the implicit rules that are in scope (see also the section on
Scoping).</p>
<!--TOC section id="sec82" Bounded implicit rules-->
<h2 class="section" id="sec82">8.2&#XA0;&#XA0;Bounded implicit rules</h2><!--SEC END --><p>
<a id="hevea_default48"></a></p><p>Implicit rules may specify the set of files they apply to. The following syntax is used.</p><pre class="verbatim">    &lt;targets&gt;: &lt;pattern&gt;: &lt;dependencies&gt;
        &lt;commands&gt;
</pre><p>For example, the following rule applies only to the files <code>a.o</code> and <code>b.o</code>.</p><pre class="verbatim">   a.o b.o: %.o: %.c
        $(CC) $(CFLAGS) -DSPECIAL -c $*.c
</pre>
<!--TOC section id="sec83" section-->
<h2 class="section" id="sec83">8.3&#XA0;&#XA0;section</h2><!--SEC END --><p>
<a id="fun:section"></a><a id="function:section"></a><a id="hevea_default49"></a><a id="hevea_fun3"></a></p><p>Frequently, the commands in a rule body are expressions to be evaluated by the shell. <span class="c001">omake</span>
also allows expressions to be evaluated by <span class="c001">omake</span> itself.</p><p>The syntax of these &#X201C;computed rules&#X201D; uses the <code>section</code> expression. The following rule uses
the <span class="c001">omake</span> IO functions to produce the target <code>hello.c</code>.</p><pre class="verbatim">    hello.c:
        section
            FP = fopen(hello.c, w)
            fprintln($(FP), $""#include &lt;stdio.h&gt; int main() { printf("Hello world\n"); }"")
            close($(FP))
</pre><p>This example uses the quotation <code>$""...""</code> (see also Section&#XA0;<a href="#section%3Aquotes">B.1.6</a>) to quote the text being
printed. These quotes are not included in the output file. The <code>fopen</code>, <code>fprintln</code>, and
<code>close</code> functions perform file IO as discussed in the IO section.</p><p>In addition, commands that are function calls, or special expressions, are interpreted correctly.
Since the <code>fprintln</code> function can take a file directly, the above rule can be abbreviated as
follows.</p><pre class="verbatim">    hello.c:
       fprintln($@, $""#include &lt;stdio.h&gt; int main() { printf("Hello world\n"); }"")
</pre>
<!--TOC section id="sec84" section rule-->
<h2 class="section" id="sec84">8.4&#XA0;&#XA0;section rule</h2><!--SEC END --><p>
<a id="fun:section rule"></a><a id="function:section rule"></a><a id="hevea_default50"></a><a id="hevea_fun4"></a></p><p>Rules can also be computed using the <code>section rule</code> form, where a rule body is expected instead
of an expression. In the following rule, the file <code>a.c</code> is copied onto the <code>hello.c</code> file
if it exists, otherwise <code>hello.c</code> is created from the file <code>default.c</code>.</p><pre class="verbatim">    hello.c:
        section rule
           if $(target-exists a.c)
              hello.c: a.c
                 cat a.c &gt; hello.c
           else
              hello.c: default.c
                 cp default.c hello.c
</pre>
<!--TOC section id="sec85" Special dependencies-->
<h2 class="section" id="sec85">8.5&#XA0;&#XA0;Special dependencies</h2><!--SEC END --><p>
<a id="hevea_default51"></a></p>
<!--TOC subsection id="sec86" :exists:-->
<h3 class="subsection" id="sec86">8.5.1&#XA0;&#XA0;:exists:</h3><!--SEC END --><p>
<a id="hevea_default52"></a></p><p>In some cases, the contents of a dependency do not matter, only whether the file exists or not. In
this case, the <code>:exists:</code> qualifier can be used for the dependency.</p><pre class="verbatim">    foo.c: a.c :exists: .flag
       if $(test -e .flag)
           $(CP) a.c $@
</pre>
<!--TOC subsection id="sec87" :effects:-->
<h3 class="subsection" id="sec87">8.5.2&#XA0;&#XA0;:effects:</h3><!--SEC END --><p>
<a id="hevea_default53"></a></p><p>Some commands produce files by side-effect. For example, the
<span class="c001">latex</span>(1) command produces a <code>.aux</code> file as a side-effect of
producing a <code>.dvi</code> file. In this case, the <code>:effects:</code>
qualifier can be used to list the side-effect explicitly.
<span class="c001">omake</span> is careful to avoid simultaneously running programs that
have overlapping side-effects.</p><pre class="verbatim">    paper.dvi: paper.tex :effects: paper.aux
        latex paper
</pre>
<!--TOC subsection id="sec88" :value:-->
<h3 class="subsection" id="sec88">8.5.3&#XA0;&#XA0;:value:</h3><!--SEC END --><p>
<a id="hevea_default54"></a></p><p>The <code>:value:</code> dependency is used to specify that the rule execution depends on the value of an
expression. For example, the following rule</p><pre class="verbatim">    a: b c :value: $(X)
        ...
</pre><p>specifies that &#X201C;a&#X201D; should be recompiled if the value of <code>$(X)</code> changes
(X does not have to be a filename). This is intended to allow greater
control over dependencies.</p><p>In addition, it can be used instead of other kinds of dependencies. For example,
the following rule:</p><pre class="verbatim">    a: b :exists: c
        commands
</pre><p>is the same as</p><pre class="verbatim">    a: b :value: $(target-exists c)
        commands
</pre><p>Notes:
</p><ul class="itemize"><li class="li-itemize">
The values are arbitrary (they are not limited to variables)
</li><li class="li-itemize">The values are evaluated at rule expansion time, so expressions
containing variables like <code>$@</code>, <code>$^</code>, etc are legal.
</li></ul>
<!--TOC section id="sec89" <CODE>.SCANNER</CODE> rules-->
<h2 class="section" id="sec89">8.6&#XA0;&#XA0;<CODE>.SCANNER</CODE> rules</h2><!--SEC END --><p>
<a id="hevea_default55"></a><a id="hevea_target2"></a><a id="target:.SCANNER"></a></p><p>Scanner rules define a way to specify automatic dependency scanning. A <code>.SCANNER</code> rule has the
following form.</p><pre class="verbatim">    .SCANNER: target: dependencies
        commands
</pre><p>The rule is used to compute additional dependencies that might be defined in the source files for
the specified target. The result of executing the scanner commands <em>must</em> be a sequence of
dependencies in OMake format, printed to the standard output. For example, on GNU systems the
<code>gcc -MM foo.c</code> produces dependencies for the file <code>foo.c</code> (based on <code>#include</code>
information).</p><p>We can use this to specify a scanner for C files that adds the scanned dependencies for the
<code>.o</code> file. The following scanner specifies that dependencies for a file, say <code>foo.o</code> can
be computed by running <code>gcc -MM foo.c</code>. Furthermore, <code>foo.c</code> is a dependency, so the
scanner should be recomputed whenever the <code>foo.c</code> file changes.</p><pre class="verbatim">    .SCANNER: %.o: %.c
        gcc -MM $&lt;
</pre><p>Let&#X2019;s suppose that the command <code>gcc -MM foo.c</code> prints the following line.</p><pre class="verbatim">    foo.o: foo.h /usr/include/stdio.h
</pre><p>The result is that the files <code>foo.h</code> and <code>/usr/include/stdio.h</code> are considered to be
dependencies of <code>foo.o</code>&#X2014;that is, <code>foo.o</code> should be rebuilt if either of these files
changes.</p><p>This works, to an extent. One nice feature is that the scanner will be re-run whenever the
<code>foo.c</code> file changes. However, one problem is that dependencies in C are <em>recursive</em>.
That is, if the file <code>foo.h</code> is modified, it might include other files, establishing further
dependencies. What we need is to re-run the scanner if <code>foo.h</code> changes too.</p><p>We can do this with a <em>value</em> dependency. The variable <code>$&amp;</code> is defined as the dependency
results from any previous scan. We can add these as dependencies using the <code>digest</code> function,
which computes an MD5 digest of the files.</p><pre class="verbatim">    .SCANNER: %.o: %.c :value: $(digest $&amp;)
        gcc -MM $&lt;
</pre><p>Now, when the file <code>foo.h</code> changes, its digest will also change, and the scanner will be re-run
because of the value dependency (since <code>$&amp;</code> will include <code>foo.h</code>).</p><p>This still is not quite right. The problem is that the C compiler uses a <em>search-path</em> for
include files. There may be several versions of the file <code>foo.h</code>, and the one that is chosen
depends on the include path. What we need is to base the dependencies on the search path.</p><p>The <code>$(digest-in-path-optional ...)</code> function computes the digest based on a search path,
giving us a solution that works.</p><pre class="verbatim">    .SCANNER: %.o: %.c :value: $(digest-in-path-optional $(INCLUDES), $&amp;)
       gcc -MM $(addprefix -I, $(INCLUDES)) $&lt;
</pre><p>The standard output of the scanner rules will be captured by OMake and is not allowed to contain any
content that OMake will not be able to parse as a dependency. The output is allowed to contain
dependency specifications for unrelated targets, however such dependencies will be ignored. The
scanner rules are allowed to produce arbitrary output on the standard error channel &#X2014; such output
will be handled in the same way as the output of the ordinary rules (in other words, it will be
presented to the user, when dictated by the <code>--output-</code>&#X2026; options enabled).</p><p>Additional examples of the <code>.SCANNER</code> rules can be found in Section&#XA0;<a href="#section%3Ascanner-exm">3.4.3</a>.</p>
<!--TOC subsection id="sec90" Named scanners, and the <CODE>:scanner:</CODE> dependencies-->
<h3 class="subsection" id="sec90">8.6.1&#XA0;&#XA0;Named scanners, and the <CODE>:scanner:</CODE> dependencies</h3><!--SEC END --><p>
<a id="hevea_default56"></a></p><p>Sometimes it may be useful to specify explicitly which scanner should be used in a rule. For
example, we might compile <code>.c</code> files with different options, or (heaven help us) we may be
using both <code>gcc</code> and the Microsoft Visual C++ compiler <code>cl</code>. In general, the target of a
<code>.SCANNER</code> is not tied to a particular target, and we may name it as we like.</p><pre class="verbatim">    .SCANNER: scan-gcc-%.c: %.c :value: $(digest-in-path-optional $(INCLUDES), $&amp;)
        gcc -MM $(addprefix -I, $(INCLUDES)) $&lt;

    .SCANNER: scan-cl-%.c: %.c :value: $(digest-in-path-optional $(INCLUDES), $&amp;)
        cl --scan-dependencies-or-something $(addprefix /I, $(INCLUDES)) $&lt;
</pre><p>The next step is to define explicit scanner dependencies. The <code>:scanner:</code> dependency is used
for this. In this case, the scanner dependencies are specified explicitly.</p><pre class="verbatim">    $(GCC_FILES): %.o: %.c :scanner: scan-gcc-%.c
        gcc ...

    $(CL_FILES): %.obj: %.c :scanner: scan-cl-%.c
        cl ...
</pre><p>Explicit <code>:scanner:</code> scanner specification may also be used to state that a single
<code>.SCANNER</code> rule should be used to generate dependencies for more than one target. For example,</p><pre class="verbatim">    .SCANNER: scan-all-c: $(GCC_FILES) :value: $(digest-in-path-optional $(INCLUDES), $&amp;)
        gcc -MM $(addprefix -I, $(INCLUDES)) $(GCC_FILES)

    $(GCC_FILES): %.o: %.c :scanner: scan-all-c
        ...
</pre><p>The above has the advantage of only running <span class="c001">gcc</span> once and a disadvantage that when a single
source file changes, all the files will end up being re-scanned.</p>
<!--TOC subsection id="sec91" Notes-->
<h3 class="subsection" id="sec91">8.6.2&#XA0;&#XA0;Notes</h3><!--SEC END --><p>In most cases, you won&#X2019;t need to define scanners of your own. The standard installation includes
default scanners (both explicitly and implicitly named ones) for C, OCaml, and L<sup>A</sup>T<sub>E</sub>X files.</p><p>The <a href="#var%3ASCANNER_MODE"><CODE>SCANNER_MODE</CODE> variable</a> controls the usage of implicit scanner dependencies.</p><p>The explicit <code>:scanner:</code> dependencies reduce the chances of scanner mis-specifications. In
large complicated projects it might be a good idea to set <code>SCANNER_MODE</code> to <code>error</code> and
use only the named <code>.SCANNER</code> rules and explicit <code>:scanner:</code> specifications.</p>
<!--TOC section id="sec92" .DEFAULT-->
<h2 class="section" id="sec92">8.7&#XA0;&#XA0;.DEFAULT</h2><!--SEC END --><p>
<a id="hevea_default57"></a><a id="hevea_target3"></a><a id="target:.DEFAULT"></a></p><p>The <code>.DEFAULT</code> target specifies a target to be built by default
if <span class="c001">omake</span> is run without explicit targets. The following rule
instructs <span class="c001">omake</span> to build the program <code>hello</code> by default</p><pre class="verbatim">   .DEFAULT: hello
</pre>
<!--TOC section id="sec93" .SUBDIRS-->
<h2 class="section" id="sec93">8.8&#XA0;&#XA0;.SUBDIRS</h2><!--SEC END --><p>
<a id="hevea_default58"></a><a id="hevea_target4"></a><a id="target:.SUBDIRS"></a></p><p>The <code>.SUBDIRS</code> target is used to specify a set of subdirectories
that are part of the project. Each subdirectory should have its own
<span class="c001">OMakefile</span>, which is evaluated in the context of the current
environment.</p><pre class="verbatim">   .SUBDIRS: src doc tests
</pre><p>This rule specifies that the <code>OMakefile</code>s in each of the <code>src</code>, <code>doc</code>, and
<code>tests</code> directories should be read.</p><p>In some cases, especially when the <code>OMakefile</code>s are very similar in a large number of
subdirectories, it is inconvenient to have a separate <code>OMakefile</code> for each directory. If the
<code>.SUBDIRS</code> rule has a body, the body is used instead of the <code>OMakefile</code>.</p><pre class="verbatim">   .SUBDIRS: src1 src2 src3
      println(Subdirectory $(CWD))
      .DEFAULT: lib.a
</pre><p>In this case, the <code>src1</code>, <code>src2</code>, and <code>src3</code> files do not need <code>OMakefile</code>s.
Furthermore, if one exists, it is ignored. The following includes the file if it exists.</p><pre class="verbatim">   .SUBDIRS: src1 src2 src3
       if $(file-exists OMakefile)
          include OMakefile
       .DEFAULT: lib.a
</pre>
<!--TOC section id="sec94" .INCLUDE-->
<h2 class="section" id="sec94">8.9&#XA0;&#XA0;.INCLUDE</h2><!--SEC END --><p>
<a id="hevea_default59"></a><a id="hevea_target5"></a><a id="target:.INCLUDE"></a></p><p>The <code>.INCLUDE</code> target is like the <code>include</code> directive, but it specifies a rule to build
the file if it does not exist.</p><pre class="verbatim">   .INCLUDE: config
       echo "CONFIG_READ = true" &gt; config

    echo CONFIG_READ is $(CONFIG_READ)
</pre><p>You may also specify dependencies to an <code>.INCLUDE</code> rule.</p><pre class="verbatim">   .INCLUDE: config: config.defaults
      cp config.defaults config
</pre><p>A word of caution is in order here. The usual policy is used for determining when the rule is
out-of-date. The rule is executed if any of the following hold.</p><ul class="itemize"><li class="li-itemize">
the target does not exist,
</li><li class="li-itemize">the rule has never been executed before,
</li><li class="li-itemize">any of the following have changed since the last time the rule was executed,
<ul class="itemize"><li class="li-itemize">
the target,
</li><li class="li-itemize">the dependencies,
</li><li class="li-itemize">the commands-text.
</li></ul>
</li></ul><p>In some of the cases, this will mean that the rule is executed even if the target file already
exists. If the target is a file that you expect to edit by hand (and therefore you don&#X2019;t want to
overwrite it), you should make the rule evaluation conditional on whether the target already exists.</p><pre class="verbatim">   .INCLUDE: config: config.defaults
       # Don't overwrite my carefully hand-edited file
       if $(not $(file-exists config))
          cp config.defaults config
</pre>
<!--TOC section id="sec95" .PHONY-->
<h2 class="section" id="sec95">8.10&#XA0;&#XA0;.PHONY</h2><!--SEC END --><p>
<a id="hevea_default60"></a><a id="hevea_target6"></a><a id="target:.PHONY"></a></p><p>A &#X201C;phony&#X201D; target is a target that is not a real file, but exists to collect a set of dependencies.
Phony targets are specified with the <code>.PHONY</code> rule. In the following example, the
<code>install</code> target does not correspond to a file, but it corresponds to some commands that should
be run whenever the <code>install</code> target is built (for example, by running <code>omake install</code>).</p><pre class="verbatim">   .PHONY: install

   install: myprogram.exe
      cp myprogram.exe /usr/bin
</pre>
<!--TOC section id="sec96" Rule scoping-->
<h2 class="section" id="sec96">8.11&#XA0;&#XA0;Rule scoping</h2><!--SEC END --><p>
<a id="hevea_default61"></a></p><p>As we have mentioned before, <span class="c001">omake</span> is a <em>scoped</em> language. This provides great
flexibility&#X2014;different parts of the project can define different configurations without interfering
with one another (for example, one part of the project might be compiled with <code>CFLAGS=-O3</code> and
another with <code>CFLAGS=-g</code>).</p><p>But how is the scope for a target file selected? Suppose we are building a file <code>dir/foo.o</code>.
<span class="c001">omake</span> uses the following rules to determine the scope.</p><ul class="itemize"><li class="li-itemize">
First, if there is an <em>explicit</em> rule for building <code>dir/foo.o</code> (a rule with no
wildcards), the context for that rule determines the scope for building the target.
</li><li class="li-itemize">Otherwise, the directory <code>dir/</code> must be part of the project. This normally means that a
configuration file <code>dir/OMakefile</code> exists (although, see the <code>.SUBDIRS</code> section for
another way to specify the <code>OMakefile</code>). In this case, the scope of the target is the scope at
the end of the <code>dir/OMakefile</code>.
</li></ul><p>To illustrate rule scoping, let&#X2019;s go back to the example of a &#X201C;Hello world&#X201D; program with two
files. Here is an example <code>OMakefile</code> (the two definitions of <code>CFLAGS</code> are for
illustration).</p><pre class="verbatim">    # The executable is compiled with debugging
    CFLAGS = -g
    hello: hello_code.o hello_lib.o
       $(CC) $(CFLAGS) -o $@ $+

    # Redefine CFLAGS
    CFLAGS += -O3
</pre><p>In this project, the target <code>hello</code> is <em>explicit</em>. The scope of the <code>hello</code> target
is the line beginning with <code>hello:</code>, where the value of <code>CFLAGS</code> is <code>-g</code>. The other
two targets, <code>hello_code.o</code> and <code>hello_lib.o</code> do not appear as explicit targets, so their
scope is at the end of the <code>OMakefile</code>, where the <code>CFLAGS</code> variable is defined to be
<code>-g -O3</code>. That is, <code>hello</code> will be linked with <code>CFLAGS=-g</code> and the <code>.o</code> files
will be compiled with <code>CFLAGS=-g -O3</code>.</p><p>We can change this behavior for any of the targets by specifying them as explicit targets. For
example, suppose we wish to compile <code>hello_lib.o</code> with a preprocessor variable <code>LIBRARY</code>.</p><pre class="verbatim">    # The executable is compiled with debugging
    CFLAGS = -g
    hello: hello_code.o hello_lib.o
       $(CC) $(CFLAGS) -o $@ $+

    # Compile hello_lib.o with CFLAGS = -g -DLIBRARY
    section
        CFLAGS += -DLIBRARY
        hello_lib.o:

    # Redefine CFLAGS
    CFLAGS += -O3
</pre><p>In this case, <code>hello_lib.o</code> is also mentioned as an explicit target, in a scope where
<code>CFLAGS=-g -DLIBRARY</code>. Since no rule body is specified, it is compiled using the usual
implicit rule for building <code>.o</code> files (in a context where <code>CFLAGS=-g -DLIBRARY</code>).</p>
<!--TOC subsection id="sec97" Scoping of implicit rules-->
<h3 class="subsection" id="sec97">8.11.1&#XA0;&#XA0;Scoping of implicit rules</h3><!--SEC END --><p>
<a id="section:implicit-scoping"></a></p><p>Implicit rules (rules containing wildcard patterns) are <em>not</em> global, they follow the normal
scoping convention. This allows different parts of a project to have different sets of implicit
rules. If we like, we can modify the example above to provide a new implicit rule for building
<code>hello_lib.o</code>.</p><pre class="verbatim">    # The executable is compiled with debugging
    CFLAGS = -g
    hello: hello_code.o hello_lib.o
       $(CC) $(CFLAGS) -o $@ $+

    # Compile hello_lib.o with CFLAGS = -g -DLIBRARY
    section
        %.o: %.c
            $(CC) $(CFLAGS) -DLIBRARY -c $&lt;
        hello_lib.o:

    # Redefine CFLAGS
    CFLAGS += -O3
</pre><p>In this case, the target <code>hello_lib.o</code> is built in a scope with a new implicit rule for
building <code>%.o</code> files. The implicit rule adds the <code>-DLIBRARY</code> option. This implicit rule
is defined only for the target <code>hello_lib.o</code>; the target <code>hello_code.o</code> is built as
normal.</p>
<!--TOC subsection id="sec98" Scoping of <CODE>.SCANNER</CODE> rules-->
<h3 class="subsection" id="sec98">8.11.2&#XA0;&#XA0;Scoping of <CODE>.SCANNER</CODE> rules</h3><!--SEC END --><p>
<a id="hevea_default62"></a><a id="hevea_target7"></a></p><p>Scanner rules are scoped the same way as normal rules. If the <code>.SCANNER</code> rule is explicit
(containing no wildcard patterns), then the scope of the scan target is the same as the the rule.
If the <code>.SCANNER</code> rule is implicit, then the environment is taken from the <code>:scanner:</code>
dependency.</p><pre class="verbatim">    # The executable is compiled with debugging
    CFLAGS = -g
    hello: hello_code.o hello_lib.o
       $(CC) $(CFLAGS) -o $@ $+

    # scanner for .c files
    .SCANNER: scan-c-%.c: %.c
       $(CC) $(CFLAGS) -MM $&lt;

    # Compile hello_lib.o with CFLAGS = -g -DLIBRARY
    section
        CFLAGS += -DLIBRARY
        hello_lib.o: hello_lib.c :scanner: scan-c-hello_lib.c
           $(CC) $(CFLAGS) -c $&lt;

    # Compile hello_code.c with CFLAGS = -g -O3
    section
        CFLAGS += -O3
        hello_code.o: hello_code.c :scanner: scan-c-hello_code.c
           $(CC) $(CFLAGS) -c $&lt;
</pre><p>Again, this is for illustration&#X2014;it is unlikely you would need to write a complicated configuration
like this! In this case, the <code>.SCANNER</code> rule specifies that the C-compiler should be called
with the <code>-MM</code> flag to compute dependencies. For the target <code>hello_lib.o</code>, the scanner
is called with <code>CFLAGS=-g -DLIBRARY</code>, and for <code>hello_code.o</code> it is called with
<code>CFLAGS=-g -O3</code>.</p>
<!--TOC subsection id="sec99" Scoping for <CODE>.PHONY</CODE> targets-->
<h3 class="subsection" id="sec99">8.11.3&#XA0;&#XA0;Scoping for <CODE>.PHONY</CODE> targets</h3><!--SEC END --><p>
<a id="section:PHONY-scoping"></a><a id="hevea_default63"></a><a id="hevea_target8"></a></p><p>Phony targets (targets that do not correspond to files) are defined with a <code>.PHONY:</code> rule.
Phony targets are scoped as usual. The following illustrates a common mistake, where the
<code>.PHONY</code> target is declared <em>after</em> it is used.</p><pre class="verbatim">    # !!This example is broken!!
    all: hello

    hello: hello_code.o hello_lib.o
        $(CC) $(CFLAGS) -o $@ $+

    .PHONY: all
</pre><p>This doesn&#X2019;t work as expected because the <code>.PHONY</code> declaration occurs too late. The proper way
to write this example is to place the <code>.PHONY</code> declaration first.</p><pre class="verbatim">    # Phony targets must be declared before being used
    .PHONY: all

    all: hello

    hello: hello_code.o hello_lib.o
        $(CC) $(CFLAGS) -o $@ $+
</pre><p>Phony targets are passed to subdirectories. As a practical matter, it is wise to declare all
<code>.PHONY</code> targets in your root <code>OMakefile</code>, before any <code>.SUBDIRS</code>. This will ensure
that 1) they are considered as phony targets in each of the subdirectories, and 2) you can build them
from the project root.</p><pre class="verbatim">    .PHONY: all install clean

    .SUBDIRS: src lib clib
</pre><p>Note that when a <code>.PHONY</code> target is inherited by a subdirectory via a <code>.SUBDIRS</code>, a whole
hierarchy of <code>.PHONY</code> targets (that are a part of the global one) is created, as described in
Section&#XA0;<a href="#section%3APHONY-hierarchy">8.12.2</a> below.</p>
<!--TOC section id="sec100" Running OMake from a subdirectory-->
<h2 class="section" id="sec100">8.12&#XA0;&#XA0;Running OMake from a subdirectory</h2><!--SEC END --><p>
<a id="section:running-from-subdir"></a>
Running <code>omake foo</code> asks OMake to build the file <code>foo</code> in context of the <em>whole</em>
project, even when running from a subdirectory of the project. Therefore, if <code>bar/baz</code> is a
regular target (not a <code>.PHONY</code> one), then running <code>omake bar/baz</code> and running
<code>(cd bar; omake baz)</code> are usually equivalent.</p><p>There are two noteworthy exceptions to the above rule:
</p><ul class="itemize"><li class="li-itemize">
If the subdirectory is not a part of the project (there is no <code>.SUBDIRS</code>) for it, then
OMake will complain if you try to run it in that directory.
</li><li class="li-itemize">If a subdirectory contains an <code>OMakeroot</code> of its own, this would designate
the subdirectory as a separate project (which is usually a bad idea and is not recommended).
</li></ul>
<!--TOC subsection id="sec101" Phony targets in a subdirectory-->
<h3 class="subsection" id="sec101">8.12.1&#XA0;&#XA0;Phony targets in a subdirectory</h3><!--SEC END --><p>
<a id="section:PHONY-in-subdirs"></a><a id="hevea_default64"></a><a id="hevea_target9"></a><a id="hevea_default65"></a><a id="hevea_target10"></a></p><p>Suppose you have a <code>.PHONY: clean</code> declared in your root <code>OMakefile</code> and
both the root <code>OMakefile</code> and the <code>OMakefile</code> in some of the subdirectories contain
<code>clean:</code> rules. In this case
</p><ul class="itemize"><li class="li-itemize">
Running <code>omake clean</code> in the root directory will execute all the rules (each in the
appropriate directory);
</li><li class="li-itemize">Running <code>omake clean</code> in the subdirectory will execute just its local one, as well as the
ones from the subdirectories of the current directory.
</li></ul><p>The above equally applies to the built-in <code>.PHONY</code> targets, including <a href="#target%3A.DEFAULT"><CODE>.DEFAULT</CODE></a>.
Namely, if OMake is executed (without argument) in the root directory of a project, all the
<code>.DEFAULT</code> targets in the project will be built. On the other hand, when OMake is executed
(without argument) in a subdirectory, only the <code>.DEFAULT</code> targets defined in and under that
subdirectory will be built.</p><p>The following Section explains the underlying semantics that gives rise to the above behavior.</p>
<!--TOC subsection id="sec102" Hierarchy of <CODE>.PHONY</CODE> targets-->
<h3 class="subsection" id="sec102">8.12.2&#XA0;&#XA0;Hierarchy of <CODE>.PHONY</CODE> targets</h3><!--SEC END --><p>
<a id="section:PHONY-hierarchy"></a><a id="hevea_default66"></a><a id="hevea_target11"></a></p><p>When the the root <code>OMakefile</code> contains a <code>.PHONY: clean</code> directive, it creates:
</p><ul class="itemize"><li class="li-itemize">
A &#X201C;global&#X201D; phony target <code>/.PHONY/clean</code> (note the leading &#X201C;<code>/</code>&#X201D;);
</li><li class="li-itemize">A &#X201C;relative&#X201D; phony target attached to the current directory &#X2014; <code>.PHONY/clean</code> (note
the lack of the leading &#X201C;<code>/</code>&#X201D;);
</li><li class="li-itemize">A dependency <code>/.PHONY/clean: .PHONY/clean</code>.
</li></ul><p>All the <code>clean: ...</code> rules in the root <code>OMakefile</code> following this <code>.PHONY: clean</code>
declaration would be interpreted as rules for the <code>.PHONY/clean</code> target.</p><p>Now when OMake then comes across a <code>.SUBDIRS: foo</code> directive (when it is in scope of the above
<code>.PHONY: clean</code> declaration), it does the following:
</p><ul class="itemize"><li class="li-itemize">
Creates a new <code>.PHONY/foo/clean</code> &#X201C;relative&#X201D; phony target;
</li><li class="li-itemize">Creates the dependency <code>.PHONY/clean: .PHONY/foo/clean</code>;
</li><li class="li-itemize">Processes the body of the <code>.SUBDIRS: foo</code> directive, or reads the <code>foo/OMakefile</code>
file, if the body is empty. While doing that, it interprets its instructions relative to the
<code>foo</code> directory. In particular, all the <code>clean: ...</code> rules will be taken to apply to
<code>.PHONY/foo/clean</code>.
</li></ul><p>Now when you run <code>omake clean</code> in the root directory of the project, it is interpreted as
<code>omake .PHONY/clean</code> (similar to how it happens with the normal targets), so both the rules for
<code>.PHONY/clean</code> are executed and the rules for its dependency 
<code>.PHONY/foo/clean</code>. Running <code>(cd foo; omake clean)</code> is, as for normal targets, equivalent to running
<code>omake .PHONY/foo/clean</code> and only those rules that apply to <code>.PHONY/foo/clean</code> will be executed.</p>
<!--TOC section id="sec103" Pathnames in rules-->
<h2 class="section" id="sec103">8.13&#XA0;&#XA0;Pathnames in rules</h2><!--SEC END --><p>In rules, the targets and dependencies are first translated to <em>file</em> values (as in the
<a href="#fun%3Afile"><CODE>file</CODE> function</a>). They are then translated to strings for the command line.
This can cause some unexpected behavior. In the following example, the <a href="#fun%3Aabsname"><CODE>absname</CODE> function</a>
is the absolute pathname for the file <code>a</code>, but the rule still prints
the relative pathname.</p><pre class="verbatim">    .PHONY: demo
    demo: $(absname a)
        echo $&lt;

    # omake demo
    a
</pre><p>There is arguably a good reason for this. On Win32 systems, the <code>/</code> character is viewed as an
&#X201C;option specifier.&#X201D; The pathname separator is the <code>\</code> character. OMake translates the
filenames automatically so that things work as expected on both systems.</p><pre class="verbatim">   demo: a/b
       echo $&lt;

   # omake demo (on a Unix system)
   a/b
   # omake demo (on a Win32 system)
   a\b
</pre><p>Sometimes you may wish that target strings to be passed literally to the commands in the rule.
One way to do this is to specify them literally.</p><pre class="verbatim">    SRC = a/b $(absname c/d)
    demo: $(SRC)
        echo $(SRC)

    # omake demo (on a Win32 system)
    a/b c:\...\c\d
</pre><p>Alternately, you might wish that filenames be automatically expanded to absolute pathnames. For
example, this might be useful when parsing the OMake output to look for errors. For this, you can
use the <code>--absname</code> option (Section&#XA0;<a href="#option%3A--absname">A.3.20</a>). If you call <code>omake</code> with the
<code>--absname</code> option, all filenames will be expanded to absolute names.</p><pre class="verbatim">    # omake --absname demo (on a Unix system)
    /home/.../a/b /home/.../c/d
</pre><p>Alternately, the <code>--absname</code> option is scoped. If you want to use it for only a few rules, you
can use the <a href="#fun%3AOMakeFlags"><CODE>OMakeFlags</CODE> function</a> to control how it is applied.</p><pre class="verbatim">   section
      OMakeFlags(--absname)
      demo: a
          echo $&lt;

   # omake demo
   /home/.../a
</pre><p><span class="c004">N.B.</span> The <code>--absname</code> option is currently an experimental feature.</p>
<!--TOC chapter id="sec104" Base library-->
<h1 class="chapter" id="sec104">Chapter&#XA0;9&#XA0;&#XA0;Base library</h1><!--SEC END --><p>
<a id="chapter:base"></a>
</p><!--NAME omake-base.html-->

<!--TOC section id="sec105" Builtin variables-->
<h2 class="section" id="sec105">9.1&#XA0;&#XA0;Builtin variables</h2><!--SEC END -->
<!--TOC paragraph id="sec106" OMAKE_VERSION-->
<h5 class="paragraph" id="sec106">OMAKE_VERSION</h5><!--SEC END --><p><a id="var:OMAKE_VERSION"></a><a id="hevea_default67"></a><a id="hevea_var5"></a>
Version of OMake.
</p>
<!--TOC paragraph id="sec107" STDLIB-->
<h5 class="paragraph" id="sec107">STDLIB</h5><!--SEC END --><p><a id="var:STDLIB"></a><a id="hevea_default68"></a><a id="hevea_var6"></a>
The directory where the OMake standard library files reside. At startup, the default
value is determined as follows.
</p><ul class="itemize"><li class="li-itemize">
The value of the <code>OMAKELIB</code> environment variable, if set (must contain
an absolute path, if set), otherwise
</li><li class="li-itemize">On Windows, the registry keys <code>HKEY_CURRENT_USER\SOFTWARE\MetaPRL\OMake\OMAKELIB</code> and
<code>HKEY_LOCAL_MACHINE\SOFTWARE\MetaPRL\OMake\OMAKELIB</code> are looked up and the value is used,
if exist.
</li><li class="li-itemize">Otherwise a compile-time default it used.
</li></ul><p>
The current default value may be accessed by running <code>omake --version</code>
</p>
<!--TOC paragraph id="sec108" OMAKEPATH-->
<h5 class="paragraph" id="sec108">OMAKEPATH</h5><!--SEC END --><p><a id="var:OMAKEPATH"></a><a id="hevea_default69"></a><a id="hevea_var7"></a>
An array of directories specifying the lookup path for the <code>include</code> and <code>open</code> directives (see
Section&#XA0;<a href="#section%3Ainclude">4.8</a>).
The default value is an array of two elements &#X2014; <code>.</code> and <code>$(STDLIB)</code>.
</p>
<!--TOC paragraph id="sec109" OSTYPE-->
<h5 class="paragraph" id="sec109">OSTYPE</h5><!--SEC END --><p><a id="var:OSTYPE"></a><a id="hevea_default70"></a><a id="hevea_var8"></a>
Set to the machine architecture <span class="c001">omake</span> is running on. Possible values are
<code>Unix</code> (for all Unix versions, including Linux and Mac OS X), <code>Win32</code>
(for MS-Windows, OMake compiled with MSVC++ or Mingw), and <code>Cygwin</code> (for
MS-Windows, OMake compiled with Cygwin).
</p>
<!--TOC paragraph id="sec110" SYSNAME-->
<h5 class="paragraph" id="sec110">SYSNAME</h5><!--SEC END --><p><a id="var:SYSNAME"></a><a id="hevea_default71"></a><a id="hevea_var9"></a>
The name of the operating system for the current machine.
</p>
<!--TOC paragraph id="sec111" NODENAME-->
<h5 class="paragraph" id="sec111">NODENAME</h5><!--SEC END --><p><a id="var:NODENAME"></a><a id="hevea_default72"></a><a id="hevea_var10"></a>
The hostname of the current machine.
</p>
<!--TOC paragraph id="sec112" OS_VERSION-->
<h5 class="paragraph" id="sec112">OS_VERSION</h5><!--SEC END --><p><a id="var:OS_VERSION"></a><a id="hevea_default73"></a><a id="hevea_var11"></a>
The operating system release.
</p>
<!--TOC paragraph id="sec113" MACHINE-->
<h5 class="paragraph" id="sec113">MACHINE</h5><!--SEC END --><p><a id="var:MACHINE"></a><a id="hevea_default74"></a><a id="hevea_var12"></a>
The machine architecture, e.g. <code>i386</code>, <code>sparc</code>, etc.
</p>
<!--TOC paragraph id="sec114" HOST-->
<h5 class="paragraph" id="sec114">HOST</h5><!--SEC END --><p><a id="var:HOST"></a><a id="hevea_default75"></a><a id="hevea_var13"></a>
Same as <code>NODENAME</code>.
</p>
<!--TOC paragraph id="sec115" USER-->
<h5 class="paragraph" id="sec115">USER</h5><!--SEC END --><p><a id="var:USER"></a><a id="hevea_default76"></a><a id="hevea_var14"></a>
The login name of the user executing the process.
</p>
<!--TOC paragraph id="sec116" HOME-->
<h5 class="paragraph" id="sec116">HOME</h5><!--SEC END --><p><a id="var:HOME"></a><a id="hevea_default77"></a><a id="hevea_var15"></a>
The home directory of the user executing the process.
</p>
<!--TOC paragraph id="sec117" PID-->
<h5 class="paragraph" id="sec117">PID</h5><!--SEC END --><p><a id="var:PID"></a><a id="hevea_default78"></a><a id="hevea_var16"></a>
The OMake process id.
</p>
<!--TOC paragraph id="sec118" TARGETS-->
<h5 class="paragraph" id="sec118">TARGETS</h5><!--SEC END --><p><a id="var:TARGETS"></a><a id="hevea_default79"></a><a id="hevea_var17"></a>
The command-line target strings. For example, if OMake is invoked with the
following command line,
</p><pre class="verbatim">      omake CFLAGS=1 foo bar.c
</pre><p>then <code>TARGETS</code> is defined as <code>foo bar.c</code>.</p>
<!--TOC paragraph id="sec119" BUILD_SUMMARY-->
<h5 class="paragraph" id="sec119">BUILD_SUMMARY</h5><!--SEC END --><p><a id="var:BUILD_SUMMARY"></a><a id="hevea_default80"></a><a id="hevea_var18"></a>
The <code>BUILD_SUMMARY</code> variable refers to the file that <code>omake</code> uses
to summarize a build (the message that is printed at the very end of a build).
The file is empty when the build starts. If you wish to add additional messages
to the build summary, you can edit/modify this file during the build.</p><p>For example, if you want to point out that some action was taken,
you can append a message to the build summary.</p><pre class="verbatim">   foo: boo
       echo "The file foo was built" &gt;&gt; $(BUILD_SUMMARY)
       ...build foo...
</pre>
<!--TOC paragraph id="sec120" VERBOSE-->
<h5 class="paragraph" id="sec120">VERBOSE</h5><!--SEC END --><p><a id="var:VERBOSE"></a><a id="hevea_default81"></a><a id="hevea_var19"></a>
Whether certain commands should be verbose. A boolean flag that is <code>false</code>
by default and is set to <code>true</code> when OMake is invoked with the
<code>--verbose</code> option.
</p>
<!--TOC section id="sec121" Logic, Boolean functions, and control flow-->
<h2 class="section" id="sec121">9.2&#XA0;&#XA0;Logic, Boolean functions, and control flow</h2><!--SEC END --><p>
<a id="section:logic"></a></p><p>Boolean values in omake are represented by case-insensitive strings. The
<em>false</em> value can be represented by the strings <code>false</code>, <code>no</code>,
<code>nil</code>, <code>undefined</code> or <code>0</code>, and everything else is true.</p>
<!--TOC subsection id="sec122" not-->
<h3 class="subsection" id="sec122">9.2.1&#XA0;&#XA0;not</h3><!--SEC END --><p><a id="fun:not"></a><a id="function:not"></a><a id="hevea_default82"></a><a id="hevea_fun5"></a></p><pre class="verbatim">   $(not e) : String
      e : String
</pre><p>The <code>not</code> function negates a Boolean value.</p><p>For example, <code>$(not false)</code> expands to the string <code>true</code>, and
<code>$(not hello world)</code> expands to <code>false</code>.
</p>
<!--TOC subsection id="sec123" equal-->
<h3 class="subsection" id="sec123">9.2.2&#XA0;&#XA0;equal</h3><!--SEC END --><p><a id="fun:equal"></a><a id="function:equal"></a><a id="hevea_default83"></a><a id="hevea_fun6"></a></p><pre class="verbatim">   $(equal e1, e2) : String
      e1 : String
      e2 : String
</pre><p>The <code>equal</code> function tests for equality of two values.</p><p>For example <code>$(equal a, b)</code> expands to <code>false</code>, and <code>$(equal hello world, hello world)</code> expands to <code>true</code>.
</p>
<!--TOC subsection id="sec124" and-->
<h3 class="subsection" id="sec124">9.2.3&#XA0;&#XA0;and</h3><!--SEC END --><p><a id="fun:and"></a><a id="function:and"></a><a id="hevea_default84"></a><a id="hevea_fun7"></a></p><pre class="verbatim">    $(and e1, ..., en) : String
       e1, ..., en: Sequence
</pre><p>The <code>and</code> function evaluates to the conjunction of its arguments.</p><p>For example, in the following code, <code>X</code> is true, and <code>Y</code> is false.</p><pre class="verbatim">    A = a
    B = b
    X = $(and $(equal $(A), a) true $(equal $(B), b))
    Y = $(and $(equal $(A), a) true $(equal $(A), $(B)))
</pre>
<!--TOC subsection id="sec125" or-->
<h3 class="subsection" id="sec125">9.2.4&#XA0;&#XA0;or</h3><!--SEC END --><p><a id="fun:or"></a><a id="function:or"></a><a id="hevea_default85"></a><a id="hevea_fun8"></a></p><pre class="verbatim">   $(or e1, ..., en) : String
      e1, ..., en: String Sequence
</pre><p>The <code>or</code> function evaluates to the disjunction of its arguments.</p><p>For example, in the following code, <code>X</code> is true, and <code>Y</code> is false.</p><pre class="verbatim">    A = a
    B = b
    X = $(or $(equal $(A), a) false $(equal $(A), $(B)))
    Y = $(or $(equal $(A), $(B)) $(equal $(A), b))
</pre>
<!--TOC subsection id="sec126" if-->
<h3 class="subsection" id="sec126">9.2.5&#XA0;&#XA0;if</h3><!--SEC END --><p><a id="fun:if"></a><a id="function:if"></a><a id="hevea_default86"></a><a id="hevea_fun9"></a><a id="hevea_default87"></a><a id="hevea_default88"></a></p><pre class="verbatim">    $(if e1, e2[, e3]) : value
       e1 : String
       e2, e3 : value
</pre><p>The <code>if</code> function represents a conditional based on a Boolean value.
For example <code>$(if $(equal a, b), c, d)</code> evaluates to <code>d</code>.</p><p>Conditionals may also be declared with an alternate syntax.</p><pre class="verbatim">   if e1
      body1
   elseif e2
      body2
   ...
   else
      bodyn
</pre><p>If the expression <code>e1</code> is not false, then the expressions in <code>body1</code>
are evaluated and the result is returned as the value of the conditional. Otherwise,
if <code>e1</code> evaluates to false, the evaluation continues with the <code>e2</code>
expression. If none of the conditional expressions is true, then the expressions
in <code>bodyn</code> are evaluated and the result is returned as the value
of the conditional.</p><p>There can be any number of <code>elseif</code> clauses; the <code>else</code> clause is
optional.</p><p>Note that each branch of the conditional defines its own scope, so variables
defined in the branches are normally not visible outside the conditional.
The <code>export</code> command may be used to export the variables defined in
a scope. For example, the following expression represents a common idiom
for defining the C compiler configuration.</p><pre class="verbatim">   if $(equal $(OSTYPE), Win32)
      CC = cl
      CFLAGS += /DWIN32
      export
   else
      CC = gcc
      CFLAGS += -g -O2
      export
</pre>
<!--TOC subsection id="sec127" switch, match-->
<h3 class="subsection" id="sec127">9.2.6&#XA0;&#XA0;switch, match</h3><!--SEC END --><p><a id="fun:switch"></a><a id="function:switch"></a><a id="hevea_default89"></a><a id="hevea_fun10"></a><a id="fun:match"></a><a id="function:match"></a><a id="hevea_default90"></a><a id="hevea_fun11"></a><a id="hevea_default91"></a><a id="hevea_default92"></a></p><p>The <code>switch</code> and <code>match</code> functions perform pattern matching.</p><p><code>$(switch &lt;arg&gt;, &lt;pattern_1&gt;, &lt;value_1&gt;, ..., &lt;pattern_n&gt;, &lt;value_n&gt;)</code>
<code>$(match &lt;arg&gt;, &lt;pattern_1&gt;, &lt;value_1&gt;, ..., &lt;pattern_n&gt;, &lt;value_n&gt;)</code></p><p>The number of <code>&lt;pattern&gt;/&lt;value&gt;</code> pairs is arbitrary. They strictly
alternate; the total number of arguments to <code>&lt;match&gt;</code> must be odd.</p><p>The <code>&lt;arg&gt;</code> is evaluated to a string, and compared with <code>&lt;pattern_1&gt;</code>.
If it matches, the result of the expression is <code>&lt;value_1&gt;</code>. Otherwise
evaluation continues with the remaining patterns until a match is found.
If no pattern matches, the value is the empty string.</p><p>The <code>switch</code> function uses string comparison to compare
the argument with the patterns. For example, the following
expression defines the <code>FILE</code> variable to be either
<code>foo</code>, <code>bar</code>, or the empty string, depending
on the value of the <code>OSTYPE</code> variable.</p><pre class="verbatim">    FILE = $(switch $(OSTYPE), Win32, foo, Unix, bar)
</pre><p>The <code>match</code> function uses regular expression patterns (see the
<code>grep</code> function). If a match is found, the variables
<code>$1, $2, ...</code> are bound to the substrings matched between
<code>\(</code> and <code>\)</code> delimiters.
The <code>$0</code> variable contains the entire match, and <code>$*</code>
is an array of the matched substrings.
to the matched substrings.</p><pre class="verbatim">    FILE = $(match foo_xyz/bar.a, foo_\\\(.*\\\)/\\\(.*\\\)\.a, foo_$2/$1.o)
</pre><p>The <code>switch</code> and <code>match</code> functions also have an alternate (more usable)
form.</p><pre class="verbatim">   match e
   case pattern1
      body1
   case pattern2
      body2
   ...
   default
      bodyd
</pre><p>If the value of expression <code>e</code> matches <code>pattern_i</code> and no previous pattern,
then <code>body_i</code> is evaluated and returned as the result of the <code>match</code>.
The <code>switch</code> function uses string comparison; the <code>match</code> function
uses regular expression matching.</p><pre class="verbatim">   match $(FILE)
   case $".*\(\.[^\/.]*\)"
      println(The string $(FILE) has suffix $1)
   default
      println(The string $(FILE) has no suffix)
</pre>
<!--TOC subsection id="sec128" try-->
<h3 class="subsection" id="sec128">9.2.7&#XA0;&#XA0;try</h3><!--SEC END --><p><a id="fun:try"></a><a id="function:try"></a><a id="hevea_default93"></a><a id="hevea_fun12"></a></p><pre class="verbatim">   try
      try-body
   catch class1(v1)
      catch-body
   when expr
      when-body
   ...
   finally
      finally-body
</pre><p>The <code>try</code> form is used for exception handling.
First, the expressions in the <code>try-body</code> are evaluated.</p><p>If evaluation results in a value <code>v</code> without raising an
exception, then the expressions in the <code>finally-body</code>
are evaluated and the value <code>v</code> is returned as the result.</p><p>If evaluation of the <code>try-body</code> results in a exception object <code>obj</code>,
the <code>catch</code> clauses are examined in order. When examining <code>catch</code>
clause <code>catch class(v)</code>, if the exception object <code>obj</code>
is an instance of the class name <code>class</code>, the variable <code>v</code> is bound
to the exception object, and the expressions in the <code>catch-body</code>
are evaluated.</p><p>If a <code>when</code> clause is encountered while a <code>catch</code> body is being evaluated,
the predicate <code>expr</code> is evaluated. If the result is true, evaluation continues
with the expressions in the <code>when-body</code>. Otherwise, the next <code>catch</code>
clause is considered for evaluation.</p><p>If evaluation of a <code>catch-body</code> or <code>when-body</code> completes successfully,
returning a value <code>v</code>, without encountering another <code>when</code> clause,
then the expressions in the <code>finally-body</code>
are evaluated and the value <code>v</code> is returned as the result.</p><p>There can be any number of <code>catch</code> clauses; the <code>finally</code> clause
is optional.
</p>
<!--TOC subsection id="sec129" raise-->
<h3 class="subsection" id="sec129">9.2.8&#XA0;&#XA0;raise</h3><!--SEC END --><p><a id="fun:raise"></a><a id="function:raise"></a><a id="hevea_default94"></a><a id="hevea_fun13"></a></p><pre class="verbatim">   raise exn
      exn : Exception
</pre><p>The <code>raise</code> function raises an exception.
The <code>exn</code> object can be any object. However,
the normal convention is to raise an <a href="#obj%3AException"><CODE>Exception</CODE> object</a>.</p><p>If the exception is never caught, the whole object will be verbosely
printed in the error message. However, if the object is an <code>Exception</code> one
and contains a <code>message</code> field, only that field will be included in the
error message.
</p>
<!--TOC subsection id="sec130" exit-->
<h3 class="subsection" id="sec130">9.2.9&#XA0;&#XA0;exit</h3><!--SEC END --><p><a id="fun:exit"></a><a id="function:exit"></a><a id="hevea_default95"></a><a id="hevea_fun14"></a></p><pre class="verbatim">   exit(code)
      code : Int
</pre><p>The <code>exit</code> function terminates <span class="c001">omake</span> abnormally.</p><p><code>$(exit &lt;code&gt;)</code></p><p>The <code>exit</code> function takes one integer argument, which is exit code.
Non-zero values indicate abnormal termination.
</p>
<!--TOC subsection id="sec131" defined-->
<h3 class="subsection" id="sec131">9.2.10&#XA0;&#XA0;defined</h3><!--SEC END --><p><a id="fun:defined"></a><a id="function:defined"></a><a id="hevea_default96"></a><a id="hevea_fun15"></a></p><pre class="verbatim">   $(defined sequence) : String
      sequence : Sequence
</pre><p>The <code>defined</code> function test whether all the variables in the sequence are
currently defined. For example, the following code defines the <code>X</code> variable
if it is not already defined.</p><pre class="verbatim">    if $(not $(defined X))
       X = a b c
       export
</pre><p>It is acceptable to use qualified names.</p><pre class="verbatim">    $(defined X.a.b)
    $(defined public.X)
</pre>
<!--TOC subsection id="sec132" defined-env-->
<h3 class="subsection" id="sec132">9.2.11&#XA0;&#XA0;defined-env</h3><!--SEC END --><p><a id="fun:defined-env"></a><a id="function:defined-env"></a><a id="hevea_default97"></a><a id="hevea_fun16"></a></p><pre class="verbatim">   $(defined-env sequence) : String
      sequence : String
</pre><p>The <code>defined-env</code> function tests whether a variable is defined
as part of the process environment.</p><p>For example, the following code adds the <code>-g</code> compile
option if the environment variable <code>DEBUG</code> is defined.</p><pre class="verbatim">if $(defined-env DEBUG)
    CFLAGS += -g
    export
</pre>
<!--TOC subsection id="sec133" getenv-->
<h3 class="subsection" id="sec133">9.2.12&#XA0;&#XA0;getenv</h3><!--SEC END --><p><a id="fun:getenv"></a><a id="function:getenv"></a><a id="hevea_default98"></a><a id="hevea_fun17"></a></p><pre class="verbatim">   $(getenv name) : String
   $(getenv name, default) : String
</pre><p>The <code>getenv</code> function gets the value of a variable from
the process environment. The function takes one or two arguments.</p><p>In the single argument form, an exception is raised if the variable
variable is not defined in the environment. In the two-argument form,
the second argument is returned as the result if the value is not
defined.</p><p>For example, the following code defines the variable <code>X</code>
to be a space-separated list of elements of the <code>PATH</code>
environment variable if it is defined, and to <code>/bin /usr/bin</code>
otherwise.</p><pre class="verbatim">    X = $(split $(PATHSEP), $(getenv PATH, /bin:/usr/bin))
</pre><p>You may also use the alternate form.
</p><pre class="verbatim">     getenv(NAME)
         default
</pre>
<!--TOC subsection id="sec134" setenv-->
<h3 class="subsection" id="sec134">9.2.13&#XA0;&#XA0;setenv</h3><!--SEC END --><p><a id="fun:setenv"></a><a id="function:setenv"></a><a id="hevea_default99"></a><a id="hevea_fun18"></a></p><pre class="verbatim">   setenv(name, value)
      name : String
      value : String
</pre><p>The <code>setenv</code> function sets the value of a variable in
the process environment. Environment variables are scoped
like normal variables.</p>
<!--TOC subsection id="sec135" unsetenv-->
<h3 class="subsection" id="sec135">9.2.14&#XA0;&#XA0;unsetenv</h3><!--SEC END --><p><a id="fun:unsetenv"></a><a id="function:unsetenv"></a><a id="hevea_default100"></a><a id="hevea_fun19"></a></p><pre class="verbatim">   unsetenv(names)
      names : String Array
</pre><p>The <code>unsetenv</code> function removes some variable definitions from
the process environment. Environment variables are scoped
like normal variables.</p>
<!--TOC subsection id="sec136" get-registry-->
<h3 class="subsection" id="sec136">9.2.15&#XA0;&#XA0;get-registry</h3><!--SEC END --><p><a id="fun:get-registry"></a><a id="function:get-registry"></a><a id="hevea_default101"></a><a id="hevea_fun20"></a></p><pre class="verbatim">   get-registry(hkey, key, field) : String
   get-registry(hkey, key, field, default) : String
       hkey : String
       key : String
       field : String
</pre><p>The <code>get-registry</code> function retrieves a string value from the
system registry on Win32. On other architectures, there is no
registry.</p><p>The <code>hive</code> (I think that is the right word), indicates which part
of the registry to use. It should be one of the following values.</p><ul class="itemize"><li class="li-itemize">
<code>HKEY_CLASSES_ROOT</code>
</li><li class="li-itemize"><code>HKEY_CURRENT_CONFIG</code>
</li><li class="li-itemize"><code>HKEY_CURRENT_USER</code>
</li><li class="li-itemize"><code>HKEY_LOCAL_MACHINE</code>
</li><li class="li-itemize"><code>HKEY_USERS</code>
</li></ul><p>
Refer to the Microsoft documentation if you want to know what these mean.</p><p>The <code>key</code> is the field you want to get from the registry.
It should have a form like <code>A\B\C</code> (if you use forward slashes, they will
be converted to backslashes). The field is the sub-field of the key.</p><p>In the 4-argument form, the <code>default</code> is returned on failure.
You may also use the alternate form.</p><pre class="verbatim">    get-registry(hkey, key, field)
       default
</pre>
<!--TOC subsection id="sec137" getvar-->
<h3 class="subsection" id="sec137">9.2.16&#XA0;&#XA0;getvar</h3><!--SEC END --><p><a id="fun:getvar"></a><a id="function:getvar"></a><a id="hevea_default102"></a><a id="hevea_fun21"></a></p><pre class="verbatim">   $(getvar name) : String
</pre><p>The <code>getvar</code> function gets the value of a variable.</p><p>An exception is raised if the variable
variable is not defined.</p><p>For example, the following code defines X to be the string abc.</p><pre class="verbatim">    NAME = foo
    foo_1 = abc
    X = $(getvar $(NAME)_1)
</pre><p>It is acceptable to use qualified names.</p><pre class="verbatim">    $(getvar X.a.b)
</pre>
<!--TOC subsection id="sec138" setvar-->
<h3 class="subsection" id="sec138">9.2.17&#XA0;&#XA0;setvar</h3><!--SEC END --><p><a id="fun:setvar"></a><a id="function:setvar"></a><a id="hevea_default103"></a><a id="hevea_fun22"></a></p><pre class="verbatim">   setvar(name, value)
      name : String
      value : String
</pre><p>The <code>setvar</code> function defines a new variable. For example, the
following code defines the variable <code>X</code> to be the string <code>abc</code>.</p><pre class="verbatim">   NAME = X
   setvar($(NAME), abc)
</pre><p>It is acceptable to use qualified names.</p><pre class="verbatim">    setvar(public.X, abc)
</pre>
<!--TOC section id="sec139" Arrays and sequences-->
<h2 class="section" id="sec139">9.3&#XA0;&#XA0;Arrays and sequences</h2><!--SEC END -->
<!--TOC subsection id="sec140" array-->
<h3 class="subsection" id="sec140">9.3.1&#XA0;&#XA0;array</h3><!--SEC END --><p><a id="fun:array"></a><a id="function:array"></a><a id="hevea_default104"></a><a id="hevea_fun23"></a></p><pre class="verbatim">    $(array elements) : Array
       elements : Sequence
</pre><p>The <code>array</code> function creates an array from a sequence.
If the <code>&lt;arg&gt;</code> is a string, the elements of the array
are the whitespace-separated elements of the string, respecting
quotes.</p><p>In addition, array variables can be declared as follows.</p><pre class="verbatim">    A[] =
       &lt;val1&gt;
       ...
       &lt;valn&gt;
</pre><p>In this case, the elements of the array are exactly
<code>&lt;val1&gt;</code>, ..., <code>&lt;valn&gt;</code>, and whitespace is
preserved literally.
</p>
<!--TOC subsection id="sec141" split-->
<h3 class="subsection" id="sec141">9.3.2&#XA0;&#XA0;split</h3><!--SEC END --><p><a id="fun:split"></a><a id="function:split"></a><a id="hevea_default105"></a><a id="hevea_fun24"></a></p><pre class="verbatim">   $(split sep, elements) : Array
      sep : String
      elements : Sequence
</pre><p>The <code>split</code> function takes two arguments, a string of separators, and
a string argument. The result is an array of elements determined by
splitting the elements by all occurrence of the separator in the
<code>elements</code> sequence.</p><p>For example, in the following code, the <code>X</code> variable is
defined to be the array <code>/bin /usr/bin /usr/local/bin</code>.</p><pre class="verbatim">    PATH = /bin:/usr/bin:/usr/local/bin
    X = $(split :, $(PATH))
</pre><p>The <code>sep</code> argument may be omitted. In this case <code>split</code> breaks its
arguments along the white space. Quotations are not split.
</p>
<!--TOC subsection id="sec142" concat-->
<h3 class="subsection" id="sec142">9.3.3&#XA0;&#XA0;concat</h3><!--SEC END --><p><a id="fun:concat"></a><a id="function:concat"></a><a id="hevea_default106"></a><a id="hevea_fun25"></a></p><pre class="verbatim">   $(concat sep, elements) : String
      sep : String
      elements : Sequence
</pre><p>The <code>concat</code> function takes two arguments, a separator string, and
a sequence of elements. The result is a string formed by concatenating
the elements, placing the separator between adjacent elements.</p><p>For example, in the following code, the <code>X</code> variable is
defined to be the string <code>foo_x_bar_x_baz</code>.</p><pre class="verbatim">    X = foo  bar     baz
    Y = $(concat _x_, $(X))
</pre>
<!--TOC subsection id="sec143" length-->
<h3 class="subsection" id="sec143">9.3.4&#XA0;&#XA0;length</h3><!--SEC END --><p><a id="fun:length"></a><a id="function:length"></a><a id="hevea_default107"></a><a id="hevea_fun26"></a></p><pre class="verbatim">   $(length sequence) : Int
      sequence : Sequence
</pre><p>The <code>length</code> function returns the number of elements in its argument.</p><p>For example, the expression <code>$(length a  b "c d")</code> evaluates to 3.
</p>
<!--TOC subsection id="sec144" nth-->
<h3 class="subsection" id="sec144">9.3.5&#XA0;&#XA0;nth</h3><!--SEC END --><p><a id="fun:nth"></a><a id="function:nth"></a><a id="hevea_default108"></a><a id="hevea_fun27"></a></p><pre class="verbatim">   $(nth i, sequence) : value
      i : Int
      sequence : Sequence
   raises RuntimeException
</pre><p>The <code>nth</code> function returns the nth element of its argument, treated as
a list. Counting starts at 0. An exception is raised if the index is not in bounds.</p><p>For example, the expression <code>$(nth 1, a "b c" d)</code> evaluates to <code>"b c"</code>.</p>
<!--TOC subsection id="sec145" replace-nth-->
<h3 class="subsection" id="sec145">9.3.6&#XA0;&#XA0;replace-nth</h3><!--SEC END --><p><a id="fun:replace-nth"></a><a id="function:replace-nth"></a><a id="hevea_default109"></a><a id="hevea_fun28"></a></p><pre class="verbatim">   $(replace-nth i, sequence, x) : value
      i : Int
      sequence : Sequence
      x : value
   raises RuntimeException
</pre><p>The <code>replace-nth</code> function replaces the nth element of its argument with a new
value <code>x</code>. Counting starts at 0. An exception is raised if the index is not in bounds.</p><p>For example, the expression <code>$(replace-nth 1, a "b c" d, x)</code> evaluates to <code>a x d</code>.
</p>
<!--TOC subsection id="sec146" nth-hd-->
<h3 class="subsection" id="sec146">9.3.7&#XA0;&#XA0;nth-hd</h3><!--SEC END --><p><a id="fun:nth-hd"></a><a id="function:nth-hd"></a><a id="hevea_default110"></a><a id="hevea_fun29"></a></p><pre class="verbatim">   $(nth-hd i, sequence) : value
      i : Int
      sequence : Sequence
   raises RuntimeException
</pre><p>The <code>nth-hd</code> function returns the first <code>i</code> elements of
the sequence. An exception is raised if the sequence is not
at least <code>i</code> elements long.</p><p>For example, the expression <code>$(nth-hd 2, a "b c" d)</code> evaluates to <code>a "b c"</code>.</p>
<!--TOC subsection id="sec147" nth-tl-->
<h3 class="subsection" id="sec147">9.3.8&#XA0;&#XA0;nth-tl</h3><!--SEC END --><p><a id="fun:nth-tl"></a><a id="function:nth-tl"></a><a id="hevea_default111"></a><a id="hevea_fun30"></a></p><pre class="verbatim">   $(nth-tl i, sequence) : value
      i : Int
      sequence : Sequence
   raises RuntimeException
</pre><p>The <code>nth-tl</code> function skips <code>i</code> elements of the sequence
and returns the rest. An exception is raised if the sequence is not
at least <code>i</code> elements long.</p><p>For example, the expression <code>$(nth-tl 1, a "b c" d)</code> evaluates to <code>"b c" d</code>.</p>
<!--TOC subsection id="sec148" subrange-->
<h3 class="subsection" id="sec148">9.3.9&#XA0;&#XA0;subrange</h3><!--SEC END --><p><a id="fun:subrange"></a><a id="function:subrange"></a><a id="hevea_default112"></a><a id="hevea_fun31"></a></p><pre class="verbatim">   $(subrange off, len, sequence) : value
      off : Int
      len : Int
      sequence : Sequence
   raises RuntimeException
</pre><p>The <code>subrange</code> function returns a subrange of the sequence.
Counting starts at 0. An exception is raised if the specified
range is not in bounds.</p><p>For example, the expression <code>$(subrange 1, 2, a "b c" d e)</code> evaluates to <code>"b c" d</code>.
</p>
<!--TOC subsection id="sec149" rev-->
<h3 class="subsection" id="sec149">9.3.10&#XA0;&#XA0;rev</h3><!--SEC END --><p><a id="fun:rev"></a><a id="function:rev"></a><a id="hevea_default113"></a><a id="hevea_fun32"></a></p><pre class="verbatim">    $(rev sequence) : Sequence
       sequence : Sequence
</pre><p>The <code>rev</code> function returns the elements of a sequence in reverse order.
For example, the expression <code>$(rev a "b c" d)</code> evaluates to <code>d "b c" a</code>.
</p>
<!--TOC subsection id="sec150" join-->
<h3 class="subsection" id="sec150">9.3.11&#XA0;&#XA0;join</h3><!--SEC END --><p><a id="fun:join"></a><a id="function:join"></a><a id="hevea_default114"></a><a id="hevea_fun33"></a></p><pre class="verbatim">   $(join sequence1, sequence2) : Sequence
      sequence1 : Sequence
      sequence2 : Sequence
</pre><p>The <code>join</code> function joins together the elements of the two sequences. For example,
<code>$(join a b c, .c .cpp .h)</code> evaluates to <code>a.c b.cpp c.h</code>. If the two input
sequences have different lengths, the remainder of the longer sequence is copied at the end
of the output unmodified.
</p>
<!--TOC subsection id="sec151" string-->
<h3 class="subsection" id="sec151">9.3.12&#XA0;&#XA0;string</h3><!--SEC END --><p><a id="fun:string"></a><a id="function:string"></a><a id="hevea_default115"></a><a id="hevea_fun34"></a></p><pre class="verbatim">   $(string sequence) : String
      sequence : Sequence
</pre><p>The <code>string</code> function flattens a sequence into a single string.
This is similar to the <code>concat</code> function, but the elements are
separated by whitespace. The result is treated as a unit; whitespace
is significant.
</p>
<!--TOC subsection id="sec152" string-length-->
<h3 class="subsection" id="sec152">9.3.13&#XA0;&#XA0;string-length</h3><!--SEC END --><p><a id="fun:string-length"></a><a id="function:string-length"></a><a id="hevea_default116"></a><a id="hevea_fun35"></a></p><pre class="verbatim">   $(string-length sequence) : Int
      sequence : Sequence
</pre><p>The <code>string-lenght</code> returns a length (number of characters) in
its argument. If the argument is a sequence, it flattens it, so <code>$(string-length sequence)</code>
is equivalent to <code>$(string-length $(string sequence))</code>.
</p>
<!--TOC subsection id="sec153" string-escaped, ocaml-escaped, html-escaped, html-pre-escaped-->
<h3 class="subsection" id="sec153">9.3.14&#XA0;&#XA0;string-escaped, ocaml-escaped, html-escaped, html-pre-escaped</h3><!--SEC END --><p><a id="fun:string-escaped"></a><a id="function:string-escaped"></a><a id="hevea_default117"></a><a id="hevea_fun36"></a><a id="fun:ocaml-escaped"></a><a id="function:ocaml-escaped"></a><a id="hevea_default118"></a><a id="hevea_fun37"></a><a id="fun:html-escaped"></a><a id="function:html-escaped"></a><a id="hevea_default119"></a><a id="hevea_fun38"></a><a id="fun:html-pre-escaped"></a><a id="function:html-pre-escaped"></a><a id="hevea_default120"></a><a id="hevea_fun39"></a>
</p>
<!--TOC subsection id="sec154" c-escaped, id-escaped, sql-escaped, uri-escaped-->
<h3 class="subsection" id="sec154">9.3.15&#XA0;&#XA0;c-escaped, id-escaped, sql-escaped, uri-escaped</h3><!--SEC END --><p><a id="fun:c-escaped"></a><a id="function:c-escaped"></a><a id="hevea_default121"></a><a id="hevea_fun40"></a><a id="fun:id-escaped"></a><a id="function:id-escaped"></a><a id="hevea_default122"></a><a id="hevea_fun41"></a><a id="fun:sql-escaped"></a><a id="function:sql-escaped"></a><a id="hevea_default123"></a><a id="hevea_fun42"></a><a id="fun:uri-escaped"></a><a id="function:uri-escaped"></a><a id="hevea_default124"></a><a id="hevea_fun43"></a></p><pre class="verbatim">   $(string-escaped sequence) : String Array
   $(ocaml-escaped sequence) : String Array
   $(html-escaped sequence) : String Array
   $(html-pre-escaped sequence) : String Array
   $(c-escaped sequence) : String Array
   $(id-escaped sequence) : StringArray
   $(sql-escaped sequence) : StringArray
   $(uri-escaped sequence) : StringArray
      sequence : Array
</pre><p>The <code>string-escaped</code> function converts each element of its
argument to a string, escaping it, if it contains symbols that are
special to OMake.
The special characters include <code>:()\,$'"#</code> and whitespace.
This function can be used in scanner rules to escape file names before
printing then to <code>stdout</code>.</p><p>The <code>ocaml-escaped</code> function converts each element of its
argument to a string, escaping characters that are special to OCaml.</p><p>The <code>c-escaped</code> function converts a string to a form that
can be used as a string constant in C.</p><p>The <code>id-escaped</code> function turns a string into an identifier that
may be used in OMake.</p><p>The <code>html-escaped</code> function turns a literal string into a form acceptable
as HTML. The <code>html-pre-escaped</code> function is similar, but it does not
translate newlines into <code>&lt;br&gt;</code>.</p><pre class="verbatim">    println($(string $(string-escaped $"a b" $"y:z")))
    a\ b y\:z
</pre>
<!--TOC subsection id="sec155" hexify, unhexify-->
<h3 class="subsection" id="sec155">9.3.16&#XA0;&#XA0;hexify, unhexify</h3><!--SEC END --><p><a id="fun:hexify"></a><a id="function:hexify"></a><a id="hevea_default125"></a><a id="hevea_fun44"></a><a id="fun:unhexify"></a><a id="function:unhexify"></a><a id="hevea_default126"></a><a id="hevea_fun45"></a></p><pre class="verbatim">   $(hexify sequence) : sequence
       sequence : Sequence
</pre><p>The function <code>hexify</code> converts a string to a HEX ASCII representation.
The inverse function is <code>unhexify</code>.</p><pre class="verbatim">   osh&gt; hexify($"Hello world")
   - : &lt;array &lt;data "48656c6c6f"&gt; &lt;data "776f726c64"&gt;&gt;
</pre>
<!--TOC subsection id="sec156" decode-uri, encode-uri-->
<h3 class="subsection" id="sec156">9.3.17&#XA0;&#XA0;decode-uri, encode-uri</h3><!--SEC END --><p><a id="fun:decode-uri"></a><a id="function:decode-uri"></a><a id="hevea_default127"></a><a id="hevea_fun46"></a><a id="fun:encode-uri"></a><a id="function:encode-uri"></a><a id="hevea_default128"></a><a id="hevea_fun47"></a></p><pre class="verbatim">    $(decode-uri sequence) : sequence
        sequence : Sequence
</pre><p>These two functions perform URI encoding, where special characters
are represented by hexadecimal characters.</p><pre class="verbatim">    osh&gt; s = $(encode-uri $'a b~c')
    "a+b%7ec"
    osh&gt; decode-uri($s)
    "a b~c"
</pre>
<!--TOC subsection id="sec157" quote-->
<h3 class="subsection" id="sec157">9.3.18&#XA0;&#XA0;quote</h3><!--SEC END --><p><a id="fun:quote"></a><a id="function:quote"></a><a id="hevea_default129"></a><a id="hevea_fun48"></a></p><pre class="verbatim">   $(quote sequence) : String
      sequence : Sequence
</pre><p>The <code>quote</code> function flattens a sequence into a single string
and adds quotes around the string. Inner quotation symbols are
escaped.</p><p>For example, the expression <code>$(quote a "b c" d)</code> evaluates
to <code>"a \"b c\" d"</code>, and <code>$(quote abc)</code> evaluates to
<code>"abc"</code>.
</p>
<!--TOC subsection id="sec158" quote-argv-->
<h3 class="subsection" id="sec158">9.3.19&#XA0;&#XA0;quote-argv</h3><!--SEC END --><p><a id="fun:quote-argv"></a><a id="function:quote-argv"></a><a id="hevea_default130"></a><a id="hevea_fun49"></a></p><pre class="verbatim">   $(quote-argv sequence) : String
      sequence : Sequence
</pre><p>The <code>quote-argv</code> function flattens a sequence into a single string,
and adds quotes around the string. The quotation is formed so that
a command-line parse can separate the string back into its components.
</p>
<!--TOC subsection id="sec159" html-string-->
<h3 class="subsection" id="sec159">9.3.20&#XA0;&#XA0;html-string</h3><!--SEC END --><p><a id="fun:html-string"></a><a id="function:html-string"></a><a id="hevea_default131"></a><a id="hevea_fun50"></a></p><pre class="verbatim">   $(html-string sequence) : String
      sequence : Sequence
</pre><p>The <code>html-string</code> function flattens a sequence into a single string,
and escapes special HTML characters.
This is similar to the <code>concat</code> function, but the elements are
separated by whitespace. The result is treated as a unit; whitespace
inside sequence elements is preserved literally.
</p>
<!--TOC subsection id="sec160" addsuffix-->
<h3 class="subsection" id="sec160">9.3.21&#XA0;&#XA0;addsuffix</h3><!--SEC END --><p><a id="fun:addsuffix"></a><a id="function:addsuffix"></a><a id="hevea_default132"></a><a id="hevea_fun51"></a></p><pre class="verbatim">   $(addsuffix suffix, sequence) : Array
      suffix : String
      sequence : Sequence
</pre><p>The <code>addsuffix</code> function adds a suffix to each component of sequence.
The number of elements in the array is exactly the same as the number of
elements in the sequence.</p><p>For example, <code>$(addsuffix .c, a b "c d")</code> evaluates to <code>a.c b.c "c d".c</code>.
</p>
<!--TOC subsection id="sec161" mapsuffix-->
<h3 class="subsection" id="sec161">9.3.22&#XA0;&#XA0;mapsuffix</h3><!--SEC END --><p><a id="fun:mapsuffix"></a><a id="function:mapsuffix"></a><a id="hevea_default133"></a><a id="hevea_fun52"></a></p><pre class="verbatim">   $(mapsuffix suffix, sequence) : Array
      suffix : value
      sequence : Sequence
</pre><p>The <code>mapsuffix</code> function adds a suffix to each component of sequence.
It is similar to <code>addsuffix</code>, but uses array concatenation instead
of string concatenation. The number of elements in the array is
twice the number of elements in the sequence.</p><p>For example, <code>$(mapsuffix .c, a b "c d")</code> evaluates to <code>a .c b .c "c d" .c</code>.
</p>
<!--TOC subsection id="sec162" addsuffixes, addprefixes-->
<h3 class="subsection" id="sec162">9.3.23&#XA0;&#XA0;addsuffixes, addprefixes</h3><!--SEC END --><p><a id="fun:addsuffixes"></a><a id="function:addsuffixes"></a><a id="hevea_default134"></a><a id="hevea_fun53"></a><a id="fun:addprefixes"></a><a id="function:addprefixes"></a><a id="hevea_default135"></a><a id="hevea_fun54"></a></p><pre class="verbatim">   $(addsuffixes suffixes, sequence) : Array
      suffixes : Sequence
      sequence : Sequence
   $(addprefixes prefixes, sequence) : Array
      prefixes : Sequence
      sequence : Sequence
</pre><p>The <code>addsuffixes</code> function adds all suffixes in its first argument
to each component of a sequence. If <code>suffixes</code> has <code>n</code> elements,
and <code>sequence</code> has <code>m</code> elements, the the result has <code>n * m</code> elements.</p><p>For example, the <code>$(addsuffixes .c .o, a b c)</code> expressions evaluates to
<code>a.c a.o b.c b.o c.o c.a</code>.</p><p><code>$(addprefixes prefixes, sequence)</code> is roughly equivalent to <code>$(addsuffixes sequence, prefixes)</code>.
</p>
<!--TOC subsection id="sec163" removeprefix-->
<h3 class="subsection" id="sec163">9.3.24&#XA0;&#XA0;removeprefix</h3><!--SEC END --><p><a id="fun:removeprefix"></a><a id="function:removeprefix"></a><a id="hevea_default136"></a><a id="hevea_fun55"></a></p><pre class="verbatim">   $(removeprefix prefix, sequence) : Array
      prefix : String
      sequence : Array
</pre><p>The <code>removeprefix</code> function removes a prefix from each component
of a sequence.
</p>
<!--TOC subsection id="sec164" removesuffix-->
<h3 class="subsection" id="sec164">9.3.25&#XA0;&#XA0;removesuffix</h3><!--SEC END --><p><a id="fun:removesuffix"></a><a id="function:removesuffix"></a><a id="hevea_default137"></a><a id="hevea_fun56"></a></p><pre class="verbatim">   $(removesuffix sequence) : Array
      sequence : String
</pre><p>The <code>removesuffix</code> function removes the suffixes from each component
of a sequence.</p><p>For example, <code>$(removesuffix a.c b.foo "c d")</code> expands to <code>a b "c d"</code>.
</p>
<!--TOC subsection id="sec165" replacesuffixes-->
<h3 class="subsection" id="sec165">9.3.26&#XA0;&#XA0;replacesuffixes</h3><!--SEC END --><p><a id="fun:replacesuffixes"></a><a id="function:replacesuffixes"></a><a id="hevea_default138"></a><a id="hevea_fun57"></a></p><pre class="verbatim">   $(replacesuffixes old-suffixes, new-suffixes, sequence) : Array
      old-suffixes : Sequence
      new-suffixes : Sequence
      sequence : Sequence
</pre><p>The <code>replacesuffixes</code> function modifies the suffix of each component
in sequence. The <code>old-suffixes</code> and <code>new-suffixes</code> sequences
should have the same length.</p><p>For example, <code>$(replacesuffixes .h .c, .o .o, a.c b.h c.z)</code> expands to <code>a.o b.o c.z</code>.
</p>
<!--TOC subsection id="sec166" addprefix-->
<h3 class="subsection" id="sec166">9.3.27&#XA0;&#XA0;addprefix</h3><!--SEC END --><p><a id="fun:addprefix"></a><a id="function:addprefix"></a><a id="hevea_default139"></a><a id="hevea_fun58"></a></p><pre class="verbatim">   $(addprefix prefix, sequence) : Array
      prefix : String
      sequence : Sequence
</pre><p>The <code>addprefix</code> function adds a prefix to each component of a sequence.
The number of element in the result array is exactly the same as the number
of elements in the argument sequence.</p><p>For example, <code>$(addprefix foo/, a b "c d")</code> evaluates to <code>foo/a foo/b foo/"c d"</code>.
</p>
<!--TOC subsection id="sec167" mapprefix-->
<h3 class="subsection" id="sec167">9.3.28&#XA0;&#XA0;mapprefix</h3><!--SEC END --><p><a id="fun:mapprefix"></a><a id="function:mapprefix"></a><a id="hevea_default140"></a><a id="hevea_fun59"></a></p><pre class="verbatim">   $(mapprefix prefix, sequence) : Array
      prefix : String
      sequence : Sequence
</pre><p>The <code>mapprefix</code> function adds a prefix to each component of a sequence.
It is similar to <code>addprefix</code>, but array concatenation is used instead of
string concatenation. The result array contains twice as many elements
as the argument sequence.</p><p>For example, <code>$(mapprefix foo, a b "c d")</code> expands to <code>foo a foo b foo "c d"</code>.
</p>
<!--TOC subsection id="sec168" add-wrapper-->
<h3 class="subsection" id="sec168">9.3.29&#XA0;&#XA0;add-wrapper</h3><!--SEC END --><p><a id="fun:add-wrapper"></a><a id="function:add-wrapper"></a><a id="hevea_default141"></a><a id="hevea_fun60"></a></p><pre class="verbatim">   $(add-wrapper prefix, suffix, sequence) : Array
      prefix : String
      suffix : String
      sequence : Sequence
</pre><p>The <code>add-wrapper</code> functions adds both a prefix and a suffix to each component of a sequence.
For example, the expression <code>$(add-wrapper dir/, .c, a b)</code> evaluates to
<code>dir/a.c dir/b.c</code>. String concatenation is used. The array result
has the same number of elements as the argument sequence.
</p>
<!--TOC subsection id="sec169" set-->
<h3 class="subsection" id="sec169">9.3.30&#XA0;&#XA0;set</h3><!--SEC END --><p><a id="fun:set"></a><a id="function:set"></a><a id="hevea_default142"></a><a id="hevea_fun61"></a></p><pre class="verbatim">   $(set sequence) : Array
      sequence : Sequence
</pre><p>The <code>set</code> function sorts a set of string components, eliminating duplicates.</p><p>For example, <code>$(set z y z "m n" w a)</code> expands to <code>"m n" a w y z</code>.
</p>
<!--TOC subsection id="sec170" mem-->
<h3 class="subsection" id="sec170">9.3.31&#XA0;&#XA0;mem</h3><!--SEC END --><p><a id="fun:mem"></a><a id="function:mem"></a><a id="hevea_default143"></a><a id="hevea_fun62"></a></p><pre class="verbatim">   $(mem elem, sequence) : Boolean
      elem : String
      sequence : Sequence
</pre><p>The <code>mem</code> function tests for membership in a sequence.</p><p>For example, <code>$(mem "m n", y z "m n" w a)</code> evaluates to <code>true</code>,
while <code>$(mem m n, y z "m n" w a)</code> evaluates to <code>false</code>.
</p>
<!--TOC subsection id="sec171" intersection-->
<h3 class="subsection" id="sec171">9.3.32&#XA0;&#XA0;intersection</h3><!--SEC END --><p><a id="fun:intersection"></a><a id="function:intersection"></a><a id="hevea_default144"></a><a id="hevea_fun63"></a></p><pre class="verbatim">   $(intersection sequence1, sequence2) : Array
      sequence1 : Sequence
      sequence2 : Sequence
</pre><p>The <code>intersection</code> function takes two arguments, treats them
as sets of strings, and computes their intersection. The order of the result
is undefined, and it may contain duplicates. Use the <code>set</code>
function to sort the result and eliminate duplicates in the result
if desired.</p><p>For example, the expression <code>$(intersection c a b a, b a)</code> evaluates to
<code>a b a</code>.
</p>
<!--TOC subsection id="sec172" intersects-->
<h3 class="subsection" id="sec172">9.3.33&#XA0;&#XA0;intersects</h3><!--SEC END --><p><a id="fun:intersects"></a><a id="function:intersects"></a><a id="hevea_default145"></a><a id="hevea_fun64"></a></p><pre class="verbatim">   $(intersects sequence1, sequence2) : Boolean
      sequence1 : Sequence
      sequence2 : Sequence
</pre><p>The <code>intersects</code> function tests whether two sets have a non-empty intersection.
This is slightly more efficient than computing the intersection and testing whether
it is empty.</p><p>For example, the expression <code>$(intersects a b c, d c e)</code> evaluates to <code>true</code>,
and <code>$(intersects a b c a, d e f)</code> evaluates to <code>false</code>.
</p>
<!--TOC subsection id="sec173" set-diff-->
<h3 class="subsection" id="sec173">9.3.34&#XA0;&#XA0;set-diff</h3><!--SEC END --><p><a id="fun:set-diff"></a><a id="function:set-diff"></a><a id="hevea_default146"></a><a id="hevea_fun65"></a></p><pre class="verbatim">   $(set-diff sequence1, sequence2) : Array
      sequence1 : Sequence
      sequence2 : Sequence
</pre><p>The <code>set-diff</code> function takes two arguments, treats them
as sets of strings, and computes their difference (all the elements of the
first set that are not present in the second one). The order of the result
is undefined and it may contain duplicates. Use the <code>set</code>
function to sort the result and eliminate duplicates in the result
if desired.</p><p>For example, the expression <code>$(set-diff c a b a e, b a)</code> evaluates to
<code>c e</code>.
</p>
<!--TOC subsection id="sec174" filter-->
<h3 class="subsection" id="sec174">9.3.35&#XA0;&#XA0;filter</h3><!--SEC END --><p><a id="fun:filter"></a><a id="function:filter"></a><a id="hevea_default147"></a><a id="hevea_fun66"></a></p><pre class="verbatim">   $(filter patterns, sequence) : Array
      patterns : Sequence
      sequence : Sequence
</pre><p>The <code>filter</code> function picks elements from a sequence.
The patterns is a non-empty sequence of patterns, each may contain one occurrence of the wildcard
<code>%</code> character.</p><p>For example <code>$(filter %.h %.o, a.c x.o b.h y.o "hello world".c)</code> evaluates to <code>x.o b.h y.o</code>.
</p>
<!--TOC subsection id="sec175" filter-out-->
<h3 class="subsection" id="sec175">9.3.36&#XA0;&#XA0;filter-out</h3><!--SEC END --><p><a id="fun:filter-out"></a><a id="function:filter-out"></a><a id="hevea_default148"></a><a id="hevea_fun67"></a></p><pre class="verbatim">   $(filter-out patterns, sequence) : Array
      patterns : Sequence
      sequence : Sequence
</pre><p>The <code>filter-out</code> function removes elements from a sequence.
The patterns is a non-empty sequence of patterns, each may contain one occurrence of the wildcard
<code>%</code> character.</p><p>For example <code>$(filter-out %.c %.h, a.c x.o b.h y.o "hello world".c)</code> evaluates to <code>x.o y.o</code>.
</p>
<!--TOC subsection id="sec176" capitalize-->
<h3 class="subsection" id="sec176">9.3.37&#XA0;&#XA0;capitalize</h3><!--SEC END --><p><a id="fun:capitalize"></a><a id="function:capitalize"></a><a id="hevea_default149"></a><a id="hevea_fun68"></a></p><pre class="verbatim">   $(capitalize sequence) : Array
      sequence : Sequence
</pre><p>The <code>capitalize</code> function capitalizes each word in a sequence.
For example, <code>$(capitalize through the looking Glass)</code> evaluates to
<code>Through The Looking Glass</code>.
</p>
<!--TOC subsection id="sec177" uncapitalize-->
<h3 class="subsection" id="sec177">9.3.38&#XA0;&#XA0;uncapitalize</h3><!--SEC END --><p><a id="fun:uncapitalize"></a><a id="function:uncapitalize"></a><a id="hevea_default150"></a><a id="hevea_fun69"></a></p><pre class="verbatim">   $(uncapitalize sequence) : Array
      sequence : Sequence
</pre><p>The <code>uncapitalize</code> function uncapitalizes each word in its argument.</p><p>For example, <code>$(uncapitalize through the looking Glass)</code> evaluates to
<code>through the looking glass</code>.
</p>
<!--TOC subsection id="sec178" uppercase-->
<h3 class="subsection" id="sec178">9.3.39&#XA0;&#XA0;uppercase</h3><!--SEC END --><p><a id="fun:uppercase"></a><a id="function:uppercase"></a><a id="hevea_default151"></a><a id="hevea_fun70"></a></p><pre class="verbatim">   $(uppercase sequence) : Array
      sequence : Sequence
</pre><p>The <code>uppercase</code> function converts each word in a sequence to uppercase.
For example, <code>$(uppercase through the looking Glass)</code> evaluates to
<code>THROUGH THE LOOKING GLASS</code>.
</p>
<!--TOC subsection id="sec179" lowercase-->
<h3 class="subsection" id="sec179">9.3.40&#XA0;&#XA0;lowercase</h3><!--SEC END --><p><a id="fun:lowercase"></a><a id="function:lowercase"></a><a id="hevea_default152"></a><a id="hevea_fun71"></a></p><pre class="verbatim">   $(lowercase sequence) : Array
      sequence : Sequence
</pre><p>The <code>lowercase</code> function reduces each word in its argument to lowercase.</p><p>For example, <code>$(lowercase through tHe looking Glass)</code> evaluates to
<code>through the looking glass</code>.
</p>
<!--TOC subsection id="sec180" system-->
<h3 class="subsection" id="sec180">9.3.41&#XA0;&#XA0;system</h3><!--SEC END --><p><a id="fun:system"></a><a id="function:system"></a><a id="hevea_default153"></a><a id="hevea_fun72"></a></p><pre class="verbatim">   system(s)
      s : Sequence
</pre><p>The <code>system</code> function is used to evaluate a shell expression.
This function is used internally by <span class="c001">omake</span> to evaluate
shell commands.</p><p>For example, the following program is equivalent to the
expression <code>system(ls foo)</code>.</p><pre class="verbatim">   ls foo
</pre>
<!--TOC subsection id="sec181" shell-->
<h3 class="subsection" id="sec181">9.3.42&#XA0;&#XA0;shell</h3><!--SEC END --><p><a id="fun:shell"></a><a id="function:shell"></a><a id="hevea_default154"></a><a id="hevea_fun73"></a></p><pre class="verbatim">   $(shell command) : Array
   $(shella command) : Array
   $(shell-code command) : Int
      command : Sequence
</pre><p>The <code>shell</code> function evaluates a command using the command shell,
and returns the whitespace-separated words of the standard output as the result.</p><p>The <code>shella</code> function acts similarly, but it returns the lines
as separate items in the array.</p><p>The <code>shell-code</code> function returns the exit code. The output is not
diverted.</p><p>For example, if the current directory contains the files <code>OMakeroot</code>,
<code>OMakefile</code>, and <code>hello.c</code>, then <code>$(shell ls)</code> evaluates to
<code>hello.c OMakefile OMakeroot</code> (on a Unix system).
</p>
<!--TOC subsection id="sec182" export-->
<h3 class="subsection" id="sec182">9.3.43&#XA0;&#XA0;export</h3><!--SEC END --><p><a id="fun:export"></a><a id="function:export"></a><a id="hevea_default155"></a><a id="hevea_fun74"></a>
The <code>export</code> function allows one to capture the current environment in a variable.</p><p>For example, the following code:
</p><pre class="verbatim">A = 1
B = 1
C = 1
SAVE_ENV = $(export A B)
A = 2
B = 2
C = 2
export($(SAVE_ENV))
println($A $B $C)
</pre><p>will print <code>1 1 2</code>.</p><p>The arguments to this function are interpreted the exact same way as the arguments to the <code>export</code>
special form (see Section&#XA0;<a href="#section%3Aexport">6.3</a>).
<a id="while"></a>
</p>
<!--TOC subsection id="sec183" while-->
<h3 class="subsection" id="sec183">9.3.44&#XA0;&#XA0;while</h3><!--SEC END --><p><a id="fun:while"></a><a id="function:while"></a><a id="hevea_default156"></a><a id="hevea_fun75"></a></p><pre class="verbatim">   while &lt;test&gt;
      &lt;body&gt;
</pre><p>&#X2013;or&#X2013;</p><pre class="verbatim">    while &lt;test&gt;
    case &lt;test1&gt;
       &lt;body1&gt;
    ...
    case &lt;testn&gt;
       &lt;bodyn&gt;
    default
       &lt;bodyd&gt;
</pre><p>The loop is executed while the test is true.
In the first form, the <code>&lt;body&gt;</code> is executed on every loop iteration.
In the second form, the body <code>&lt;bodyI&gt;</code> is selected, as the first
case where the test <code>&lt;testI&gt;</code> is true. If none apply, the optional
default case is evaluated. If no cases are true, the loop exits.
The environment is automatically exported.</p><p>Examples.</p><p>Iterate for <code>i</code> from <code>0</code> to <code>9</code>.</p><pre class="verbatim">    i = 0
    while $(lt $i, 10)
       echo $i
       i = $(add $i, 1)
</pre><p>The following example is equivalent.</p><pre class="verbatim">   i = 0
   while true
   case $(lt $i, 10)
      echo $i
      i = $(add $i, 1)
</pre><p>The following example is similar, but some special cases are printed.
value is printed.</p><pre class="verbatim">    i = 0
    while $(lt $i, 10)
    case $(equal $i, 0)
       echo zero
       i = $(add $i, 1)
    case $(equal $i, 1)
       echo one
       i = $(add $i, 1)
    default
       echo $i
       i = $(add $i, 1)
</pre><p>The <a href="#fun%3Abreak"><CODE>break</CODE> function</a> can be used to break out of the <code>while</code> loop
early.
<a id="break"></a>
</p>
<!--TOC subsection id="sec184" break-->
<h3 class="subsection" id="sec184">9.3.45&#XA0;&#XA0;break</h3><!--SEC END --><p><a id="fun:break"></a><a id="function:break"></a><a id="hevea_default157"></a><a id="hevea_fun76"></a></p><pre class="verbatim">   break
</pre><p>Terminate execution of the innermost loop, returning the current state.
</p>
<!--TOC subsection id="sec185" random, random-init-->
<h3 class="subsection" id="sec185">9.3.46&#XA0;&#XA0;random, random-init</h3><!--SEC END --><p><a id="fun:random"></a><a id="function:random"></a><a id="hevea_default158"></a><a id="hevea_fun77"></a><a id="fun:random-init"></a><a id="function:random-init"></a><a id="hevea_default159"></a><a id="hevea_fun78"></a></p><pre class="verbatim">    random-init(i)
        i : Int
    random() : Int
</pre><p>Produce a random number. The numbers are pseudo-random,
and are not cryptographically secure.</p><p>The generator is initialized from semi-random system data.
Subsequent runs should produce different results.
The <code>rando-init</code> function can be used to return
the generator to a known state.
</p>
<!--TOC section id="sec186" Arithmetic-->
<h2 class="section" id="sec186">9.4&#XA0;&#XA0;Arithmetic</h2><!--SEC END -->
<!--TOC subsection id="sec187" int-->
<h3 class="subsection" id="sec187">9.4.1&#XA0;&#XA0;int</h3><!--SEC END --><p><a id="fun:int"></a><a id="function:int"></a><a id="hevea_default160"></a><a id="hevea_fun79"></a></p><p>The <code>int</code> function can be used to create integers.
It returns an <code>Int</code> object.</p><p><code>$(int 17)</code>.</p>
<!--TOC subsection id="sec188" float-->
<h3 class="subsection" id="sec188">9.4.2&#XA0;&#XA0;float</h3><!--SEC END --><p><a id="fun:float"></a><a id="function:float"></a><a id="hevea_default161"></a><a id="hevea_fun80"></a>
The <code>float</code> function can be used to create floating-point numbers.
It returns a <code>Float</code> object.</p><p><code>$(float 3.1415926)</code>.
</p>
<!--TOC subsection id="sec189" Basic arithmetic-->
<h3 class="subsection" id="sec189">9.4.3&#XA0;&#XA0;Basic arithmetic</h3><!--SEC END --><p>
<a id="fun:neg"></a><a id="function:neg"></a><a id="hevea_default162"></a><a id="hevea_fun81"></a>
<a id="fun:add"></a><a id="function:add"></a><a id="hevea_default163"></a><a id="hevea_fun82"></a>
<a id="fun:sub"></a><a id="function:sub"></a><a id="hevea_default164"></a><a id="hevea_fun83"></a>
<a id="fun:mul"></a><a id="function:mul"></a><a id="hevea_default165"></a><a id="hevea_fun84"></a>
<a id="fun:div"></a><a id="function:div"></a><a id="hevea_default166"></a><a id="hevea_fun85"></a>
<a id="fun:mod"></a><a id="function:mod"></a><a id="hevea_default167"></a><a id="hevea_fun86"></a>
<a id="fun:lnot"></a><a id="function:lnot"></a><a id="hevea_default168"></a><a id="hevea_fun87"></a>
<a id="fun:land"></a><a id="function:land"></a><a id="hevea_default169"></a><a id="hevea_fun88"></a>
<a id="fun:lor"></a><a id="function:lor"></a><a id="hevea_default170"></a><a id="hevea_fun89"></a>
<a id="fun:lxor"></a><a id="function:lxor"></a><a id="hevea_default171"></a><a id="hevea_fun90"></a>
<a id="fun:lsl"></a><a id="function:lsl"></a><a id="hevea_default172"></a><a id="hevea_fun91"></a>
<a id="fun:lsr"></a><a id="function:lsr"></a><a id="hevea_default173"></a><a id="hevea_fun92"></a>
<a id="fun:asr"></a><a id="function:asr"></a><a id="hevea_default174"></a><a id="hevea_fun93"></a>
<a id="fun:min"></a><a id="function:min"></a><a id="hevea_default175"></a><a id="hevea_fun94"></a>
<a id="fun:max"></a><a id="function:max"></a><a id="hevea_default176"></a><a id="hevea_fun95"></a></p><p>The following functions can be used to perform basic arithmetic.</p><ul class="itemize"><li class="li-itemize">
<code>$(neg &lt;numbers&gt;)</code>: arithmetic inverse
</li><li class="li-itemize"><code>$(add &lt;numbers&gt;)</code>: addition.
</li><li class="li-itemize"><code>$(sub &lt;numbers&gt;)</code>: subtraction.
</li><li class="li-itemize"><code>$(mul &lt;numbers&gt;)</code>: multiplication.
</li><li class="li-itemize"><code>$(div &lt;numbers&gt;)</code>: division.
</li><li class="li-itemize"><code>$(mod &lt;numbers&gt;)</code>: remainder.
</li><li class="li-itemize"><code>$(lnot &lt;numbers&gt;)</code>: bitwise inverse.
</li><li class="li-itemize"><code>$(land &lt;numbers&gt;)</code>: bitwise and.
</li><li class="li-itemize"><code>$(lor &lt;numbers&gt;)</code>: bitwise or.
</li><li class="li-itemize"><code>$(lxor &lt;numbers&gt;)</code>: bitwise exclusive-or.
</li><li class="li-itemize"><code>$(lsl &lt;numbers&gt;)</code>: logical shift left.
</li><li class="li-itemize"><code>$(lsr &lt;numbers&gt;)</code>: logical shift right.
</li><li class="li-itemize"><code>$(asr &lt;numbers&gt;)</code>: arithmetic shift right.
</li><li class="li-itemize"><code>$(min &lt;numbers&gt;)</code>: smallest element.
</li><li class="li-itemize"><code>$(max &lt;numbers&gt;)</code>: largest element.
</li></ul>
<!--TOC subsection id="sec190" Comparisons-->
<h3 class="subsection" id="sec190">9.4.4&#XA0;&#XA0;Comparisons</h3><!--SEC END --><p>
<a id="fun:lt"></a><a id="function:lt"></a><a id="hevea_default177"></a><a id="hevea_fun96"></a>
<a id="fun:le"></a><a id="function:le"></a><a id="hevea_default178"></a><a id="hevea_fun97"></a>
<a id="fun:eq"></a><a id="function:eq"></a><a id="hevea_default179"></a><a id="hevea_fun98"></a>
<a id="fun:ge"></a><a id="function:ge"></a><a id="hevea_default180"></a><a id="hevea_fun99"></a>
<a id="fun:gt"></a><a id="function:gt"></a><a id="hevea_default181"></a><a id="hevea_fun100"></a>
<a id="fun:ult"></a><a id="function:ult"></a><a id="hevea_default182"></a><a id="hevea_fun101"></a>
<a id="fun:ule"></a><a id="function:ule"></a><a id="hevea_default183"></a><a id="hevea_fun102"></a>
<a id="fun:uge"></a><a id="function:uge"></a><a id="hevea_default184"></a><a id="hevea_fun103"></a>
<a id="fun:ugt"></a><a id="function:ugt"></a><a id="hevea_default185"></a><a id="hevea_fun104"></a></p><p>The following functions can be used to perform numerical comparisons.</p><ul class="itemize"><li class="li-itemize">
<code>$(lt &lt;numbers&gt;)</code>: less then.
</li><li class="li-itemize"><code>$(le &lt;numbers&gt;)</code>: no more than.
</li><li class="li-itemize"><code>$(eq &lt;numbers&gt;)</code>: equal.
</li><li class="li-itemize"><code>$(ge &lt;numbers&gt;)</code>: no less than.
</li><li class="li-itemize"><code>$(gt &lt;numbers&gt;)</code>: greater than.
</li><li class="li-itemize"><code>$(ult &lt;numbers&gt;)</code>: unsigned less than.
</li><li class="li-itemize"><code>$(ule &lt;numbers&gt;)</code>: unsigned greater than.
</li><li class="li-itemize"><code>$(uge &lt;numbers&gt;)</code>: unsigned greater than or equal.
</li><li class="li-itemize"><code>$(ugt &lt;numbers&gt;)</code>: unsigned greater than.
</li></ul>
<!--TOC section id="sec191" First-class functions-->
<h2 class="section" id="sec191">9.5&#XA0;&#XA0;First-class functions</h2><!--SEC END -->
<!--TOC subsection id="sec192" fun-->
<h3 class="subsection" id="sec192">9.5.1&#XA0;&#XA0;fun</h3><!--SEC END --><p><a id="fun:fun"></a><a id="function:fun"></a><a id="hevea_default186"></a><a id="hevea_fun105"></a></p><p>The <code>fun</code> form introduces anonymous functions.</p><p><code>$(fun &lt;v1&gt;, ..., &lt;vn&gt; =&gt; &lt;body&gt;)</code></p><p>The last argument is the body of the function.
The other arguments are the parameter names.</p><p>The three following definitions are equivalent.</p><pre class="verbatim">    F(X, Y) =
       return($(addsuffix $(Y), $(X)))

    F = $(fun X, Y =&gt; $(addsuffix $(Y), $(X)))

    F =
       fun(X, Y) =&gt;
          value $(addsuffix $(Y), $(X))
</pre>
<!--TOC subsection id="sec193" apply-->
<h3 class="subsection" id="sec193">9.5.2&#XA0;&#XA0;apply</h3><!--SEC END --><p><a id="fun:apply"></a><a id="function:apply"></a><a id="hevea_default187"></a><a id="hevea_fun106"></a></p><p>The <code>apply</code> operator is used to apply a function.</p><p><code>$(apply &lt;fun&gt;, &lt;args&gt;)</code></p><p>Suppose we have the following function definition.</p><pre class="verbatim">    F(X, Y) =
       return($(addsuffix $(Y), $(X)))
</pre><p>The the two expressions below are equivalent.</p><pre class="verbatim">    X = F(a b c, .c)
    X = $(apply $(F), a b c, .c)
</pre><p>The <code>apply</code> form can also be used for partial applications,
where a function is passed fewer arguments than it expects. The
result is a function that takes the remaining arguments,
and calls the function with the full set of arguments.</p><pre class="verbatim">    add2(i, j) =
       add($i, $j)
    succ = $(apply $(add2), 1)
    i = $(succ 5)   # Computes 1+5
</pre>
<!--TOC subsection id="sec194" applya-->
<h3 class="subsection" id="sec194">9.5.3&#XA0;&#XA0;applya</h3><!--SEC END --><p><a id="fun:applya"></a><a id="function:applya"></a><a id="hevea_default188"></a><a id="hevea_fun107"></a></p><p>The <code>applya</code> operator is used to apply a function to
an array of arguments.</p><p><code>$(applya &lt;fun&gt;, &lt;args&gt;)</code></p><p>For example, in the following program, the value
of <code>Z</code> is <code>file.c</code>.</p><pre class="verbatim">    F(X, Y) =
       return($(addsuffix $(Y), $(X)))
    args[] =
       file
       .c
    Z = $(applya $(F), $(args))
</pre><p>The <code>applya</code> form can also be used for partial applications.
</p>
<!--TOC subsection id="sec195" create-map, create-lazy-map-->
<h3 class="subsection" id="sec195">9.5.4&#XA0;&#XA0;create-map, create-lazy-map</h3><!--SEC END --><p><a id="fun:create-map"></a><a id="function:create-map"></a><a id="hevea_default189"></a><a id="hevea_fun108"></a><a id="fun:create-lazy-map"></a><a id="function:create-lazy-map"></a><a id="hevea_default190"></a><a id="hevea_fun109"></a></p><p>The <code>create-map</code> is a simplified form for creating <code>Map</code> objects.
The <code>create-map</code> function takes an even number of arguments that specify
key/value pairs. For example, the following values are equivalent.</p><pre class="verbatim">    X = $(create-map name1, xxx, name2, yyy)

    X. =
        extends $(Map)
        $|name1| = xxx
        $|name2| = yyy
</pre><p>The <code>create-lazy-map</code> function is similar, but the values are computed
lazily. The following two definitions are equivalent.</p><pre class="verbatim">    Y = $(create-lazy-map name1, $(xxx), name2, $(yyy))

    Y. =
        extends $(Map)
        $|name1| = $`(xxx)
        $|name2| = $`(yyy)
</pre><p>The <a href="#fun%3Acreate-lazy-map"><CODE>create-lazy-map</CODE> function</a> is used in rule construction.
</p>
<!--TOC section id="sec196" Iteration and mapping-->
<h2 class="section" id="sec196">9.6&#XA0;&#XA0;Iteration and mapping</h2><!--SEC END -->
<!--TOC subsection id="sec197" foreach-->
<h3 class="subsection" id="sec197">9.6.1&#XA0;&#XA0;foreach</h3><!--SEC END --><p><a id="fun:foreach"></a><a id="function:foreach"></a><a id="hevea_default191"></a><a id="hevea_fun110"></a></p><p>The <code>foreach</code> function maps a function over a sequence.</p><pre class="verbatim">    $(foreach &lt;fun&gt;, &lt;args&gt;)

    foreach(&lt;var&gt; =&gt; ..., &lt;args&gt;)
       &lt;body&gt;
</pre><p>For example, the following program defines the variable <code>X</code>
as an array <code>a.c b.c c.c</code>.</p><pre class="verbatim">    X =
       foreach(x =&gt; ..., a b c)
          value $(x).c

    # Equivalent expression
    X = $(foreach $(fun x =&gt; ..., $(x).c), a b c)
</pre><p>There is also an abbreviated syntax.</p><p>The <code>export</code> form can also be used in a <code>foreach</code>
body. The final value of <code>X</code> is <code>a.c b.c c.c</code>.</p><pre class="verbatim">    X =
    foreach(x =&gt; ..., a b c)
       X += $(x).c
       export
</pre><p>The <a href="#fun%3Abreak"><CODE>break</CODE> function</a> can be used to break out of the loop early.
</p>
<!--TOC section id="sec198" Boolean tests-->
<h2 class="section" id="sec198">9.7&#XA0;&#XA0;Boolean tests</h2><!--SEC END -->
<!--TOC subsection id="sec199" sequence-forall-->
<h3 class="subsection" id="sec199">9.7.1&#XA0;&#XA0;sequence-forall</h3><!--SEC END --><p><a id="fun:sequence-forall"></a><a id="function:sequence-forall"></a><a id="hevea_default192"></a><a id="hevea_fun111"></a></p><p>The <code>forall</code> function tests whether a predicate holds for each
element of a sequence.</p><pre class="verbatim">    $(sequence-forall &lt;fun&gt;, &lt;args&gt;)

    sequence-forall(&lt;var&gt; =&gt; ..., &lt;args&gt;)
       &lt;body&gt;
</pre>
<!--TOC subsection id="sec200" sequence-exists-->
<h3 class="subsection" id="sec200">9.7.2&#XA0;&#XA0;sequence-exists</h3><!--SEC END --><p>The <code>exists</code> function tests whether a predicate holds for
some element of a sequence.</p><pre class="verbatim">    $(sequence-exists &lt;fun&gt;, &lt;args&gt;)

    sequence-exists(&lt;var&gt; =&gt; ..., &lt;args&gt;)
       &lt;body&gt;
</pre>
<!--TOC subsection id="sec201" sequence-sort-->
<h3 class="subsection" id="sec201">9.7.3&#XA0;&#XA0;sequence-sort</h3><!--SEC END --><p><a id="fun:sequence-sort"></a><a id="function:sequence-sort"></a><a id="hevea_default193"></a><a id="hevea_fun112"></a></p><p>The <code>sort</code> function sorts the elements in an array,
given a comparison function. Given two elements (x, y),
the comparison should return a negative number if x &lt; y;
a positive number if x &gt; y; and 0 if x = y.</p><pre class="verbatim">    $(sequence-sort &lt;fun&gt;, &lt;args&gt;)

    sort(&lt;var&gt;, &lt;var&gt; =&gt; ..., &lt;args&gt;)
       &lt;body&gt;
</pre>
<!--TOC subsection id="sec202" compare-->
<h3 class="subsection" id="sec202">9.7.4&#XA0;&#XA0;compare</h3><!--SEC END --><p><a id="fun:compare"></a><a id="function:compare"></a><a id="hevea_default194"></a><a id="hevea_fun113"></a></p><p>The <code>compare</code> function compares two values (x, y) generically
returning a negative number if x &lt; y;
a positive number if x &gt; y; and 0 if x = y.</p><pre class="verbatim">    $(compare x, y) : Int
</pre>
<!--TOC chapter id="sec203" File, I/O and system operations-->
<h1 class="chapter" id="sec203">Chapter&#XA0;10&#XA0;&#XA0;File, I/O and system operations</h1><!--SEC END --><p>
<a id="chapter:system"></a>
</p><!--NAME omake-system.html-->

<!--TOC section id="sec204" File names-->
<h2 class="section" id="sec204">10.1&#XA0;&#XA0;File names</h2><!--SEC END -->
<!--TOC subsection id="sec205" file, dir-->
<h3 class="subsection" id="sec205">10.1.1&#XA0;&#XA0;file, dir</h3><!--SEC END --><p><a id="fun:file"></a><a id="function:file"></a><a id="hevea_default195"></a><a id="hevea_fun114"></a><a id="fun:dir"></a><a id="function:dir"></a><a id="hevea_default196"></a><a id="hevea_fun115"></a></p><pre class="verbatim">   $(file sequence) : File Sequence
      sequence : Sequence
   $(dir sequence) : Dir Sequence
      sequence : Sequence
</pre><p>The <code>file</code> and <code>dir</code> functions define location-independent references to files and directories.
In <span class="c001">omake</span>, the commands to build a target are executed in the target&#X2019;s directory. Since there may be
many directories in an <span class="c001">omake</span> project, the build system provides a way to construct a reference to a file
in one directory, and use it in another without explicitly modifying the file name. The functions have the following
syntax, where the name should refer to a file or directory.</p><p>For example, we can construct a reference to a file <code>foo</code> in the current directory.</p><pre class="verbatim">   FOO = $(file foo)
   .SUBDIRS: bar
</pre><p>If the <code>FOO</code> variable is expanded in the <code>bar</code> subdirectory, it will expand to <code>../foo</code>.</p><p>These commands are often used in the top-level OMakefile to provide location-independent references to
top-level directories, so that build commands may refer to these directories as if they were absolute.</p><pre class="verbatim">   ROOT = $(dir .)
   LIB  = $(dir lib)
   BIN  = $(dir bin)
</pre><p>Once these variables are defined, they can be used in build commands in subdirectories as follows, where
<code>$(BIN)</code> will expand to the location of the <code>bin</code> directory relative to the command being executed.</p><pre class="verbatim">   install: hello
 cp hello $(BIN)
</pre>
<!--TOC subsection id="sec206" tmpfile-->
<h3 class="subsection" id="sec206">10.1.2&#XA0;&#XA0;tmpfile</h3><!--SEC END --><p><a id="fun:tmpfile"></a><a id="function:tmpfile"></a><a id="hevea_default197"></a><a id="hevea_fun116"></a></p><pre class="verbatim">    $(tmpfile prefix) : File
    $(tmpfile prefix, suffix) : File
        prefix : String
        suffix : String
</pre><p>The <code>tmpfile</code> function returns the name of a fresh temporary file in
the temporary directory.
</p>
<!--TOC subsection id="sec207" in-->
<h3 class="subsection" id="sec207">10.1.3&#XA0;&#XA0;in</h3><!--SEC END --><p><a id="fun:in"></a><a id="function:in"></a><a id="hevea_default198"></a><a id="hevea_fun117"></a></p><pre class="verbatim">   $(in dir, exp) : String Array
      dir : Dir
      exp : expression
</pre><p>The <code>in</code> function is closely related to the <code>dir</code> and
<code>file</code> functions. It takes a directory and an expression, and
evaluates the expression in that effective directory.
For example, one common way to install a file is to define a symbol link, where the
value of the link is relative to the directory where the link is created.</p><p>The following commands create links in the <code>$(LIB)</code> directory.</p><pre class="verbatim">    FOO = $(file foo)
    install:
       ln -s $(in $(LIB), $(FOO)) $(LIB)/foo
</pre><p>Note that the <code>in</code> function only affects the expansion of <code>Node</code>
(<code>File</code> and <code>Dir</code>) values.
</p>
<!--TOC subsection id="sec208" basename-->
<h3 class="subsection" id="sec208">10.1.4&#XA0;&#XA0;basename</h3><!--SEC END --><p><a id="fun:basename"></a><a id="function:basename"></a><a id="hevea_default199"></a><a id="hevea_fun118"></a></p><pre class="verbatim">   $(basename files) : String Sequence
      files : String Sequence
</pre><p>The <code>basename</code> function returns the base names for a list of files.
The basename is the filename with any leading directory components removed.</p><p>For example, the expression <code>$(basename dir1/dir2/a.out /etc/modules.conf /foo.ml)</code> evaluates to
<code>a.out modules.conf foo.ml</code>.
</p>
<!--TOC subsection id="sec209" dirname-->
<h3 class="subsection" id="sec209">10.1.5&#XA0;&#XA0;dirname</h3><!--SEC END --><p><a id="fun:dirname"></a><a id="function:dirname"></a><a id="hevea_default200"></a><a id="hevea_fun119"></a></p><pre class="verbatim">   $(dirname files) : String Sequence
      files : String Sequence
</pre><p>The <code>dirname</code> function returns the directory name for a list of files.
The directory name is the filename with the basename removed. If a name
does not have a directory part, the directory is &#X201C;.&#X201D;</p><p>For example, the expression <code>$(dirname dir1\dir2\a.out /etc/modules.conf /foo.ml bar.ml)</code> evaluates to
<code>dir1/dir2 /etc / .</code>.</p><p><span class="c004">Note</span>: this function is different from the <code>dirof</code> function.
The function <code>dirname</code> is simple a function over strings, while
<code>dirof</code> is a function on filenames.
</p>
<!--TOC subsection id="sec210" rootname-->
<h3 class="subsection" id="sec210">10.1.6&#XA0;&#XA0;rootname</h3><!--SEC END --><p><a id="fun:rootname"></a><a id="function:rootname"></a><a id="hevea_default201"></a><a id="hevea_fun120"></a></p><pre class="verbatim">   $(rootname files) : String Sequence
      files : String Sequence
</pre><p>The <code>rootname</code> function returns the root name for a list of files.
The rootname is the filename with the final suffix removed.</p><p>For example, the expression <code>$(rootname dir1/dir2/a.out /etc/a.b.c /foo.ml)</code> evaluates to
<code>dir1/dir2/a /etc/a.b /foo</code>.
</p>
<!--TOC subsection id="sec211" dirof-->
<h3 class="subsection" id="sec211">10.1.7&#XA0;&#XA0;dirof</h3><!--SEC END --><p><a id="fun:dirof"></a><a id="function:dirof"></a><a id="hevea_default202"></a><a id="hevea_fun121"></a></p><pre class="verbatim">   $(dirof files) : Dir Sequence
      files : File Sequence
</pre><p>The <code>dirof</code> function returns the directory for each of the listed files.</p><p>For example, the expression <code>$(dirof dir/dir2/a.out /etc/modules.conf /foo.ml)</code> evaluates
to the directories <code>dir1/dir2 /etc /</code>.
</p>
<!--TOC subsection id="sec212" fullname-->
<h3 class="subsection" id="sec212">10.1.8&#XA0;&#XA0;fullname</h3><!--SEC END --><p><a id="fun:fullname"></a><a id="function:fullname"></a><a id="hevea_default203"></a><a id="hevea_fun122"></a></p><pre class="verbatim">   $(fullname files) : String Sequence
      files : File Sequence
</pre><p>The <code>fullname</code> function returns the pathname relative to the project root
for each of the files or directories.
</p>
<!--TOC subsection id="sec213" absname-->
<h3 class="subsection" id="sec213">10.1.9&#XA0;&#XA0;absname</h3><!--SEC END --><p><a id="fun:absname"></a><a id="function:absname"></a><a id="hevea_default204"></a><a id="hevea_fun123"></a></p><pre class="verbatim">   $(absname files) : String Sequence
      files : File Sequence
</pre><p>The <code>absname</code> function returns the absolute pathname for each of the files
or directories.
</p>
<!--TOC subsection id="sec214" homename-->
<h3 class="subsection" id="sec214">10.1.10&#XA0;&#XA0;homename</h3><!--SEC END --><p><a id="fun:homename"></a><a id="function:homename"></a><a id="hevea_default205"></a><a id="hevea_fun124"></a></p><pre class="verbatim">   $(homename files) : String Sequence
      files : File Sequence
</pre><p>The <code>homename</code> function returns the name of a file in
tilde form, if possible. The unexpanded forms are computed
lazily: the <code>homename</code> function will usually evaluate to an absolute
pathname until the first tilde-expansion for the same directory.
</p>
<!--TOC subsection id="sec215" suffix-->
<h3 class="subsection" id="sec215">10.1.11&#XA0;&#XA0;suffix</h3><!--SEC END --><p><a id="fun:suffix"></a><a id="function:suffix"></a><a id="hevea_default206"></a><a id="hevea_fun125"></a></p><pre class="verbatim">   $(suffix files) : String Sequence
      files : StringSequence
</pre><p>The <code>suffix</code> function returns the suffixes for a list of files.
If a file has no suffix, the function returns the empty string.</p><p>For example, the expression <code>$(suffix dir1/dir2/a.out /etc/a /foo.ml)</code> evaluates
to <code>.out .ml</code>.
</p>
<!--TOC section id="sec216" Path search-->
<h2 class="section" id="sec216">10.2&#XA0;&#XA0;Path search</h2><!--SEC END -->
<!--TOC subsection id="sec217" which-->
<h3 class="subsection" id="sec217">10.2.1&#XA0;&#XA0;which</h3><!--SEC END --><p><a id="fun:which"></a><a id="function:which"></a><a id="hevea_default207"></a><a id="hevea_fun126"></a></p><pre class="verbatim">   $(which files) : File Sequence
      files : String Sequence
</pre><p>The <code>which</code> function searches for executables in the
current command search path, and returns <code>file</code> values
for each of the commands. It is an error if a command is
not found.
</p>
<!--TOC subsection id="sec218" where-->
<h3 class="subsection" id="sec218">10.2.2&#XA0;&#XA0;where</h3><!--SEC END --><p><a id="fun:where"></a><a id="function:where"></a><a id="hevea_default208"></a><a id="hevea_fun127"></a></p><p>The <code>where</code> function is similar to which, except it returns the list of
all the locations of the given executable (in the order in which the
corresponding directories appear in <code>$PATH</code>). In case a command is handled
internally by the <code>Shell</code> object, the first string in the output will
describe the command as a built-in function.</p><pre class="verbatim">    % where echo
    echo is a Shell object method (a built-in function)
    /bin/echo
</pre>
<!--TOC subsection id="sec219" rehash-->
<h3 class="subsection" id="sec219">10.2.3&#XA0;&#XA0;rehash</h3><!--SEC END --><p><a id="fun:rehash"></a><a id="function:rehash"></a><a id="hevea_default209"></a><a id="hevea_fun128"></a></p><pre class="verbatim">    rehash()
</pre><p>The <code>rehash</code> function resets all search paths.
</p>
<!--TOC subsection id="sec220" exists-in-path-->
<h3 class="subsection" id="sec220">10.2.4&#XA0;&#XA0;exists-in-path</h3><!--SEC END --><p><a id="fun:exists-in-path"></a><a id="function:exists-in-path"></a><a id="hevea_default210"></a><a id="hevea_fun129"></a></p><pre class="verbatim">   $(exists-in-path files) : String
      files : String Sequence
</pre><p>The <code>exists-in-path</code> function tests whether all executables
are present in the current search path.
</p>
<!--TOC subsection id="sec221" digest, digest-optional, digest-string-->
<h3 class="subsection" id="sec221">10.2.5&#XA0;&#XA0;digest, digest-optional, digest-string</h3><!--SEC END --><p><a id="fun:digest"></a><a id="function:digest"></a><a id="hevea_default211"></a><a id="hevea_fun130"></a><a id="fun:digest-optional"></a><a id="function:digest-optional"></a><a id="hevea_default212"></a><a id="hevea_fun131"></a><a id="fun:digest-string"></a><a id="function:digest-string"></a><a id="hevea_default213"></a><a id="hevea_fun132"></a></p><pre class="verbatim">     $(digest files) : String Array
        file : File Array
     raises RuntimeException

     $(digest-optional files) : String Array
        file : File Array

     $(digest-string s) : String
        s : String
</pre><p>The <code>digest</code> and <code>digest-optional</code> functions compute MD5 digests
of files. The <code>digest</code> function raises an exception if a file
does no exist. The <code>digest-optional</code> returns <code>false</code> if a
file does no exist. MD5 digests are cached.
</p>
<!--TOC subsection id="sec222" find-in-path, find-in-path-optional-->
<h3 class="subsection" id="sec222">10.2.6&#XA0;&#XA0;find-in-path, find-in-path-optional</h3><!--SEC END --><p><a id="fun:find-in-path"></a><a id="function:find-in-path"></a><a id="hevea_default214"></a><a id="hevea_fun133"></a><a id="fun:find-in-path-optional"></a><a id="function:find-in-path-optional"></a><a id="hevea_default215"></a><a id="hevea_fun134"></a></p><pre class="verbatim">    $(find-in-path path, files) : File Array
       path : Dir Array
       files : String Array
    raises RuntimeException

    $(find-in-path-optional path, files) : File Array
</pre><p>The <code>find-in-path</code> function searches for the files in a search
path. Only the tail of the filename is significant. The <code>find-in-path</code>
function raises an exception if the file can&#X2019;t be found.
The <code>find-in-path-optional</code> function silently removes
files that can&#X2019;t be found.
</p>
<!--TOC subsection id="sec223" digest-in-path, digest-in-path-optional-->
<h3 class="subsection" id="sec223">10.2.7&#XA0;&#XA0;digest-in-path, digest-in-path-optional</h3><!--SEC END --><p><a id="fun:digest-in-path"></a><a id="function:digest-in-path"></a><a id="hevea_default216"></a><a id="hevea_fun135"></a><a id="fun:digest-in-path-optional"></a><a id="function:digest-in-path-optional"></a><a id="hevea_default217"></a><a id="hevea_fun136"></a></p><pre class="verbatim">    $(digest-in-path path, files) : String/File Array
       path : Dir Array
       files : String Array
    raises RuntimeException

    $(digest-in-path-optional path, files) : String/File Array
</pre><p>The <code>digest-in-path</code> function searches for the files in a search
path and returns the file and digest for each file. Only the tail of the
filename is significant. The <code>digest-in-path</code> function raises an exception
if the file can&#X2019;t be found. The <code>digest-in-path-optional</code>
function silently removes elements that can&#X2019;t be found.
</p>
<!--TOC section id="sec224" File stats-->
<h2 class="section" id="sec224">10.3&#XA0;&#XA0;File stats</h2><!--SEC END -->
<!--TOC subsection id="sec225" file-exists, target-exists, target-is-proper-->
<h3 class="subsection" id="sec225">10.3.1&#XA0;&#XA0;file-exists, target-exists, target-is-proper</h3><!--SEC END --><p><a id="fun:file-exists"></a><a id="function:file-exists"></a><a id="hevea_default218"></a><a id="hevea_fun137"></a><a id="fun:target-exists"></a><a id="function:target-exists"></a><a id="hevea_default219"></a><a id="hevea_fun138"></a><a id="fun:target-is-proper"></a><a id="function:target-is-proper"></a><a id="hevea_default220"></a><a id="hevea_fun139"></a></p><pre class="verbatim">   $(file-exists files) : String
   $(target-exists files) : String
   $(target-is-proper files) : String
       files : File Sequence
</pre><p>The <code>file-exists</code> function checks whether the files listed exist.
The <code>target-exists</code> function is similar to the <code>file-exists</code> function.
However, it returns true if the file exists <em>or</em> if it can be built
by the current project. The <code>target-is-proper</code> returns true only
if the file can be generated in the current project.
</p>
<!--TOC subsection id="sec226" stat-reset-->
<h3 class="subsection" id="sec226">10.3.2&#XA0;&#XA0;stat-reset</h3><!--SEC END --><p><a id="fun:stat-reset"></a><a id="function:stat-reset"></a><a id="hevea_default221"></a><a id="hevea_fun140"></a></p><pre class="verbatim">   $(stat-reset files) : String
       files : File Sequence
</pre><p>OMake uses a stat-cache. The <code>stat-reset</code> function reset the <code>stat</code>
information for the given files, forcing the <code>stat</code> information to
be recomputed the next time it is requested.
</p>
<!--TOC subsection id="sec227" filter-exists, filter-targets, filter-proper-targets-->
<h3 class="subsection" id="sec227">10.3.3&#XA0;&#XA0;filter-exists, filter-targets, filter-proper-targets</h3><!--SEC END --><p><a id="fun:filter-exists"></a><a id="function:filter-exists"></a><a id="hevea_default222"></a><a id="hevea_fun141"></a><a id="fun:filter-targets"></a><a id="function:filter-targets"></a><a id="hevea_default223"></a><a id="hevea_fun142"></a><a id="fun:filter-proper-targets"></a><a id="function:filter-proper-targets"></a><a id="hevea_default224"></a><a id="hevea_fun143"></a></p><pre class="verbatim">   $(filter-exists files) : File Sequence
   $(filter-targets files) : File Sequence
   $(filter-proper-targets) : File Sequence
      files : File Sequence
</pre><p>The <code>filter-exists</code>, <code>filter-targets</code>, and <code>filter-proper-targets</code>
functions remove files from a list of files.
</p><ul class="itemize"><li class="li-itemize">
<code>filter-exists</code>: the result is the list of files that exist.
</li><li class="li-itemize"><code>filter-targets</code>: the result is the list of files either exist, or
can be built by the current project.
</li><li class="li-itemize"><code>filter-proper-targets</code>: the result is the list of files that can
be built in the current project.
</li></ul>
<!--TOC paragraph id="sec228" Creating a &#X201C;distclean&#X201D; target-->
<h5 class="paragraph" id="sec228">Creating a &#X201C;distclean&#X201D; target</h5><!--SEC END --><p>
<a id="section:distclean"></a></p><p>One way to create a simple &#X201C;<code>distclean</code>&#X201D; rule that removes generated files from
the project is by removing all files that can be built in the current
project.</p><p><span class="c004">CAUTION:</span> you should be careful before you do this. The rule
removes <em>any</em> file that can <em>potentially</em> be reconstructed.
There is no check to make sure that the commands to rebuild the file
would actually succeed. Also, note that no file outside the
current project will be deleted.</p><pre class="verbatim">    .PHONY: distclean

    distclean:
        rm $(filter-proper-targets $(ls R, .))
</pre><p>If you use CVS, you may wish to utilize the <code>cvs_realclean</code> program that
is distributed with OMake in order to create a &#X201C;<code>distclean</code>&#X201D; rule that would
delete all the files thare are not known to CVS. For example, if you already have a more traditional
&#X201C;<code>clean</code>&#X201D; target defined in your project, and if you want the &#X201C;<code>distclean</code>&#X201D; rule to
be interactive by default, you can write the following:</p><pre class="verbatim">    if $(not $(defined FORCE_REALCLEAN))
        FORCE_REALCLEAN = false
        export

    distclean: clean
        cvs_realclean $(if $(FORCE_REALCLEAN), -f) -i .omakedb -i .omakedb.lock
</pre><p>You can add more files that you want to always keep (such as configuration files) with the -i option.</p><p>Similarly, if you use Subversion, you utilize the <code>build/svn_realclean.om</code> script that comes with OMake:</p><pre class="verbatim">    if $(not $(defined FORCE_REALCLEAN))
        FORCE_REALCLEAN = false
        export

    open build/svn_realclean

    distclean: clean
        svn_realclean $(if $(FORCE_REALCLEAN), -f) -i .omakedb -i .omakedb.lock
</pre><p>See also the <a href="#fun%3Adependencies-proper"><CODE>dependencies-proper</CODE> function</a> for an alternate method for removing intermediate files.
</p>
<!--TOC subsection id="sec229" find-targets-in-path, find-targets-in-path-optional-->
<h3 class="subsection" id="sec229">10.3.4&#XA0;&#XA0;find-targets-in-path, find-targets-in-path-optional</h3><!--SEC END --><p><a id="fun:find-targets-in-path"></a><a id="function:find-targets-in-path"></a><a id="hevea_default225"></a><a id="hevea_fun144"></a><a id="fun:find-targets-in-path-optional"></a><a id="function:find-targets-in-path-optional"></a><a id="hevea_default226"></a><a id="hevea_fun145"></a></p><pre class="verbatim">    $(find-targets-in-path path files) : File Array
    $(find-targets-in-path-optional path, files) : File Array
        path : Dir Array
        files : File Sequence
</pre><p>The <code>find-target-in-path</code> function searches for targets in the
search path. For each file <code>file</code> in the file list, the path is
searched sequentially for a directory <code>dir</code> such that the target
<code>dir/file</code> exists. If so, the file <code>dir/file</code> is returned.</p><p>For example, suppose you are building a C project, and project
contains a subdirectory <code>src/</code> containing only the files
<code>fee.c</code> and <code>foo.c</code>. The following expression
evaluates to the files <code>src/fee.o</code> <code>src/foo.o</code> even
if the files have not already been built.</p><pre class="verbatim">    $(find-targets-in-path lib src, fee.o foo.o)

    # Evaluates to
    src/fee.o src/foo.o
</pre><p>The <code>find-targets-in-path</code>
function raises an exception if the file can&#X2019;t be found.
The <code>find-targets-in-path-optional</code> function silently removes
targets that can&#X2019;t be found.</p><pre class="verbatim">    $(find-targets-in-path-optional lib src, fee.o foo.o fum.o)

    # Evaluates to
    src/fee.o src/foo.o
</pre>
<!--TOC subsection id="sec230" find-ocaml-targets-in-path-optional-->
<h3 class="subsection" id="sec230">10.3.5&#XA0;&#XA0;find-ocaml-targets-in-path-optional</h3><!--SEC END --><p><a id="fun:find-ocaml-targets-in-path-optional"></a><a id="function:find-ocaml-targets-in-path-optional"></a><a id="hevea_default227"></a><a id="hevea_fun146"></a>
The <code>find-ocaml-targets-in-path-optional</code> function is very similar to the
<a href="#fun%3Afind-targets-in-path-optional"><CODE>find-targets-in-path-optional</CODE></a> one, except an OCaml-style search
is used, where for every element of the search path and for every name being
searched for, first the uncapitalized version is tried and if it is not buildable,
then the capitalized version is tried next.
</p>
<!--TOC subsection id="sec231" file-sort-->
<h3 class="subsection" id="sec231">10.3.6&#XA0;&#XA0;file-sort</h3><!--SEC END --><p><a id="fun:file-sort"></a><a id="function:file-sort"></a><a id="hevea_default228"></a><a id="hevea_fun147"></a>
<a id="hevea_default229"></a>
<a id="hevea_default230"></a></p><pre class="verbatim">   $(file-sort order, files) : File Sequence
      order : String
      files : File Sequence
</pre><p><a id="hevea_default231"></a><a id="hevea_target12"></a><a id="target:.ORDER"></a><a id="hevea_default232"></a><a id="hevea_target13"></a><a id="target:.BUILDORDER"></a>The <code>file-sort</code> function sorts a list of filenames by
build order augmented by a set of sort rules. Sort
rules are declared using the <code>.ORDER</code> target.
The <code>.BUILDORDER</code> defines the default order.</p><p><code>$(file-sort &lt;order&gt;, &lt;files&gt;)</code></p><p>For example, suppose we have the following set of rules.</p><pre class="verbatim">   a: b c
   b: d
   c: d

   .DEFAULT: a b c d
      echo $(file-sort .BUILDORDER, a b c d)
</pre><p>In the case, the sorter produces the result <code>d b c a</code>.
That is, a target is sorted <em>after</em> its dependencies.
The sorter is frequently used to sort files that are to be linked
by their dependencies (for languages where this matters).</p><p>There are three important restrictions to the sorter:
</p><ul class="itemize"><li class="li-itemize">
The sorter can be used only within a rule body.
The reason for this is that <em>all</em> dependencies
must be known before the sort is performed.
</li><li class="li-itemize">The sorter can only sort files that are buildable
in the current project.
</li><li class="li-itemize">The sorter will fail if the dependencies are cyclic.
</li></ul>
<!--TOC subsubsection id="sec232" sort rule-->
<h4 class="subsubsection" id="sec232">10.3.6.1&#XA0;&#XA0;sort rule</h4><!--SEC END --><p>It is possible to further constrain the sorter through the use of
sort rules. A sort rule is declared in two steps. The
target must be listed as an <code>.ORDER</code> target; and then
a set of sort rules must be given. A sort rule defines
a pattern constraint.</p><pre class="verbatim">   .ORDER: .MYORDER

   .MYORDER: %.foo: %.bar
   .MYORDER: %.bar: %.baz

   .DEFAULT: a.foo b.bar c.baz d.baz
      echo $(sort .MYORDER, a.foo b.bar c.baz d.baz)
</pre><p>In this example, the <code>.MYORDER</code> sort rule specifies that any
file with a suffix <code>.foo</code> should be placed after any file with
suffix <code>.bar</code>, and any file with suffix <code>.bar</code> should be
placed after a file with suffix <code>.baz</code>.</p><p>In this example, the result of the sort is <code>d.baz c.baz b.bar a.foo</code>.
</p>
<!--TOC subsection id="sec233" file-check-sort-->
<h3 class="subsection" id="sec233">10.3.7&#XA0;&#XA0;file-check-sort</h3><!--SEC END --><p><a id="fun:file-check-sort"></a><a id="function:file-check-sort"></a><a id="hevea_default233"></a><a id="hevea_fun148"></a></p><pre class="verbatim">   file-check-sort(files)
      files : File Sequence
   raises RuntimeException
</pre><p>The <code>file-check-sort</code> function checks whether a list of files
is in sort order. If so, the list is returned unchanged.
If not, the function raises an exception.</p><p><code>$(file-check-sort &lt;order&gt;, &lt;files&gt;)</code>
</p>
<!--TOC section id="sec234" Globbing and file listings-->
<h2 class="section" id="sec234">10.4&#XA0;&#XA0;Globbing and file listings</h2><!--SEC END --><p>
<a id="section:globbing"></a></p><p>OMake commands are &#X201C;glob-expanded&#X201D; before being executed. That is,
names may contain <em>patterns</em> that are expanded to sequences of
file and directory names. The syntax follows the standard bash(1), csh(1),
syntax, with the following rules.</p><ul class="itemize"><li class="li-itemize">
A <em>pathname</em> is a sequence of directory and file names separated by
one of the <code>/</code> or <code>\</code> characters. For example, the following pathnames
refer to the same file: <code>/home/jyh/OMakefile</code> and <code>/home\jyh/OMakefile</code>.</li><li class="li-itemize">Glob-expansion is performed on the components of a path. If a path contains
occurrences of special characters (listed below), the path is viewed as a pattern
to be matched against the actual files in the system. The expansion produces a
sequence of all file/directory names that match.<p>For the following examples, suppose that a directory <code>/dir</code> contains files
named <code>a</code>, <code>-a</code>, <code>a.b</code>, and <code>b.c</code>.</p><dl class="description"><dt class="dt-description">
<span class="c002">*</span></dt><dd class="dd-description"> Matches any sequence of zero-or-more characters. For example,
the pattern <code>/dir/a*</code> expands to <code>/dir/a /dir/aa /dir/a.b</code>.</dd><dt class="dt-description"><span class="c002">?</span></dt><dd class="dd-description"> Matches exactly one character. The pattern <code>/dir/?a</code> expands
the filename <code>/dir/-a</code>.</dd><dt class="dt-description"><span class="c002">[...]</span></dt><dd class="dd-description"> Square brackets denote character sets and ranges
in the ASCII character set. The pattern may contain individual characters <span class="c003">c</span>
or character ranges <span class="c003">c</span><sub>1</sub><span class="c001">-</span><span class="c003">c</span><sub>2</sub>. The pattern matches any of the
individual characters specified, or any characters in the range. A leading &#X201C;hat&#X201D;
inverts the send of the pattern. To specify a pattern that contains the
literal characters <code>-</code>, the <code>-</code> should occur as the first character in
the range.<div class="center">
<table class="c000 cellpading0"><tr><td class="c006">Pattern</td><td class="c006">Expansion</td></tr>
<tr><td class="hbar" colspan=2></td></tr>
<tr><td class="c006"><code>/dir/[a-b]*</code></td><td class="c006"><code>/dir/a /dir/a.b /dir/b.c</code></td></tr>
<tr><td class="c006"><code>/dir/[-a-b]*</code></td><td class="c006"><code>/dir/a /dir/-a /dir/a.b /dir/b.c</code></td></tr>
<tr><td class="c006"><code>/dir/[-a]*</code></td><td class="c006"><code>/dir/a /dir/-a /dir/a.b</code></td></tr>
</table>
</div></dd><dt class="dt-description"><span class="c002">{s1,...,sN}</span></dt><dd class="dd-description"> Braces indicate brace-expansion.
The braces delimit a sequence of strings separated by commas.
Given <span class="c003">N</span> strings, the result produces <span class="c003">N</span> copies of the pattern,
one for each of the strings <span class="c003">s</span><sub><span class="c003">i</span></sub>.<div class="center">
<table class="c000 cellpading0"><tr><td class="c006">Pattern</td><td class="c006">Expansion</td></tr>
<tr><td class="hbar" colspan=2></td></tr>
<tr><td class="c006"><code>a{b,c,d}</code></td><td class="c006"><code>ab ac ad</code></td></tr>
<tr><td class="c006"><code>a{b{c,d},e}</code></td><td class="c006"><code>abc abd ae</code></td></tr>
<tr><td class="c006"><code>a{?{[A-Z],d},*}</code></td><td class="c006"><code>a?[A-Z] a?d a*</code>
</td></tr>
</table>
</div></dd><dt class="dt-description"><span class="c002">&#XA0;</span></dt><dd class="dd-description"> The tilde is used to specify home directories.
Depending on your system, these might be possible expansions.<div class="center">
<table class="c000 cellpading0"><tr><td class="c006">Pattern</td><td class="c006">Expansion</td></tr>
<tr><td class="hbar" colspan=2></td></tr>
<tr><td class="c006"><code>~jyh</code></td><td class="c006"><code>/home/jyh</code></td></tr>
<tr><td class="c006"><code>~bob/*.c</code></td><td class="c006"><code>c:\Documents and Settings\users\bob</code>
</td></tr>
</table>
</div></dd><dt class="dt-description"><br>
</dt><dd class="dd-description"> The <code>\</code> character is both a pathname separator
and an escape character. If followed by a special glob character,
the <code>\</code> changes the sense of the following character to non-special
status. Otherwise, <code>\</code> is viewed as a pathname separator.<div class="center">
<table class="c000 cellpading0"><tr><td class="c006">Pattern</td><td class="c006">Expansion</td></tr>
<tr><td class="hbar" colspan=2></td></tr>
<tr><td class="c006"><code>~jyh/\*</code></td><td class="c006"><code>~jyh/*</code> (<code>*</code> is literal)</td></tr>
<tr><td class="c006"><code>/dir/\[a-z?</code></td><td class="c006"><code>/dir/[a-z?</code> (<code>[</code> is literal, <code>?</code> is a pattern).</td></tr>
<tr><td class="c006"><code>c:\Program Files\[A-z]</code></td><td class="c006"><code>c:\Program Files[A-z]*</code>
</td></tr>
</table>
</div><p>Note that the final case might be considered to be ambiguous (where <code>\</code> should
be viewed as a pathname separator, not as an escape for the subsequent <code>[</code>
character. If you want to avoid this ambiguity on Win32, you should use the
forward slash <code>/</code> even for Win32 pathnames (the <code>/</code> is translated
to <code>\</code> in the output).</p><div class="center">
<table class="c000 cellpading0"><tr><td class="c006">Pattern</td><td class="c006">Expansion</td></tr>
<tr><td class="hbar" colspan=2></td></tr>
<tr><td class="c006"><code>c:/Program Files/[A-z]*</code></td><td class="c006"><code>c:\Program Files\WindowsUpdate ...</code>
</td></tr>
</table>
</div></dd></dl></li></ul>
<!--TOC subsection id="sec235" glob-->
<h3 class="subsection" id="sec235">10.4.1&#XA0;&#XA0;glob</h3><!--SEC END --><p><a id="fun:glob"></a><a id="function:glob"></a><a id="hevea_default234"></a><a id="hevea_fun149"></a></p><pre class="verbatim">   $(glob strings) : Node Array
      strings : String Sequence
   $(glob options, strings) : Node Array
      options : String
      strings : String Sequence
</pre><p>The <code>glob</code> function performs glob-expansion.</p><p>The . and .. entries are always ignored.</p><p>The options are:
</p><dl class="description"><dt class="dt-description">
<span class="c004">b</span></dt><dd class="dd-description"> Do not perform <span class="c001">csh</span>(1)-style brace expansion.
</dd><dt class="dt-description"><span class="c004">e</span></dt><dd class="dd-description"> The <code>\</code> character does not escape special characters.
</dd><dt class="dt-description"><span class="c004">n</span></dt><dd class="dd-description"> If an expansion fails, return the expansion literally instead of aborting.
</dd><dt class="dt-description"><span class="c004">i</span></dt><dd class="dd-description"> If an expansion fails, it expands to nothing.
</dd><dt class="dt-description"><span class="c004">.</span></dt><dd class="dd-description"> Allow wildcard patterns to match files beginning with a .
</dd><dt class="dt-description"><span class="c004">A</span></dt><dd class="dd-description"> Return all files, including files that begin with a .
</dd><dt class="dt-description"><span class="c004">F</span></dt><dd class="dd-description"> Match only normal files (any file that is not a directory).
</dd><dt class="dt-description"><span class="c004">D</span></dt><dd class="dd-description"> Match only directory files.
</dd><dt class="dt-description"><span class="c004">C</span></dt><dd class="dd-description"> Ignore files according to <span class="c001">cvs</span>(1) rules.
</dd><dt class="dt-description"><span class="c004">P</span></dt><dd class="dd-description"> Include only proper subdirectories.
</dd></dl><p>In addition, the following variables may be defined that affect the
behavior of <code>glob</code>.</p><dl class="description"><dt class="dt-description">
<span class="c004">GLOB_OPTIONS</span></dt><dd class="dd-description"> A string containing default options.
</dd><dt class="dt-description"><span class="c004">GLOB_IGNORE</span></dt><dd class="dd-description"> A list of shell patterns for filenames that <code>glob</code> should ignore.
</dd><dt class="dt-description"><span class="c004">GLOB_ALLOW</span></dt><dd class="dd-description"> A list of shell patterns. If a file does not match a pattern in
<code>GLOB_ALLOW</code>, it is ignored.
</dd></dl><p>The returned files are sorted by name.
</p>
<!--TOC subsection id="sec236" ls-->
<h3 class="subsection" id="sec236">10.4.2&#XA0;&#XA0;ls</h3><!--SEC END --><p><a id="fun:ls"></a><a id="function:ls"></a><a id="hevea_default235"></a><a id="hevea_fun150"></a></p><pre class="verbatim">   $(ls files) : Node Array
      files : String Sequence
   $(ls options, files) : Node Array
      files : String Sequence
</pre><p>The <code>ls</code> function returns the filenames in a directory.</p><p>The . and .. entries are always ignored.
The patterns are shell-style patterns, and are glob-expanded.</p><p>The options include all of the options to the <code>glob</code> function,
plus the following.</p><dl class="description"><dt class="dt-description">
<span class="c004">R</span></dt><dd class="dd-description"> Perform a recursive listing.
</dd></dl><p>The <code>GLOB_ALLOW</code> and <code>GLOB_IGNORE</code> variables can be defined
to control the globbing behavior.
The returned files are sorted by name.
</p>
<!--TOC subsection id="sec237" subdirs-->
<h3 class="subsection" id="sec237">10.4.3&#XA0;&#XA0;subdirs</h3><!--SEC END --><p><a id="fun:subdirs"></a><a id="function:subdirs"></a><a id="hevea_default236"></a><a id="hevea_fun151"></a></p><pre class="verbatim">   $(subdirs dirs) : Dir Array
      dirs : String Sequence
   $(subdirs options, dirs) : Dir Array
      options : String
      dirs : String Sequence
</pre><p>The <code>subdirs</code> function returns all the subdirectories
of a list of directories, recursively.</p><p>The possible options are the following:
</p><dl class="description"><dt class="dt-description">
<span class="c004">A</span></dt><dd class="dd-description"> Return directories that begin with a .
</dd><dt class="dt-description"><span class="c004">C</span></dt><dd class="dd-description"> Ignore files according to <span class="c001">.cvsignore</span> rules.
</dd><dt class="dt-description"><span class="c004">P</span></dt><dd class="dd-description"> Include only proper subdirectories.
</dd></dl>
<!--TOC section id="sec238" Filesystem operations-->
<h2 class="section" id="sec238">10.5&#XA0;&#XA0;Filesystem operations</h2><!--SEC END -->
<!--TOC subsection id="sec239" mkdir-->
<h3 class="subsection" id="sec239">10.5.1&#XA0;&#XA0;mkdir</h3><!--SEC END --><p><a id="fun:mkdir"></a><a id="function:mkdir"></a><a id="hevea_default237"></a><a id="hevea_fun152"></a></p><pre class="verbatim">   mkdir(mode, node...)
      mode : Int
      node : Node
   raises RuntimeException

   mkdir(node...)
      node : Node
   raises RuntimeException
</pre><p>The <code>mkdir</code> function creates a directory, or a set of directories.
The following options are supported.
</p><dl class="description"><dt class="dt-description">
<span class="c004">-m mode</span></dt><dd class="dd-description"> Specify the permissions of the created directory.
</dd><dt class="dt-description"><span class="c004">-p</span></dt><dd class="dd-description"> Create parent directories if they do not exist.
</dd><dt class="dt-description"><span class="c004">&#X2013;</span></dt><dd class="dd-description"> Interpret the remaining names literally.
</dd></dl>
<!--TOC subsection id="sec240" Stat-->
<h3 class="subsection" id="sec240">10.5.2&#XA0;&#XA0;Stat</h3><!--SEC END --><p><a id="obj:Stat"></a><a id="object:Stat"></a><a id="hevea_default238"></a><a id="hevea_obj0"></a></p><p>The <code>Stat</code> object represents an information about a filesystem node,
as returned by the <code>stat</code> and <code>lstat</code> functions.
It contains the following fields.</p><dl class="description"><dt class="dt-description">
<span class="c004">dev</span></dt><dd class="dd-description">: the device number.
</dd><dt class="dt-description"><span class="c004">ino</span></dt><dd class="dd-description">: the inode number.
</dd><dt class="dt-description"><span class="c004">kind</span></dt><dd class="dd-description">: the kind of the file, one of the following:
<code>REG</code> (regular file),
<code>DIR</code> (directory),
<code>CHR</code> (character device),
<code>BLK</code> (block device),
<code>LNK</code> (symbolic link),
<code>FIFO</code> (named pipe),
<code>SOCK</code> (socket).
</dd><dt class="dt-description"><span class="c004">perm</span></dt><dd class="dd-description">: access rights, represented as an integer.
</dd><dt class="dt-description"><span class="c004">nlink</span></dt><dd class="dd-description">: number of links.
</dd><dt class="dt-description"><span class="c004">uid</span></dt><dd class="dd-description">: user id of the owner.
</dd><dt class="dt-description"><span class="c004">gid</span></dt><dd class="dd-description">: group id of the file&#X2019;s group.
</dd><dt class="dt-description"><span class="c004">rdev</span></dt><dd class="dd-description">: device minor number.
</dd><dt class="dt-description"><span class="c004">size</span></dt><dd class="dd-description">: size in bytes.
</dd><dt class="dt-description"><span class="c004">atime</span></dt><dd class="dd-description">: last access time, as a floating point number.
</dd><dt class="dt-description"><span class="c004">mtime</span></dt><dd class="dd-description">: last modification time, as a floating point number.
</dd><dt class="dt-description"><span class="c004">ctime</span></dt><dd class="dd-description">: last status change time, as a floating point number.
</dd></dl><p>Not all of the fields will have meaning on all operating systems.</p>
<!--TOC subsection id="sec241" stat, lstat-->
<h3 class="subsection" id="sec241">10.5.3&#XA0;&#XA0;stat, lstat</h3><!--SEC END --><p><a id="fun:stat"></a><a id="function:stat"></a><a id="hevea_default239"></a><a id="hevea_fun153"></a><a id="fun:lstat"></a><a id="function:lstat"></a><a id="hevea_default240"></a><a id="hevea_fun154"></a></p><pre class="verbatim">    $(stat node...) : Stat
       node : Node or Channel
    $(lstat node...) : Stat
       node : Node or Channel
    raises RuntimeException
</pre><p>The <code>stat</code> functions return file information.
If the file is a symbolic link, the <code>stat</code> function refers to the
destination of the link; the <code>lstat</code> function refers to the link
itself.
</p>
<!--TOC subsection id="sec242" unlink-->
<h3 class="subsection" id="sec242">10.5.4&#XA0;&#XA0;unlink</h3><!--SEC END --><p><a id="fun:unlink"></a><a id="function:unlink"></a><a id="hevea_default241"></a><a id="hevea_fun155"></a></p><pre class="verbatim">   $(unlink file...)
      file : File
   #(rm file...)
      file : File
   $(rmdir dir...)
      dir : Dir
   raises RuntimeException
</pre><p>The <code>unlink</code> and <code>rm</code> functions remove a file.
The <code>rmdir</code> function removes a directory.</p><p>The following options are supported for <code>rm</code> and <code>rmdir</code>.
</p><dl class="description"><dt class="dt-description">
<span class="c004">-f</span></dt><dd class="dd-description"> ignore nonexistent files, never prompt.
</dd><dt class="dt-description"><span class="c004">-i</span></dt><dd class="dd-description"> prompt before removal.
</dd><dt class="dt-description"><span class="c004">-r</span></dt><dd class="dd-description"> remove the contents of directories recursively.
</dd><dt class="dt-description"><span class="c004">-v</span></dt><dd class="dd-description"> explain what is going on.
</dd><dt class="dt-description"><span class="c004">&#X2013;</span></dt><dd class="dd-description"> the rest of the values are interpreted literally.
</dd></dl>
<!--TOC subsection id="sec243" rename-->
<h3 class="subsection" id="sec243">10.5.5&#XA0;&#XA0;rename</h3><!--SEC END --><p><a id="fun:rename"></a><a id="function:rename"></a><a id="hevea_default242"></a><a id="hevea_fun156"></a></p><pre class="verbatim">    rename(old, new)
       old : Node
       new : Node
    mv(nodes... dir)
       nodes : Node Sequence
       dir   : Dir
    cp(nodes... dir)
       nodes : Node Sequence
       dir   : Dir
    raises RuntimeException
</pre><p>The <code>rename</code> function changes the name of a file or directory named <code>old</code>
to <code>new</code>.</p><p>The <code>mv</code> function is similar, but if <code>new</code> is a directory, and it exists,
then the files specified by the sequence are moved into the directory. If not,
the behavior of <code>mv</code> is identical to <code>rename</code>. The <code>cp</code> function
is similar, but the original file is not removed.</p><p>The <code>mv</code> and <code>cp</code> functions take the following options.
</p><dl class="description"><dt class="dt-description">
<span class="c004">-f</span></dt><dd class="dd-description"> Do not prompt before overwriting.
</dd><dt class="dt-description"><span class="c004">-i</span></dt><dd class="dd-description"> Prompt before overwriting.
</dd><dt class="dt-description"><span class="c004">-v</span></dt><dd class="dd-description"> Explain what it happening.
</dd><dt class="dt-description"><span class="c004">-r</span></dt><dd class="dd-description"> Copy the contents of directories recursively.
</dd><dt class="dt-description"><span class="c004">&#X2013;</span></dt><dd class="dd-description"> Interpret the remaining arguments literally.
</dd></dl>
<!--TOC subsection id="sec244" link-->
<h3 class="subsection" id="sec244">10.5.6&#XA0;&#XA0;link</h3><!--SEC END --><p><a id="fun:link"></a><a id="function:link"></a><a id="hevea_default243"></a><a id="hevea_fun157"></a></p><pre class="verbatim">   link(src, dst)
      src : Node
      dst : Node
   raises RuntimeException
</pre><p>The <code>link</code> function creates a hard link named <code>dst</code> to the file
or directory <code>src</code>.</p><p>Hard links may work under Win32 when NTFS is used.</p><p>Normally, only the superuser can create hard links to directories.
</p>
<!--TOC subsection id="sec245" symlink, symlink-raw-->
<h3 class="subsection" id="sec245">10.5.7&#XA0;&#XA0;symlink, symlink-raw</h3><!--SEC END --><p><a id="fun:symlink"></a><a id="function:symlink"></a><a id="hevea_default244"></a><a id="hevea_fun158"></a><a id="fun:symlink-raw"></a><a id="function:symlink-raw"></a><a id="hevea_default245"></a><a id="hevea_fun159"></a></p><pre class="verbatim">   symlink(src, dst)
      src : Node
      dst : Node
   symlink-raw(src, dst)
      src : String
      dst : Node
   raises RuntimeException
</pre><p>The <code>symlink</code> function creates a symbolic link <code>dst</code> that
points to the <code>src</code> file.</p><p>For <code>symlink</code>, the link name is computed relative to
the target directory. For example, the expression
<code>$(symlink a/b, c/d)</code> creates a link named
<code>c/d -&gt; ../a/b</code>.</p><p>The function <code>symlink-raw</code> performs no translation.
The symbolic link is set to the <code>src</code> string.</p><p>Symbolic links are not supported in Win32. Consider using the <code>ln-or-cp</code>
<code>Shell</code> alias for cross-platform portable linking/copying.
</p>
<!--TOC subsection id="sec246" readlink, readlink-raw-->
<h3 class="subsection" id="sec246">10.5.8&#XA0;&#XA0;readlink, readlink-raw</h3><!--SEC END --><p><a id="fun:readlink"></a><a id="function:readlink"></a><a id="hevea_default246"></a><a id="hevea_fun160"></a><a id="fun:readlink-raw"></a><a id="function:readlink-raw"></a><a id="hevea_default247"></a><a id="hevea_fun161"></a></p><pre class="verbatim">   $(readlink node...) : Node
      node : Node
   $(readlink-raw node...) : String
      node : Node
</pre><p>The <code>readlink</code> function reads the value of a symbolic link.
</p>
<!--TOC subsection id="sec247" chmod-->
<h3 class="subsection" id="sec247">10.5.9&#XA0;&#XA0;chmod</h3><!--SEC END --><p><a id="fun:chmod"></a><a id="function:chmod"></a><a id="hevea_default248"></a><a id="hevea_fun162"></a></p><pre class="verbatim">   chmod(mode, dst...)
      mode : Int
      dst : Node or Channel
   chmod(mode dst...)
      mode : String
      dst : Node Sequence
   raises RuntimeException
</pre><p>The <code>chmod</code> function changes the permissions of the targets.</p><p>Options:
</p><dl class="description"><dt class="dt-description">
<span class="c004">-v</span></dt><dd class="dd-description"> Explain what is happening.
</dd><dt class="dt-description"><span class="c004">-r</span></dt><dd class="dd-description"> Change files and directories recursively.
</dd><dt class="dt-description"><span class="c004">-f</span></dt><dd class="dd-description"> Continue on errors.
</dd><dt class="dt-description"><span class="c004">&#X2013;</span></dt><dd class="dd-description"> Interpret the remaining argument literally.
</dd></dl>
<!--TOC subsection id="sec248" chown-->
<h3 class="subsection" id="sec248">10.5.10&#XA0;&#XA0;chown</h3><!--SEC END --><p><a id="fun:chown"></a><a id="function:chown"></a><a id="hevea_default249"></a><a id="hevea_fun163"></a></p><pre class="verbatim">   chown(uid, gid, node...)
      uid : Int
      gid : Int
      node : Node or Channel
   chown(uid, node...)
      uid : Int
      node : Node or Channel
   raises RuntimeException
</pre><p>The <code>chown</code> function changes the user and group id of the file.
If the <code>gid</code> is not specified, it is not changed. If either
id is -1, that id is not changed.
</p>
<!--TOC subsection id="sec249" utimes-->
<h3 class="subsection" id="sec249">10.5.11&#XA0;&#XA0;utimes</h3><!--SEC END --><p><a id="fun:utimes"></a><a id="function:utimes"></a><a id="hevea_default250"></a><a id="hevea_fun164"></a></p><pre class="verbatim">   utimes(atime, mtime, node...)
      atime : Float
      mtime : Float
      node : Node
   raises RuntimeException
</pre><p>The <code>utimes</code> function changes the access and modification
times of the files.
</p>
<!--TOC subsection id="sec250" truncate-->
<h3 class="subsection" id="sec250">10.5.12&#XA0;&#XA0;truncate</h3><!--SEC END --><p><a id="fun:truncate"></a><a id="function:truncate"></a><a id="hevea_default251"></a><a id="hevea_fun165"></a></p><pre class="verbatim">   truncate(length, node...)
       length : Int
       node : Node or Channel
   raises RuntimeException
</pre><p>The <code>truncate</code> function truncates a file to the given length.
</p>
<!--TOC subsection id="sec251" umask-->
<h3 class="subsection" id="sec251">10.5.13&#XA0;&#XA0;umask</h3><!--SEC END --><p><a id="fun:umask"></a><a id="function:umask"></a><a id="hevea_default252"></a><a id="hevea_fun166"></a></p><pre class="verbatim">    $(umask mode) : Int
       mode : Int
    raises RuntimeException
</pre><p>Sets the file mode creation mask.
The previous mask is returned.
This value is not scoped, changes have global effect.
</p>
<!--TOC section id="sec252" vmount-->
<h2 class="section" id="sec252">10.6&#XA0;&#XA0;vmount</h2><!--SEC END -->
<!--TOC subsection id="sec253" vmount-->
<h3 class="subsection" id="sec253">10.6.1&#XA0;&#XA0;vmount</h3><!--SEC END --><p><a id="fun:vmount"></a><a id="function:vmount"></a><a id="hevea_default253"></a><a id="hevea_fun167"></a></p><pre class="verbatim">    vmount(src, dst)
       src, dst : Dir
    vmount(flags, src, dst)
       flags : String
       src, dst : Dir
</pre><p>&#X201C;Mount&#X201D; the <code>src</code> directory on the <code>dst</code> directory. This is
a virtual mount, changing the behavior of the <code>$(file ...)</code> function.
When the <code>$(file str)</code> function is used, the resulting file is taken
relative to the <code>src</code> directory if the file exists. Otherwise, the
file is relative to the current directory.</p><p>The main purpose of the <code>vmount</code> function is to support multiple
builds with separate configurations or architectures.</p><p>The options are as follows.
</p><dl class="description"><dt class="dt-description">
<span class="c004">l</span></dt><dd class="dd-description"> Create symbolic links to files in the <code>src</code> directory.
</dd><dt class="dt-description"><span class="c004">c</span></dt><dd class="dd-description"> Copy files from the <code>src</code> directory.
</dd></dl><p>Mount operations are scoped.
</p>
<!--TOC subsection id="sec254" add-project-directories-->
<h3 class="subsection" id="sec254">10.6.2&#XA0;&#XA0;add-project-directories</h3><!--SEC END --><p><a id="fun:add-project-directories"></a><a id="function:add-project-directories"></a><a id="hevea_default254"></a><a id="hevea_fun168"></a></p><pre class="verbatim">    add-project-directories(dirs)
       dirs : Dir Array
</pre><p>Add the directories to the set of directories that omake considers to be part
of the project. This is mainly used to avoid omake complaining that the
current directory is not part of the project.
</p>
<!--TOC subsection id="sec255" remove-project-directories-->
<h3 class="subsection" id="sec255">10.6.3&#XA0;&#XA0;remove-project-directories</h3><!--SEC END --><p><a id="fun:remove-project-directories"></a><a id="function:remove-project-directories"></a><a id="hevea_default255"></a><a id="hevea_fun169"></a></p><pre class="verbatim">    remove-project-directories(dirs)
       dirs : Dir Array
</pre><p>Removed the directories from the set of directories that omake considers to be part
of the project. This is mainly used to cancel a <code>.SUBDIRS</code> from including
a directory if it is determined that the directory does not need to be compiled.
</p>
<!--TOC section id="sec256" File predicates-->
<h2 class="section" id="sec256">10.7&#XA0;&#XA0;File predicates</h2><!--SEC END -->
<!--TOC subsection id="sec257" test-->
<h3 class="subsection" id="sec257">10.7.1&#XA0;&#XA0;test</h3><!--SEC END --><p><a id="fun:test"></a><a id="function:test"></a><a id="hevea_default256"></a><a id="hevea_fun170"></a></p><pre class="verbatim">   test(exp) : Bool
      exp : String Sequence
</pre><p>The <em>expression</em> grammar is as follows:</p><ul class="itemize"><li class="li-itemize">
<code>!</code> <em>expression</em> : <em>expression</em> is not true
</li><li class="li-itemize"><em>expression1</em> <code>-a</code> <em>expression2</em> : both expressions are true
</li><li class="li-itemize"><em>expression1</em> <code>-o</code> <em>expression2</em> : at least one expression is true
</li><li class="li-itemize"><code>(</code> <em>expression</em> <code>)</code> : <em>expression</em> is true
</li></ul><p>The base expressions are:</p><ul class="itemize"><li class="li-itemize">
<code>-n</code> <em>string</em> : The <em>string</em> has nonzero length
</li><li class="li-itemize"><code>-z</code> <em>string</em> : The <em>string</em> has zero length
</li><li class="li-itemize"><em>string</em> <code>=</code> <em>string</em> : The strings are equal
</li><li class="li-itemize"><em>string</em> <code>!=</code> <em>string</em> : The strings are not equal</li><li class="li-itemize"><em>int1</em> <code>-eq</code> <em>int2</em> : The integers are equal
</li><li class="li-itemize"><em>int1</em> <code>-ne</code> <em>int2</em> : The integers are not equal
</li><li class="li-itemize"><em>int1</em> <code>-gt</code> <em>int2</em> : <em>int1</em> is larger than <em>int2</em>
</li><li class="li-itemize"><em>int1</em> <code>-ge</code> <em>int2</em> : <em>int2</em> is not larger than <em>int1</em>
</li><li class="li-itemize"><em>int1</em> <code>-lt</code> <em>int2</em> : <em>int1</em> is smaller than <em>int2</em>
</li><li class="li-itemize"><em>int1</em> <code>-le</code> <em>int2</em> : <em>int1</em> is not larger than <em>int2</em></li><li class="li-itemize"><em>file1</em> <code>-ef</code> <em>file2</em> : On Unix, <em>file1</em> and <em>file2</em> have the
same device and inode number.
On Win32, <em>file1</em> and <em>file2</em> have the
same name.
</li><li class="li-itemize"><em>file1</em> <code>-nt</code> <em>file2</em> : <em>file1</em> is newer than <em>file2</em>
</li><li class="li-itemize"><em>file1</em> <code>-ot</code> <em>file2</em> : <em>file1</em> is older than <em>file2</em></li><li class="li-itemize"><code>-b</code> <em>file</em> : The file is a block special file
</li><li class="li-itemize"><code>-c</code> <em>file</em> : The file is a character special file
</li><li class="li-itemize"><code>-d</code> <em>file</em> : The file is a directory
</li><li class="li-itemize"><code>-e</code> <em>file</em> : The file exists
</li><li class="li-itemize"><code>-f</code> <em>file</em> : The file is a normal file
</li><li class="li-itemize"><code>-g</code> <em>file</em> : The set<code>-group-id</code> bit is set on the file
</li><li class="li-itemize"><code>-G</code> <em>file</em> : The file&#X2019;s group is the current effective group
</li><li class="li-itemize"><code>-h</code> <em>file</em> : The file is a symbolic link (also <code>-L</code>)
</li><li class="li-itemize"><code>-k</code> <em>file</em> : The file&#X2019;s sticky bit is set
</li><li class="li-itemize"><code>-L</code> <em>file</em> : The file is a symbolic link (also <code>-h</code>)
</li><li class="li-itemize"><code>-O</code> <em>file</em> : The file&#X2019;s owner is the current effective user
</li><li class="li-itemize"><code>-p</code> <em>file</em> : The file is a named pipe
</li><li class="li-itemize"><code>-r</code> <em>file</em> : The file is readable
</li><li class="li-itemize"><code>-s</code> <em>file</em> : The file has a non-zero size
</li><li class="li-itemize"><code>-S</code> <em>file</em> : The file is a socket
</li><li class="li-itemize"><code>-u</code> <em>file</em> : The set<code>-user-id</code> bit is set on the file
</li><li class="li-itemize"><code>-w</code> <em>file</em> : The file is writable
</li><li class="li-itemize"><code>-x</code> <em>file</em> : The file is executable
</li></ul><p>A <em>string</em> is any sequence of characters; leading <code>-</code> characters are allowed.</p><p>An <em>int</em> is a <em>string</em> that can be interpreted as an integer. Unlike traditional
versions of the test program, the leading characters may specify an arity. The
prefix <code>0b</code> means the numbers is in binary; the prefix <code>0o</code> means
the number is in octal; the prefix <code>0x</code> means the number is in hexadecimal.
An <em>int</em> can also be specified as <code>-l</code> <em>string</em>, which evaluates to the length of
the <em>string</em>.</p><p>A <em>file</em> is a <em>string</em> that represents the name of a file.</p><p>The syntax mirrors that of the <span class="c001">test</span>(1) program. If you are on a Unix system, the man page
explains more. Here are some examples.</p><pre class="verbatim">    # Create an empty file
    osh&gt; touch foo
    # Is the file empty?
    osh&gt; test(-e foo)
    - : true
    osh&gt; test(! -e foo)
    - : false
    # Create another file
    osh&gt; touch boo
    # Is the newer file newer?
    osh&gt; test(boo -nt foo)
    - : true
    # A more complex query
    # boo is newer than foo, and foo is empty
    osh&gt; test(\( boo -nt foo \) -a -e foo)
    - : true
</pre>
<!--TOC subsection id="sec258" find-->
<h3 class="subsection" id="sec258">10.7.2&#XA0;&#XA0;find</h3><!--SEC END --><p><a id="fun:find"></a><a id="function:find"></a><a id="hevea_default257"></a><a id="hevea_fun171"></a></p><pre class="verbatim">   find(exp) : Node Array
      exp : String Sequence
</pre><p>The <code>find</code> function searches a directory recursively, returning the
files for which the expression evaluates to true.</p><p>The expression argument uses the same syntax as the <code>test</code> function,
with the following exceptions.</p><ol class="enumerate" type=1><li class="li-enumerate">
The expression may begin with a directory. If not specified, the current
directory is searched.
</li><li class="li-enumerate">The <code>{}</code> string expands to the current file being examined.
</li></ol><p>The syntax of the expression is the same as <code>test</code>, with the following
additions.</p><ul class="itemize"><li class="li-itemize">
<code>-name</code> <em>string</em> : The current file matches the glob expression
(see Section&#XA0;<a href="#section%3Aglobbing">10.4</a>).
</li><li class="li-itemize"><code>-regex</code> <em>string</em> : The current file matches the regular expression
</li></ul><p>The <code>find</code> function performs a recursive scan of all subdirectories.
The following call is being run from the root of the <code>omake</code> source directory.</p><pre class="verbatim">    osh&gt; find(. -name fo* )
    - : &lt;array
            /home/jyh/.../omake/mk/.svn/format
            /home/jyh/.../omake/RPM/.svn/format
            ...
            /home/jyh/.../omake/osx_resources/installer_files/.svn/format&gt;
</pre><p>Another example, listing only those files that are normal files
or symbolic links.</p><pre class="verbatim">    osh&gt; find(. -name fo* -a \( -f {} -o -L {} \))
    - : &lt;array
            /home/jyh/.../omake/mk/.svn/format
            /home/jyh/.../omake/RPM/.svn/format
            ...
            /home/jyh/.../omake/osx_resources/installer_files/.svn/format&gt;
</pre>
<!--TOC section id="sec259" IO functions-->
<h2 class="section" id="sec259">10.8&#XA0;&#XA0;IO functions</h2><!--SEC END -->
<!--TOC subsection id="sec260" Standard channels-->
<h3 class="subsection" id="sec260">10.8.1&#XA0;&#XA0;Standard channels</h3><!--SEC END --><p>The following variables define the standard channels.</p>
<!--TOC paragraph id="sec261" stdin-->
<h5 class="paragraph" id="sec261">stdin</h5><!--SEC END --><p><a id="var:stdin"></a><a id="hevea_default258"></a><a id="hevea_var20"></a></p><pre class="verbatim">stdin : InChannel
</pre><p>The standard input channel, open for reading.</p>
<!--TOC paragraph id="sec262" stdout-->
<h5 class="paragraph" id="sec262">stdout</h5><!--SEC END --><p><a id="var:stdout"></a><a id="hevea_default259"></a><a id="hevea_var21"></a>
</p><pre class="verbatim">stdout : OutChannel
</pre><p>The standard output channel, open for writing.</p>
<!--TOC paragraph id="sec263" stderr-->
<h5 class="paragraph" id="sec263">stderr</h5><!--SEC END --><p><a id="var:stderr"></a><a id="hevea_default260"></a><a id="hevea_var22"></a>
</p><pre class="verbatim">stderr : OutChannel
</pre><p>The standard error channel, open for writing.
</p>
<!--TOC subsection id="sec264" open-in-string-->
<h3 class="subsection" id="sec264">10.8.2&#XA0;&#XA0;open-in-string</h3><!--SEC END --><p><a id="fun:open-in-string"></a><a id="function:open-in-string"></a><a id="hevea_default261"></a><a id="hevea_fun172"></a>
The <code>open-in-string</code> treats a string as if it were a file
and returns a channel for reading.</p><pre class="verbatim">   $(open-in-string s) : Channel
       s : String
</pre>
<!--TOC subsection id="sec265" open-out-string, out-contents-->
<h3 class="subsection" id="sec265">10.8.3&#XA0;&#XA0;open-out-string, out-contents</h3><!--SEC END --><p><a id="fun:open-out-string"></a><a id="function:open-out-string"></a><a id="hevea_default262"></a><a id="hevea_fun173"></a><a id="fun:out-contents"></a><a id="function:out-contents"></a><a id="hevea_default263"></a><a id="hevea_fun174"></a>
The <code>open-out-string</code> creates a channel that writes to a
string instead of a file. The string may be retrieved with the
<code>out-contents</code> function.</p><pre class="verbatim">   $(open-out-string) : Channel
   $(out-contents chan) : String
       chan : OutChannel
</pre>
<!--TOC subsection id="sec266" fopen-->
<h3 class="subsection" id="sec266">10.8.4&#XA0;&#XA0;fopen</h3><!--SEC END --><p><a id="fun:fopen"></a><a id="function:fopen"></a><a id="hevea_default264"></a><a id="hevea_fun175"></a></p><p>The <code>fopen</code> function opens a file for reading or writing.</p><pre class="verbatim">   $(fopen file, mode) : Channel
      file : File
      mode : String
</pre><p>The <code>file</code> is the name of the file to be opened.
The <code>mode</code> is a combination of the following characters.
</p><dl class="description"><dt class="dt-description">
<span class="c004">r</span></dt><dd class="dd-description"> Open the file for reading; it is an error if the file does not exist.
</dd><dt class="dt-description"><span class="c004">w</span></dt><dd class="dd-description"> Open the file for writing; the file is created if it does not exist.
</dd><dt class="dt-description"><span class="c004">a</span></dt><dd class="dd-description"> Open the file in append mode; the file is created if it does not exist.
</dd><dt class="dt-description"><span class="c004">+</span></dt><dd class="dd-description"> Open the file for both reading and writing.
</dd><dt class="dt-description"><span class="c004">t</span></dt><dd class="dd-description"> Open the file in text mode (default).
</dd><dt class="dt-description"><span class="c004">b</span></dt><dd class="dd-description"> Open the file in binary mode.
</dd><dt class="dt-description"><span class="c004">n</span></dt><dd class="dd-description"> Open the file in nonblocking mode.
</dd><dt class="dt-description"><span class="c004">x</span></dt><dd class="dd-description"> Fail if the file already exists.
</dd></dl><p>Binary mode is not significant on Unix systems, where
text and binary modes are equivalent.
</p>
<!--TOC subsection id="sec267" close-->
<h3 class="subsection" id="sec267">10.8.5&#XA0;&#XA0;close</h3><!--SEC END --><p><a id="fun:close"></a><a id="function:close"></a><a id="hevea_default265"></a><a id="hevea_fun176"></a></p><pre class="verbatim">    $(close channel...)
       channel : Channel
</pre><p>The <code>close</code> function closes a file that was previously opened
with <code>fopen</code>.
</p>
<!--TOC subsection id="sec268" read, input-line-->
<h3 class="subsection" id="sec268">10.8.6&#XA0;&#XA0;read, input-line</h3><!--SEC END --><p><a id="fun:read"></a><a id="function:read"></a><a id="hevea_default266"></a><a id="hevea_fun177"></a><a id="fun:input-line"></a><a id="function:input-line"></a><a id="hevea_default267"></a><a id="hevea_fun178"></a></p><pre class="verbatim">   $(read channel, amount) : String
   $(input-line channel) : String
      channel : InChannel
      amount  : Int
   raises RuntimeException
</pre><p>The <code>read</code> function reads up to <code>amount</code>
bytes from an input channel, and returns
the data that was read. The <code>input-line</code> function reads a line from the file and returns the line read, without
the line terminator. If an end-of-file condition is reached, both functions raise a <code>RuntimeException</code>
exception.
</p>
<!--TOC subsection id="sec269" write-->
<h3 class="subsection" id="sec269">10.8.7&#XA0;&#XA0;write</h3><!--SEC END --><p><a id="fun:write"></a><a id="function:write"></a><a id="hevea_default268"></a><a id="hevea_fun179"></a></p><pre class="verbatim">   $(write channel, buffer, offset, amount) : String
      channel : OutChannel
      buffer  : String
      offset  : Int
      amount  : Int
   $(write channel, buffer) : String
      channel : OutChannel
      buffer  : String
   raises RuntimeException
</pre><p>In the 4-argument form, the <code>write</code> function writes
bytes to the output channel <code>channel</code> from the <code>buffer</code>,
starting at position <code>offset</code>. Up to <code>amount</code> bytes
are written. The function returns the number of bytes that were
written.</p><p>The 3-argument form is similar, but the <code>offset</code> is 0.</p><p>In the 2-argument form, the <code>offset</code> is 0, and the <code>amount</code>
if the length of the <code>buffer</code>.</p><p>If an end-of-file condition is reached,
the function raises a <code>RuntimeException</code> exception.
</p>
<!--TOC subsection id="sec270" lseek-->
<h3 class="subsection" id="sec270">10.8.8&#XA0;&#XA0;lseek</h3><!--SEC END --><p><a id="fun:lseek"></a><a id="function:lseek"></a><a id="hevea_default269"></a><a id="hevea_fun180"></a></p><pre class="verbatim">    $(lseek channel, offset, whence) : Int
       channel : Channel
       offset  : Int
       whence  : String
    raises RuntimeException
</pre><p>The <code>lseek</code> function repositions the offset of the
channel <code>channel</code> according to the <code>whence</code> directive, as
follows:</p><dl class="description"><dt class="dt-description">
<span class="c004">SEEK_SET</span></dt><dd class="dd-description"> The offset is set to <code>offset</code>.
</dd><dt class="dt-description"><span class="c004">SEEK_CUR</span></dt><dd class="dd-description"> The offset is set to its current position plus <code>offset</code> bytes.
</dd><dt class="dt-description"><span class="c004">SEEK_END</span></dt><dd class="dd-description"> The offset is set to the size of the file plus <code>offset</code> bytes.
</dd></dl><p>The <code>lseek</code> function returns the new position in the file.
</p>
<!--TOC subsection id="sec271" rewind-->
<h3 class="subsection" id="sec271">10.8.9&#XA0;&#XA0;rewind</h3><!--SEC END --><p><a id="fun:rewind"></a><a id="function:rewind"></a><a id="hevea_default270"></a><a id="hevea_fun181"></a></p><pre class="verbatim">   rewind(channel...)
      channel : Channel
</pre><p>The <code>rewind</code> function set the current file position to the
beginning of the file.
</p>
<!--TOC subsection id="sec272" tell-->
<h3 class="subsection" id="sec272">10.8.10&#XA0;&#XA0;tell</h3><!--SEC END --><p><a id="fun:tell"></a><a id="function:tell"></a><a id="hevea_default271"></a><a id="hevea_fun182"></a></p><pre class="verbatim">    $(tell channel...) : Int...
       channel : Channel
    raises RuntimeException
</pre><p>The <code>tell</code> function returns the current position of the <code>channel</code>.
</p>
<!--TOC subsection id="sec273" flush-->
<h3 class="subsection" id="sec273">10.8.11&#XA0;&#XA0;flush</h3><!--SEC END --><p><a id="fun:flush"></a><a id="function:flush"></a><a id="hevea_default272"></a><a id="hevea_fun183"></a></p><pre class="verbatim">   $(flush channel...)
      channel : OutChannel
</pre><p>The <code>flush</code> function can be used only on files that are open for writing.
It flushes all pending data to the file.
</p>
<!--TOC subsection id="sec274" channel-name-->
<h3 class="subsection" id="sec274">10.8.12&#XA0;&#XA0;channel-name</h3><!--SEC END --><p><a id="fun:channel-name"></a><a id="function:channel-name"></a><a id="hevea_default273"></a><a id="hevea_fun184"></a></p><pre class="verbatim">   $(channel-name channel...) : String
      channel : Channel
</pre><p>The <code>channel-name</code> function returns the name that is associated with the channel.
</p>
<!--TOC subsection id="sec275" dup-->
<h3 class="subsection" id="sec275">10.8.13&#XA0;&#XA0;dup</h3><!--SEC END --><p><a id="fun:dup"></a><a id="function:dup"></a><a id="hevea_default274"></a><a id="hevea_fun185"></a></p><pre class="verbatim">    $(dup channel) : Channel
       channel : Channel
    raises RuntimeException
</pre><p>The <code>dup</code> function returns a new channel referencing the
same file as the argument.
</p>
<!--TOC subsection id="sec276" dup2-->
<h3 class="subsection" id="sec276">10.8.14&#XA0;&#XA0;dup2</h3><!--SEC END --><p><a id="fun:dup2"></a><a id="function:dup2"></a><a id="hevea_default275"></a><a id="hevea_fun186"></a></p><pre class="verbatim">   dup2(channel1, channel2)
      channel1 : Channel
      channel2 : Channel
   raises RuntimeException
</pre><p>The <code>dup2</code> function causes <code>channel2</code> to refer to the same
file as <code>channel1</code>.
</p>
<!--TOC subsection id="sec277" set-nonblock-->
<h3 class="subsection" id="sec277">10.8.15&#XA0;&#XA0;set-nonblock</h3><!--SEC END --><p><a id="fun:set-nonblock"></a><a id="function:set-nonblock"></a><a id="hevea_default276"></a><a id="hevea_fun187"></a></p><pre class="verbatim">   set-nonblock-mode(mode, channel...)
      channel : Channel
      mode : String
</pre><p>The <code>set-nonblock-mode</code> function sets the nonblocking flag on the
given channel. When IO is performed on the channel, and the operation
cannot be completed immediately, the operations raises a <code>RuntimeException</code>.
</p>
<!--TOC subsection id="sec278" set-close-on-exec-mode-->
<h3 class="subsection" id="sec278">10.8.16&#XA0;&#XA0;set-close-on-exec-mode</h3><!--SEC END --><p><a id="fun:set-close-on-exec-mode"></a><a id="function:set-close-on-exec-mode"></a><a id="hevea_default277"></a><a id="hevea_fun188"></a></p><pre class="verbatim">   set-close-on-exec-mode(mode, channel...)
      channel : Channel
      mode : String
   raises RuntimeException
</pre><p>The <code>set-close-on-exec-mode</code> function sets the close-on-exec
flags for the given channels. If the close-on-exec flag is set, the channel
is not inherited by child processes. Otherwise it is.
</p>
<!--TOC subsection id="sec279" pipe-->
<h3 class="subsection" id="sec279">10.8.17&#XA0;&#XA0;pipe</h3><!--SEC END --><p><a id="fun:pipe"></a><a id="function:pipe"></a><a id="hevea_default278"></a><a id="hevea_fun189"></a></p><pre class="verbatim">   $(pipe) : Pipe
   raises RuntimeException
</pre><p>The <code>pipe</code> function creates a <code>Pipe</code> object, which has two
fields. The <code>read</code> field is a channel that is opened for
reading, and the <code>write</code> field is a channel that is opened
for writing.
</p>
<!--TOC subsection id="sec280" mkfifo-->
<h3 class="subsection" id="sec280">10.8.18&#XA0;&#XA0;mkfifo</h3><!--SEC END --><p><a id="fun:mkfifo"></a><a id="function:mkfifo"></a><a id="hevea_default279"></a><a id="hevea_fun190"></a></p><pre class="verbatim">   mkfifo(mode, node...)
      mode : Int
      node : Node
</pre><p>The <code>mkfifo</code> function creates a named pipe.
</p>
<!--TOC subsection id="sec281" select-->
<h3 class="subsection" id="sec281">10.8.19&#XA0;&#XA0;select</h3><!--SEC END --><p><a id="fun:select"></a><a id="function:select"></a><a id="hevea_default280"></a><a id="hevea_fun191"></a></p><pre class="verbatim">   $(select rfd..., wfd..., wfd..., timeout) : Select
      rfd : InChannel
      wfd : OutChannel
      efd : Channel
      timeout : float
   raises RuntimeException
</pre><p>The <code>select</code> function polls for possible IO on a set of channels.
The <code>rfd</code> are a sequence of channels for reading, <code>wfd</code> are a
sequence of channels for writing, and <code>efd</code> are a sequence of
channels to poll for error conditions. The <code>timeout</code> specifies
the maximum amount of time to wait for events.</p><p>On successful return, <code>select</code> returns a <code>Select</code> object,
which has the following fields:
</p><dl class="description"><dt class="dt-description">
<span class="c004">read</span></dt><dd class="dd-description"> An array of channels available for reading.
</dd><dt class="dt-description"><span class="c004">write</span></dt><dd class="dd-description"> An array of channels available for writing.
</dd><dt class="dt-description"><span class="c004">error</span></dt><dd class="dd-description"> An array of channels on which an error has occurred.
</dd></dl>
<!--TOC subsection id="sec282" lockf-->
<h3 class="subsection" id="sec282">10.8.20&#XA0;&#XA0;lockf</h3><!--SEC END --><p><a id="fun:lockf"></a><a id="function:lockf"></a><a id="hevea_default281"></a><a id="hevea_fun192"></a></p><pre class="verbatim">    lockf(channel, command, len)
       channel : Channel
       command : String
       len : Int
    raises RuntimeException
</pre><p>The <code>lockf</code> function places a lock on a region of the channel.
The region starts at the current position and extends for <code>len</code>
bytes.</p><p>The possible values for <code>command</code> are the following.
</p><dl class="description"><dt class="dt-description">
<span class="c004">F_ULOCK</span></dt><dd class="dd-description"> Unlock a region.
</dd><dt class="dt-description"><span class="c004">F_LOCK</span></dt><dd class="dd-description"> Lock a region for writing; block if already locked.
</dd><dt class="dt-description"><span class="c004">F_TLOCK</span></dt><dd class="dd-description"> Lock a region for writing; fail if already locked.
</dd><dt class="dt-description"><span class="c004">F_TEST</span></dt><dd class="dd-description"> Test a region for other locks.
</dd><dt class="dt-description"><span class="c004">F_RLOCK</span></dt><dd class="dd-description"> Lock a region for reading; block if already locked.
</dd><dt class="dt-description"><span class="c004">F_TRLOCK</span></dt><dd class="dd-description"> Lock a region for reading; fail is already locked.
</dd></dl>
<!--TOC subsection id="sec283" InetAddr-->
<h3 class="subsection" id="sec283">10.8.21&#XA0;&#XA0;InetAddr</h3><!--SEC END --><p><a id="obj:InetAddr"></a><a id="object:InetAddr"></a><a id="hevea_default282"></a><a id="hevea_obj1"></a></p><p>The <code>InetAddr</code> object describes an Internet address.
It contains the following fields.</p><dl class="description"><dt class="dt-description">
<span class="c004">addr</span></dt><dd class="dd-description"> <code>String</code>: the Internet address.
</dd><dt class="dt-description"><span class="c004">port</span></dt><dd class="dd-description"> <code>Int</code>: the port number.
</dd></dl>
<!--TOC subsection id="sec284" Host-->
<h3 class="subsection" id="sec284">10.8.22&#XA0;&#XA0;Host</h3><!--SEC END --><p><a id="obj:Host"></a><a id="object:Host"></a><a id="hevea_default283"></a><a id="hevea_obj2"></a></p><p>A <code>Host</code> object contains the following fields.</p><dl class="description"><dt class="dt-description">
<span class="c004">name</span></dt><dd class="dd-description"> <code>String</code>: the name of the host.
</dd><dt class="dt-description"><span class="c004">aliases</span></dt><dd class="dd-description"> <code>String Array</code>: other names by which the host is known.
</dd><dt class="dt-description"><span class="c004">addrtype</span></dt><dd class="dd-description"> <code>String</code>: the preferred socket domain.
</dd><dt class="dt-description"><span class="c004">addrs</span></dt><dd class="dd-description"> <code>InetAddr Array</code>: an array of Internet addresses belonging to the host.
</dd></dl>
<!--TOC subsection id="sec285" gethostbyname-->
<h3 class="subsection" id="sec285">10.8.23&#XA0;&#XA0;gethostbyname</h3><!--SEC END --><p><a id="fun:gethostbyname"></a><a id="function:gethostbyname"></a><a id="hevea_default284"></a><a id="hevea_fun193"></a></p><pre class="verbatim">   $(gethostbyname host...) : Host...
      host : String
   raises RuntimeException
</pre><p>The <code>gethostbyname</code> function returns a <code>Host</code> object
for the specified host. The <code>host</code> may specify a domain name
or an Internet address.</p>
<!--TOC subsection id="sec286" Protocol-->
<h3 class="subsection" id="sec286">10.8.24&#XA0;&#XA0;Protocol</h3><!--SEC END --><p><a id="obj:Protocol"></a><a id="object:Protocol"></a><a id="hevea_default285"></a><a id="hevea_obj3"></a></p><p>The <code>Protocol</code> object represents a protocol entry.
It has the following fields.</p><dl class="description"><dt class="dt-description">
<span class="c004">name</span></dt><dd class="dd-description"> <code>String</code>: the canonical name of the protocol.
</dd><dt class="dt-description"><span class="c004">aliases</span></dt><dd class="dd-description"> <code>String Array</code>: aliases for the protocol.
</dd><dt class="dt-description"><span class="c004">proto</span></dt><dd class="dd-description"> <code>Int</code>: the protocol number.
</dd></dl>
<!--TOC subsection id="sec287" getprotobyname-->
<h3 class="subsection" id="sec287">10.8.25&#XA0;&#XA0;getprotobyname</h3><!--SEC END --><p><a id="fun:getprotobyname"></a><a id="function:getprotobyname"></a><a id="hevea_default286"></a><a id="hevea_fun194"></a></p><pre class="verbatim">   $(getprotobyname name...) : Protocol...
      name : Int or String
   raises RuntimeException
</pre><p>The <code>getprotobyname</code> function returns a <code>Protocol</code> object for the
specified protocol. The <code>name</code> may be a protocol name, or a
protocol number.
</p>
<!--TOC subsection id="sec288" Service-->
<h3 class="subsection" id="sec288">10.8.26&#XA0;&#XA0;Service</h3><!--SEC END --><p><a id="obj:Service"></a><a id="object:Service"></a><a id="hevea_default287"></a><a id="hevea_obj4"></a></p><p>The <code>Service</code> object represents a network service.
It has the following fields.</p><dl class="description"><dt class="dt-description">
<span class="c004">name</span></dt><dd class="dd-description"> <code>String</code>: the name of the service.
</dd><dt class="dt-description"><span class="c004">aliases</span></dt><dd class="dd-description"> <code>String Array</code>: aliases for the service.
</dd><dt class="dt-description"><span class="c004">port</span></dt><dd class="dd-description"> <code>Int</code>: the port number of the service.
</dd><dt class="dt-description"><span class="c004">proto</span></dt><dd class="dd-description"> <code>Protocol</code>: the protocol for the service.
</dd></dl>
<!--TOC subsection id="sec289" getservbyname-->
<h3 class="subsection" id="sec289">10.8.27&#XA0;&#XA0;getservbyname</h3><!--SEC END --><p><a id="fun:getservbyname"></a><a id="function:getservbyname"></a><a id="hevea_default288"></a><a id="hevea_fun195"></a></p><pre class="verbatim">   $(getservbyname service...) : Service...
      service : String or Int
   raises RuntimeException
</pre><p>The <code>getservbyname</code> function gets the information for a network service.
The <code>service</code> may be specified as a service name or number.
</p>
<!--TOC subsection id="sec290" socket-->
<h3 class="subsection" id="sec290">10.8.28&#XA0;&#XA0;socket</h3><!--SEC END --><p><a id="fun:socket"></a><a id="function:socket"></a><a id="hevea_default289"></a><a id="hevea_fun196"></a></p><pre class="verbatim">   $(socket domain, type, protocol) : Channel
      domain : String
      type : String
      protocol : String
   raises RuntimeException
</pre><p>The <code>socket</code> function creates an unbound socket.</p><p>The possible values for the arguments are as follows.</p><p>The <code>domain</code> may have the following values.
</p><dl class="description"><dt class="dt-description">
<span class="c004">PF_UNIX or unix</span></dt><dd class="dd-description"> Unix domain, available only on Unix systems.
</dd><dt class="dt-description"><span class="c004">PF_INET or inet</span></dt><dd class="dd-description"> Internet domain, IPv4.
</dd><dt class="dt-description"><span class="c004">PF_INET6 or inet6</span></dt><dd class="dd-description"> Internet domain, IPv6.
</dd></dl><p>The <code>type</code> may have the following values.
</p><dl class="description"><dt class="dt-description">
<span class="c004">SOCK_STREAM or stream</span></dt><dd class="dd-description"> Stream socket.
</dd><dt class="dt-description"><span class="c004">SOCK_DGRAM or dgram</span></dt><dd class="dd-description"> Datagram socket.
</dd><dt class="dt-description"><span class="c004">SOCK_RAW or raw</span></dt><dd class="dd-description"> Raw socket.
</dd><dt class="dt-description"><span class="c004">SOCK_SEQPACKET or seqpacket</span></dt><dd class="dd-description"> Sequenced packets socket
</dd></dl><p>The <code>protocol</code> is an <code>Int</code> or <code>String</code> that specifies
a protocol in the protocols database.
</p>
<!--TOC subsection id="sec291" bind-->
<h3 class="subsection" id="sec291">10.8.29&#XA0;&#XA0;bind</h3><!--SEC END --><p><a id="fun:bind"></a><a id="function:bind"></a><a id="hevea_default290"></a><a id="hevea_fun197"></a></p><pre class="verbatim">   bind(socket, host, port)
      socket : InOutChannel
      host : String
      port : Int
   bind(socket, file)
      socket : InOutChannel
      file : File
   raise RuntimeException
</pre><p>The <code>bind</code> function binds a socket to an address.</p><p>The 3-argument form specifies an Internet connection, the <code>host</code> specifies a host name
or IP address, and the <code>port</code> is a port number.</p><p>The 2-argument form is for <code>Unix</code> sockets. The <code>file</code> specifies the filename
for the address.
</p>
<!--TOC subsection id="sec292" listen-->
<h3 class="subsection" id="sec292">10.8.30&#XA0;&#XA0;listen</h3><!--SEC END --><p><a id="fun:listen"></a><a id="function:listen"></a><a id="hevea_default291"></a><a id="hevea_fun198"></a></p><pre class="verbatim">   listen(socket, requests)
      socket : InOutChannel
      requests : Int
   raises RuntimeException
</pre><p>The <code>listen</code> function sets up the socket for receiving up to <code>requests</code> number
of pending connection requests.
</p>
<!--TOC subsection id="sec293" accept-->
<h3 class="subsection" id="sec293">10.8.31&#XA0;&#XA0;accept</h3><!--SEC END --><p><a id="fun:accept"></a><a id="function:accept"></a><a id="hevea_default292"></a><a id="hevea_fun199"></a></p><pre class="verbatim">   $(accept socket) : InOutChannel
      socket : InOutChannel
   raises RuntimeException
</pre><p>The <code>accept</code> function accepts a connection on a socket.
</p>
<!--TOC subsection id="sec294" connect-->
<h3 class="subsection" id="sec294">10.8.32&#XA0;&#XA0;connect</h3><!--SEC END --><p><a id="fun:connect"></a><a id="function:connect"></a><a id="hevea_default293"></a><a id="hevea_fun200"></a></p><pre class="verbatim">    connect(socket, addr, port)
       socket : InOutChannel
       addr : String
       port : int
    connect(socket, name)
       socket : InOutChannel
       name : File
    raise RuntimeException
</pre><p>The <code>connect</code> function connects a socket to a remote address.</p><p>The 3-argument form specifies an Internet connection.
The <code>addr</code> argument is the Internet address of the remote host,
specified as a domain name or IP address. The <code>port</code> argument
is the port number.</p><p>The 2-argument form is for Unix sockets. The <code>name</code> argument
is the filename of the socket.
</p>
<!--TOC subsection id="sec295" getchar-->
<h3 class="subsection" id="sec295">10.8.33&#XA0;&#XA0;getchar</h3><!--SEC END --><p><a id="fun:getchar"></a><a id="function:getchar"></a><a id="hevea_default294"></a><a id="hevea_fun201"></a></p><pre class="verbatim">    $(getc) : String
    $(getc file) : String
       file : InChannel or File
    raises RuntimeException
</pre><p>The <code>getc</code> function returns the next character of a file.
If the argument is not specified, <code>stdin</code> is used as input.
If the end of file has been reached, the function returns <code>false</code>.
</p>
<!--TOC subsection id="sec296" gets-->
<h3 class="subsection" id="sec296">10.8.34&#XA0;&#XA0;gets</h3><!--SEC END --><p><a id="fun:gets"></a><a id="function:gets"></a><a id="hevea_default295"></a><a id="hevea_fun202"></a></p><pre class="verbatim">   $(gets) : String
   $(gets channel) : String
      channel : InChannel or File
   raises RuntimeException
</pre><p>The <code>gets</code> function returns the next line from a file.
The function returns the empty string if the end of file has been reached.
The line terminator is removed.
</p>
<!--TOC subsection id="sec297" fgets-->
<h3 class="subsection" id="sec297">10.8.35&#XA0;&#XA0;fgets</h3><!--SEC END --><p><a id="fun:fgets"></a><a id="function:fgets"></a><a id="hevea_default296"></a><a id="hevea_fun203"></a></p><pre class="verbatim">   $(fgets) : String
   $(fgets channel) : String
      channel : InChannel or File
   raises RuntimeException
</pre><p>The <code>fgets</code> function returns the next line from a file that has been
opened for reading with <code>fopen</code>. The function returns the empty string
if the end of file has been reached. The returned string is returned as
literal data. The line terminator is not removed.
</p>
<!--TOC section id="sec298" Printing functions-->
<h2 class="section" id="sec298">10.9&#XA0;&#XA0;Printing functions</h2><!--SEC END --><p>
<a id="fun:fprint"></a><a id="function:fprint"></a><a id="hevea_default297"></a><a id="hevea_fun204"></a>
<a id="fun:print"></a><a id="function:print"></a><a id="hevea_default298"></a><a id="hevea_fun205"></a>
<a id="fun:eprint"></a><a id="function:eprint"></a><a id="hevea_default299"></a><a id="hevea_fun206"></a>
<a id="fun:fprintln"></a><a id="function:fprintln"></a><a id="hevea_default300"></a><a id="hevea_fun207"></a>
<a id="fun:println"></a><a id="function:println"></a><a id="hevea_default301"></a><a id="hevea_fun208"></a>
<a id="fun:eprintln"></a><a id="function:eprintln"></a><a id="hevea_default302"></a><a id="hevea_fun209"></a></p><p>Output is printed with the <code>print</code> and <code>println</code> functions.
The <code>println</code> function adds a terminating newline to the value being
printed, the <code>print</code> function does not.</p><pre class="verbatim">    fprint(&lt;file&gt;, &lt;string&gt;)
    print(&lt;string&gt;)
    eprint(&lt;string&gt;)
    fprintln(&lt;file&gt;, &lt;string&gt;)
    println(&lt;string&gt;)
    eprintln(&lt;string&gt;)
</pre><p>The <code>fprint</code> functions print to a file that has been previously opened with
<code>fopen</code>. The <code>print</code> functions print to the standard output channel, and
the <code>eprint</code> functions print to the standard error channel.
</p>
<!--TOC section id="sec299" Value printing functions-->
<h2 class="section" id="sec299">10.10&#XA0;&#XA0;Value printing functions</h2><!--SEC END --><p>
<a id="fun:fprintv"></a><a id="function:fprintv"></a><a id="hevea_default303"></a><a id="hevea_fun210"></a>
<a id="fun:printv"></a><a id="function:printv"></a><a id="hevea_default304"></a><a id="hevea_fun211"></a>
<a id="fun:eprintv"></a><a id="function:eprintv"></a><a id="hevea_default305"></a><a id="hevea_fun212"></a>
<a id="fun:fprintvln"></a><a id="function:fprintvln"></a><a id="hevea_default306"></a><a id="hevea_fun213"></a>
<a id="fun:printvln"></a><a id="function:printvln"></a><a id="hevea_default307"></a><a id="hevea_fun214"></a>
<a id="fun:eprintvln"></a><a id="function:eprintvln"></a><a id="hevea_default308"></a><a id="hevea_fun215"></a></p><p>Values can be printed with the <code>printv</code> and <code>printvln</code> functions.
The <code>printvln</code> function adds a terminating newline to the value being
printed, the <code>printv</code> function does not.</p><pre class="verbatim">    fprintv(&lt;file&gt;, &lt;string&gt;)
    printv(&lt;string&gt;)
    eprintv(&lt;string&gt;)
    fprintvln(&lt;file&gt;, &lt;string&gt;)
    printvln(&lt;string&gt;)
    eprintvln(&lt;string&gt;)
</pre><p>The <code>fprintv</code> functions print to a file that has been previously opened with
<code>fopen</code>. The <code>printv</code> functions print to the standard output channel, and
the <code>eprintv</code> functions print to the standard error channel.
</p>
<!--TOC subsection id="sec300" Miscellaneous functions-->
<h3 class="subsection" id="sec300">10.10.1&#XA0;&#XA0;Miscellaneous functions</h3><!--SEC END -->
<!--TOC subsubsection id="sec301" set-channel-line-->
<h4 class="subsubsection" id="sec301">10.10.1.1&#XA0;&#XA0;set-channel-line</h4><!--SEC END --><pre class="verbatim">    set-channel-line(channel, filename, line)
        channel : Channel
        filename : File
        line : int
</pre><p>Set the line number information for the channel.
</p>
<!--TOC section id="sec302" Higher-level IO functions-->
<h2 class="section" id="sec302">10.11&#XA0;&#XA0;Higher-level IO functions</h2><!--SEC END -->
<!--TOC subsection id="sec303" Regular expressions-->
<h3 class="subsection" id="sec303">10.11.1&#XA0;&#XA0;Regular expressions</h3><!--SEC END --><p>
<a id="hevea_default309"></a></p><p>Many of the higher-level functions use regular expressions.
Regular expressions are defined by strings with syntax nearly identical
to <span class="c001">awk</span>(1).</p><p>Strings may contain the following character constants.</p><ul class="itemize"><li class="li-itemize">
<code>\\</code> : a literal backslash.
</li><li class="li-itemize"><code>\a</code> : the alert character <code>^G</code>.
</li><li class="li-itemize"><code>\b</code> : the backspace character <code>^H</code>.
</li><li class="li-itemize"><code>\f</code> : the formfeed character <code>^L</code>.
</li><li class="li-itemize"><code>\n</code> : the newline character <code>^J</code>.
</li><li class="li-itemize"><code>\r</code> : the carriage return character <code>^M</code>.
</li><li class="li-itemize"><code>\t</code> : the tab character <code>^I</code>.
</li><li class="li-itemize"><code>\v</code> : the vertical tab character.
</li><li class="li-itemize"><code>\xhh...</code> : the character represented by the string
of hexadecimal digits <code>h</code>. All valid hexadecimal digits
following the sequence are considered to be part of the sequence.
</li><li class="li-itemize"><code>\ddd</code> : the character represented by 1, 2, or 3 octal
digits.
</li></ul><p>Regular expressions are defined using the special characters <code>.\^$[(){}*?</code>+.</p><ul class="itemize"><li class="li-itemize">
<code>c</code> : matches the literal character <code>c</code> if <code>c</code> is not
a special character.
</li><li class="li-itemize"><code>\c</code> : matches the literal character <code>c</code>, even if <code>c</code>
is a special character.
</li><li class="li-itemize"><code>.</code> : matches any character, including newline.
</li><li class="li-itemize"><code>^</code> : matches the beginning of a line.
</li><li class="li-itemize"><code>$</code> : matches the end of line.
</li><li class="li-itemize"><code>[abc...]</code> : matches any of the characters <code>abc...</code>
</li><li class="li-itemize"><code>[^abc...]</code> : matches any character except <code>abc...</code>
</li><li class="li-itemize"><code>r1|r2</code> : matches either <code>r1</code> or <code>r2</code>.
</li><li class="li-itemize"><code>r1r2</code> : matches <code>r1</code> and then <code>r2</code>.
</li><li class="li-itemize"><code>r</code>+ : matches one or more occurrences of <code>r</code>.
</li><li class="li-itemize"><code>r*</code> : matches zero or more occurrences of <code>r</code>.
</li><li class="li-itemize"><code>r?</code> : matches zero or one occurrence of <code>r</code>.
</li><li class="li-itemize"><code>(r)</code> : parentheses are used for grouping; matches <code>r</code>.
</li><li class="li-itemize"><code>\(r\)</code> : also defines grouping, but the expression matched
within the parentheses is available to the output processor
through one of the variables <code>$1</code>, <code>$2</code>, ...
</li><li class="li-itemize"><code>r{n}</code> : matches exactly <code>n</code> occurrences of <code>r</code>.
</li><li class="li-itemize"><code>r{n,}</code> : matches <code>n</code> or more occurrences of <code>r</code>.
</li><li class="li-itemize"><code>r{n,m}</code> : matches at least <code>n</code> occurrences of <code>r</code>,
and no more than <code>m</code> occurrences.
</li><li class="li-itemize"><code>\y</code>: matches the empty string at either the beginning or
end of a word.
</li><li class="li-itemize"><code>\B</code>: matches the empty string within a word.
</li><li class="li-itemize"><code>\&lt;</code>: matches the empty string at the beginning of a word.
</li><li class="li-itemize"><code>\&gt;</code>: matches the empty string at the end of a word.
</li><li class="li-itemize"><code>\w</code>: matches any character in a word.
</li><li class="li-itemize"><code>\W</code>: matches any character that does not occur within a word.
</li><li class="li-itemize"><code>\`</code>: matches the empty string at the beginning of a file.
</li><li class="li-itemize"><code>\'</code>: matches the empty string at the end of a file.
</li></ul><p>Character classes can be used to specify character sequences
abstractly. Some of these sequences can change depending on your LOCALE.</p><ul class="itemize"><li class="li-itemize">
<code>[:alnum:]</code> Alphanumeric characters.
</li><li class="li-itemize"><code>[:alpha:]</code> Alphabetic characters.
</li><li class="li-itemize"><code>[:lower:]</code> Lowercase alphabetic characters.
</li><li class="li-itemize"><code>[:upper:]</code> Uppercase alphabetic characters.
</li><li class="li-itemize"><code>[:cntrl:]</code> Control characters.
</li><li class="li-itemize"><code>[:digit:]</code> Numeric characters.
</li><li class="li-itemize"><code>[:xdigit:]</code> Numeric and hexadecimal characters.
</li><li class="li-itemize"><code>[:graph:]</code> Characters that are printable and visible.
</li><li class="li-itemize"><code>[:print:]</code> Characters that are printable, whether they are visible or not.
</li><li class="li-itemize"><code>[:punct:]</code> Punctuation characters.
</li><li class="li-itemize"><code>[:blank:]</code> Space or tab characters.
</li><li class="li-itemize"><code>[:space:]</code> Whitespace characters.
</li></ul>
<!--TOC subsection id="sec304" cat-->
<h3 class="subsection" id="sec304">10.11.2&#XA0;&#XA0;cat</h3><!--SEC END --><p><a id="fun:cat"></a><a id="function:cat"></a><a id="hevea_default310"></a><a id="hevea_fun216"></a></p><pre class="verbatim">    cat(files) : Sequence
       files : File or InChannel Sequence
</pre><p>The <code>cat</code> function concatenates the output from multiple files
and returns it as a string.
</p>
<!--TOC subsection id="sec305" grep-->
<h3 class="subsection" id="sec305">10.11.3&#XA0;&#XA0;grep</h3><!--SEC END --><p><a id="fun:grep"></a><a id="function:grep"></a><a id="hevea_default311"></a><a id="hevea_fun217"></a></p><pre class="verbatim">   grep(pattern) : String  # input from stdin, default options
      pattern : String
   grep(pattern, files) : String  # default options
      pattern : String
      files   : File Sequence
   grep(options, pattern, files) : String
     options : String
     pattern : String
     files   : File Sequence
</pre><p>The <code>grep</code> function searches for occurrences of a regular
expression <code>pattern</code> in a set of files, and prints lines that match.
This is like a highly-simplified version of <span class="c001">grep</span>(1).</p><p>The options are:
</p><dl class="description"><dt class="dt-description">
<span class="c004">q</span></dt><dd class="dd-description"> If specified, the output from <code>grep</code> is not displayed.
</dd><dt class="dt-description"><span class="c004">h</span></dt><dd class="dd-description"> If specified, output lines will not include the filename (default, when only one input
file is given).
</dd><dt class="dt-description"><span class="c004">n</span></dt><dd class="dd-description"> If specified, output lines include the filename (default, when more than one input file
is given).
</dd><dt class="dt-description"><span class="c004">v</span></dt><dd class="dd-description"> If specified, search for lines without a match instead of lines with a match,
</dd></dl><p>The <code>pattern</code> is a regular expression.</p><p>If successful (<code>grep</code> found a match), the function returns <code>true</code>.
Otherwise, it returns <code>false</code>.
</p>
<!--TOC subsection id="sec306" scan-->
<h3 class="subsection" id="sec306">10.11.4&#XA0;&#XA0;scan</h3><!--SEC END --><p><a id="fun:scan"></a><a id="function:scan"></a><a id="hevea_default312"></a><a id="hevea_fun218"></a></p><pre class="verbatim">   scan(input-files)
   case string1
      body1
   case string2
      body2
   ...
   default
      bodyd
</pre><p>The <code>scan</code> function provides input processing in command-line form.
The function takes file/filename arguments. If called with no
arguments, the input is taken from <code>stdin</code>. If arguments are provided,
each specifies an <code>InChannel</code>, or the name of a file for input.
Output is always to <code>stdout</code>.</p><p>The <code>scan</code> function operates by reading the input one line at a time,
and processing it according to the following algorithm.</p><p>For each line,
the record is first split into fields, and
the fields are bound to the variables <code>$1, $2, ...</code>. The variable
<code>$0</code> is defined to be the entire line, and <code>$*</code> is an array
of all the field values. The <code>$(NF)</code> variable is defined to be the number
of fields.</p><p>Next, a case expression is selected. If <code>string_i</code> matches the token <code>$1</code>,
then <code>body_i</code> is evaluated. If the body ends in an <code>export</code>, the state
is passed to the next clause. Otherwise the value is discarded.</p><p>For example, here is an <code>scan</code> function that acts as a simple command processor.</p><pre class="verbatim">    calc() =
       i = 0
       scan(script.in)
       case print
          println($i)
       case inc
          i = $(add $i, 1)
          export
       case dec
          i = $(sub $i, 1)
          export
       case addconst
          i = $(add $i, $2)
          export
       default
          eprintln($"Unknown command: $1")
</pre><p>The <code>scan</code> function also supports several options.</p><pre class="verbatim">    scan(options, files)
    ...
</pre><dl class="description"><dt class="dt-description">
<span class="c004">A</span></dt><dd class="dd-description"> Parse each line as an argument list, where arguments
may be quoted. For example, the following line has three words,
&#X201C;<code>ls</code>&#X201D;, &#X201C;<code>-l</code>&#X201D;, &#X201C;<code>Program Files</code>&#X201D;.<pre class="verbatim">       ls -l "Program Files"
   </pre></dd><dt class="dt-description"><span class="c004">O</span></dt><dd class="dd-description"> Parse each line using white space as the separator, using the
usual OMake algorithm for string parsing. This is the default.
</dd><dt class="dt-description"><span class="c004">x</span></dt><dd class="dd-description"> Once each line is split, reduce each word using the
hex representation. This is the usual hex representation used
in URL specifiers, so the string &#X201C;Program Files&#X201D; may be
alternately represented in the form ProgramProgram+Files.
</dd></dl><p>Note, if you want to redirect the output to a file, the easiest way is to
redefine the <code>stdout</code> variable. The <code>stdout</code> variable is scoped the
same way as other variables, so this definition does not affect the meaning of
<code>stdout</code> outside the <code>calc</code> function.</p><pre class="verbatim">    calc() =
        stdout = $(fopen script.out, w)
        scan(script.in)
           ...
        close($(stdout))
</pre>
<!--TOC subsection id="sec307" awk-->
<h3 class="subsection" id="sec307">10.11.5&#XA0;&#XA0;awk</h3><!--SEC END --><p><a id="fun:awk"></a><a id="function:awk"></a><a id="hevea_default313"></a><a id="hevea_fun219"></a></p><pre class="verbatim">   awk(input-files)
   case pattern1:
      body1
   case pattern2:
      body2
   ...
   default:
      bodyd
</pre><p>or</p><pre class="verbatim">   awk(options, input-files)
   case pattern1:
      body1
   case pattern2:
      body2
   ...
   default:
      bodyd
</pre><p>The <code>awk</code> function provides input processing similar to <span class="c001">awk</span>(1),
but more limited. The <code>input-files</code> argument is a sequence of values,
each specifies an <code>InChannel</code>, or the name of a file for input.
If called with no options and no file arguments, the input is taken from <code>stdin</code>.
Output is always to <code>stdout</code>.</p><p>The variables <code>RS</code> and <code>FS</code> define record and field separators
as regular expressions.
The default value of <code>RS</code> is the regular expression <code>\r|\n|\r\n</code>.
The default value of <code>FS</code> is the regular expression <code>[ \t]</code>+.</p><p>The <code>awk</code> function operates by reading the input one record at a time,
and processing it according to the following algorithm.</p><p>For each line,
the record is first split into fields using the field separator <code>FS</code>, and
the fields are bound to the variables <code>$1, $2, ...</code>. The variable
<code>$0</code> is defined to be the entire line, and <code>$*</code> is an array
of all the field values. The <code>$(NF)</code> variable is defined to be the number
of fields.</p><p>Next, the cases are evaluated in order.
For each case, if the regular expression <code>pattern_i</code> matches the record <code>$0</code>,
then <code>body_i</code> is evaluated. If the body ends in an <code>export</code>, the state
is passed to the next clause. Otherwise the value is discarded. If the regular
expression contains <code>\(r\)</code> expression, those expression override the
fields <code>$1, $2, ...</code>.</p><p>For example, here is an <code>awk</code> function to print the text between two
delimiters <code>\begin{&lt;name&gt;}</code> and <code>\end{&lt;name&gt;}</code>, where the <code>&lt;name&gt;</code>
must belong to a set passed as an argument to the <code>filter</code> function.</p><pre class="verbatim">    filter(names) =
       print = false

       awk(Awk.in)
       case $"^\\end\{\([:alpha:]+\)\}"
          if $(mem $1, $(names))
             print = false
             export
          export
       default
          if $(print)
             println($0)
       case $"^\\begin\{\([:alpha:]+\)\}"
          print = $(mem $1, $(names))
          export
</pre><p>Note, if you want to redirect the output to a file, the easiest way is to
redefine the <code>stdout</code> variable. The <code>stdout</code> variable is scoped the
same way as other variables, so this definition does not affect the meaning of
<code>stdout</code> outside the <code>filter</code> function.</p><pre class="verbatim">    filter(names) =
        stdout = $(fopen file.out, w)
        awk(Awk.in)
           ...
        close($(stdout))
</pre><p>Options.
</p><dl class="description"><dt class="dt-description">
<span class="c004">b</span></dt><dd class="dd-description"> &#X201C;Break&#X201D; when evaluating cases. Only the first case that matches will be selected.
</dd></dl><p>The <a href="#fun%3Abreak"><CODE>break</CODE> function</a> can be used to abort the loop,
exiting the <code>awk</code> function immediately.
</p>
<!--TOC subsection id="sec308" fsubst-->
<h3 class="subsection" id="sec308">10.11.6&#XA0;&#XA0;fsubst</h3><!--SEC END --><p><a id="fun:fsubst"></a><a id="function:fsubst"></a><a id="hevea_default314"></a><a id="hevea_fun220"></a></p><pre class="verbatim">   fsubst(files)
   case pattern1 [options]
      body1
   case pattern2 [options]
      body2
   ...
   default
      bodyd
</pre><p>The <code>fsubst</code> function provides a <span class="c001">sed</span>(1)-like substitution
function. Similar to <code>awk</code>, if <code>fsubst</code> is called with no
arguments, the input is taken from <code>stdin</code>. If arguments are provided,
each specifies an <code>InChannel</code>, or the name of a file for input.</p><p>The <code>RS</code> variable defines a regular expression that determines a record separator,
The default value of <code>RS</code> is the regular expression <code>\r|\n|\r\n</code>.</p><p>The <code>fsubst</code> function reads the file one record at a time.</p><p>For each record, the cases are evaluated in order. Each case defines
a substitution from a substring matching the <code>pattern</code> to
replacement text defined by the body.</p><p>Currently, there is only one option: <code>g</code>.
If specified, each clause specifies a global replacement,
and all instances of the pattern define a substitution.
Otherwise, the substitution is applied only once.</p><p>Output can be redirected by redefining the <code>stdout</code> variable.</p><p>For example, the following program replaces all occurrences of
an expression <code>word.</code> with its capitalized form.</p><pre class="verbatim">    section
       stdout = $(fopen Subst.out, w)
       fsubst(Subst.in)
       case $"\&lt;\([[:alnum:]]+\)\." g
          value $(capitalize $1).
       close($(stdout))
</pre>
<!--TOC subsection id="sec309" lex-->
<h3 class="subsection" id="sec309">10.11.7&#XA0;&#XA0;lex</h3><!--SEC END --><p><a id="fun:lex"></a><a id="function:lex"></a><a id="hevea_default315"></a><a id="hevea_fun221"></a></p><pre class="verbatim">   lex(files)
   case pattern1
      body1
   case pattern2
      body2
   ...
   default
      bodyd
</pre><p>The <code>lex</code> function provides a simple lexical-style scanner
function. The input is a sequence of files or channels. The cases
specify regular expressions. Each time the input is read, the regular
expression that matches the <em>longest prefix</em> of the input is selected,
and the body is evaluated.</p><p>If two clauses both match the same input, the <em>last</em> one is selected
for execution. The <code>default</code> case matches the regular expression <code>.</code>;
you probably want to place it first in the pattern list.</p><p>If the body end with an <code>export</code> directive,
the state is passed to the next clause.</p><p>For example, the following program collects all occurrences of alphanumeric
words in an input file.</p><pre class="verbatim">    collect-words($(files)) =
       words[] =
       lex($(files))
       default
          # empty
       case $"[[:alnum:]]+" g
          words[] += $0
          export
</pre><p>The <code>default</code> case, if one exists, matches single characters. Since</p><p>It is an error if the input does not match any of the regular expressions.</p><p>The <a href="#fun%3Abreak"><CODE>break</CODE> function</a> can be used to abort the loop.
</p>
<!--TOC subsection id="sec310" lex-search-->
<h3 class="subsection" id="sec310">10.11.8&#XA0;&#XA0;lex-search</h3><!--SEC END --><p><a id="fun:lex-search"></a><a id="function:lex-search"></a><a id="hevea_default316"></a><a id="hevea_fun222"></a></p><pre class="verbatim">   lex-search(files)
   case pattern1
      body1
   case pattern2
      body2
   ...
   default
      bodyd
</pre><p>The <code>lex-search</code> function is like the <code>lex</code> function, but input that
does not match any of the regular expressions is skipped. If the clauses include
a <code>default</code> case, then the <code>default</code> matches any skipped text.</p><p>For example, the following program collects all occurrences of alphanumeric
words in an input file, skipping any other text.</p><pre class="verbatim">    collect-words($(files)) =
       words[] =
       lex-search($(files))
       default
          eprintln(Skipped $0)
       case $"[[:alnum:]]+" g
          words[] += $0
          export
</pre><p>The <code>default</code> case, if one exists, matches single characters. Since</p><p>It is an error if the input does not match any of the regular expressions.</p><p>The <a href="#fun%3Abreak"><CODE>break</CODE> function</a> can be used to abort the loop.
</p>
<!--TOC subsection id="sec311" Lexer-->
<h3 class="subsection" id="sec311">10.11.9&#XA0;&#XA0;Lexer</h3><!--SEC END --><p><a id="obj:Lexer"></a><a id="object:Lexer"></a><a id="hevea_default317"></a><a id="hevea_obj5"></a></p><p>The <code>Lexer</code> object defines a facility for lexical analysis, similar to the
<span class="c001">lex</span>(1) and <span class="c001">flex</span>(1) programs.</p><p>In <span class="c001">omake</span>, lexical analyzers can be constructed dynamically by extending
the <code>Lexer</code> class. A lexer definition consists of a set of directives specified
with method calls, and set of clauses specified as rules.</p><p>For example, consider the following lexer definition, which is intended
for lexical analysis of simple arithmetic expressions for a desktop
calculator.</p><pre class="verbatim">   lexer1. =
      extends $(Lexer)

      other: .
         eprintln(Illegal character: $* )
         lex()

      white: $"[[:space:]]+"
         lex()

      op: $"[-+*/()]"
         switch $*
         case +
            Token.unit($(loc), plus)
         case -
            Token.unit($(loc), minus)
         case *
            Token.unit($(loc), mul)
         case /
            Token.unit($(loc), div)
         case $"("
            Token.unit($(loc), lparen)
         case $")"
            Token.unit($(loc), rparen)

      number: $"[[:digit:]]+"
         Token.pair($(loc), exp, $(int $* ))

      eof: $"\'"
         Token.unit($(loc), eof)
</pre><p>This program defines an object <code>lexer1</code> the extends the <code>Lexer</code>
object, which defines lexing environment.</p><p>The remainder of the definition consists of a set of clauses,
each with a method name before the colon; a regular expression
after the colon; and in this case, a body. The body is optional,
if it is not specified, the method with the given name should
already exist in the lexer definition.</p><p><em>NB</em> The clause that matches the <em>longest</em> prefix of the input
is selected. If two clauses match the same input prefix, then the <em>last</em>
one is selected. This is unlike most standard lexers, but makes more sense
for extensible grammars.</p><p>The first clause matches any input that is not matched by the other clauses.
In this case, an error message is printed for any unknown character, and
the input is skipped. Note that this clause is selected only if no other
clause matches.</p><p>The second clause is responsible for ignoring white space.
If whitespace is found, it is ignored, and the lexer is called
recursively.</p><p>The third clause is responsible for the arithmetic operators.
It makes use of the <code>Token</code> object, which defines three
fields: a <code>loc</code> field that represents the source location;
a <code>name</code>; and a <code>value</code>.</p><p>The lexer defines the <code>loc</code> variable to be the location
of the current lexeme in each of the method bodies, so we can use
that value to create the tokens.</p><p>The <code>Token.unit($(loc), name)</code>
method constructs a new <code>Token</code> object with the given name,
and a default value.</p><p>The <code>number</code> clause matches nonnegative integer constants.
The <code>Token.pair($(loc), name, value)</code> constructs a token with the
given name and value.</p><p>Lexer object operate on <code>InChannel</code> objects.
The method <code>lexer1.lex-channel(channel)</code> reads the next
token from the channel argument.</p>
<!--TOC subsection id="sec312" Lexer matching-->
<h3 class="subsection" id="sec312">10.11.10&#XA0;&#XA0;Lexer matching</h3><!--SEC END --><p>During lexical analysis, clauses are selected by longest match.
That is, the clause that matches the longest sequence of input
characters is chosen for evaluation. If no clause matches, the
lexer raises a <code>RuntimeException</code>. If more than one clause
matches the same amount of input, the first one is chosen
for evaluation.</p>
<!--TOC subsection id="sec313" Extending lexer definitions-->
<h3 class="subsection" id="sec313">10.11.11&#XA0;&#XA0;Extending lexer definitions</h3><!--SEC END --><p>Suppose we wish to augment the lexer example so that it ignores
comments. We will define comments as any text that begins with
the string <code>(*</code>, ends with <code>*)</code>, and comments may
be nested.</p><p>One convenient way to do this is to define a separate lexer
just to skip comments.</p><pre class="verbatim">   lex-comment. =
      extends $(Lexer)

      level = 0

      other: .
         lex()

      term: $"[*][)]"
         if $(not $(eq $(level), 0))
            level = $(sub $(level), 1)
            lex()

      next: $"[(][*]"
         level = $(add $(level), 1)
         lex()

      eof: $"\'"
         eprintln(Unterminated comment)
</pre><p>This lexer contains a field <code>level</code> that keeps track of the nesting
level. On encountering a <code>(*</code> string, it increments the level,
and for <code>*)</code>, it decrements the level if nonzero, and continues.</p><p>Next, we need to modify our previous lexer to skip comments.
We can do this by extending the lexer object <code>lexer1</code>
that we just created.</p><pre class="verbatim">   lexer1. +=
      comment: $"[(][*]"
         lex-comment.lex-channel($(channel))
         lex()
</pre><p>The body for the comment clause calls the <code>lex-comment</code> lexer when
a comment is encountered, and continues lexing when that lexer returns.</p>
<!--TOC subsection id="sec314" Threading the lexer object-->
<h3 class="subsection" id="sec314">10.11.12&#XA0;&#XA0;Threading the lexer object</h3><!--SEC END --><p>Clause bodies may also end with an <code>export</code> directive. In this case
the lexer object itself is used as the returned token. If used with
the <code>Parser</code> object below, the lexer should define the <code>loc</code>, <code>name</code>
and <code>value</code> fields in each <code>export</code> clause. Each time
the <code>Parser</code> calls the lexer, it calls it with the lexer returned
from the previous lex invocation.
</p>
<!--TOC subsection id="sec315" Parser-->
<h3 class="subsection" id="sec315">10.11.13&#XA0;&#XA0;Parser</h3><!--SEC END --><p><a id="obj:Parser"></a><a id="object:Parser"></a><a id="hevea_default318"></a><a id="hevea_obj6"></a></p><p>The <code>Parser</code> object provides a facility for syntactic analysis based
on context-free grammars.</p><p><code>Parser</code> objects are specified as a sequence of directives,
specified with method calls; and productions, specified as rules.</p><p>For example, let&#X2019;s finish building the desktop calculator started
in the <code>Lexer</code> example.</p><pre class="verbatim">   parser1. =
      extends $(Parser)

      #
      # Use the main lexer
      #
      lexer = $(lexer1)

      #
      # Precedences, in ascending order
      #
      left(plus minus)
      left(mul div)
      right(uminus)

      #
      # A program
      #
      start(prog)

      prog: exp eof
         return $1

      #
      # Simple arithmetic expressions
      #
      exp: minus exp :prec: uminus
         neg($2)

      exp: exp plus exp
         add($1, $3)

      exp: exp minus exp
         sub($1, $3)

      exp: exp mul exp
         mul($1, $3)

      exp: exp div exp
         div($1, $3)

      exp: lparen exp rparen
         return $2
</pre><p>Parsers are defined as extensions of the <code>Parser</code> class.
A <code>Parser</code> object must have a <code>lexer</code> field. The <code>lexer</code>
is not required to be a <code>Lexer</code> object, but it must provide
a <code>lexer.lex()</code> method that returns a token object with
<code>name</code> and <code>value</code> fields. For this example, we use the
<code>lexer1</code> object that we defined previously.</p><p>The next step is to define precedences for the terminal symbols.
The precedences are defined with the <code>left</code>, <code>right</code>,
and <code>nonassoc</code> methods in order of increasing precedence.</p><p>The grammar must have at least one start symbol, declared with
the <code>start</code> method.</p><p>Next, the productions in the grammar are listed as rules.
The name of the production is listed before the colon, and
a sequence of variables is listed to the right of the colon.
The body is a semantic action to be evaluated when the production
is recognized as part of the input.</p><p>In this example, these are the productions for the arithmetic
expressions recognized by the desktop calculator. The semantic
action performs the calculation. The variables <code>$1, $2, ...</code>
correspond to the values associated with each of the variables
on the right-hand-side of the production.</p>
<!--TOC subsection id="sec316" Calling the parser-->
<h3 class="subsection" id="sec316">10.11.14&#XA0;&#XA0;Calling the parser</h3><!--SEC END --><p>The parser is called with the <code>$(parser1.parse-channel start, channel)</code>
or <code>$(parser1.parse-file start, file)</code> functions. The <code>start</code>
argument is the start symbol, and the <code>channel</code> or <code>file</code>
is the input to the parser.</p>
<!--TOC subsection id="sec317" Parsing control-->
<h3 class="subsection" id="sec317">10.11.15&#XA0;&#XA0;Parsing control</h3><!--SEC END --><p>The parser generator generates a pushdown automation based on LALR(1)
tables. As usual, if the grammar is ambiguous, this may generate shift/reduce
or reduce/reduce conflicts. These conflicts are printed to standard
output when the automaton is generated.</p><p>By default, the automaton is not constructed until the parser is
first used.</p><p>The <code>build(debug)</code> method forces the construction of the automaton.
While not required, it is wise to finish each complete parser with
a call to the <code>build(debug)</code> method. If the <code>debug</code> variable
is set, this also prints with parser table together with any conflicts.</p><p>The <code>loc</code> variable is defined within action bodies, and represents
the input range for all tokens on the right-hand-side of the production.</p>
<!--TOC subsection id="sec318" Extending parsers-->
<h3 class="subsection" id="sec318">10.11.16&#XA0;&#XA0;Extending parsers</h3><!--SEC END --><p>Parsers may also be extended by inheritance.
For example, let&#X2019;s extend the grammar so that it also recognizes
the <code>&lt;&lt;</code> and <code>&gt;&gt;</code> shift operations.</p><p>First, we extend the lexer so that it recognizes these tokens.
This time, we choose to leave <code>lexer1</code> intact, instead of
using the += operator.</p><pre class="verbatim">   lexer2. =
      extends $(lexer1)

      lsl: $"&lt;&lt;"
         Token.unit($(loc), lsl)

      asr: $"&gt;&gt;"
         Token.unit($(loc), asr)
</pre><p>Next, we extend the parser to handle these new operators.
We intend that the bitwise operators have lower precedence
than the other arithmetic operators. The two-argument form
of the <code>left</code> method accomplishes this.</p><pre class="verbatim">   parser2. =
      extends $(parser1)

      left(plus, lsl lsr asr)

      lexer = $(lexer2)

      exp: exp lsl exp
         lsl($1, $3)

      exp: exp asr exp
         asr($1, $3)
</pre><p>In this case, we use the new lexer <code>lexer2</code>, and we add productions
for the new shift operations.
</p>
<!--TOC subsection id="sec319" Passwd-->
<h3 class="subsection" id="sec319">10.11.17&#XA0;&#XA0;Passwd</h3><!--SEC END --><p><a id="obj:Passwd"></a><a id="object:Passwd"></a><a id="hevea_default319"></a><a id="hevea_obj7"></a></p><p>The <code>Passwd</code> object represents an entry in the system&#X2019;s user database.
It contains the following fields.</p><dl class="description"><dt class="dt-description">
</dt><dd class="dd-description"><CODE>pw_name</CODE><a id="hevea_default320"></a>: the login name.
</dd><dt class="dt-description"></dt><dd class="dd-description"><CODE>pw_passwd</CODE><a id="hevea_default321"></a>: the encrypted password.
</dd><dt class="dt-description"></dt><dd class="dd-description"><CODE>pw_uid</CODE><a id="hevea_default322"></a>: user id of the user.
</dd><dt class="dt-description"></dt><dd class="dd-description"><CODE>pw_gid</CODE><a id="hevea_default323"></a>: group id of the user.
</dd><dt class="dt-description"></dt><dd class="dd-description"><CODE>pw_gecos</CODE><a id="hevea_default324"></a>: the user name or comment field.
</dd><dt class="dt-description"></dt><dd class="dd-description"><CODE>pw_dir</CODE><a id="hevea_default325"></a>: the user&#X2019;s home directory.
</dd><dt class="dt-description"></dt><dd class="dd-description"><CODE>pw_shell</CODE><a id="hevea_default326"></a>: the user&#X2019;s default shell.
</dd></dl><p>Not all the fields will have meaning on all operating systems.</p>
<!--TOC subsection id="sec320" getpwnam, getpwuid-->
<h3 class="subsection" id="sec320">10.11.18&#XA0;&#XA0;getpwnam, getpwuid</h3><!--SEC END --><p><a id="fun:getpwnam"></a><a id="function:getpwnam"></a><a id="hevea_default327"></a><a id="hevea_fun223"></a><a id="fun:getpwuid"></a><a id="function:getpwuid"></a><a id="hevea_default328"></a><a id="hevea_fun224"></a></p><pre class="verbatim">    $(getpwnam name...) : Passwd
       name : String
    $(getpwuid uid...) : Passwd
       uid : Int
    raises RuntimeException
</pre><p>The <code>getpwnam</code> function looks up an entry by the user&#X2019;s login and the <code>getpwuid</code>
function looks up an entry by user&#X2019;s numerical id (uid). If no entry is found, an exception
will be raised.</p>
<!--TOC subsection id="sec321" getpwents-->
<h3 class="subsection" id="sec321">10.11.19&#XA0;&#XA0;getpwents</h3><!--SEC END --><p><a id="fun:getpwents"></a><a id="function:getpwents"></a><a id="hevea_default329"></a><a id="hevea_fun225"></a></p><pre class="verbatim">    $(getpwents) : Array
</pre><p>The <code>getpwents</code> function returns an array of <code>Passwd</code> objects, one for every user
fund in the system user database. Note that depending on the operating system and on the setup
of the user database, the returned array may be incomplete or even empty.
</p>
<!--TOC subsection id="sec322" Group-->
<h3 class="subsection" id="sec322">10.11.20&#XA0;&#XA0;Group</h3><!--SEC END --><p><a id="obj:Group"></a><a id="object:Group"></a><a id="hevea_default330"></a><a id="hevea_obj8"></a></p><p>The <code>Group</code> object represents an entry in the system&#X2019;s user group database.
It contains the following fields.</p><dl class="description"><dt class="dt-description">
</dt><dd class="dd-description"><CODE>gr_name</CODE><a id="hevea_default331"></a>: the group name.
</dd><dt class="dt-description"></dt><dd class="dd-description"><CODE>gr_group</CODE><a id="hevea_default332"></a>: the encrypted password.
</dd><dt class="dt-description"></dt><dd class="dd-description"><CODE>gr_gid</CODE><a id="hevea_default333"></a>: group id of the group.
</dd><dt class="dt-description"></dt><dd class="dd-description"><CODE>gr_mem</CODE><a id="hevea_default334"></a>: the group member&#X2019;s user names.
</dd></dl><p>Not all the fields will have meaning on all operating systems.</p>
<!--TOC subsection id="sec323" getgrnam, getgrgid-->
<h3 class="subsection" id="sec323">10.11.21&#XA0;&#XA0;getgrnam, getgrgid</h3><!--SEC END --><p><a id="fun:getgrnam"></a><a id="function:getgrnam"></a><a id="hevea_default335"></a><a id="hevea_fun226"></a><a id="fun:getgrgid"></a><a id="function:getgrgid"></a><a id="hevea_default336"></a><a id="hevea_fun227"></a></p><pre class="verbatim">    $(getgrnam name...) : Group
       name : String
    $(getgrgid gid...) : Group
       gid : Int
    raises RuntimeException
</pre><p>The <code>getgrnam</code> function looks up a group entry by the group&#X2019;s name and the <code>getgrgid</code>
function looks up an entry by groups&#X2019;s numerical id (gid). If no entry is found, an exception
will be raised.</p>
<!--TOC subsection id="sec324" tgetstr-->
<h3 class="subsection" id="sec324">10.11.22&#XA0;&#XA0;tgetstr</h3><!--SEC END --><p><a id="fun:tgetstr"></a><a id="function:tgetstr"></a><a id="hevea_default337"></a><a id="hevea_fun228"></a></p><pre class="verbatim">   $(tgetstr id) : String
      id : String
</pre><p>The <code>tgetstr</code> function looks up the terminal capability with the indicated <code>id</code>.
This assumes the terminfo to lookup is given in the <code>TERM</code> environment variable. This
function returns an empty value if the given terminal capability is not defined.</p><p>Note: if you intend to use the value returned by <code>tgetstr</code> inside the shell
<a href="#var%3Aprompt"><CODE>prompt</CODE></a>, you need to wrap it using the <a href="#fun%3Aprompt-invisible"><CODE>prompt-invisible</CODE> function</a>.
</p>
<!--TOC subsection id="sec325" xterm-escape-begin, xterm-escape-end-->
<h3 class="subsection" id="sec325">10.11.23&#XA0;&#XA0;xterm-escape-begin, xterm-escape-end</h3><!--SEC END --><p><a id="fun:xterm-escape-begin"></a><a id="function:xterm-escape-begin"></a><a id="hevea_default338"></a><a id="hevea_fun229"></a><a id="fun:xterm-escape-end"></a><a id="function:xterm-escape-end"></a><a id="hevea_default339"></a><a id="hevea_fun230"></a></p><pre class="verbatim">   $(xterm-escape-begin) : String
   $(xterm-escape-end) : String
</pre><p>The <code>xterm-escape-begin</code> and <code>xterm-escape-end</code> functions return the escape sequences
that can be used to set the XTerm window title. Will return empty values if this capability is
not available.</p><p>Note: if you intend to use these strings inside the shell <a href="#var%3Aprompt"><CODE>prompt</CODE></a>, you need to use
<code>$(prompt_invisible_begin)$(xterm-escape-begin)</code> and
<code>$(xterm-escape-end)$(prompt_invisible_end)</code>.
</p>
<!--TOC subsection id="sec326" xterm-escape-->
<h3 class="subsection" id="sec326">10.11.24&#XA0;&#XA0;xterm-escape</h3><!--SEC END --><p><a id="fun:xterm-escape"></a><a id="function:xterm-escape"></a><a id="hevea_default340"></a><a id="hevea_fun231"></a></p><pre class="verbatim">   $(xterm-escape s) : Sequence
</pre><p>When the <code>TERM</code> environment variable indicates that the XTerm title setting capability is available,
<code>$(xterm-escape s)</code> is equivalent to <code>$(xterm-escape-begin)s$(xterm-escape-end)</code>. Otherwise, it
returns an empty value.</p><p>Note: if you intend to use the value returned by <code>xterm-escape</code> inside the shell
<a href="#var%3Aprompt"><CODE>prompt</CODE></a>, you need to wrap it using the <a href="#fun%3Aprompt-invisible"><CODE>prompt-invisible</CODE> function</a>.
</p>
<!--TOC subsection id="sec327" prompt-invisible-begin, prompt-invisible-end-->
<h3 class="subsection" id="sec327">10.11.25&#XA0;&#XA0;prompt-invisible-begin, prompt-invisible-end</h3><!--SEC END --><p><a id="fun:prompt-invisible-begin"></a><a id="function:prompt-invisible-begin"></a><a id="hevea_default341"></a><a id="hevea_fun232"></a><a id="fun:prompt-invisible-end"></a><a id="function:prompt-invisible-end"></a><a id="hevea_default342"></a><a id="hevea_fun233"></a></p><pre class="verbatim">   $(prompt-invisible-begin) : String
   $(prompt-invisible-end) : String
</pre><p>The <code>prompt-invisible-begin</code> and <code>prompt-invisible-end</code> functions return the escape sequences
that must used to mark the &#X201C;invisible&#X201D; sections of the shell <a href="#var%3Aprompt"><CODE>prompt</CODE></a> (such as various escape sequences).
</p>
<!--TOC subsection id="sec328" prompt-invisible-->
<h3 class="subsection" id="sec328">10.11.26&#XA0;&#XA0;prompt-invisible</h3><!--SEC END --><p><a id="fun:prompt-invisible"></a><a id="function:prompt-invisible"></a><a id="hevea_default343"></a><a id="hevea_fun234"></a></p><pre class="verbatim">   $(prompt-invisible s) : Sequence
</pre><p>The <code>prompt-invisible</code> will wrap its argument with <code>$(prompt-invisible-begin)</code> and
<code>$(prompt-invisible-end)</code>. All the &#X2018;invisible&#X201D; sections of the shell <a href="#var%3Aprompt"><CODE>prompt</CODE></a> (such as various
escape sequences) must be wrapped this way.
</p>
<!--TOC subsection id="sec329" gettimeofday-->
<h3 class="subsection" id="sec329">10.11.27&#XA0;&#XA0;gettimeofday</h3><!--SEC END --><p><a id="fun:gettimeofday"></a><a id="function:gettimeofday"></a><a id="hevea_default344"></a><a id="hevea_fun235"></a></p><pre class="verbatim">   $(gettimeofday) : Float
</pre><p>The <code>gettimeofday</code> function returns the time of day in seconds
since January 1, 1970.</p>
<!--TOC subsection id="sec330" Tm-->
<h3 class="subsection" id="sec330">10.11.28&#XA0;&#XA0;Tm</h3><!--SEC END --><p><a id="obj:Tm"></a><a id="object:Tm"></a><a id="hevea_default345"></a><a id="hevea_obj9"></a>
The <code>Tm</code> object is a structure that represents the time and date.</p><dl class="description"><dt class="dt-description">
</dt><dd class="dd-description"><CODE>tm_sec</CODE><a id="hevea_default346"></a> <code>: Int</code> Seconds (0&#X2013;59).
</dd><dt class="dt-description"></dt><dd class="dd-description"><CODE>tm_min</CODE><a id="hevea_default347"></a> <code>: Int</code> Minutes (0&#X2013;59).
</dd><dt class="dt-description"></dt><dd class="dd-description"><CODE>tm_hour</CODE><a id="hevea_default348"></a> <code>: Int</code> Hours (0&#X2013;23).
</dd><dt class="dt-description"></dt><dd class="dd-description"><CODE>tm_mday</CODE><a id="hevea_default349"></a> <code>: Int</code> Day of the month (0&#X2013;31).
</dd><dt class="dt-description"></dt><dd class="dd-description"><CODE>tm_mon</CODE><a id="hevea_default350"></a> <code>: Int</code> Month (0&#X2013;11).
</dd><dt class="dt-description"></dt><dd class="dd-description"><CODE>tm_year</CODE><a id="hevea_default351"></a> <code>: Int</code> Year (minus 1900).
</dd><dt class="dt-description"></dt><dd class="dd-description"><CODE>tm_wday</CODE><a id="hevea_default352"></a> <code>: Int</code> Day of the week (0&#X2013;6, Sunday is 0).
</dd><dt class="dt-description"></dt><dd class="dd-description"><CODE>tm_yday</CODE><a id="hevea_default353"></a> <code>: Int</code> Day of the year (0&#X2013;365).
</dd><dt class="dt-description"></dt><dd class="dd-description"><CODE>tm_isdst</CODE><a id="hevea_default354"></a> <code>: Bool</code> True iff daylight savings time is in effect.
</dd></dl>
<!--TOC subsection id="sec331" gmtime, localtime-->
<h3 class="subsection" id="sec331">10.11.29&#XA0;&#XA0;gmtime, localtime</h3><!--SEC END --><p><a id="fun:gmtime"></a><a id="function:gmtime"></a><a id="hevea_default355"></a><a id="hevea_fun236"></a><a id="fun:localtime"></a><a id="function:localtime"></a><a id="hevea_default356"></a><a id="hevea_fun237"></a>
</p><pre class="verbatim">   $(gmtime time) : tm
   $(localtime time) : tm
       time : Float
</pre><p>Convert the time in seconds since the Unix epoch to calendar format.
The function <code>gmtime</code> assumes UTC (Coordinated Universal Time);
the function <code>localtime</code> uses the local time zone.
</p>
<!--TOC subsection id="sec332" mktime, normalize-time-->
<h3 class="subsection" id="sec332">10.11.30&#XA0;&#XA0;mktime, normalize-time</h3><!--SEC END --><p><a id="fun:mktime"></a><a id="function:mktime"></a><a id="hevea_default357"></a><a id="hevea_fun238"></a><a id="fun:normalize-time"></a><a id="function:normalize-time"></a><a id="hevea_default358"></a><a id="hevea_fun239"></a>
</p><pre class="verbatim">   $(mktime tm) : Float
   $(normalize-time tm) : Tm
       tm : Tm
</pre><p>Convert the calendar time to time in seconds since the Unix epoch.
Assumes the local time zone.</p><p>The fields <code>tm_wday</code>, <code>tm_mday</code>, <code>tm_yday</code> are ignored.
The other components are not restricted to their normal ranges and will be
normalized as needed.</p><p>The function <code>normalize-time</code> normalizes the
calendar time. The returned object contains an additional field
<code>tm_time : Float</code> that represnets the time in seconds since the Unix epoch
(the same value returned by <code>mktime</code>).
</p>
<!--TOC chapter id="sec333" Shell commands-->
<h1 class="chapter" id="sec333">Chapter&#XA0;11&#XA0;&#XA0;Shell commands</h1><!--SEC END --><p>
<a id="chapter:shell"></a>
</p><!--NAME omake-shell.html-->
<p>Shell commands (commands to be executed by the operating system) can be freely mixed with other
code.</p><p><span class="c004">NOTE</span>: the syntax and shell usage is identical on all platforms, including Win32. To avoid
portability problems on Win32, it is recommended that you avoid the use of the native shell
interpreter <code>cmd</code>.</p><pre class="verbatim">    LIB = $(dir lib)
    println(The contents of the $(LIB) directory is:)
    ls $(LIB)
</pre>
<!--TOC section id="sec334" Simple commands-->
<h2 class="section" id="sec334">11.1&#XA0;&#XA0;Simple commands</h2><!--SEC END --><p>The syntax of shell commands is similar to the syntax used by the Unix shell <code>bash</code>. In
general, a command is a <em>pipeline</em>. A basic command is part of a pipeline. It is specified
with the name of an executable and some arguments. Here are some examples.</p><pre class="verbatim">    ls
    ls -AF .
    echo Hello world
</pre><p>The command is found using the current search path in the variable <code>PATH[]</code>, which should
define an array of directories containing executables.</p><p>A command may also be prefixed by environment variable definitions.</p><pre class="verbatim">    # Prints "Hello world"
    env X="Hello world" Y=2 printenv X
    # Pass the include path to the Visual C++
    env include="c:\Program Files\Microsoft SDK\include" cl foo.cpp
</pre>
<!--TOC section id="sec335" Globbing-->
<h2 class="section" id="sec335">11.2&#XA0;&#XA0;Globbing</h2><!--SEC END --><p>Commands may contain wildcard patterns. A pattern specifies a set of files through a limited kind
of regular expression. Patterns are expanded before the function is executed.</p><pre class="verbatim">   # List all files with a .c suffix
   ls *.c

   # List all files with a single character prefix, and .c suffix
   ls ?.c

   # Rename the file hello.ml to foo.ml
   mv {hello,foo}.ml
</pre><p>A comprehensive description of OMake glob patterns is given in Section&#XA0;<a href="#section%3Aglobbing">10.4</a>.</p>
<!--TOC section id="sec336" Background jobs-->
<h2 class="section" id="sec336">11.3&#XA0;&#XA0;Background jobs</h2><!--SEC END --><p>The command may also be placed in the background by placing an ampersand after the command. Control
returns to the shell without waiting for the job to complete. The job continues to run in the
background.</p><pre class="verbatim">    gcc -o hugeprogram *.c &amp;
</pre>
<!--TOC section id="sec337" File redirection-->
<h2 class="section" id="sec337">11.4&#XA0;&#XA0;File redirection</h2><!--SEC END --><p>Input and output can be redirected to files by using the <code>&lt;</code>, <code>&gt;</code>, and <code>&gt;&amp;</code>
directives after the command.</p><pre class="verbatim">    # Write to the "foo" file
    echo Hello world &gt; foo

    # Redirect input from the foo file
    cat &lt; foo

    # Redirect standard output and errors to the foo file
    gcc -o boo *.c &gt;&amp; foo
</pre>
<!--TOC section id="sec338" Pipelines-->
<h2 class="section" id="sec338">11.5&#XA0;&#XA0;Pipelines</h2><!--SEC END --><p>Pipelines are sequences of commands, where the output from each command is sent to the next.
Pipelines are defined with the <code>|</code> and <code>|&amp;</code> syntax. With <code>|</code> the output is
redirected, but errors are not. With <code>|&amp;</code> both output and errors are redirected.</p><pre class="verbatim">   # Send the output of the ls command to the printer
   ls *.c | lpr

   # Send output and errors to jyh as email
   gcc -o hugefile *.c |&amp; mail jyh
</pre>
<!--TOC section id="sec339" Conditional execution-->
<h2 class="section" id="sec339">11.6&#XA0;&#XA0;Conditional execution</h2><!--SEC END --><p>Commands may also be composed though conditional evaluation using the <code>||</code> and <code>&amp;&amp;</code>
syntax. Every command has an integer exit code, which may be zero or some other integer. A command
is said to <em>succeed</em> if its exit code is zero. The expression <code>command1 &amp;&amp; command2</code>
executes <code>command2</code> only if <code>command1</code> succeeds. The expression
<code>command1 || command2</code> executes <code>command2</code> only if <code>command1</code> fails.</p><pre class="verbatim">   # Display the x/y file if possible
   cd x &amp;&amp; cat y

   # Run foo.exe, or print an error message
   (test -x foo.exe &amp;&amp; foo.exe) || echo "foo.exe is not executable"
</pre>
<!--TOC section id="sec340" Grouping-->
<h2 class="section" id="sec340">11.7&#XA0;&#XA0;Grouping</h2><!--SEC END --><p>Parenthesis are used for grouping in a pipeline or conditional command. In the following
expression, the <code>test</code> function is used to test whether the <code>foo.exe</code> file is executable.
If it is, the <code>foo.exe</code> file is executed. If the file is not executable (or if the
<code>foo.exe</code> command fails), the message <code>"foo.exe is not executable"</code> is printed.</p><pre class="verbatim">   # Run foo.exe, or print an error message
   (test -x foo.exe &amp;&amp; foo.exe) || echo "foo.exe is not executable"
</pre>
<!--TOC section id="sec341" What is a shell command?-->
<h2 class="section" id="sec341">11.8&#XA0;&#XA0;What is a shell command?</h2><!--SEC END --><p>Syntactially, shell commands are any line that is not one of the following:</p><ul class="itemize"><li class="li-itemize">
A variable definition of the form <code>VAR=string</code>
</li><li class="li-itemize">A function call <code>f(...)</code> or method call <code>o.f(...)</code>
</li><li class="li-itemize">A rule definition containing a colon <code>string: ...</code>
</li><li class="li-itemize">A special command, including the following:
<ul class="itemize"><li class="li-itemize">
<code>if ...</code>
</li><li class="li-itemize"><code>switch ...</code>
</li><li class="li-itemize"><code>match ...</code>
</li><li class="li-itemize"><code>section ...</code>
</li><li class="li-itemize"><code>return ...</code>
</li></ul>
</li></ul><p>Commands may also be builtin (aliases). See the documentation for the
<a href="#obj%3AShell"><CODE>Shell</CODE> object</a> for more information.</p>
<!--TOC section id="sec342" Basic builtin functions-->
<h2 class="section" id="sec342">11.9&#XA0;&#XA0;Basic builtin functions</h2><!--SEC END -->
<!--TOC subsection id="sec343" echo-->
<h3 class="subsection" id="sec343">11.9.1&#XA0;&#XA0;echo</h3><!--SEC END --><p><a id="fun:echo"></a><a id="function:echo"></a><a id="hevea_default359"></a><a id="hevea_fun240"></a></p><p>The <code>echo</code> function prints a string.</p><pre class="verbatim">$(echo &lt;args&gt;)
echo &lt;args&gt;
</pre>
<!--TOC subsection id="sec344" cd-->
<h3 class="subsection" id="sec344">11.9.2&#XA0;&#XA0;cd</h3><!--SEC END --><p><a id="fun:cd"></a><a id="function:cd"></a><a id="hevea_default360"></a><a id="hevea_fun241"></a></p><p>The <code>cd</code> function changes the current directory.</p><pre class="verbatim">    cd(dir)
       dir : Dir
</pre><p>The <code>cd</code> function also supports a 2-argument form:</p><pre class="verbatim">    $(cd dir, e)
       dir : Dir
       e : expression
</pre><p>In the two-argument form, expression <code>e</code> is evaluated
in the directory <code>dir</code>. The current directory is not
changed otherwise.</p><p>The behavior of the <code>cd</code> function can be changed with the
<code>CDPATH</code> variable, which specifies a search path for
directories. This is normally useful only in the <span class="c001">osh</span>
command interpreter.</p><pre class="verbatim">    CDPATH : Dir Sequence
</pre><p>For example, the following will change directory to the first
directory <code>./foo</code>, <code>~/dir1/foo</code>, <code>~/dir2/foo</code>.</p><pre class="verbatim">    CDPATH[] =
       .
       $(HOME)/dir1
       $(HOME)/dir2
    cd foo
</pre>
<!--TOC section id="sec345" Job control builtin functions-->
<h2 class="section" id="sec345">11.10&#XA0;&#XA0;Job control builtin functions</h2><!--SEC END -->
<!--TOC subsection id="sec346" jobs-->
<h3 class="subsection" id="sec346">11.10.1&#XA0;&#XA0;jobs</h3><!--SEC END --><p><a id="fun:jobs"></a><a id="function:jobs"></a><a id="hevea_default361"></a><a id="hevea_fun242"></a></p><p>The <code>jobs</code> function prints a list of jobs.</p><p><code>jobs</code>
</p>
<!--TOC subsection id="sec347" bg-->
<h3 class="subsection" id="sec347">11.10.2&#XA0;&#XA0;bg</h3><!--SEC END --><p><a id="fun:bg"></a><a id="function:bg"></a><a id="hevea_default362"></a><a id="hevea_fun243"></a></p><p>The <code>bg</code> function places a job in the background.</p><p><code>bg &lt;pid...&gt;</code>
</p>
<!--TOC subsection id="sec348" fg-->
<h3 class="subsection" id="sec348">11.10.3&#XA0;&#XA0;fg</h3><!--SEC END --><p><a id="fun:fg"></a><a id="function:fg"></a><a id="hevea_default363"></a><a id="hevea_fun244"></a></p><p>The <code>fg</code> function brings a job to the foreground.</p><p><code>fg &lt;pid...&gt;</code>
</p>
<!--TOC subsection id="sec349" stop-->
<h3 class="subsection" id="sec349">11.10.4&#XA0;&#XA0;stop</h3><!--SEC END --><p><a id="fun:stop"></a><a id="function:stop"></a><a id="hevea_default364"></a><a id="hevea_fun245"></a></p><p>The <code>stop</code> function suspends a job.</p><p><code>stop &lt;pid...&gt;</code>
</p>
<!--TOC subsection id="sec350" wait-->
<h3 class="subsection" id="sec350">11.10.5&#XA0;&#XA0;wait</h3><!--SEC END --><p><a id="fun:wait"></a><a id="function:wait"></a><a id="hevea_default365"></a><a id="hevea_fun246"></a></p><p>The <code>wait</code> function waits for a job to finish.
If no process identifiers are given, the shell waits for
all jobs to complete.</p><p><code>wait &lt;pid...&gt;</code>
</p>
<!--TOC subsection id="sec351" kill-->
<h3 class="subsection" id="sec351">11.10.6&#XA0;&#XA0;kill</h3><!--SEC END --><p><a id="fun:kill"></a><a id="function:kill"></a><a id="hevea_default366"></a><a id="hevea_fun247"></a></p><p>The <code>kill</code> function signals a job.</p><p><code>kill [signal] &lt;pid...&gt;</code>
</p>
<!--TOC section id="sec352" Command history-->
<h2 class="section" id="sec352">11.11&#XA0;&#XA0;Command history</h2><!--SEC END -->
<!--TOC subsection id="sec353" history-->
<h3 class="subsection" id="sec353">11.11.1&#XA0;&#XA0;history</h3><!--SEC END --><p><a id="fun:history"></a><a id="function:history"></a><a id="hevea_default367"></a><a id="hevea_fun248"></a></p><pre class="verbatim">    $(history-index) : Int
    $(history) : String Sequence
    history-file : File
    history-length : Int
</pre><p>The history variables manage the command-line history in <span class="c001">osh</span>. They have no effect
in <span class="c001">omake</span>.</p><p>The <code>history-index</code> variable is the current index into the command-line history.
The <code>history</code> variable is the current command-line history.</p><p>The <code>history-file</code> variable can be redefined if you want the command-line history
to be saved. The default value is <code>~/.omake/osh_history</code>.</p><p>The <code>history-length</code> variable can be redefined to specify the maximum number of
lines in the history that you want saved. The default value is <code>100</code>.


</p>
<!--TOC chapter id="sec354" The standard objects-->
<h1 class="chapter" id="sec354">Chapter&#XA0;12&#XA0;&#XA0;The standard objects</h1><!--SEC END --><p>
<a id="chapter:pervasives"></a>
</p><!--NAME omake-pervasives.html-->
<p><code>Pervasives</code> defines the objects that are defined in all
programs. The following objects are defined.</p>
<!--TOC section id="sec355" Pervasives objects-->
<h2 class="section" id="sec355">12.1&#XA0;&#XA0;Pervasives objects</h2><!--SEC END -->
<!--TOC subsection id="sec356" Object-->
<h3 class="subsection" id="sec356">12.1.1&#XA0;&#XA0;Object</h3><!--SEC END --><p><a id="obj:Object"></a><a id="object:Object"></a><a id="hevea_default368"></a><a id="hevea_obj10"></a></p><p>Parent objects: none.</p><p>The <code>Object</code> object is the root object.
Every class is a subclass of <code>Object</code>.</p><p>It provides the following fields:</p><ul class="itemize"><li class="li-itemize">
<code>$(o.object-length)</code>: the number of fields and methods in the object.
</li><li class="li-itemize"><code>$(o.object-mem &lt;var&gt;)</code>: returns <code>true</code> iff the <code>&lt;var&gt;</code> is a field
or method of the object.
</li><li class="li-itemize"><code>$(o.object-add &lt;var&gt;, &lt;value&gt;)</code>: adds the field to the object,
returning a new object.
</li><li class="li-itemize"><code>$(o.object-find &lt;var&gt;)</code>: fetches the field or method from the object;
it is equivalent to <code>$(o.&lt;var&gt;)</code>, but the variable can be non-constant.
</li><li class="li-itemize"><code>$(o.object-map &lt;fun&gt;)</code>: maps a function over the object. The function
should take two arguments; the first is a field name, the second is the
value of that field. The result is a new object constructed from the
values returned by the function.
</li><li class="li-itemize"><code>o.object-foreach</code>: the <code>object-foreach</code> form is equivalent to <code>object-map</code>,
but with altered syntax.<pre class="verbatim">   o.object-foreach(&lt;var1&gt;, &lt;var2&gt;) =&gt;
      &lt;body&gt;
   </pre><p>For example, the following function prints all the fields of an
object <code>o</code>.</p><pre class="verbatim">   PrintObject(o) =
      o.object-foreach(v, x) =&gt;
         println($(v) = $(x))
   </pre><p>The <code>export</code> form is valid in a <code>object-foreach</code> body. The following
function collects just the field names of an object.</p><pre class="verbatim">   FieldNames(o) =
      names[] =
      o.object-foreach(v, x) =&gt;
         names[] += $(v)
         export
      return $(names)
   </pre></li></ul>
<!--TOC subsection id="sec357" Map-->
<h3 class="subsection" id="sec357">12.1.2&#XA0;&#XA0;Map</h3><!--SEC END --><p><a id="obj:Map"></a><a id="object:Map"></a><a id="hevea_default369"></a><a id="hevea_obj11"></a></p><p>Parent objects: <code>Object</code>.</p><p>A <code>Map</code> object is a dictionary from values to values. The <code>&lt;key&gt;</code>
values are restricted to simple values: integers, floating-point numbers,
strings, files, directories, and arrays of simple values.</p><p>The Map object provides the following methods.</p><ul class="itemize"><li class="li-itemize">
<code>$(o.length)</code>: the number of items in the map.
</li><li class="li-itemize"><code>$(o.mem &lt;key&gt;)</code>: returns <code>true</code> iff the <code>&lt;key&gt;</code> is defined
in the map.
</li><li class="li-itemize"><code>$(o.add &lt;key&gt;, &lt;value&gt;)</code>: adds the field to the map,
returning a new map.
</li><li class="li-itemize"><code>$(o.find &lt;key&gt;)</code>: fetches the field from the map.
</li><li class="li-itemize"><code>$(o.keys)</code>: fetches an array of all the keys in the map, in alphabetical order.
</li><li class="li-itemize"><code>$(o.values)</code>: fetches an array of all the values in the map,
in the alphabetical order of the corresponding keys.
</li><li class="li-itemize"><code>$(o.map &lt;fun&gt;)</code>: maps a function over the map. The function
should take two arguments; the first is a field name, the second is the
value of that field. The result is a new object constructed from the
values returned by the function.
</li><li class="li-itemize"><code>o.foreach</code>: the <code>foreach</code> form is equivalent to <code>map</code>,
but with altered syntax.<pre class="verbatim">   o.foreach(&lt;var1&gt;, &lt;var2&gt;) =&gt;
      &lt;body&gt;
   </pre><p>For example, the following function prints all the fields of a
map <code>o</code>.</p><pre class="verbatim">   PrintMap(o) =
      o.foreach(v, x) =&gt;
         println($(v) = $(x))
   </pre><p>The <code>export</code> form is valid in a <code>foreach</code> body. The following
function reimplements the <code>key</code> method.</p><pre class="verbatim">   FieldNames(o) =
      names =
      o.foreach(v, x) =&gt;
         names += $(v)
         export
      return $(names)
   </pre></li></ul><p>There is also simpler syntax when the key is a string. The table can be
defined using definitions with the form <code>$|key|</code>
(the number of pipe symbols <code>|</code> is allowed to vary).</p><pre class="verbatim">    $|key 1| = value1
    $||key1|key2|| = value2    # The key is key1|key2
    X = $|key 1|               # Define X to be the value of field $|key 1|
</pre><p>The usual modifiers are also allowed. The expression <code>$`|key|</code> represents
lazy evaluation of the key, and <code>$,|key|</code> is normal evaluation.</p>
<!--TOC subsection id="sec358" Number-->
<h3 class="subsection" id="sec358">12.1.3&#XA0;&#XA0;Number</h3><!--SEC END --><p><a id="obj:Number"></a><a id="object:Number"></a><a id="hevea_default370"></a><a id="hevea_obj12"></a></p><p>Parent objects: <code>Object</code>.</p><p>The <code>Number</code> object is the parent object for integers
and floating-point numbers.
</p>
<!--TOC subsection id="sec359" Int-->
<h3 class="subsection" id="sec359">12.1.4&#XA0;&#XA0;Int</h3><!--SEC END --><p><a id="obj:Int"></a><a id="object:Int"></a><a id="hevea_default371"></a><a id="hevea_obj13"></a></p><p>Parent objects: <code>Number</code>.</p><p>The <code>Int</code> object represents integer values.
</p>
<!--TOC subsection id="sec360" Float-->
<h3 class="subsection" id="sec360">12.1.5&#XA0;&#XA0;Float</h3><!--SEC END --><p><a id="obj:Float"></a><a id="object:Float"></a><a id="hevea_default372"></a><a id="hevea_obj14"></a></p><p>Parent objects: <code>Number</code>.</p><p>The <code>Float</code> object represents floating-point numbers.
</p>
<!--TOC subsection id="sec361" Sequence-->
<h3 class="subsection" id="sec361">12.1.6&#XA0;&#XA0;Sequence</h3><!--SEC END --><p><a id="obj:Sequence"></a><a id="object:Sequence"></a><a id="hevea_default373"></a><a id="hevea_obj15"></a></p><p>Parent objects: <code>Object</code>.</p><p>The <code>Sequence</code> object represents a generic object containing
sequential elements. It provides the following methods.</p><ul class="itemize"><li class="li-itemize">
<code>$(s.length)</code>: the number of elements in the sequence.
</li><li class="li-itemize"><code>$(s.is-nonempty)</code>: true iff the expression <code>$(s.nth 0)</code>
will complete without failure.
</li><li class="li-itemize"><code>$(s.nth &lt;i&gt;)</code>: return the n&#X2019;th element of the sequence.
</li><li class="li-itemize"><code>$(s.nth-tl &lt;i&gt;)</code>: return the n&#X2019;th tail of the sequence.
</li><li class="li-itemize"><code>$(s.map &lt;fun&gt;)</code>: maps a function over the fields in the sequence.
The function should take one argument. The result is a new sequence
constructed from the values returned by the function.
</li><li class="li-itemize"><code>s.foreach</code>: the <code>foreach</code> form is equivalent to <code>map</code>,
but with altered syntax.<pre class="verbatim">   s.foreach(&lt;var&gt;) =&gt;
      &lt;body&gt;
   </pre><p>For example, the following function prints all the elements of the sequence.</p><pre class="verbatim">   PrintSequence(s) =
      s.foreach(x) =&gt;
         println(Elem = $(x))
   </pre><p>The <code>export</code> form is valid in a <code>foreach</code> body. The following
function counts the number of zeros in the sequence.</p><pre class="verbatim">   Zeros(s) =
      count = $(int 0)
      s.foreach(v) =&gt;
         if $(equal $(v), 0)
            count = $(add $(count), 1)
            export
         export
      return $(count)
   </pre></li><li class="li-itemize"><code>$(s.forall &lt;fun&gt;)</code>: tests whether each element of the sequence
satifies a predicate.
</li><li class="li-itemize"><code>$(s.exists &lt;fun&gt;)</code>: tests whether the sequence contains an element
that satisfies a predicate.
</li><li class="li-itemize"><code>$(s.sort &lt;fun&gt;)</code>: sorts a sequence. The <code>&lt;fun&gt;</code> is a comparison
function. It takes two elements <code>(x, y)</code> of the sequence, compares them, and returns
a negative number if <span class="c003">x</span> &lt; <span class="c003">y</span>, a positive number if <span class="c003">x</span> &gt; <span class="c003">y</span>, and zero if the two elements
are equal.<pre class="verbatim">  osh&gt; items = $(int 0 3 -2)
  osh&gt; items.forall(x =&gt; $(gt $x, 0))
  - : bool = false
  osh&gt; items.exists(x =&gt; $(gt $x, 0))
  - : bool = true
  osh&gt; items.sort($(compare))
  - : Array = -2 3 0
  </pre></li></ul>
<!--TOC subsection id="sec362" Array-->
<h3 class="subsection" id="sec362">12.1.7&#XA0;&#XA0;Array</h3><!--SEC END --><p><a id="obj:Array"></a><a id="object:Array"></a><a id="hevea_default374"></a><a id="hevea_obj16"></a></p><p>Parent objects: <code>Sequence</code>.</p><p>The <code>Array</code> is a random-access sequence.
It provides the following additional methods.</p><ul class="itemize"><li class="li-itemize">
<code>$(s.nth &lt;i&gt;)</code>: returns element <code>i</code> of the sequence.
</li><li class="li-itemize"><code>$(s.rev &lt;i&gt;)</code>: returns the reversed sequence.
</li></ul>
<!--TOC subsection id="sec363" String-->
<h3 class="subsection" id="sec363">12.1.8&#XA0;&#XA0;String</h3><!--SEC END --><p><a id="obj:String"></a><a id="object:String"></a><a id="hevea_default375"></a><a id="hevea_obj17"></a></p><p>Parent objects: <code>Array</code>.
</p>
<!--TOC subsection id="sec364" Fun-->
<h3 class="subsection" id="sec364">12.1.9&#XA0;&#XA0;Fun</h3><!--SEC END --><p><a id="obj:Fun"></a><a id="object:Fun"></a><a id="hevea_default376"></a><a id="hevea_obj18"></a></p><p>Parent objects: <code>Object</code>.</p><p>The <code>Fun</code> object provides the following methods.
</p><ul class="itemize"><li class="li-itemize">
<code>$(f.arity)</code>: the arity if the function.
</li></ul>
<!--TOC subsection id="sec365" Rule-->
<h3 class="subsection" id="sec365">12.1.10&#XA0;&#XA0;Rule</h3><!--SEC END --><p><a id="obj:Rule"></a><a id="object:Rule"></a><a id="hevea_default377"></a><a id="hevea_obj19"></a></p><p>Parent objects: <code>Object</code>.</p><p>The <code>Rule</code> object represents a build rule.
It does not currently have any methods.
</p>
<!--TOC subsection id="sec366" Target-->
<h3 class="subsection" id="sec366">12.1.11&#XA0;&#XA0;Target</h3><!--SEC END --><p><a id="obj:Target"></a><a id="object:Target"></a><a id="hevea_default378"></a><a id="hevea_obj20"></a></p><p>Parent object: <code>Object</code>.</p><p>The <code>Target</code> object contains information collected for
a specific target file.</p><ul class="itemize"><li class="li-itemize">
<code>target</code>: the target file.
</li><li class="li-itemize"><code>effects</code>: the files that may be modified by a
side-effect when this target is built.
</li><li class="li-itemize"><code>scanner_deps</code>: static dependencies that must be built
before this target can be scanned.
</li><li class="li-itemize"><code>static-deps</code>: statically-defined build dependencies
of this target.
</li><li class="li-itemize"><code>build-deps</code>: all the build dependencies for the target,
including static and scanned dependencies.
</li><li class="li-itemize"><code>build-values</code>: all the value dependencies associated
with the build.
</li><li class="li-itemize"><code>build-commands</code>: the commands to build the target.
</li><li class="li-itemize"><code>output-file</code>: if output was diverted to a file,
with one of the <code>--output-*</code> options&#XA0;<a href="#chapter%3Aoptions">A</a>,
this field names that file. Otherwise it is <code>false</code>.
</li></ul><p>The object supports the following methods.</p><ul class="itemize"><li class="li-itemize">
<code>find(file)</code>: returns a Target object for the given file.
Raises a <code>RuntimeException</code> if the specified target is
not part of the project.
</li><li class="li-itemize"><code>find-optional(file)</code>: returns a <code>Target</code> object
for the given file, or <code>false</code> if the file is not
part of the project.
</li></ul><p>NOTE: the information for a target is constructed dynamically,
so it is possible that the <code>Target</code> object for a node will
contain different values in different contexts. The easiest way
to make sure that the <code>Target</code> information is complete is
to compute it within a rule body, where the rule depends on
the target file, or the dependencies of the target file.
</p>
<!--TOC subsection id="sec367" Node-->
<h3 class="subsection" id="sec367">12.1.12&#XA0;&#XA0;Node</h3><!--SEC END --><p><a id="obj:Node"></a><a id="object:Node"></a><a id="hevea_default379"></a><a id="hevea_obj21"></a></p><p>Parent objects: <code>Object</code>.</p><p>The <code>Node</code> object is the parent object for files and directories.
It supports the following operations.
</p><ul class="itemize"><li class="li-itemize">
<code>$(node.stat)</code>: returns a <code>stat</code> object for the file. If the
file is a symbolic link, the <code>stat</code> information is for the destination of
the link, not the link itself.</li><li class="li-itemize"><code>$(node.lstat)</code>: returns a <code>stat</code> object for the file or symbolic link.
</li><li class="li-itemize"><code>$(node.unlink)</code>: removes the file.
</li><li class="li-itemize"><code>$(node.rename &lt;file&gt;)</code>: renames the file.
</li><li class="li-itemize"><code>$(node.link &lt;file&gt;)</code>: creates a hard link <code>&lt;dst&gt;</code> to this file.
</li><li class="li-itemize"><code>$(node.symlink &lt;file&gt;)</code>: create a symbolic link <code>&lt;dst&gt;</code> to this file.
</li><li class="li-itemize"><code>$(node.chmod &lt;perm&gt;)</code>: change the permission of this file.
</li><li class="li-itemize"><code>$(node.chown &lt;uid&gt;, &lt;gid&gt;)</code>: change the owner and group id of this file.
</li></ul>
<!--TOC subsection id="sec368" File-->
<h3 class="subsection" id="sec368">12.1.13&#XA0;&#XA0;File</h3><!--SEC END --><p><a id="obj:File"></a><a id="object:File"></a><a id="hevea_default380"></a><a id="hevea_obj22"></a></p><p>Parent objects: <code>Node</code>.</p><p>The file object represents the name of a file.
</p>
<!--TOC subsection id="sec369" Dir-->
<h3 class="subsection" id="sec369">12.1.14&#XA0;&#XA0;Dir</h3><!--SEC END --><p><a id="obj:Dir"></a><a id="object:Dir"></a><a id="hevea_default381"></a><a id="hevea_obj23"></a></p><p>Parent objects: <code>Node</code>.</p><p>The <code>Dir</code> object represents the name of a directory.
</p>
<!--TOC subsection id="sec370" Channel-->
<h3 class="subsection" id="sec370">12.1.15&#XA0;&#XA0;Channel</h3><!--SEC END --><p><a id="obj:Channel"></a><a id="object:Channel"></a><a id="hevea_default382"></a><a id="hevea_obj24"></a></p><p>Parent objects: <code>Object</code>.</p><p>A <code>Channel</code> is a generic IO channel.
It provides the following methods.
</p><ul class="itemize"><li class="li-itemize">
<code>$(o.close)</code>: close the channel.
</li><li class="li-itemize"><code>$(o.name)</code>: returns the file name associated with the channel.
</li></ul>
<!--TOC subsection id="sec371" InChannel-->
<h3 class="subsection" id="sec371">12.1.16&#XA0;&#XA0;InChannel</h3><!--SEC END --><p><a id="obj:InChannel"></a><a id="object:InChannel"></a><a id="hevea_default383"></a><a id="hevea_obj25"></a></p><p>Parent objects: <code>Channel</code>.</p><p>A <code>InChannel</code> is an input channel. The variable <code>stdin</code> is the
standard input channel.</p><p>It provides the following methods.
</p><ul class="itemize"><li class="li-itemize">
<code>$(InChannel.fopen &lt;file&gt;)</code>: open a new input channel.
</li><li class="li-itemize"><code>$(InChannel.of-string &lt;string&gt;)</code>: open a new input channel,
using a string as input.
</li><li class="li-itemize"><code>$(o.read &lt;number&gt;)</code>: reads the given number of characters from the channel
</li><li class="li-itemize"><code>$(o.readln)</code>: reads a line from the channel
</li></ul>
<!--TOC subsection id="sec372" OutChannel-->
<h3 class="subsection" id="sec372">12.1.17&#XA0;&#XA0;OutChannel</h3><!--SEC END --><p><a id="obj:OutChannel"></a><a id="object:OutChannel"></a><a id="hevea_default384"></a><a id="hevea_obj26"></a></p><p>Parent object: <code>Channel</code>.</p><p>A <code>OutChannel</code> is an output channel. The variables <code>stdout</code>
and <code>stderr</code> are the standard output and error channels.</p><p>It provides the following methods.
</p><ul class="itemize"><li class="li-itemize">
<code>$(OutChannel.fopen &lt;file&gt;)</code>: open a new output channel.
</li><li class="li-itemize"><code>$(OutChannel.string)</code>: open a new output channel,
writing to a string.
</li><li class="li-itemize"><code>$(OutChannel.to-string)</code>: get the current string of
output, for an output channel created as <code>OutChannel.open-string</code>.
</li><li class="li-itemize"><code>$(OutChannel.append &lt;file&gt;)</code>: opens a new output channel,
appending to the file.
</li><li class="li-itemize"><code>$(c.flush)</code>: flush the output channel.
</li><li class="li-itemize"><code>$(c.print &lt;string&gt;)</code>: print a string to the channel.
</li><li class="li-itemize"><code>$(c.println &lt;string&gt;)</code>: print a string to the channel,
followed by a line terminator.
</li></ul>
<!--TOC subsection id="sec373" Location-->
<h3 class="subsection" id="sec373">12.1.18&#XA0;&#XA0;Location</h3><!--SEC END --><p><a id="obj:Location"></a><a id="object:Location"></a><a id="hevea_default385"></a><a id="hevea_obj27"></a></p><p>Parent objects: <code>Location</code>.</p><p>The <code>Location</code> object represents a location in a file.
</p>
<!--TOC subsection id="sec374" Exception-->
<h3 class="subsection" id="sec374">12.1.19&#XA0;&#XA0;Exception</h3><!--SEC END --><p><a id="obj:Exception"></a><a id="object:Exception"></a><a id="hevea_default386"></a><a id="hevea_obj28"></a></p><p>Parent objects: <code>Object</code>.</p><p>The <code>Exception</code> object is used as the base object for exceptions.
It has no fields.
</p>
<!--TOC subsection id="sec375" RuntimeException-->
<h3 class="subsection" id="sec375">12.1.20&#XA0;&#XA0;RuntimeException</h3><!--SEC END --><p><a id="obj:RuntimeException"></a><a id="object:RuntimeException"></a><a id="hevea_default387"></a><a id="hevea_obj29"></a></p><p>Parent objects: <code>Exception</code>.</p><p>The <code>RuntimeException</code> object represents an exception from the
runtime system. It has the following fields.</p><ul class="itemize"><li class="li-itemize">
<code>position</code>: a string representing the location where the
exception was raised.
</li><li class="li-itemize"><code>message</code>: a string containing the exception message.
</li></ul>
<!--TOC subsection id="sec376" UnbuildableException-->
<h3 class="subsection" id="sec376">12.1.21&#XA0;&#XA0;UnbuildableException</h3><!--SEC END --><p><a id="obj:UnbuildableException"></a><a id="object:UnbuildableException"></a><a id="hevea_default388"></a><a id="hevea_obj30"></a></p><p>Parent objects: <code>Exception</code>.</p><p>The <code>UnbuildableException</code> object should be used to signal that a target
is not buildable. It will be caught by functions such as
<a href="#fun%3Atarget-exists"><CODE>target-exists</CODE></a>.
This exception has the following fields:</p><ul class="itemize"><li class="li-itemize">
<code>target</code>: indicates which target is not buildable.
</li><li class="li-itemize"><code>message</code>: a string containing the exception message.
</li></ul>
<!--TOC subsection id="sec377" Shell-->
<h3 class="subsection" id="sec377">12.1.22&#XA0;&#XA0;Shell</h3><!--SEC END --><p><a id="obj:Shell"></a><a id="object:Shell"></a><a id="hevea_default389"></a><a id="hevea_obj31"></a></p><p>Parent objects: <code>Object</code>.</p><p>The <code>Shell</code> object contains the collection of builtin functions
available as shell commands.</p><p>You can define aliases by extending this object with additional methods.
All methods in this class are called with one argument: a single array
containing an argument list.</p><ul class="itemize"><li class="li-itemize">
<CODE>echo</CODE><a id="hevea_default390"></a><p>The <code>echo</code> function prints its arguments to the standard output channel.
</p></li><li class="li-itemize"><CODE>jobs</CODE><a id="hevea_default391"></a><p>The <code>jobs</code> method prints the status of currently running commands.
</p></li><li class="li-itemize"><CODE>cd</CODE><a id="hevea_default392"></a><p>The <code>cd</code> function changes the current directory.
Note that the current directory follows the usual scoping
rules. For example, the following program lists the
files in the <code>foo</code> directory, but the current
directory is not changed.</p><pre class="verbatim">   section
      echo Listing files in the foo directory...
      cd foo
      ls

   echo Listing files in the current directory...
   ls
</pre></li><li class="li-itemize"><CODE>bg</CODE><a id="hevea_default393"></a><p>The <code>bg</code> method places a job in the background.
The job is resumed if it has been suspended.
</p></li><li class="li-itemize"><CODE>fg</CODE><a id="hevea_default394"></a><p>The <code>fg</code> method brings a job to the foreground.
The job is resumed if it has been suspended.
</p></li><li class="li-itemize"><CODE>stop</CODE><a id="hevea_default395"></a><p>The <code>stop</code> method suspends a running job.
</p></li><li class="li-itemize"><CODE>wait</CODE><a id="hevea_default396"></a><p>The <code>wait</code> function waits for a running job to terminate.
It is not possible to wait for a suspended job.</p><p>The job is not brought to the foreground. If the <code>wait</code>
is interrupted, the job continues to run in the background.
</p></li><li class="li-itemize"><CODE>kill</CODE><a id="hevea_default397"></a><p>The <code>kill</code> function signal a job.</p><p><code>kill [signal] &lt;pid...&gt;</code>.</p><p>The signals are either numeric, or symbolic.
The symbolic signals are named as follows.</p><p>ABRT, ALRM, HUP, ILL, KILL, QUIT, SEGV, TERM, USR1,
USR2, CHLD, STOP, TSTP, TTIN, TTOU, VTALRM, PROF.
</p></li><li class="li-itemize"><CODE>exit</CODE><a id="hevea_default398"></a><p>The <code>exit</code> function terminates the current session.
</p></li><li class="li-itemize"><CODE>which</CODE>, <CODE>where</CODE><a id="hevea_default399"></a><a id="hevea_default400"></a><p>See the documentation for the corresponding functions.
</p></li><li class="li-itemize"><CODE>rehash</CODE><a id="hevea_default401"></a><p>Reset the search path.
</p></li><li class="li-itemize"><CODE>ln-or-cp</CODE><a id="hevea_default402"></a> <em>src</em> dst<p>Links or copies <em>src to </em>dst, overwriting <em>dst. Namely, <code>ln-or-cp</code> would first
delete the </em>dst file (unless it is a directory), if it exists. Next it would try to create
a symbolic link <em>dst poiting to </em>src (it will make all the necessary adjustmnents of
relative paths). If symbolic link can not be created (<em>e.g.</em> the OS or the filesystem does
not support symbolic links), it will try to create a hard link. If that fails too, it will try
to forcibly copy <em>src to </em>dst.
</p></li><li class="li-itemize"><CODE>history</CODE><a id="hevea_default403"></a><p>Print the current command-line history.
</p></li><li class="li-itemize"><CODE>digest</CODE><a id="hevea_default404"></a><p>Print the digests of the given files.
</p></li><li class="li-itemize">Win32 functions.<p>Win32 doesn&#X2019;t provide very many programs for scripting, except
for the functions that are builtin to the DOS <code>cmd.exe</code>.
The following functions are defined on Win32 and only on Win32.
On other systems, it is expected that these programs already
exist.</p><ul class="itemize"><li class="li-itemize">
<CODE>grep</CODE><a id="hevea_default405"></a><pre class="verbatim">   grep [-q] [-n] [-v] [-h] pattern files...
</pre><p>The <code>grep</code> alias calls the <span class="c001">omake</span>&#X2019;s internal <a href="#fun%3Agrep"><CODE>grep</CODE> function</a>.
</p></li></ul><p>By default, <span class="c001">omake</span> uses internal versions of the following commands:
<code>cp</code>, <code>mv</code>, <code>cat</code>, <code>rm</code>, <code>mkdir</code>, <code>chmod</code>,
<code>test</code>, <code>find</code>.
If you really want to use the standard system versions of these
commands, set the <code>USE_SYSTEM_COMMANDS</code> as one of the first
definitions in your <code>OMakeroot</code> file.</p><ul class="itemize"><li class="li-itemize">
<CODE>pwd</CODE><a id="hevea_default406"></a><pre class="verbatim">    pwd
</pre><p>The <code>pwd</code> alias would print the absolute path to current directory.
</p></li><li class="li-itemize"><CODE>mkdir</CODE><a id="hevea_default407"></a><pre class="verbatim">    mkdir [-m &lt;mode&gt;] [-p] files
</pre><p>The <code>mkdir</code> function is used to create directories.
The -verb+-m+ option can be used to specify the permission
mode of the created directory. If the <code>-p</code> option
is specified, the full path is created.
</p></li><li class="li-itemize"><CODE>cp</CODE>, <CODE>mv</CODE><a id="hevea_default408"></a><a id="hevea_default409"></a><pre class="verbatim">    cp [-f] [-i] [-v] src dst
    cp [-f] [-i] [-v] files dst
    mv [-f] [-i] [-v] src dst
    mv [-f] [-i] [-v] files dst
</pre><p>The <code>cp</code> function copies a <code>src</code> file to
a <code>dst</code> file, overwriting it if it already exists.
If more than one source file is specified, the final file
must be a directory, and the source files are copied
into the directory.</p><dl class="description"><dt class="dt-description">
<span class="c004">-f</span></dt><dd class="dd-description"> Copy files forcibly, do not prompt.
</dd><dt class="dt-description"><span class="c004">-i</span></dt><dd class="dd-description"> Prompt before removing destination files.
</dd><dt class="dt-description"><span class="c004">-v</span></dt><dd class="dd-description"> Explain what is happening.
</dd></dl></li><li class="li-itemize"><CODE>rm</CODE><a id="hevea_default410"></a><pre class="verbatim">   rm [-f] [-i] [-v] [-r] files
   rmdir [-f] [-i] [-v] [-r] dirs
</pre><p>The <code>rm</code> function removes a set of files.
No warnings are issued if the files do not exist, or if
they cannot be removed.</p><p>Options:
</p><dl class="description"><dt class="dt-description">
<span class="c004">-f</span></dt><dd class="dd-description"> Forcibly remove files, do not prompt.
</dd><dt class="dt-description"><span class="c004">-i</span></dt><dd class="dd-description"> Prompt before removal.
</dd><dt class="dt-description"><span class="c004">-v</span></dt><dd class="dd-description"> Explain what is happening.
</dd><dt class="dt-description"><span class="c004">-r</span></dt><dd class="dd-description"> Remove contents of directories recursively.
</dd></dl></li><li class="li-itemize"><CODE>chmod</CODE><a id="hevea_default411"></a><pre class="verbatim">    chmod [-r] [-v] [-f] mode files
</pre><p>The <code>chmod</code> function changes the permissions on a set of
files or directories. This function does nothing on Win32.
The <code>mode</code> may be specified as an octal number,
or in symbolic form <code>[ugoa]*[</code>-=][rwxXstugo]+.
See the man page for <code>chmod</code> for details.</p><p>Options:
</p><dl class="description"><dt class="dt-description">
<span class="c004">-r</span></dt><dd class="dd-description"> Change permissions of all files in a directory recursively.
</dd><dt class="dt-description"><span class="c004">-v</span></dt><dd class="dd-description"> Explain what is happening.
</dd><dt class="dt-description"><span class="c004">-f</span></dt><dd class="dd-description"> Continue on errors.
</dd></dl></li><li class="li-itemize"><CODE>cat</CODE><a id="hevea_default412"></a><pre class="verbatim">   cat files...
</pre><p>The <code>cat</code> function prints the contents of the files to stdout
</p></li><li class="li-itemize"><CODE>test</CODE><a id="hevea_default413"></a><p><code>test</code> <em>expression</em><br>
 <code>[</code> <em>expression</em> +]+<br>
 <code>[ --help</code><br>
 <code>[ --version</code><br>

See the documentation for the <a href="#fun%3Atest"><CODE>test</CODE> function</a>.</p></li><li class="li-itemize"><CODE>find</CODE><a id="hevea_default414"></a><p><code>find</code> <em>expression</em></p><p>See the documentation for the <a href="#fun%3Afind"><CODE>find</CODE> function</a>.</p></li></ul></li></ul>
<!--TOC chapter id="sec378" Build functions and utilities-->
<h1 class="chapter" id="sec378">Chapter&#XA0;13&#XA0;&#XA0;Build functions and utilities</h1><!--SEC END --><p>
<a id="chapter:build"></a>
</p><!--NAME omake-build.html-->

<!--TOC section id="sec379" Builtin .PHONY targets-->
<h2 class="section" id="sec379">13.1&#XA0;&#XA0;Builtin .PHONY targets</h2><!--SEC END --><p>The complete set of builtin <code>.PHONY</code> targets include the following.</p><dl class="description"><dt class="dt-description">
<span class="c004">.PHONY</span></dt><dd class="dd-description"> Declares new phony targets (Section&#XA0;<a href="#target%3A.PHONY">8.10</a>).
</dd><dt class="dt-description"><span class="c004">.DEFAULT</span></dt><dd class="dd-description"> Declare the default build targets (Section&#XA0;<a href="#target%3A.DEFAULT">8.7</a>).
</dd><dt class="dt-description"><span class="c004">.SUBDIRS</span></dt><dd class="dd-description"> Include a directory as part of the project (Section&#XA0;<a href="#target%3A.SUBDIRS">8.8</a>).
</dd><dt class="dt-description"><span class="c004">.SCANNER</span></dt><dd class="dd-description"> Define a dependency scanner (Section&#XA0;<a href="#target%3A.SUBDIRS">8.8</a>).
</dd><dt class="dt-description"><span class="c004">.INCLUDE</span></dt><dd class="dd-description"> Include a file (Section&#XA0;<a href="#target%3A.INCLUDE">8.9</a>).
</dd><dt class="dt-description"><span class="c004">.ORDER</span></dt><dd class="dd-description"> Define a file-dependency ordering rule (Section&#XA0;<a href="#target%3A.ORDER">10.3.6</a>).
</dd><dt class="dt-description"><span class="c004">.BUILD_BEGIN</span></dt><dd class="dd-description"> Commands to be executed at the beginning of a build.
</dd><dt class="dt-description"><span class="c004">.BUILD_SUCCESS</span></dt><dd class="dd-description"> Commands to be executed if the build is successful.
</dd><dt class="dt-description"><span class="c004">.BUILD_FAILURE</span></dt><dd class="dd-description"> Commands to be executed if the build fails.
</dd></dl><p><a id="hevea_default415"></a><a id="hevea_target14"></a><a id="target:.BUILD_BEGIN"></a>
<a id="hevea_default416"></a><a id="hevea_target15"></a><a id="target:.BUILD_SUCCESS"></a>
<a id="hevea_default417"></a><a id="hevea_target16"></a><a id="target:.BUILD_FAILURE"></a></p><p>The <code>.BUILD</code> targets can be used to specify commands to be executed at
the beginning and end of the build. The <code>.BUILD_BEGIN</code> target is built
at the beginning of a project build, and one of <code>.BUILD_FAILURE</code> or
<code>.BUILD_SUCCESS</code> is executed when the build terminates.</p><p>For example, the following set of rules simply print additional messages
about the status of the build.</p><pre class="verbatim">   .BUILD_BEGIN:
       echo Build starting

   .BUILD_SUCCESS:
       echo The build was successful

   .BUILD_FAILURE:
       println($"The build failed: $(length $(find-build-targets Failed)) targets could not be built")
</pre><p>Another common use is to define notifications to be performed when
the build completes. For example, the following rule will create
a new X terminal displaying the summary of the build
(using the <a href="#var%3ABUILD_SUMMARY"><CODE>BUILD_SUMMARY</CODE> variable</a>).</p><pre class="verbatim">    .BUILD_FAILURE:
        xterm -e vi $(BUILD_SUMMARY)
</pre><p>If you do not wish to add these rules directly to your project (which
is probably a good idea if you work with others), you can
define them in your <code>.omakerc</code> (see Section&#XA0;<a href="#section%3A.omakerc">A.8</a>).</p><p>The <a href="#fun%3Afind-build-targets"><CODE>find-build-targets</CODE> function</a>
is useful for obtaining a firther summary of the build. Note that
when output diversions are in effect (with the <code>--output-*</code> options &#X2014; see Chapter&#XA0;<a href="#chapter%3Aoptions">A</a>),
any output produced by the commands is copied to a file. The name of the
file is specified by the <code>output-file</code> field of the <a href="#obj%3ATarget"><CODE>Target</CODE> object</a>.
You may find this useful in defining custom build summaries.
</p>
<!--TOC section id="sec380" Options and versioning-->
<h2 class="section" id="sec380">13.2&#XA0;&#XA0;Options and versioning</h2><!--SEC END -->
<!--TOC subsection id="sec381" OMakeFlags-->
<h3 class="subsection" id="sec381">13.2.1&#XA0;&#XA0;OMakeFlags</h3><!--SEC END --><p><a id="fun:OMakeFlags"></a><a id="function:OMakeFlags"></a><a id="hevea_default418"></a><a id="hevea_fun249"></a></p><pre class="verbatim">   OMakeFlags(options)
      options : String
</pre><p>The <code>OMakeFlags</code> function is used to set <code>omake</code> options from
within <span class="c001">OMakefile</span>s. The options have exactly the same format as
options on the command line.</p><p>For example, the following code displays the progress bar unless
the <code>VERBOSE</code> environment variable is defined.</p><pre class="verbatim">    if $(not $(defined-env VERBOSE))
        OMakeFlags(-S --progress)
        export
</pre>
<!--TOC subsection id="sec382" OMakeVersion-->
<h3 class="subsection" id="sec382">13.2.2&#XA0;&#XA0;OMakeVersion</h3><!--SEC END --><p><a id="fun:OMakeVersion"></a><a id="function:OMakeVersion"></a><a id="hevea_default419"></a><a id="hevea_fun250"></a></p><pre class="verbatim">   OMakeVersion(version1)
   OMakeVersion(version1, version2)
      version1, version2 : String
</pre><p>The <code>OMakeVersion</code> function is used for version checking
in <span class="c001">OMakefile</span>s. It takes one or two arguments.</p><p>In the one argument form, if the <span class="c001">omake</span> version number
is less than <code>&lt;version1&gt;</code>,
then an exception is raised. In the two argument form,
the version must lie between <code>version1</code> and <code>version2</code>.</p>
<!--TOC subsection id="sec383" cmp-versions-->
<h3 class="subsection" id="sec383">13.2.3&#XA0;&#XA0;cmp-versions</h3><!--SEC END --><p><a id="fun:cmp-versions"></a><a id="function:cmp-versions"></a><a id="hevea_default420"></a><a id="hevea_fun251"></a>
</p><pre class="verbatim">   $(cmp-versions version1, version2)
      version1, version2 : String
</pre><p>The <code>cmp-versions\</code> functions can be used to compare arbitrary version strings.
It returns 0 when the two version strings are equal, a negative number when the first
string represents an earlier version, and a positive number otherwise.
</p>
<!--TOC subsection id="sec384" DefineCommandVars-->
<h3 class="subsection" id="sec384">13.2.4&#XA0;&#XA0;DefineCommandVars</h3><!--SEC END --><p><a id="fun:DefineCommandVars"></a><a id="function:DefineCommandVars"></a><a id="hevea_default421"></a><a id="hevea_fun252"></a></p><pre class="verbatim">   DefineCommandVars()
</pre><p>The <code>DefineCommandVars</code> function redefines the variables passed on
the commandline. Variables definitions are passed on the command line
in the form <code>name=value</code>. This function is primarily for internal
use by <span class="c001">omake</span> to define these variables for the first time.
</p>
<!--TOC section id="sec385" Examining the dependency graph-->
<h2 class="section" id="sec385">13.3&#XA0;&#XA0;Examining the dependency graph</h2><!--SEC END -->
<!--TOC subsection id="sec386" dependencies, dependencies-all, dependencies-proper-->
<h3 class="subsection" id="sec386">13.3.1&#XA0;&#XA0;dependencies, dependencies-all, dependencies-proper</h3><!--SEC END --><p><a id="fun:dependencies"></a><a id="function:dependencies"></a><a id="hevea_default422"></a><a id="hevea_fun253"></a><a id="fun:dependencies-all"></a><a id="function:dependencies-all"></a><a id="hevea_default423"></a><a id="hevea_fun254"></a><a id="fun:dependencies-proper"></a><a id="function:dependencies-proper"></a><a id="hevea_default424"></a><a id="hevea_fun255"></a></p><pre class="verbatim">   $(dependencies targets) : File Array
   $(dependencies-all targets) : File Array
   $(dependencies-proper targets) : File Array
      targets : File Array
   raises RuntimeException
</pre><p>The <code>dependencies</code> function returns the set of immediate dependencies of
the given targets. This function can only be used within a rule body and
all the arguments to the <code>dependency</code> function must also be dependencies of
this rule. This restriction ensures that all the dependencies are known when
this function is executed.</p><p>The <code>dependencies-all</code> function is similar, but it expands the dependencies
recursively, returning all of the dependencies of a target, not just the immediate
ones.</p><p>The <code>dependencies-proper</code> function returns all recursive dependencies, except
the dependencies that are leaf targets. A leaf target is a target that has no
dependencies and no build commands; a leaf target corresponds to a source file
in the current project.</p><p>In all three functions, files that are not part of the current project are silently
discarded. All three functions will return phony and scanner targets along with the
&#X201C;real&#X201D; ones.</p><p>One purpose of the <code>dependencies-proper</code> function is for &#X201C;clean&#X201D; targets.
For example, one way to delete all intermediate files in a build is with a rule
that uses the <code>dependencies-proper</code>. Note however, that the rule requires
building the project before it can be deleted.</p><pre class="verbatim">    .PHONY: clean

    APP = ...     # the name of the target application
    clean: $(APP)
       rm -f $(dependencies-proper $(APP))
</pre><p>Also note that the <code>dependencies-proper</code> function will return the phony and scanner
targets in addition to real one.</p><p>For other (possibly better) alternatives, see Section&#XA0;<a href="#section%3Adistclean">10.3.3</a> and
<a href="#fun%3Afilter-proper-targets"><CODE>filter-proper-targets</CODE> function</a>.
</p>
<!--TOC subsection id="sec387" target-->
<h3 class="subsection" id="sec387">13.3.2&#XA0;&#XA0;target</h3><!--SEC END --><p><a id="fun:target"></a><a id="function:target"></a><a id="hevea_default425"></a><a id="hevea_fun256"></a>
</p><pre class="verbatim">   $(target targets) : Target Array
      targets : File Sequence
   raises RuntimeException
</pre><p>The <code>target</code> function returns the Target object associated with each
of the targets. See the <code>Target</code> object for more information.
</p>
<!--TOC subsection id="sec388" find-build-targets-->
<h3 class="subsection" id="sec388">13.3.3&#XA0;&#XA0;find-build-targets</h3><!--SEC END --><p><a id="fun:find-build-targets"></a><a id="function:find-build-targets"></a><a id="hevea_default426"></a><a id="hevea_fun257"></a></p><pre class="verbatim">    $(find-build-targets tag) : Target Array
       tag : Succeeded | Failed
</pre><p>The <code>find-build-targets</code> allow the results
of the build to be examined. The <code>tag</code> must
specifies which targets are to be returned; the comparison
is case-insensitive.</p><dl class="description"><dt class="dt-description">
<span class="c004">Succeeded</span></dt><dd class="dd-description"> The list of targets that were built successfully.
</dd><dt class="dt-description"><span class="c004">Failed</span></dt><dd class="dd-description"> The list of targets that could not be built.
</dd></dl><p>These are used mainly in conjuction with the
<code>.BUILD_SUCCESS</code> (Section&#XA0;<a href="#target%3A.BUILD_SUCCESS">13.1</a>) and
<code>.BUILD_FAILURE</code> (Section&#XA0;<a href="#target%3A.BUILD_FAILURE">13.1</a>) phony targets.
For example, adding the following to your project <code>OMakefile</code>
will print the number of targets that failed (if the build failed).</p><pre class="verbatim">    .BUILD_FAILURE:
        echo "Failed target count: $(length $(find-build-targets Failed))"
</pre>
<!--TOC subsection id="sec389" project-directories-->
<h3 class="subsection" id="sec389">13.3.4&#XA0;&#XA0;project-directories</h3><!--SEC END --><p><a id="fun:project-directories"></a><a id="function:project-directories"></a><a id="hevea_default427"></a><a id="hevea_fun258"></a></p><pre class="verbatim">   $(project-directories) : Dir Array
</pre><p>The <code>project-directories</code> function returns the list of all directories
that are considered to be part of the project.</p><p>To get the complete directory list, this function should be called
from within a rule body.
</p>
<!--TOC subsection id="sec390" rule-->
<h3 class="subsection" id="sec390">13.3.5&#XA0;&#XA0;rule</h3><!--SEC END --><p><a id="fun:rule"></a><a id="function:rule"></a><a id="hevea_default428"></a><a id="hevea_fun259"></a></p><p>The <code>rule</code> function is called whenever a build rule is defined.
It is unlikely that you will need to redefine this function, except in
very exceptional cases.</p><pre class="verbatim">   rule(multiple, target, pattern, sources, options, body) : Rule
      multiple : String
      target   : Sequence
      pattern  : Sequence
      sources  : Sequence
      options  : Array
      body     : Body
</pre><p>The <code>rule</code> function is called when a rule is evaluated.</p><dl class="description"><dt class="dt-description">
<span class="c004">multiple</span></dt><dd class="dd-description"> A Boolean value indicating whether the rule was defined
with a double colon <code>::</code>.
</dd><dt class="dt-description"><span class="c004">target</span></dt><dd class="dd-description"> The sequence of target names.
</dd><dt class="dt-description"><span class="c004">pattern</span></dt><dd class="dd-description"> The sequence of patterns. This sequence will be empty
for two-part rules.
</dd><dt class="dt-description"><span class="c004">sources</span></dt><dd class="dd-description"> The sequence of dependencies.
</dd><dt class="dt-description"><span class="c004">options</span></dt><dd class="dd-description"> An array of options. Each option is represented
as a <a href="#obj%3AMap"><CODE>Map</CODE> object</a> associating each specified option with
a value.
</dd><dt class="dt-description"><span class="c004">body</span></dt><dd class="dd-description"> The body expression of the rule.
</dd></dl><p>Consider the following rule.</p><pre class="verbatim">   target: pattern: sources :name1: option1 :name2: option2
      expr1
      expr2
</pre><p>This expression represents the following function call, where
square brackets are used to indicate arrays, and the curly
brackets represent a <a href="#obj%3AMap"><CODE>Map</CODE> object</a>.</p><pre class="verbatim">   rule(false, target, pattern, sources,
        { $|:name1:| = option1; $|:name2:| = option2 }
        [expr1; expr2])
</pre>
<!--TOC subsection id="sec391" build-->
<h3 class="subsection" id="sec391">13.3.6&#XA0;&#XA0;build</h3><!--SEC END --><p><a id="fun:build"></a><a id="function:build"></a><a id="hevea_default429"></a><a id="hevea_fun260"></a></p><pre class="verbatim">    build(targets : File Array) : bool
</pre><p>Build the given targets. The value is true iff the build was successful.
This function can be used only in <code>osh</code>.

</p>
<!--TOC section id="sec392" The OMakeroot file-->
<h2 class="section" id="sec392">13.4&#XA0;&#XA0;The OMakeroot file</h2><!--SEC END --><p>
<a id="hevea_default430"></a></p><p>The standard <span class="c001">OMakeroot</span> file defines the functions are rules
for building standard projects.</p>
<!--TOC subsection id="sec393" Variables-->
<h3 class="subsection" id="sec393">13.4.1&#XA0;&#XA0;Variables</h3><!--SEC END -->
<!--TOC paragraph id="sec394" ROOT-->
<h5 class="paragraph" id="sec394">ROOT</h5><!--SEC END --><p><a id="var:ROOT"></a><a id="hevea_default431"></a><a id="hevea_var23"></a> The root directory of the current project.
</p>
<!--TOC paragraph id="sec395" CWD-->
<h5 class="paragraph" id="sec395">CWD</h5><!--SEC END --><p><a id="var:CWD"></a><a id="hevea_default432"></a><a id="hevea_var24"></a> The current working directory (the directory is set for each <span class="c001">OMakefile</span> in the project).
</p>
<!--TOC paragraph id="sec396" EMPTY-->
<h5 class="paragraph" id="sec396">EMPTY</h5><!--SEC END --><p><a id="var:EMPTY"></a><a id="hevea_default433"></a><a id="hevea_var25"></a> The empty string.
</p>
<!--TOC paragraph id="sec397" STDROOT-->
<h5 class="paragraph" id="sec397">STDROOT</h5><!--SEC END --><p><a id="var:STDROOT"></a><a id="hevea_default434"></a><a id="hevea_var26"></a> The name of the standard installed <span class="c001">OMakeroot</span> file.
</p>
<!--TOC paragraph id="sec398" ABORT_ON_COMMAND_ERROR-->
<h5 class="paragraph" id="sec398">ABORT_ON_COMMAND_ERROR</h5><!--SEC END --><p><a id="var:ABORT_ON_COMMAND_ERROR"></a><a id="hevea_default435"></a><a id="hevea_var27"></a> If set to true, the construction of a target should
be aborted whenever one of the commands to build it fail. This defaults to true,
and should normally be left that way.</p>
<!--TOC paragraph id="sec399" SCANNER_MODE-->
<h5 class="paragraph" id="sec399">SCANNER_MODE</h5><!--SEC END --><p><a id="var:SCANNER_MODE"></a><a id="hevea_default436"></a><a id="hevea_var28"></a> This variable should be defined as one of four values
(defaults to <code>enabled</code>).
</p><dl class="description"><dt class="dt-description">
<span class="c004">enabled</span></dt><dd class="dd-description"> Allow the use of default <code>.SCANNER</code> rules. Whenever a rule does
not specify a <code>:scanner:</code> dependency explicitly, try to find a
<code>.SCANNER</code> with the same target name.
</dd><dt class="dt-description"><span class="c004">disabled</span></dt><dd class="dd-description"> Never use default <code>.SCANNER</code> rules.
</dd><dt class="dt-description"><span class="c004">warning</span></dt><dd class="dd-description"> Allow the use of default <code>.SCANNER</code> rules, but print a warning
whenever one is selected.
</dd><dt class="dt-description"><span class="c004">error</span></dt><dd class="dd-description"> Do not allow the use of default <code>.SCANNER</code> rules. If a rule
does not specify a <code>:scanner:</code> dependency, and there is a default
<code>.SCANNER</code> rule, the build will terminate abnormally.
</dd></dl>
<!--TOC subsection id="sec400" System variables-->
<h3 class="subsection" id="sec400">13.4.2&#XA0;&#XA0;System variables</h3><!--SEC END -->
<!--TOC paragraph id="sec401" INSTALL-->
<h5 class="paragraph" id="sec401">INSTALL</h5><!--SEC END --><p><a id="var:INSTALL"></a><a id="hevea_default437"></a><a id="hevea_var29"></a> The command to install a program (<code>install</code> on <code>Unix</code>, <code>cp</code> on <code>Win32</code>).
</p>
<!--TOC paragraph id="sec402" PATHSEP-->
<h5 class="paragraph" id="sec402">PATHSEP</h5><!--SEC END --><p><a id="var:PATHSEP"></a><a id="hevea_default438"></a><a id="hevea_var30"></a> The normal path separator (<code>:</code> on <code>Unix</code>, <code>;</code> on <code>Win32</code>).
</p>
<!--TOC paragraph id="sec403" DIRSEP-->
<h5 class="paragraph" id="sec403">DIRSEP</h5><!--SEC END --><p><a id="var:DIRSEP"></a><a id="hevea_default439"></a><a id="hevea_var31"></a> The normal directory separator (<code>/</code> on <code>Unix</code>, <code>\</code> on <code>Win32</code>).
</p>
<!--TOC paragraph id="sec404" EXT_OBJ-->
<h5 class="paragraph" id="sec404">EXT_OBJ</h5><!--SEC END --><p><a id="var:EXT_OBJ"></a><a id="hevea_default440"></a><a id="hevea_var32"></a> File suffix for an object file (default is <code>.o</code> on <code>Unix</code>, and <code>.obj</code> on <code>Win32</code>).
</p>
<!--TOC paragraph id="sec405" EXT_LIB-->
<h5 class="paragraph" id="sec405">EXT_LIB</h5><!--SEC END --><p><a id="var:EXT_LIB"></a><a id="hevea_default441"></a><a id="hevea_var33"></a> File suffix for a static library (default is <code>.a</code> on <code>Unix</code>, and <code>.lib</code> on <code>Win32</code>).
</p>
<!--TOC paragraph id="sec406" EXT_DLL-->
<h5 class="paragraph" id="sec406">EXT_DLL</h5><!--SEC END --><p><a id="var:EXT_DLL"></a><a id="hevea_default442"></a><a id="hevea_var34"></a> File suffix for a shared library (default is <code>.so</code> on <code>Unix</code>, and <code>.dll</code> on <code>Win32</code>).
</p>
<!--TOC paragraph id="sec407" EXT_ASM-->
<h5 class="paragraph" id="sec407">EXT_ASM</h5><!--SEC END --><p><a id="var:EXT_ASM"></a><a id="hevea_default443"></a><a id="hevea_var35"></a> File suffix for an assembly file (default is <code>.s</code> on <code>Unix</code>, and <code>.asm</code> on <code>Win32</code>).
</p>
<!--TOC paragraph id="sec408" EXE-->
<h5 class="paragraph" id="sec408">EXE</h5><!--SEC END --><p><a id="var:EXE"></a><a id="hevea_default444"></a><a id="hevea_var36"></a> File suffix for executables (default is empty for <code>Unix</code>, and <code>.exe</code> on <code>Win32</code> and <code>Cygwin</code>).
</p>
<!--TOC section id="sec409" Building C and C++ code-->
<h2 class="section" id="sec409">13.5&#XA0;&#XA0;Building C and C++ code</h2><!--SEC END --><p>OMake provides extensive support for building C and C++ programs. In order to use the functions
defined in this section, you need to make sure the line
</p><pre class="verbatim">open build/C
</pre><p>is present in your <code>OMakeroot</code> file.</p>
<!--TOC subsection id="sec410" Autoconfiguration variables-->
<h3 class="subsection" id="sec410">13.5.1&#XA0;&#XA0;Autoconfiguration variables</h3><!--SEC END --><p>
These variables will get defined based on the &#X201C;autoconf-style&#X201D; <code>static.</code> tests executed
when you run OMake for the first time. You can use them to configure your project accordingly,
and you should not redefine them.</p><p>You can use the <code>--configure</code> command line option (Section&#XA0;<a href="#option%3A--configure">A.3.9</a>) to force
re-execution of all the tests.</p><p>A different set of autoconfiguration tests is performed depending on the build environment
involved &#X2014; one set of tests would be performed in a <code>Win32</code> environment, and another &#X2014;
in a Unix-like environment (including Linux, OS X and Cygwin).</p>
<!--TOC subsubsection id="sec411" Unix-like systems-->
<h4 class="subsubsection" id="sec411">13.5.1.1&#XA0;&#XA0;Unix-like systems</h4><!--SEC END -->
<!--TOC paragraph id="sec412" GCC_FOUND-->
<h5 class="paragraph" id="sec412">GCC_FOUND</h5><!--SEC END --><p><a id="var:GCC_FOUND"></a><a id="hevea_default445"></a><a id="hevea_var37"></a> A boolean flag specifying whether the <code>gcc</code> binary was found in your path.
</p>
<!--TOC paragraph id="sec413" GXX_FOUND-->
<h5 class="paragraph" id="sec413">GXX_FOUND</h5><!--SEC END --><p><a id="var:GXX_FOUND"></a><a id="hevea_default446"></a><a id="hevea_var38"></a> A boolean flag specifying whether the <code>g++</code> binary was found in your path.</p>
<!--TOC subsubsection id="sec414" Win32-->
<h4 class="subsubsection" id="sec414">13.5.1.2&#XA0;&#XA0;Win32</h4><!--SEC END -->
<!--TOC paragraph id="sec415" CL_FOUND-->
<h5 class="paragraph" id="sec415">CL_FOUND</h5><!--SEC END --><p><a id="var:CL_FOUND"></a><a id="hevea_default447"></a><a id="hevea_var39"></a> A boolean flag specifying whether the <code>cl</code> binary was found in your path.
</p>
<!--TOC paragraph id="sec416" LIB_FOUND-->
<h5 class="paragraph" id="sec416">LIB_FOUND</h5><!--SEC END --><p><a id="var:LIB_FOUND"></a><a id="hevea_default448"></a><a id="hevea_var40"></a> A boolean flag specifying whether the <code>lib</code> binary was found in your path.</p>
<!--TOC subsection id="sec417" C and C++ configuration variables-->
<h3 class="subsection" id="sec417">13.5.2&#XA0;&#XA0;C and C++ configuration variables</h3><!--SEC END --><p>The following variables can be redefined in your project.</p>
<!--TOC paragraph id="sec418" CC-->
<h5 class="paragraph" id="sec418">CC</h5><!--SEC END --><p><a id="var:CC"></a><a id="hevea_default449"></a><a id="hevea_var41"></a> The name of the C compiler (on <code>Unix</code> it defaults to <code>gcc</code> when <code>gcc</code> is present and
to <code>cc</code> otherwise; on <code>Win32</code> defaults to <code>cl /nologo</code>).
</p>
<!--TOC paragraph id="sec419" CXX-->
<h5 class="paragraph" id="sec419">CXX</h5><!--SEC END --><p><a id="var:CXX"></a><a id="hevea_default450"></a><a id="hevea_var42"></a> The name of the C++ compiler (on <code>Unix</code> it defaults to <code>gcc</code> when <code>gcc</code> is present
and to <code>c</code>++ otherwise; on <code>Win32</code> defaults to <code>cl /nologo</code>).
</p>
<!--TOC paragraph id="sec420" CPP-->
<h5 class="paragraph" id="sec420">CPP</h5><!--SEC END --><p><a id="var:CPP"></a><a id="hevea_default451"></a><a id="hevea_var43"></a> The name of the C preprocessor (defaults to <code>cpp</code> on <code>Unix</code>, and <code>cl /E</code> on <code>Win32</code>).
</p>
<!--TOC paragraph id="sec421" CFLAGS-->
<h5 class="paragraph" id="sec421">CFLAGS</h5><!--SEC END --><p><a id="var:CFLAGS"></a><a id="hevea_default452"></a><a id="hevea_var44"></a> Compilation flags to pass to the C compiler (default empty on <code>Unix</code>, and <code>/DWIN32</code>
on <code>Win32</code>).
</p>
<!--TOC paragraph id="sec422" CXXFLAGS-->
<h5 class="paragraph" id="sec422">CXXFLAGS</h5><!--SEC END --><p><a id="var:CXXFLAGS"></a><a id="hevea_default453"></a><a id="hevea_var45"></a> Compilation flags to pass to the C++ compiler (default empty on <code>Unix</code>, and <code>/DWIN32</code>
on <code>Win32</code>).
</p>
<!--TOC paragraph id="sec423" INCLUDES-->
<h5 class="paragraph" id="sec423">INCLUDES</h5><!--SEC END --><p><a id="var:INCLUDES"></a><a id="hevea_default454"></a><a id="hevea_var46"></a> Additional directories that specify the search path to the C and C++ compilers (default is <code>.</code>).
The directories are passed to the C and C++ compilers with the <code>-I</code> option.
The include path with <code>-I</code> prefixes is defined in the <code>PREFIXED_INCLUDES</code> variable.
</p>
<!--TOC paragraph id="sec424" LIBS-->
<h5 class="paragraph" id="sec424">LIBS</h5><!--SEC END --><p><a id="var:LIBS"></a><a id="hevea_default455"></a><a id="hevea_var47"></a> Additional libraries needed when building a program (default is empty).
</p>
<!--TOC paragraph id="sec425" CCOUT-->
<h5 class="paragraph" id="sec425">CCOUT</h5><!--SEC END --><p><a id="var:CCOUT"></a><a id="hevea_default456"></a><a id="hevea_var48"></a> The option to use for specifying the output file in C and C++ compilers
(defaults to <code>-o</code> on <code>Unix</code> and <code>/Fo</code> on <code>Win32</code>).
</p>
<!--TOC paragraph id="sec426" AS-->
<h5 class="paragraph" id="sec426">AS</h5><!--SEC END --><p><a id="var:AS"></a><a id="hevea_default457"></a><a id="hevea_var49"></a> The name of the assembler (defaults to <code>as</code> on <code>Unix</code>, and <code>ml</code> on <code>Win32</code>).
</p>
<!--TOC paragraph id="sec427" ASFLAGS-->
<h5 class="paragraph" id="sec427">ASFLAGS</h5><!--SEC END --><p><a id="var:ASFLAGS"></a><a id="hevea_default458"></a><a id="hevea_var50"></a> Flags to pass to the assembler (default is empty on <code>Unix</code>, and <code>/c /coff</code>
on <code>Win32</code>).
</p>
<!--TOC paragraph id="sec428" ASOUT-->
<h5 class="paragraph" id="sec428">ASOUT</h5><!--SEC END --><p><a id="var:ASOUT"></a><a id="hevea_default459"></a><a id="hevea_var51"></a> The option string that specifies the output file for <code>AS</code> (defaults to <code>-o</code>
on <code>Unix</code> and <code>/Fo</code> on <code>Win32</code>).
</p>
<!--TOC paragraph id="sec429" AR-->
<h5 class="paragraph" id="sec429">AR</h5><!--SEC END --><p><a id="var:AR"></a><a id="hevea_default460"></a><a id="hevea_var52"></a> The name of the program to create static libraries (defaults to <code>ar cq</code> on <code>Unix</code>,
and <code>lib</code> on <code>Win32</code>).
</p>
<!--TOC paragraph id="sec430" LD-->
<h5 class="paragraph" id="sec430">LD</h5><!--SEC END --><p><a id="var:LD"></a><a id="hevea_default461"></a><a id="hevea_var53"></a> The name of the linker (defaults to <code>ld</code> on <code>Unix</code>, and <code>cl</code> on <code>Win32</code>).
</p>
<!--TOC paragraph id="sec431" LDFLAGS-->
<h5 class="paragraph" id="sec431">LDFLAGS</h5><!--SEC END --><p><a id="var:LDFLAGS"></a><a id="hevea_default462"></a><a id="hevea_var54"></a> Options to pass to the linker (default is empty).
</p>
<!--TOC paragraph id="sec432" LDFLAGS_DLL-->
<h5 class="paragraph" id="sec432">LDFLAGS_DLL</h5><!--SEC END --><p><a id="var:LDFLAGS_DLL"></a><a id="hevea_default463"></a><a id="hevea_var55"></a> Options to pass to the linker when compiling a shared library (defaults to <code>-shared</code> on <code>Unix</code> and <code>/DLL</code> on <code>Win32</code>).
</p>
<!--TOC paragraph id="sec433" LDOUT-->
<h5 class="paragraph" id="sec433">LDOUT</h5><!--SEC END --><p><a id="var:LDOUT"></a><a id="hevea_default464"></a><a id="hevea_var56"></a> The option to use for specifying the output file in C and C++ linkers
(defaults to <code>-o</code> on <code>Unix</code> and <code>/Fe</code> on <code>Win32</code>).
</p>
<!--TOC paragraph id="sec434" YACC-->
<h5 class="paragraph" id="sec434">YACC</h5><!--SEC END --><p><a id="var:YACC"></a><a id="hevea_default465"></a><a id="hevea_var57"></a> The name of the <code>yacc</code> parser generator (default is <code>yacc</code> on <code>Unix</code>, empty on <code>Win32</code>).
</p>
<!--TOC paragraph id="sec435" LEX-->
<h5 class="paragraph" id="sec435">LEX</h5><!--SEC END --><p><a id="var:LEX"></a><a id="hevea_default466"></a><a id="hevea_var58"></a> The name of the <code>lex</code> lexer generator (default is <code>lex</code> on <code>Unix</code>, empty on <code>Win32</code>).
</p>
<!--TOC subsection id="sec436" Generated C files-->
<h3 class="subsection" id="sec436">13.5.3&#XA0;&#XA0;Generated C files</h3><!--SEC END --><p>
Because the C scanners do not normally know anything about generated source files (such as
generated header files), these files may need to be created before running the scanner.
</p>
<!--TOC subsubsection id="sec437" CGeneratedFiles, LocalCGeneratedFiles-->
<h4 class="subsubsection" id="sec437">13.5.3.1&#XA0;&#XA0;CGeneratedFiles, LocalCGeneratedFiles</h4><!--SEC END --><p><a id="fun:CGeneratedFiles"></a><a id="function:CGeneratedFiles"></a><a id="hevea_default467"></a><a id="hevea_fun261"></a><a id="fun:LocalCGeneratedFiles"></a><a id="function:LocalCGeneratedFiles"></a><a id="hevea_default468"></a><a id="hevea_fun262"></a>
</p><pre class="verbatim">CGeneratedFiles(files)
LocalCGeneratedFiles(files)
</pre><p>The <code>CGeneratedFiles</code> and <code>LocalCGeneratedFiles</code> functions specify files
that need to be generated before any C files are scanned for dependencies. For example,
if <code>config.h</code> and <code>inputs.h</code> are both generated files, specify:
</p><pre class="verbatim">CGeneratedFiles(config.h inputs.h)
</pre><p>The <code>CGeneratedFiles</code> function is <em>global</em> &#X2014; its arguments will be generated
before any C files anywhere in the project are scanned for dependencies. The
<code>LocalCGeneratedFiles</code> function follows the normal scoping rules of OMake.</p>
<!--TOC subsection id="sec438" Building C programs and Libraries-->
<h3 class="subsection" id="sec438">13.5.4&#XA0;&#XA0;Building C programs and Libraries</h3><!--SEC END -->
<!--TOC subsubsection id="sec439" StaticCLibrary, DynamicCLibrary-->
<h4 class="subsubsection" id="sec439">13.5.4.1&#XA0;&#XA0;StaticCLibrary, DynamicCLibrary</h4><!--SEC END --><p><a id="fun:StaticCLibrary"></a><a id="function:StaticCLibrary"></a><a id="hevea_default469"></a><a id="hevea_fun263"></a><a id="fun:DynamicCLibrary"></a><a id="function:DynamicCLibrary"></a><a id="hevea_default470"></a><a id="hevea_fun264"></a></p><p>The <code>StaticCLibrary</code> builds a static library and the <code>DynamicCLibrary</code>
function builds a shared library (DLL).</p><pre class="verbatim">StaticCLibrary(&lt;target&gt;, &lt;files&gt;)
DynamicCLibrary(&lt;target&gt;, &lt;files&gt;)
</pre><p>The <code>&lt;target&gt;</code> does <em>not</em> include the library suffix, and
The <code>&lt;files&gt;</code> list does not include the object suffix. These
are obtained from the <a href="#var%3AEXT_LIB"><CODE>EXT_LIB</CODE></a> (<a href="#var%3AEXT_DLL"><CODE>EXT_DLL</CODE></a>)
and <a href="#var%3AEXT_OBJ"><CODE>EXT_OBJ</CODE></a> variables.</p><p>This function returns the library filename.</p><p>The following command builds the library <code>libfoo.a</code> from the
files <code>a.o b.o c.o</code> on <code>Unix</code>, or the library
<code>libfoo.lib</code> from the files <code>a.obj b.obj c.obj</code>
on <code>Win32</code>.</p><pre class="verbatim">StaticCLibrary(libfoo, a b c)
.DEFAULT: $(StaticCLibrary libbar, a b c d)
</pre>
<!--TOC paragraph id="sec440" CDLL_IMPLIES_STATIC-->
<h5 class="paragraph" id="sec440">CDLL_IMPLIES_STATIC</h5><!--SEC END --><p><a id="var:CDLL_IMPLIES_STATIC"></a><a id="hevea_default471"></a><a id="hevea_var59"></a> If the <code>CDLL_IMPLIES_STATIC</code>
variable is enabled (this is default on <code>Win32</code>), all the <code>DynamicC</code> functions
would assume that creating a shared library automatically created a static one.
</p>
<!--TOC subsubsection id="sec441" StaticCLibraryCopy, DynamicCLibraryCopy-->
<h4 class="subsubsection" id="sec441">13.5.4.2&#XA0;&#XA0;StaticCLibraryCopy, DynamicCLibraryCopy</h4><!--SEC END --><p><a id="fun:StaticCLibraryCopy"></a><a id="function:StaticCLibraryCopy"></a><a id="hevea_default472"></a><a id="hevea_fun265"></a><a id="fun:DynamicCLibraryCopy"></a><a id="function:DynamicCLibraryCopy"></a><a id="hevea_default473"></a><a id="hevea_fun266"></a></p><p>The <code>StaticCLibraryCopy</code> and <code>DynamicCLibraryCopy</code> functions copy a library
to an install location.</p><pre class="verbatim">StaticCLibraryCopy(&lt;tag&gt;, &lt;dir&gt;, &lt;lib&gt;)
DynamicCLibraryCopy(&lt;tag&gt;, &lt;dir&gt;, &lt;lib&gt;)
</pre><p>The <code>&lt;tag&gt;</code> is the name of a target (typically a <code>.PHONY</code> target);
the <code>&lt;dir&gt;</code> is the installation directory, and <code>&lt;lib&gt;</code> is
the library to be copied (without the library suffix).</p><p>This function returns the filename of the library in the target directory.</p><p>For example, the following code copies the library
<code>libfoo.a</code> to the <code>/usr/lib</code> directory.</p><pre class="verbatim">.PHONY: install

StaticCLibraryCopy(install, /usr/lib, libfoo)
</pre>
<!--TOC subsubsection id="sec442" StaticCLibraryInstall, DynamicCLibraryInstall-->
<h4 class="subsubsection" id="sec442">13.5.4.3&#XA0;&#XA0;StaticCLibraryInstall, DynamicCLibraryInstall</h4><!--SEC END --><p><a id="fun:StaticCLibraryInstall"></a><a id="function:StaticCLibraryInstall"></a><a id="hevea_default474"></a><a id="hevea_fun267"></a><a id="fun:DynamicCLibraryInstall"></a><a id="function:DynamicCLibraryInstall"></a><a id="hevea_default475"></a><a id="hevea_fun268"></a></p><p>The <code>StaticCLibraryInstall</code> and <code>DynamicCLibraryInstall</code> functions build a library, and
set the install location in one step. Return the filename of the library
in the target directory.</p><pre class="verbatim">StaticCLibraryInstall(&lt;tag&gt;, &lt;dir&gt;, &lt;libname&gt;, &lt;files&gt;)
DynamicCLibraryInstall(&lt;tag&gt;, &lt;dir&gt;, &lt;libname&gt;, &lt;files&gt;)
</pre><pre class="verbatim">StaticCLibraryInstall(install, /usr/lib, libfoo, a b c)
</pre>
<!--TOC subsubsection id="sec443" StaticCObject, StaticCObjectCopy, StaticCObjectInstall-->
<h4 class="subsubsection" id="sec443">13.5.4.4&#XA0;&#XA0;StaticCObject, StaticCObjectCopy, StaticCObjectInstall</h4><!--SEC END --><p><a id="fun:StaticCObject"></a><a id="function:StaticCObject"></a><a id="hevea_default476"></a><a id="hevea_fun269"></a><a id="fun:StaticCObjectCopy"></a><a id="function:StaticCObjectCopy"></a><a id="hevea_default477"></a><a id="hevea_fun270"></a><a id="fun:StaticCObjectInstall"></a><a id="function:StaticCObjectInstall"></a><a id="hevea_default478"></a><a id="hevea_fun271"></a></p><p>These functions mirror the <code>StaticCLibrary</code>, <code>StaticCLibraryCopy</code>,
and <code>StaticCLibraryInstall</code> functions, but they build an <em>object</em>
file (a <code>.o</code> file on <code>Unix</code>, and a <code>.obj</code> file on <code>Win32</code>).
</p>
<!--TOC subsubsection id="sec444" CProgram-->
<h4 class="subsubsection" id="sec444">13.5.4.5&#XA0;&#XA0;CProgram</h4><!--SEC END --><p><a id="fun:CProgram"></a><a id="function:CProgram"></a><a id="hevea_default479"></a><a id="hevea_fun272"></a></p><p>The <code>CProgram</code> function builds a C program from a set
of object files and libraries.</p><p><code>CProgram(&lt;name&gt;, &lt;files&gt;)</code></p><p>The <code>&lt;name&gt;</code> argument specifies the name of the program to be built;
the <code>&lt;files&gt;</code> argument specifies the files to be linked. The function
returns the filename of the executable.</p><p>Additional options can be passed through the following variables.
</p><dl class="description"><dt class="dt-description">
<span class="c004">CFLAGS</span></dt><dd class="dd-description"> Flags used by the C compiler during the link step.
</dd><dt class="dt-description"><span class="c004">LDFLAGS</span></dt><dd class="dd-description"> Flags to pass to the loader.
</dd><dt class="dt-description"><span class="c004">LIBS</span></dt><dd class="dd-description"> Additional libraries to be linked.
</dd></dl><p>For example, the following code specifies that the program
<code>foo</code> is to be produced by linking the files <code>bar.o</code>
and <code>baz.o</code> and libraries <code>libfoo.a</code>.</p><pre class="verbatim">section
   LIBS = libfoo
   LDFLAGS += -lbar
   CProgram(foo, bar baz)
</pre>
<!--TOC subsubsection id="sec445" CProgramCopy-->
<h4 class="subsubsection" id="sec445">13.5.4.6&#XA0;&#XA0;CProgramCopy</h4><!--SEC END --><p><a id="fun:CProgramCopy"></a><a id="function:CProgramCopy"></a><a id="hevea_default480"></a><a id="hevea_fun273"></a></p><p>The <code>CProgramCopy</code> function copies a file to an install location.</p><p><code>CProgramCopy(&lt;tag&gt;, &lt;dir&gt;, &lt;program&gt;)</code></p><pre class="verbatim">CProgramCopy(install, /usr/bin, foo)
</pre>
<!--TOC subsubsection id="sec446" CProgramInstall-->
<h4 class="subsubsection" id="sec446">13.5.4.7&#XA0;&#XA0;CProgramInstall</h4><!--SEC END --><p><a id="fun:CProgramInstall"></a><a id="function:CProgramInstall"></a><a id="hevea_default481"></a><a id="hevea_fun274"></a></p><p>The <code>CProgramInstall</code> function specifies a program to build,
and a location to install, simultaneously.</p><p><code>CProgramInstall(&lt;tag&gt;, &lt;dir&gt;, &lt;name&gt;, &lt;files&gt;)</code></p><pre class="verbatim">section
   LIBS = libfoo
   LDFLAGS += -lbar
   CProgramInstall(install, /usr/bin, foo, bar baz)
</pre>
<!--TOC subsubsection id="sec447" CXXProgram, CXXProgramInstall-->
<h4 class="subsubsection" id="sec447">13.5.4.8&#XA0;&#XA0;CXXProgram, CXXProgramInstall</h4><!--SEC END --><p><a id="fun:CXXProgram"></a><a id="function:CXXProgram"></a><a id="hevea_default482"></a><a id="hevea_fun275"></a><a id="fun:CXXProgramInstall"></a><a id="function:CXXProgramInstall"></a><a id="hevea_default483"></a><a id="hevea_fun276"></a></p><p>The <code>CXXProgram</code> and <code>CXXProgramInstall</code> functions are
equivalent to their C counterparts, except that would use <code>$(CXX)</code> and <code>$(CXXFLAGS)</code>
for linking instead of <code>$(CC)</code> and <code>$(CFLAGS)</code>.
</p>
<!--TOC subsubsection id="sec448" StaticCXXLibrary, StaticCXXLibraryCopy, StaticCXXLibraryInstall, DynamicCXXLibrary, DynamicCXXLibraryCopy, DynamicCXXLibraryInstall-->
<h4 class="subsubsection" id="sec448">13.5.4.9&#XA0;&#XA0;StaticCXXLibrary, StaticCXXLibraryCopy, StaticCXXLibraryInstall, DynamicCXXLibrary, DynamicCXXLibraryCopy, DynamicCXXLibraryInstall</h4><!--SEC END --><p><a id="fun:StaticCXXLibrary"></a><a id="function:StaticCXXLibrary"></a><a id="hevea_default484"></a><a id="hevea_fun277"></a><a id="fun:StaticCXXLibraryCopy"></a><a id="function:StaticCXXLibraryCopy"></a><a id="hevea_default485"></a><a id="hevea_fun278"></a><a id="fun:StaticCXXLibraryInstall"></a><a id="function:StaticCXXLibraryInstall"></a><a id="hevea_default486"></a><a id="hevea_fun279"></a><a id="fun:DynamicCXXLibrary"></a><a id="function:DynamicCXXLibrary"></a><a id="hevea_default487"></a><a id="hevea_fun280"></a><a id="fun:DynamicCXXLibraryCopy"></a><a id="function:DynamicCXXLibraryCopy"></a><a id="hevea_default488"></a><a id="hevea_fun281"></a><a id="fun:DynamicCXXLibraryInstall"></a><a id="function:DynamicCXXLibraryInstall"></a><a id="hevea_default489"></a><a id="hevea_fun282"></a></p><p>Similarly, the six <code>CXXLibrary</code> functions the C++ equivalents of the corresponding
<code>CLibrary</code> functions.
</p>
<!--TOC section id="sec449" Building OCaml code-->
<h2 class="section" id="sec449">13.6&#XA0;&#XA0;Building OCaml code</h2><!--SEC END --><p>OMake provides extensive support for building OCaml code, including support for tools like
<code>ocamlfind</code>, <code>ocamlyacc</code> and <code>menhir</code>. In order to use the functions
defined in this section, you need to make sure the line
</p><pre class="verbatim">open build/OCaml
</pre><p>is present in your <code>OMakeroot</code> file.</p>
<!--TOC subsection id="sec450" Autoconfiguration variables for OCaml compilation-->
<h3 class="subsection" id="sec450">13.6.1&#XA0;&#XA0;Autoconfiguration variables for OCaml compilation</h3><!--SEC END --><p>
These variables will get defined based on the &#X201C;autoconf-style&#X201D; tests executed when you
run OMake for the first time. You can use them to configure your project accordingly,
and you should not redefine them.</p><p>You can use the <code>--configure</code> command line option (Section&#XA0;<a href="#option%3A--configure">A.3.9</a>) to force
re-execution of all the tests.</p>
<!--TOC paragraph id="sec451" OCAMLOPT_EXISTS-->
<h5 class="paragraph" id="sec451">OCAMLOPT_EXISTS</h5><!--SEC END --><p><a id="var:OCAMLOPT_EXISTS"></a><a id="hevea_default490"></a><a id="hevea_var60"></a> True when <code>ocamlopt</code> (or <code>ocamlopt.opt</code>) is
available on your machine.
</p>
<!--TOC paragraph id="sec452" OCAMLFIND_EXISTS-->
<h5 class="paragraph" id="sec452">OCAMLFIND_EXISTS</h5><!--SEC END --><p><a id="var:OCAMLFIND_EXISTS"></a><a id="hevea_default491"></a><a id="hevea_var61"></a> True when the ocamlfind is available on your
machines.
</p>
<!--TOC paragraph id="sec453" OCAMLDEP_MODULES_AVAILABLE-->
<h5 class="paragraph" id="sec453">OCAMLDEP_MODULES_AVAILABLE</h5><!--SEC END --><p><a id="var:OCAMLDEP_MODULES_AVAILABLE"></a><a id="hevea_default492"></a><a id="hevea_var62"></a> True when a version of
<code>ocamldep</code> that understands the <code>-modules</code> option is available on your machine.
</p>
<!--TOC paragraph id="sec454" MENHIR_AVAILABLE-->
<h5 class="paragraph" id="sec454">MENHIR_AVAILABLE</h5><!--SEC END --><p><a id="var:MENHIR_AVAILABLE"></a><a id="hevea_default493"></a><a id="hevea_var63"></a> True when the Menhir parser-generator is available
on your machine.
</p>
<!--TOC paragraph id="sec455" OCAMLLIB-->
<h5 class="paragraph" id="sec455">OCAMLLIB</h5><!--SEC END --><p><a id="var:OCAMLLIB"></a><a id="hevea_default494"></a><a id="hevea_var64"></a> The location of OCaml library directory (output of <code>ocamlc -where</code>). Empty when no
ocamlc is found.</p>
<!--TOC subsection id="sec456" Configuration variables for OCaml compilation-->
<h3 class="subsection" id="sec456">13.6.2&#XA0;&#XA0;Configuration variables for OCaml compilation</h3><!--SEC END --><p>The following variables can be redefined in your project.
</p>
<!--TOC paragraph id="sec457" USE_OCAMLFIND-->
<h5 class="paragraph" id="sec457">USE_OCAMLFIND</h5><!--SEC END --><p><a id="var:USE_OCAMLFIND"></a><a id="hevea_default495"></a><a id="hevea_var65"></a> Whether to use the <code>ocamlfind</code> utility (default <code>false</code>)
</p>
<!--TOC paragraph id="sec458" OCAMLC-->
<h5 class="paragraph" id="sec458">OCAMLC</h5><!--SEC END --><p><a id="var:OCAMLC"></a><a id="hevea_default496"></a><a id="hevea_var66"></a> The OCaml bytecode compiler (default <code>ocamlc.opt</code> if it exists
and <code>USE_OCAMLFIND</code> is not set, otherwise <code>ocamlc</code>).
</p>
<!--TOC paragraph id="sec459" OCAMLOPT-->
<h5 class="paragraph" id="sec459">OCAMLOPT</h5><!--SEC END --><p><a id="var:OCAMLOPT"></a><a id="hevea_default497"></a><a id="hevea_var67"></a> The OCaml native-code compiler (default <code>ocamlopt.opt</code> if it
exists and <code>USE_OCAMLFIND</code> is not set, otherwise <code>ocamlopt</code>).
</p>
<!--TOC paragraph id="sec460" CAMLP4-->
<h5 class="paragraph" id="sec460">CAMLP4</h5><!--SEC END --><p><a id="var:CAMLP4"></a><a id="hevea_default498"></a><a id="hevea_var68"></a> The <code>camlp4</code> preprocessor (default <code>camlp4</code>).
</p>
<!--TOC paragraph id="sec461" OCAMLLEX-->
<h5 class="paragraph" id="sec461">OCAMLLEX</h5><!--SEC END --><p><a id="var:OCAMLLEX"></a><a id="hevea_default499"></a><a id="hevea_var69"></a> The OCaml lexer generator (default <code>ocamllex</code>).
</p>
<!--TOC paragraph id="sec462" OCAMLLEXFLAGS-->
<h5 class="paragraph" id="sec462">OCAMLLEXFLAGS</h5><!--SEC END --><p><a id="var:OCAMLLEXFLAGS"></a><a id="hevea_default500"></a><a id="hevea_var70"></a> The flags to pass to <code>ocamllex</code> (default <code>-q</code>).
</p>
<!--TOC paragraph id="sec463" OCAMLYACC-->
<h5 class="paragraph" id="sec463">OCAMLYACC</h5><!--SEC END --><p><a id="var:OCAMLYACC"></a><a id="hevea_default501"></a><a id="hevea_var71"></a> The OCaml parser generator (default <code>ocamlyacc</code>).
</p>
<!--TOC paragraph id="sec464" OCAMLYACCFLAGS-->
<h5 class="paragraph" id="sec464">OCAMLYACCFLAGS</h5><!--SEC END --><p><a id="var:OCAMLYACCFLAGS"></a><a id="hevea_default502"></a><a id="hevea_var72"></a> Additional options to pass to <code>$(OCAMLYACC)</code>.
</p>
<!--TOC paragraph id="sec465" OCAMLDEP-->
<h5 class="paragraph" id="sec465">OCAMLDEP</h5><!--SEC END --><p><a id="var:OCAMLDEP"></a><a id="hevea_default503"></a><a id="hevea_var73"></a> The OCaml dependency analyzer (default <code>ocamldep</code>).
</p>
<!--TOC paragraph id="sec466" OCAMLDEP_MODULES_ENABLED-->
<h5 class="paragraph" id="sec466">OCAMLDEP_MODULES_ENABLED</h5><!--SEC END --><p><a id="var:OCAMLDEP_MODULES_ENABLED"></a><a id="hevea_default504"></a><a id="hevea_var74"></a> Instead of using <code>OCAMLDEP</code>
in a traditional <code>make</code>-style fashion, run <code>$(OCAMLDEP) -modules</code> and then
postprocess the output internally to discover all the relevant generated <code>.ml</code> and
<code>.mli</code> files. See Section&#XA0;<a href="#section%3Aocaml-generated-files">13.6.5</a> for more information on
interactions between OMake, <code>OCAMLDEP</code> and generated files. Set to
<code>$(OCAMLDEP_MODULES_AVAILABLE)</code> by default.
</p>
<!--TOC paragraph id="sec467" OCAMLMKTOP-->
<h5 class="paragraph" id="sec467">OCAMLMKTOP</h5><!--SEC END --><p><a id="var:OCAMLMKTOP"></a><a id="hevea_default505"></a><a id="hevea_var75"></a> The OCaml toploop compiler (default <code>ocamlmktop</code>).
</p>
<!--TOC paragraph id="sec468" OCAMLLINK-->
<h5 class="paragraph" id="sec468">OCAMLLINK</h5><!--SEC END --><p><a id="var:OCAMLLINK"></a><a id="hevea_default506"></a><a id="hevea_var76"></a> The OCaml bytecode linker (default <code>$(OCAMLC)</code>).
</p>
<!--TOC paragraph id="sec469" OCAMLOPTLINK-->
<h5 class="paragraph" id="sec469">OCAMLOPTLINK</h5><!--SEC END --><p><a id="var:OCAMLOPTLINK"></a><a id="hevea_default507"></a><a id="hevea_var77"></a> The OCaml native-code linker (default <code>$(OCAMLOPT)</code>).
</p>
<!--TOC paragraph id="sec470" OCAMLINCLUDES-->
<h5 class="paragraph" id="sec470">OCAMLINCLUDES</h5><!--SEC END --><p><a id="var:OCAMLINCLUDES"></a><a id="hevea_default508"></a><a id="hevea_var78"></a> Search path to pass to the OCaml compilers (default <code>.</code>).
The search path with the <code>-I</code> prefix is defined by the <code>PREFIXED_OCAMLINCLUDES</code>
variable.
</p>
<!--TOC paragraph id="sec471" OCAMLFIND-->
<h5 class="paragraph" id="sec471">OCAMLFIND</h5><!--SEC END --><p><a id="var:OCAMLFIND"></a><a id="hevea_default509"></a><a id="hevea_var79"></a> The <code>ocamlfind</code> utility (default <code>ocamlfind</code> if
<code>USE_OCAMLFIND</code> is set, otherwise empty).
</p>
<!--TOC paragraph id="sec472" OCAMLFINDFLAGS-->
<h5 class="paragraph" id="sec472">OCAMLFINDFLAGS</h5><!--SEC END --><p><a id="var:OCAMLFINDFLAGS"></a><a id="hevea_default510"></a><a id="hevea_var80"></a> The flags to pass to <code>ocamlfind</code> (default empty, <code>USE_OCAMLFIND</code> must be set).
</p>
<!--TOC paragraph id="sec473" OCAMLPACKS-->
<h5 class="paragraph" id="sec473">OCAMLPACKS</h5><!--SEC END --><p><a id="var:OCAMLPACKS"></a><a id="hevea_default511"></a><a id="hevea_var81"></a> Package names to pass to <code>ocamlfind</code> (<code>USE_OCAMLFIND</code> must be set).
</p>
<!--TOC paragraph id="sec474" BYTE_ENABLED-->
<h5 class="paragraph" id="sec474">BYTE_ENABLED</h5><!--SEC END --><p><a id="var:BYTE_ENABLED"></a><a id="hevea_default512"></a><a id="hevea_var82"></a> Flag indicating whether to use the bytecode compiler (default <code>true</code>, when no <code>ocamlopt</code> found, <code>false</code> otherwise).
</p>
<!--TOC paragraph id="sec475" NATIVE_ENABLED-->
<h5 class="paragraph" id="sec475">NATIVE_ENABLED</h5><!--SEC END --><p><a id="var:NATIVE_ENABLED"></a><a id="hevea_default513"></a><a id="hevea_var83"></a> Flag indicating whether to use the native-code compiler (default <code>true</code>, when ocamlopt is found, <code>false</code> otherwise).
Both <code>BYTE_ENABLED</code> and <code>NATIVE_ENABLED</code> can be set to true;
at least one should be set to true.
</p>
<!--TOC paragraph id="sec476" MENHIR_ENABLED-->
<h5 class="paragraph" id="sec476">MENHIR_ENABLED</h5><!--SEC END --><p><a id="var:MENHIR_ENABLED"></a><a id="hevea_default514"></a><a id="hevea_var84"></a> Define this as <code>true</code> if you wish to use
<code>menhir</code> instead of <code>ocamlyacc</code> (default <code>false</code>).
</p>
<!--TOC subsection id="sec477" OCaml command flags-->
<h3 class="subsection" id="sec477">13.6.3&#XA0;&#XA0;OCaml command flags</h3><!--SEC END --><p>The following variables specify <em>additional</em> options to be passed to
the OCaml tools.
</p>
<!--TOC paragraph id="sec478" OCAMLDEPFLAGS-->
<h5 class="paragraph" id="sec478">OCAMLDEPFLAGS</h5><!--SEC END --><p><a id="var:OCAMLDEPFLAGS"></a><a id="hevea_default515"></a><a id="hevea_var85"></a> Flags to pass to <code>OCAMLDEP</code>.
</p>
<!--TOC paragraph id="sec479" OCAMLPPFLAGS-->
<h5 class="paragraph" id="sec479">OCAMLPPFLAGS</h5><!--SEC END --><p><a id="var:OCAMLPPFLAGS"></a><a id="hevea_default516"></a><a id="hevea_var86"></a> Flags to pass to <code>CAMLP4</code>.
</p>
<!--TOC paragraph id="sec480" OCAMLCFLAGS-->
<h5 class="paragraph" id="sec480">OCAMLCFLAGS</h5><!--SEC END --><p><a id="var:OCAMLCFLAGS"></a><a id="hevea_default517"></a><a id="hevea_var87"></a> Flags to pass to the byte-code compiler (default <code>-g</code>).
</p>
<!--TOC paragraph id="sec481" OCAMLOPTFLAGS-->
<h5 class="paragraph" id="sec481">OCAMLOPTFLAGS</h5><!--SEC END --><p><a id="var:OCAMLOPTFLAGS"></a><a id="hevea_default518"></a><a id="hevea_var88"></a> Flags to pass to the native-code compiler (default empty).
</p>
<!--TOC paragraph id="sec482" OCAMLFLAGS-->
<h5 class="paragraph" id="sec482">OCAMLFLAGS</h5><!--SEC END --><p><a id="var:OCAMLFLAGS"></a><a id="hevea_default519"></a><a id="hevea_var89"></a> Flags to pass to either compiler (default <code>-warn-error A</code>).
</p>
<!--TOC paragraph id="sec483" OCAML_BYTE_LINK_FLAGS-->
<h5 class="paragraph" id="sec483">OCAML_BYTE_LINK_FLAGS</h5><!--SEC END --><p><a id="var:OCAML_BYTE_LINK_FLAGS"></a><a id="hevea_default520"></a><a id="hevea_var90"></a> Flags to pass to the byte-code linker (default empty).
</p>
<!--TOC paragraph id="sec484" OCAML_NATIVE_LINK_FLAGS-->
<h5 class="paragraph" id="sec484">OCAML_NATIVE_LINK_FLAGS</h5><!--SEC END --><p><a id="var:OCAML_NATIVE_LINK_FLAGS"></a><a id="hevea_default521"></a><a id="hevea_var91"></a> Flags to pass to the native-code linker (default empty).
</p>
<!--TOC paragraph id="sec485" OCAML_LINK_FLAGS-->
<h5 class="paragraph" id="sec485">OCAML_LINK_FLAGS</h5><!--SEC END --><p><a id="var:OCAML_LINK_FLAGS"></a><a id="hevea_default522"></a><a id="hevea_var92"></a> Flags to pass to either linker.
</p>
<!--TOC paragraph id="sec486" MENHIR_FLAGS-->
<h5 class="paragraph" id="sec486">MENHIR_FLAGS</h5><!--SEC END --><p><a id="var:MENHIR_FLAGS"></a><a id="hevea_default523"></a><a id="hevea_var93"></a> Additional flags to pass to <code>menhir</code>.
</p>
<!--TOC subsection id="sec487" Library variables-->
<h3 class="subsection" id="sec487">13.6.4&#XA0;&#XA0;Library variables</h3><!--SEC END --><p>The following variables are used during linking.</p>
<!--TOC paragraph id="sec488" OCAML_LIBS-->
<h5 class="paragraph" id="sec488">OCAML_LIBS</h5><!--SEC END --><p><a id="var:OCAML_LIBS"></a><a id="hevea_default524"></a><a id="hevea_var94"></a> Libraries to pass to the linker. These libraries become dependencies
of the link step.
</p>
<!--TOC paragraph id="sec489" OCAML_OTHER_LIBS-->
<h5 class="paragraph" id="sec489">OCAML_OTHER_LIBS</h5><!--SEC END --><p><a id="var:OCAML_OTHER_LIBS"></a><a id="hevea_default525"></a><a id="hevea_var95"></a> Additional libraries to pass to the linker. These libraries are
<em>not</em> included as dependencies to the link step. Typical use is for the OCaml
standard libraries like <code>unix</code> or <code>str</code>.
</p>
<!--TOC paragraph id="sec490" OCAML_CLIBS-->
<h5 class="paragraph" id="sec490">OCAML_CLIBS</h5><!--SEC END --><p><a id="var:OCAML_CLIBS"></a><a id="hevea_default526"></a><a id="hevea_var96"></a> C libraries to pass to the linker.
</p>
<!--TOC paragraph id="sec491" OCAML_LIB_FLAGS-->
<h5 class="paragraph" id="sec491">OCAML_LIB_FLAGS</h5><!--SEC END --><p><a id="var:OCAML_LIB_FLAGS"></a><a id="hevea_default527"></a><a id="hevea_var97"></a> Extra flags for the library linker.
</p>
<!--TOC paragraph id="sec492" ABORT_ON_DEPENDENCY_ERRORS-->
<h5 class="paragraph" id="sec492">ABORT_ON_DEPENDENCY_ERRORS</h5><!--SEC END --><p><a id="var:ABORT_ON_DEPENDENCY_ERRORS"></a><a id="hevea_default528"></a><a id="hevea_var98"></a>
OCaml linker requires the OCaml files to be
listed in dependency order. Normally, all the functions presented in this section will automatically sort
the list of OCaml modules passed in as the <code>&lt;files&gt;</code> argument. However, this variable is
set to <code>true</code>, the order of the files passed into these function will be left as is, but OMake will
abort with an error message if the order is illegal.</p>
<!--TOC subsection id="sec493" Generated OCaml Files-->
<h3 class="subsection" id="sec493">13.6.5&#XA0;&#XA0;Generated OCaml Files</h3><!--SEC END --><p>
<a id="section:ocaml-generated-files"></a>
As of OCaml version 3.09.2, the standard <code>ocamldep</code> scanner is &#X201C;broken&#X201D;. The main issue is
that it finds only those dependencies that already exist. If <code>foo.ml</code> contains a dependency
on <code>Bar</code>,
</p><pre class="verbatim">foo.ml:
   open Bar
</pre><p>then the default <code>ocamldep</code> will only find the dependency if a file <code>bar.ml</code> or
<code>bar.ml</code> exists in the include path. It will not find (or print) the dependency if, for
example, only <code>bar.mly</code> exists at the time <code>ocamldep</code> is run, even though <code>bar.ml</code>
and <code>bar.mli</code> can be generated from <code>bar.mly</code>.</p><p>OMake currently provides two methods for addressing this problem &#X2014; one that requires manually
specifying the generated files, and an experimental method for discovering such &#X201C;hidden&#X201D;
dependencies automatically. The
<a href="#var%3AOCAMLDEP_MODULES_ENABLED"><CODE>OCAMLDEP_MODULES_ENABLED</CODE> variable</a> controls which method is
going to be used. When this variable is false, the manual specifications are expected and when it
is true, the automated discovery will be attempted.</p>
<!--TOC subsubsection id="sec494" OCamlGeneratedFiles, LocalOCamlGeneratedFiles-->
<h4 class="subsubsection" id="sec494">13.6.5.1&#XA0;&#XA0;OCamlGeneratedFiles, LocalOCamlGeneratedFiles</h4><!--SEC END --><p><a id="fun:OCamlGeneratedFiles"></a><a id="function:OCamlGeneratedFiles"></a><a id="hevea_default529"></a><a id="hevea_fun283"></a><a id="fun:LocalOCamlGeneratedFiles"></a><a id="function:LocalOCamlGeneratedFiles"></a><a id="hevea_default530"></a><a id="hevea_fun284"></a>
</p><pre class="verbatim">OCamlGeneratedFiles(files)
LocalOCamlGeneratedFiles(files)
</pre><p>When the <a href="#var%3AOCAMLDEP_MODULES_ENABLED"><CODE>OCAMLDEP_MODULES_ENABLED</CODE> variable</a> variable is set
to <code>false</code>, the <code>OCamlGeneratedFiles</code> and <code>LocalOCamlGeneratedFiles</code> functions specify files
that need to be generated before any OCaml files are scanned for dependencies. For example,
if <code>parser.ml</code> and <code>lexer.ml</code> are both generated files, specify:
</p><pre class="verbatim">OCamlGeneratedFiles(parser.ml lexer.ml)
</pre><p>The <code>OCamlGeneratedFiles</code> function is <em>global</em> &#X2014; its arguments will be generated
before any OCaml files anywhere in the project are scanned for dependencies. The
<code>LocalOCamlGeneratedFiles</code> function follows the normal scoping rules of OMake.</p><p>These functions have no effect when the
<a href="#var%3AOCAMLDEP_MODULES_ENABLED"><CODE>OCAMLDEP_MODULES_ENABLED</CODE> variable</a> is true.</p>
<!--TOC subsubsection id="sec495" Automatic discovery of generated files during dependency analysis-->
<h4 class="subsubsection" id="sec495">13.6.5.2&#XA0;&#XA0;Automatic discovery of generated files during dependency analysis</h4><!--SEC END --><p>
Having to specify the generated files manualy when OMake could discover them automatically is
obviously suboptimal. To address this, we tell <code>ocamldep</code> to <em>only</em>
find the free module names in a file and then post-process the results internally.</p><p>This automated functionality is enabled when the
<a href="#var%3AOCAMLDEP_MODULES_ENABLED"><CODE>OCAMLDEP_MODULES_ENABLED</CODE> variable</a> is set to <code>true</code>.
By default, <a href="#var%3AOCAMLDEP_MODULES_ENABLED"><CODE>OCAMLDEP_MODULES_ENABLED</CODE> variable</a> will be set to
<code>$(OCAMLDEP_MODULES_AVAILABLE)</code>.</p><p>Note that the <code>ocamldep</code> functionality this relies upon is only included in
the OCaml version 3.10 and higher. It&#X2019;s availability will be discovered automatically
and the <a href="#var%3AOCAMLDEP_MODULES_AVAILABLE"><CODE>OCAMLDEP_MODULES_AVAILABLE</CODE> variable</a>
will be set accordingly.</p>
<!--TOC subsection id="sec496" Using the Menhir parser generator-->
<h3 class="subsection" id="sec496">13.6.6&#XA0;&#XA0;Using the Menhir parser generator</h3><!--SEC END --><p>Menhir is a parser generator that is mostly compatible with
<code>ocamlyacc</code>, but with many improvements. A few of these
are listed here (excerpted from the Menhir home page
<a href="http://cristal.inria.fr/~fpottier/menhir/"><span class="c001">http://cristal.inria.fr/~fpottier/menhir/</span></a>).</p><ul class="itemize"><li class="li-itemize">
Menhir&#X2019;s explanations are believed to be understandable by mere humans.
</li><li class="li-itemize">Menhir allows grammar specifications to be split over multiple files.
It also allows several grammars to share a single set of tokens.
</li><li class="li-itemize">Menhir is able to produce parsers that are parameterized by Objective Caml modules.
</li><li class="li-itemize">Added by jyh With the <code>--infer</code> option, Menhir can typecheck the semantic actions
in your grammar at <em>generation</em> time.
</li></ul><p>What do you need to do to use Menhir instead of <code>ocamlyacc</code>?
</p><ol class="enumerate" type=1><li class="li-enumerate">
Place the following definition before the relevant section of your project
(or at the top of your project <code>OMakefile</code> if you want to use Menhir everywhere).<pre class="verbatim">   MENHIR_ENABLED = true
</pre></li><li class="li-enumerate">Optionally, add any desired Menhir options to the <code>MENHIR_FLAGS</code> variable.<pre class="verbatim">   MENHIR_FLAGS += --infer
</pre></li></ol><p>With this setup, any file with a <code>.mly</code> suffix will be compiled with Menhir.</p><p>If your grammar is split across several files, you need to specify it explicitly,
using the <code>MenhirMulti</code> function.</p><pre class="verbatim">    MenhirMulti(target, sources)
        target : filename, without suffix
        sources : the files that define the grammar, without suffixes
</pre><p>For example, if you want to generate the parser files <code>parse.ml</code> and <code>parse.mli</code>,
from the grammar specified in files <code>a.mly</code> and <code>b.mly</code>, you would use
the following.</p><pre class="verbatim">    MenhirMulti(parse, a b)
</pre>
<!--TOC subsubsection id="sec497" OCamlLibrary-->
<h4 class="subsubsection" id="sec497">13.6.6.1&#XA0;&#XA0;OCamlLibrary</h4><!--SEC END --><p><a id="fun:OCamlLibrary"></a><a id="function:OCamlLibrary"></a><a id="hevea_default531"></a><a id="hevea_fun285"></a></p><p>The <code>OCamlLibrary</code> function builds an OCaml library.</p><p><code>OCamlLibrary(&lt;libname&gt;, &lt;files&gt;)</code></p><p>The <code>&lt;libname&gt;</code> and <code>&lt;files&gt;</code> are listed <em>without</em> suffixes.</p><p>This function returns the list of all the targets that it defines the rules
for (including the <code>$(name)$(EXT_LIB)</code> file when <code>NATIVE_ENABLED</code> is set).</p><p>The following code builds the <code>libfoo.cmxa</code> library from the files <code>foo.cmx</code>
and <code>bar.cmx</code> (if <code>NATIVE_ENABLED</code> is set), and <code>libfoo.cma</code> from
<code>foo.cmo</code> and <code>bar.cmo</code> (if <code>BYTE_ENABLED</code> is set).</p><pre class="verbatim">OCamlLibrary(libfoo, foo bar)
</pre>
<!--TOC subsubsection id="sec498" OCamlPackage-->
<h4 class="subsubsection" id="sec498">13.6.6.2&#XA0;&#XA0;OCamlPackage</h4><!--SEC END --><p><a id="fun:OCamlPackage"></a><a id="function:OCamlPackage"></a><a id="hevea_default532"></a><a id="hevea_fun286"></a></p><p>The <code>OCamlPackage</code> function builds an OCaml package.</p><p><code>OCamlPackage(&lt;name&gt;, &lt;files&gt;)</code></p><p>The <code>&lt;name&gt;</code> and <code>&lt;files&gt;</code> are listed <em>without</em> suffixes.
The <code>&lt;files&gt;</code> must have been compiled with the <code>-for-pack &lt;ident&gt;</code>
flag to the OCaml compiler.</p><p>This function returns the list of all the targets that it defines the rules
for (including the <code>$(name)$(EXT_LIB)</code> file when <code>NATIVE_ENABLED</code> is set).</p><p>The following code builds the <code>libfoo.cmx</code> package from the files <code>package.cmx</code>
and <code>bar.cmx</code> (if <code>NATIVE_ENABLED</code> is set), and <code>package.cmo</code> from
<code>foo.cmo</code> and <code>bar.cmo</code> (if <code>BYTE_ENABLED</code> is set).</p><pre class="verbatim">OCamlPackage(package, foo bar)
</pre>
<!--TOC subsubsection id="sec499" OCamlLibraryCopy-->
<h4 class="subsubsection" id="sec499">13.6.6.3&#XA0;&#XA0;OCamlLibraryCopy</h4><!--SEC END --><p><a id="fun:OCamlLibraryCopy"></a><a id="function:OCamlLibraryCopy"></a><a id="hevea_default533"></a><a id="hevea_fun287"></a></p><p>The <code>OCamlLibraryCopy</code> function copies a library to an install location.</p><p><code>OCamlLibraryCopy(&lt;tag&gt;, &lt;libdir&gt;, &lt;libname&gt;, &lt;interface-files&gt;)</code></p><p>The <code>&lt;interface-files&gt;</code> specify additional interface files
to be copied if the <code>INSTALL_INTERFACES</code> variable is true.
</p>
<!--TOC subsubsection id="sec500" OCamlLibraryInstall-->
<h4 class="subsubsection" id="sec500">13.6.6.4&#XA0;&#XA0;OCamlLibraryInstall</h4><!--SEC END --><p><a id="fun:OCamlLibraryInstall"></a><a id="function:OCamlLibraryInstall"></a><a id="hevea_default534"></a><a id="hevea_fun288"></a></p><p>The <code>OCamlLibraryInstall</code> function builds a library
and copies it to an install location in one step.</p><p><code>OCamlLibraryInstall(&lt;tag&gt;, &lt;libdir&gt;, &lt;libname&gt;, &lt;files&gt;)</code>
</p>
<!--TOC subsubsection id="sec501" OCamlProgram-->
<h4 class="subsubsection" id="sec501">13.6.6.5&#XA0;&#XA0;OCamlProgram</h4><!--SEC END --><p><a id="fun:OCamlProgram"></a><a id="function:OCamlProgram"></a><a id="hevea_default535"></a><a id="hevea_fun289"></a></p><p>The <code>OCamlProgram</code> function builds an OCaml program. It returns the array with all
the targets for which it has defined the rules (<code>$(name)$(EXE)</code> and <code>$(name).run</code>
and/or <code>$(name).opt</code>, depending on the <code>NATIVE_ENABLED</code> and <code>BYTE_ENABLED</code>
variables).</p><p><code>OCamlProgram(&lt;name&gt;, &lt;files&gt;)</code></p><p>Additional variables used:
</p><dl class="description"><dt class="dt-description">
<a href="#var%3AOCAML_LIBS"><span class="c004"><CODE>OCAML_LIBS</CODE></span></a></dt><dd class="dd-description"> Additional libraries passed to the linker, without suffix. These files
become dependencies of the target program.
</dd><dt class="dt-description"><a href="#var%3AOCAML_OTHER_LIBS"><span class="c004"><CODE>OCAML_OTHER_LIBS</CODE></span></a></dt><dd class="dd-description"> Additional libraries passed to the linker, without suffix. These
files do <em>not</em> become dependencies of the target program.
</dd><dt class="dt-description"><a href="#var%3AOCAML_CLIBS"><span class="c004"><CODE>OCAML_CLIBS</CODE></span></a></dt><dd class="dd-description"> C libraries to pass to the linker.
</dd><dt class="dt-description"><a href="#var%3AOCAML_BYTE_LINK_FLAGS"><span class="c004"><CODE>OCAML_BYTE_LINK_FLAGS</CODE></span></a></dt><dd class="dd-description"> Flags to pass to the bytecode linker.
</dd><dt class="dt-description"><a href="#var%3AOCAML_NATIVE_LINK_FLAGS"><span class="c004"><CODE>OCAML_NATIVE_LINK_FLAGS</CODE></span></a></dt><dd class="dd-description"> Flags to pass to the native code linker.
</dd><dt class="dt-description"><a href="#var%3AOCAML_LINK_FLAGS"><span class="c004"><CODE>OCAML_LINK_FLAGS</CODE></span></a></dt><dd class="dd-description"> Flags to pass to both linkers.
</dd></dl>
<!--TOC subsubsection id="sec502" OCamlProgramCopy-->
<h4 class="subsubsection" id="sec502">13.6.6.6&#XA0;&#XA0;OCamlProgramCopy</h4><!--SEC END --><p><a id="fun:OCamlProgramCopy"></a><a id="function:OCamlProgramCopy"></a><a id="hevea_default536"></a><a id="hevea_fun290"></a></p><p>The <code>OCamlProgramCopy</code> function copies an OCaml program to an install location.</p><p><code>OCamlProgramCopy(&lt;tag&gt;, &lt;bindir&gt;, &lt;name&gt;)</code></p><p>Additional variables used:
</p><dl class="description"><dt class="dt-description">
<span class="c004">NATIVE_ENABLED</span></dt><dd class="dd-description"> If the <a href="#var%3ANATIVE_ENABLED"><CODE>NATIVE_ENABLED</CODE> variable</a> is set, the native-code executable
is copied; otherwise the byte-code executable is copied.
</dd></dl>
<!--TOC subsubsection id="sec503" OCamlProgramInstall-->
<h4 class="subsubsection" id="sec503">13.6.6.7&#XA0;&#XA0;OCamlProgramInstall</h4><!--SEC END --><p><a id="fun:OCamlProgramInstall"></a><a id="function:OCamlProgramInstall"></a><a id="hevea_default537"></a><a id="hevea_fun291"></a></p><p>The <code>OCamlProgramInstall</code> function builds a programs and copies it to
an install location in one step.</p><p><code>OCamlProgramInstall(&lt;tag&gt;, &lt;bindir&gt;, &lt;name&gt;, &lt;files&gt;)</code>
</p>
<!--TOC section id="sec504" Building L<sup>A</sup>T<sub>E</sub>X files-->
<h2 class="section" id="sec504">13.7&#XA0;&#XA0;Building L<sup>A</sup>T<sub>E</sub>X files</h2><!--SEC END --><p>OMake provides support for building L<sup>A</sup>T<sub>E</sub>X documents, including support for automatically
running BiBTex and for producing PostScript and PDF files. In order to use the functions
defined in this section, you need to make sure the line
</p><pre class="verbatim">open build/LaTeX
</pre><p>is present in your <code>OMakeroot</code> file.</p>
<!--TOC subsection id="sec505" Configuration variables-->
<h3 class="subsection" id="sec505">13.7.1&#XA0;&#XA0;Configuration variables</h3><!--SEC END --><p>The following variables can be modified in your project.
</p>
<!--TOC paragraph id="sec506" LATEX-->
<h5 class="paragraph" id="sec506">LATEX</h5><!--SEC END --><p><a id="var:LATEX"></a><a id="hevea_default538"></a><a id="hevea_var99"></a> The L<sup>A</sup>T<sub>E</sub>X command (default <code>latex</code>).
</p>
<!--TOC paragraph id="sec507" TETEX2_ENABLED-->
<h5 class="paragraph" id="sec507">TETEX2_ENABLED</h5><!--SEC END --><p><a id="var:TETEX2_ENABLED"></a><a id="hevea_default539"></a><a id="hevea_var100"></a> Flag indicating whether to use advanced L<sup>A</sup>T<sub>E</sub>X options
present in TeTeX v.2 (default value is determined the first time omake reads <code>LaTeX.src</code>
and depends on the version of L<sup>A</sup>T<sub>E</sub>X you have installed).
</p>
<!--TOC paragraph id="sec508" LATEXFLAGS-->
<h5 class="paragraph" id="sec508">LATEXFLAGS</h5><!--SEC END --><p><a id="var:LATEXFLAGS"></a><a id="hevea_default540"></a><a id="hevea_var101"></a> The L<sup>A</sup>T<sub>E</sub>X flags (defaults depend on the <code>TETEX2_ENABLED</code> variable)
</p>
<!--TOC paragraph id="sec509" BIBTEX-->
<h5 class="paragraph" id="sec509">BIBTEX</h5><!--SEC END --><p><a id="var:BIBTEX"></a><a id="hevea_default541"></a><a id="hevea_var102"></a> The BibTeX command (default <code>bibtex</code>).
</p>
<!--TOC paragraph id="sec510" MAKEINDEX-->
<h5 class="paragraph" id="sec510">MAKEINDEX</h5><!--SEC END --><p><a id="var:MAKEINDEX"></a><a id="hevea_default542"></a><a id="hevea_var103"></a> The command to build an index (default <code>makeindex</code>).
</p>
<!--TOC paragraph id="sec511" DVIPS-->
<h5 class="paragraph" id="sec511">DVIPS</h5><!--SEC END --><p><a id="var:DVIPS"></a><a id="hevea_default543"></a><a id="hevea_var104"></a> The <code>.dvi</code> to PostScript converter (default <code>dvips</code>).
</p>
<!--TOC paragraph id="sec512" DVIPSFLAGS-->
<h5 class="paragraph" id="sec512">DVIPSFLAGS</h5><!--SEC END --><p><a id="var:DVIPSFLAGS"></a><a id="hevea_default544"></a><a id="hevea_var105"></a> Flags to pass to <code>dvips</code> (default <code>-t letter</code>).
</p>
<!--TOC paragraph id="sec513" DVIPDFM-->
<h5 class="paragraph" id="sec513">DVIPDFM</h5><!--SEC END --><p><a id="var:DVIPDFM"></a><a id="hevea_default545"></a><a id="hevea_var106"></a> The <code>.dvi</code> to <code>.pdf</code> converter (default <code>dvipdfm</code>).
</p>
<!--TOC paragraph id="sec514" DVIPDFMFLAGS-->
<h5 class="paragraph" id="sec514">DVIPDFMFLAGS</h5><!--SEC END --><p><a id="var:DVIPDFMFLAGS"></a><a id="hevea_default546"></a><a id="hevea_var107"></a> Flags to pass to <code>dvipdfm</code> (default <code>-p letter</code>).
</p>
<!--TOC paragraph id="sec515" PDFLATEX-->
<h5 class="paragraph" id="sec515">PDFLATEX</h5><!--SEC END --><p><a id="var:PDFLATEX"></a><a id="hevea_default547"></a><a id="hevea_var108"></a> The <code>.latex</code> to <code>.pdf</code> converter (default <code>pdflatex</code>).
</p>
<!--TOC paragraph id="sec516" PDFLATEXFLAGS-->
<h5 class="paragraph" id="sec516">PDFLATEXFLAGS</h5><!--SEC END --><p><a id="var:PDFLATEXFLAGS"></a><a id="hevea_default548"></a><a id="hevea_var109"></a> Flags to pass to pdflatex (default is <code>$`(LATEXFLAGS)</code>).
</p>
<!--TOC paragraph id="sec517" USEPDFLATEX-->
<h5 class="paragraph" id="sec517">USEPDFLATEX</h5><!--SEC END --><p><a id="var:USEPDFLATEX"></a><a id="hevea_default549"></a><a id="hevea_var110"></a> Flag indicating whether to use pdflatex instead of dvipdfm
to generate the <code>.pdf</code> document (default <code>false</code>).
</p>
<!--TOC subsection id="sec518" Building L<sup>A</sup>T<sub>E</sub>X documents-->
<h3 class="subsection" id="sec518">13.7.2&#XA0;&#XA0;Building L<sup>A</sup>T<sub>E</sub>X documents</h3><!--SEC END -->
<!--TOC subsubsection id="sec519" LaTeXDocument-->
<h4 class="subsubsection" id="sec519">13.7.2.1&#XA0;&#XA0;LaTeXDocument</h4><!--SEC END --><p><a id="fun:LaTeXDocument"></a><a id="function:LaTeXDocument"></a><a id="hevea_default550"></a><a id="hevea_fun292"></a></p><p>The <code>LaTeXDocument</code> produces a L<sup>A</sup>T<sub>E</sub>X document.</p><p><code>LaTeXDocument(&lt;name&gt;, &lt;texfiles&gt;)</code></p><p>The document <code>&lt;name&gt;</code> and <code>&lt;texfiles&gt;</code> are listed without suffixes. This function
returns the filenames for the generated <code>.ps</code> (unless <a href="#var%3AUSEPDFLATEX"><CODE>USEPDFLATEX</CODE> variable</a> is set) and <code>.pdf</code> files.</p><p>Additional variables used:
</p>
<!--TOC paragraph id="sec520" TEXINPUTS-->
<h5 class="paragraph" id="sec520">TEXINPUTS</h5><!--SEC END --><p><a id="var:TEXINPUTS"></a><a id="hevea_default551"></a><a id="hevea_var111"></a>
The L<sup>A</sup>T<sub>E</sub>X search path (an array of directories, default is
taken from the <code>TEXINPUTS</code> environment variable).
</p>
<!--TOC paragraph id="sec521" TEXDEPS-->
<h5 class="paragraph" id="sec521">TEXDEPS</h5><!--SEC END --><p><a id="var:TEXDEPS"></a><a id="hevea_default552"></a><a id="hevea_var112"></a> Additional files this document depends on.
</p>
<!--TOC paragraph id="sec522" TEXVARS-->
<h5 class="paragraph" id="sec522">TEXVARS</h5><!--SEC END --><p><a id="var:TEXVARS"></a><a id="hevea_default553"></a><a id="hevea_var113"></a> An array of names of the environment variables
that are to be updated based on the value of OMake&#X2019;s <code>TEXINPUTS</code> variable.
Defaults to <code>TEXINPUTS</code> <code>BIBINPUTS</code> <code>BSTINPUTS</code>.
</p>
<!--TOC subsubsection id="sec523" TeXGeneratedFiles, LocalTeXGeneratedFiles-->
<h4 class="subsubsection" id="sec523">13.7.2.2&#XA0;&#XA0;TeXGeneratedFiles, LocalTeXGeneratedFiles</h4><!--SEC END --><p><a id="fun:TeXGeneratedFiles"></a><a id="function:TeXGeneratedFiles"></a><a id="hevea_default554"></a><a id="hevea_fun293"></a><a id="fun:LocalTeXGeneratedFiles"></a><a id="function:LocalTeXGeneratedFiles"></a><a id="hevea_default555"></a><a id="hevea_fun294"></a>
</p><pre class="verbatim">TeXGeneratedFiles(files)
LocalTeXGeneratedFiles(files)
</pre><p>The <code>TeXGeneratedFiles</code> and <code>LocalTeXGeneratedFiles</code> functions specify files
that need to be generated before any L<sup>A</sup>T<sub>E</sub>Xfiles are scanned for dependencies. For example,
if <code>config.tex</code> and <code>inputs.tex</code> are both generated files, specify:
</p><pre class="verbatim">    TeXGeneratedFiles(config.tex inputs.tex)
</pre><p>The <code>TeXGeneratedFiles</code> function is <em>global</em> &#X2014; its arguments will be generated
before any TeX files anywhere in the project are scanned for dependencies. The
<code>LocalTeXGeneratedFiles</code> function follows the normal scoping rules of OMake.</p>
<!--TOC subsubsection id="sec524" LaTeXDocumentCopy-->
<h4 class="subsubsection" id="sec524">13.7.2.3&#XA0;&#XA0;LaTeXDocumentCopy</h4><!--SEC END --><p><a id="fun:LaTeXDocumentCopy"></a><a id="function:LaTeXDocumentCopy"></a><a id="hevea_default556"></a><a id="hevea_fun295"></a></p><p>The <code>LaTeXDocumentCopy</code> copies the document to an install location.</p><p><code>LaTeXDocumentCopy(&lt;tag&gt;, &lt;libdir&gt;, &lt;installname&gt;, &lt;docname&gt;)</code></p><p>This function copies just the <code>.pdf</code> and <code>.ps</code> files.
</p>
<!--TOC subsubsection id="sec525" LaTeXDocumentInstall-->
<h4 class="subsubsection" id="sec525">13.7.2.4&#XA0;&#XA0;LaTeXDocumentInstall</h4><!--SEC END --><p><a id="fun:LaTeXDocumentInstall"></a><a id="function:LaTeXDocumentInstall"></a><a id="hevea_default557"></a><a id="hevea_fun296"></a></p><p>The <code>LaTeXDocumentInstall</code> builds a document and copies it to an
install location in one step.</p><p><code>LaTeXDocumentInstall(&lt;tag&gt;, &lt;libdir&gt;, &lt;installname&gt;, &lt;docname&gt;, &lt;files&gt;)</code>

</p>
<!--TOC chapter id="sec526" Autoconfiguration functions and variables-->
<h1 class="chapter" id="sec526">Chapter&#XA0;14&#XA0;&#XA0;Autoconfiguration functions and variables</h1><!--SEC END --><p>
<a id="chapter:autoconf"></a>
</p><!--NAME omake-autoconf.html-->
<p>
OMake standard library provides a number of functions and variables intended to help one write
build specifications that need to be capable of autoconfiguring itself to adjust to different
build environments.</p>
<!--TOC section id="sec527" General-purpose autoconfiguration functions-->
<h2 class="section" id="sec527">14.1&#XA0;&#XA0;General-purpose autoconfiguration functions</h2><!--SEC END --><p>
The following general-purpose functions can be used to discover the properties of your build
environment in a fashion similar to the one used by GNU autoconf tool you may be familiar with.
It is recommended that these function be used from an appropriate <code>static.</code> block (see
Section&#XA0;<a href="#section%3Astatic.">4.15</a> for more information).</p><p>In order to use the following general-purpose functions, you need to have the line
</p><pre class="verbatim">open configure/Configure
</pre><p>included in your <code>OMakefile</code> or <code>OMakeroot</code>.
</p>
<!--TOC subsection id="sec528" ConfMsgChecking, ConfMsgResult-->
<h3 class="subsection" id="sec528">14.1.1&#XA0;&#XA0;ConfMsgChecking, ConfMsgResult</h3><!--SEC END --><p><a id="fun:ConfMsgChecking"></a><a id="function:ConfMsgChecking"></a><a id="hevea_default558"></a><a id="hevea_fun297"></a><a id="fun:ConfMsgResult"></a><a id="function:ConfMsgResult"></a><a id="hevea_default559"></a><a id="hevea_fun298"></a>
</p><pre class="verbatim">ConfMsgChecking(&lt;msg&gt;)
...
ConfMsgResult(&lt;msg&gt;)
</pre><p>The <code>ConfMsgChecking</code> function output message of the form <code>--- Checking &lt;msg&gt;... </code>
<em>without</em> any trailing newline. After the test advertized by <code>ConfMsgChecking</code> is
performed, the <code>ConfMsgResult</code> function should be used to output the result.</p><p>In certain cases users may want to redefine these function &#X2014; for example, to use a different
output formatting and/or to copy the messages to a log file.</p><p>Example:
</p><pre class="verbatim">static. =
   ConfMsgChecking(which foo to use)
   foo = ...
   ConfMsgResult($(foo))
</pre>
<!--TOC subsection id="sec529" ConfMsgWarn, ConfMsgError-->
<h3 class="subsection" id="sec529">14.1.2&#XA0;&#XA0;ConfMsgWarn, ConfMsgError</h3><!--SEC END --><p><a id="fun:ConfMsgWarn"></a><a id="function:ConfMsgWarn"></a><a id="hevea_default560"></a><a id="hevea_fun299"></a><a id="fun:ConfMsgError"></a><a id="function:ConfMsgError"></a><a id="hevea_default561"></a><a id="hevea_fun300"></a>
</p><pre class="verbatim">ConfMsgWarn(&lt;msg&gt;)
ConfMsgError(&lt;msg&gt;)
</pre><p>Print a warning or an error message respectively. <code>ConfMsgError</code> would then abort OMake.
</p>
<!--TOC subsection id="sec530" ConfMsgYesNo, ConfMsgFound-->
<h3 class="subsection" id="sec530">14.1.3&#XA0;&#XA0;ConfMsgYesNo, ConfMsgFound</h3><!--SEC END --><p><a id="fun:ConfMsgYesNo"></a><a id="function:ConfMsgYesNo"></a><a id="hevea_default562"></a><a id="hevea_fun301"></a><a id="fun:ConfMsgFound"></a><a id="function:ConfMsgFound"></a><a id="hevea_default563"></a><a id="hevea_fun302"></a>
</p><pre class="verbatim">flag = $(ConfMsgYesNo &lt;bool expr&gt;
flag = $(ConfMsgFound &lt;bool expr&gt;
</pre><p>The <code>ConfMsgFound</code> function expects to receive a boolean flag describing whether a test
previously announced using the <a href="#fun%3AConfMsgChecking"><CODE>ConfMsgChecking</CODE> function</a> found what it
was looking for. <code>ConfMsgFound</code> will output the appropriate result (&#X201C;found&#X201D; or &#X201C;NOT found&#X201D;)
using the <a href="#fun%3AConfMsgResult"><CODE>ConfMsgResult</CODE> function</a> and return its argument back.</p><p>The <code>ConfMsgYesNo</code> function is similar, outputting a simple (&#X201C;yes&#X201D; or &#X201C;NO&#X201D;).
</p>
<!--TOC subsection id="sec531" TryCompileC, TryLinkC, TryRunC-->
<h3 class="subsection" id="sec531">14.1.4&#XA0;&#XA0;TryCompileC, TryLinkC, TryRunC</h3><!--SEC END --><p><a id="fun:TryCompileC"></a><a id="function:TryCompileC"></a><a id="hevea_default564"></a><a id="hevea_fun303"></a><a id="fun:TryLinkC"></a><a id="function:TryLinkC"></a><a id="hevea_default565"></a><a id="hevea_fun304"></a><a id="fun:TryRunC"></a><a id="function:TryRunC"></a><a id="hevea_default566"></a><a id="hevea_fun305"></a>
</p><pre class="verbatim">success = $(TryCompileC &lt;prog_text&gt;)
success = $(TryLinkC &lt;prog_text&gt;)
success = $(TryRunC &lt;prog_text&gt;)
</pre><p>Given the <em>text</em> of a C program, the <code>TryCompileC</code>, <code>TryLinkC</code>, and <code>TryRunC</code>
functions would try to compile / compile and link / compile, link, and run, the given program and return a boolean flag
indicating whether the attempt was successful.</p><p><code>TryCompileC</code> will use the <a href="#var%3ACC"><CODE>CC</CODE></a>, <a href="#var%3ACFLAGS"><CODE>CFLAGS</CODE></a> and <a href="#var%3AINCLUDES"><CODE>INCLUDES</CODE></a> variables 
to run the C compiler. <code>TryLinkC</code> and <code>TryRunC</code> will also use the <a href="#var%3ALDFLAGS"><CODE>LDFLAGS</CODE> variable</a>
to run the C compiler and linker. However, the flags like <code>/WX</code>, <code>-Werror</code> and <code>-warn-error</code>
will be not be passed to the compiler, even if they occur in <code>CFLAGS</code>.</p><p>These functions are silent and should normally be used with an appropriate
<a href="#fun%3AConfMsgChecking"><CODE>ConfMsgChecking</CODE></a> &#X2026; <a href="#fun%3AConfMsgResult"><CODE>ConfMsgResult</CODE></a>.
</p>
<!--TOC subsection id="sec532" RunCProg-->
<h3 class="subsection" id="sec532">14.1.5&#XA0;&#XA0;RunCProg</h3><!--SEC END --><p><a id="fun:RunCProg"></a><a id="function:RunCProg"></a><a id="hevea_default567"></a><a id="hevea_fun306"></a>
</p><pre class="verbatim">output = $(RunCProg &lt;prog&gt;)
</pre><p><code>RunCProg</code> is similar to the <a href="#fun%3ARunCProg"><CODE>RunCProg</CODE> function</a>, except that it
returns the output of the function (will return <code>false</code> if the program fails to compile
or run).
</p>
<!--TOC subsection id="sec533" CheckCHeader, VerboseCheckCHeader-->
<h3 class="subsection" id="sec533">14.1.6&#XA0;&#XA0;CheckCHeader, VerboseCheckCHeader</h3><!--SEC END --><p><a id="fun:CheckCHeader"></a><a id="function:CheckCHeader"></a><a id="hevea_default568"></a><a id="hevea_fun307"></a><a id="fun:VerboseCheckCHeader"></a><a id="function:VerboseCheckCHeader"></a><a id="hevea_default569"></a><a id="hevea_fun308"></a>
</p><pre class="verbatim">success = $(CheckCHeader &lt;files&gt;)
success = $(VerboseCheckCHeader &lt;files&gt;)
</pre><p>Use the <a href="#fun%3ATryCompileC"><CODE>TryCompileC</CODE> function</a> to check whether your C compiler can locate
and process the specified headers files.
Will incude <code>&lt;stdio.h&gt;</code> before including the header files.</p><p>Both functions return a boolean value. The <code>CheckCHeader</code> function is silent; the
<code>VerboseCheckCHeader</code> function will use the <a href="#fun%3AConfMsgChecking"><CODE>ConfMsgChecking</CODE></a> and
<a href="#fun%3AConfMsgResult"><CODE>ConfMsgResult</CODE></a> functions to describe the test and the outcome.</p><p>Example:
</p><pre class="verbatim">static. =
   NCURSES_H_AVAILABLE = $(VerboseCheckCHeader ncurses.h)
</pre>
<!--TOC subsection id="sec534" CheckCLib, VerboseCheckCLib-->
<h3 class="subsection" id="sec534">14.1.7&#XA0;&#XA0;CheckCLib, VerboseCheckCLib</h3><!--SEC END --><p><a id="fun:CheckCLib"></a><a id="function:CheckCLib"></a><a id="hevea_default570"></a><a id="hevea_fun309"></a><a id="fun:VerboseCheckCLib"></a><a id="function:VerboseCheckCLib"></a><a id="hevea_default571"></a><a id="hevea_fun310"></a>
</p><pre class="verbatim">success = $(CheckCLib &lt;libs&gt;, &lt;functions&gt;)
success = $(VerboseCheckCLib &lt;libs&gt;, &lt;functions&gt;)
</pre><p>Use the <a href="#fun%3ATryLinkC"><CODE>TryLinkC</CODE> function</a> to check whether your C compiler and linker can
find the named functions when linking with the named libraries. Will pass the <code>&lt;libs&gt;</code> to
the compiler using the <code>-l</code> flag.</p><p>Both functions return a boolean value. The <code>CheckCLib</code> function is silent; the
<code>VerboseCheckCHeader</code> function will use the <a href="#fun%3AConfMsgChecking"><CODE>ConfMsgChecking</CODE></a> and
<a href="#fun%3AConfMsgResult"><CODE>ConfMsgResult</CODE></a> functions to describe the test and the outcome.</p><p>Example:
</p><pre class="verbatim">static. =
    NCURSES_LIB_AVAILABLE = $(VerboseCheckCLib ncurses, initscr setupterm tigetstr)
</pre>
<!--TOC subsection id="sec535" CheckProg-->
<h3 class="subsection" id="sec535">14.1.8&#XA0;&#XA0;CheckProg</h3><!--SEC END --><p><a id="fun:CheckProg"></a><a id="function:CheckProg"></a><a id="hevea_default572"></a><a id="hevea_fun311"></a>
<code>success = $(CheckProg &lt;prog&gt;)</code></p><p>Checks whether the program <code>&lt;prog&gt;</code> exists in your path. Will use the
<a href="#fun%3AConfMsgChecking"><CODE>ConfMsgChecking</CODE></a> and
<a href="#fun%3AConfMsgResult"><CODE>ConfMsgResult</CODE></a> functions to describe the test and the outcome.</p>
<!--TOC section id="sec536" Translating <CODE>autoconf</CODE> scripts-->
<h2 class="section" id="sec536">14.2&#XA0;&#XA0;Translating <CODE>autoconf</CODE> scripts</h2><!--SEC END --><p>
Some of the functions described above are very similar to the ones present in <code>autoconf</code>.
Below is a brief translation table for such functions.
</p><dl class="description"><dt class="dt-description">
</dt><dd class="dd-description"><CODE>AC_MSG_CHECKING</CODE><a id="hevea_default573"></a> is very similar to <a href="#fun%3AConfMsgChecking"><CODE>ConfMsgChecking</CODE> function</a>.
</dd><dt class="dt-description"></dt><dd class="dd-description"><CODE>AC_MSG_RESULT</CODE><a id="hevea_default574"></a> is very similar to <a href="#fun%3AConfMsgResult"><CODE>ConfMsgResult</CODE> function</a>.
</dd><dt class="dt-description"></dt><dd class="dd-description"><CODE>AC_MSG_WARN</CODE><a id="hevea_default575"></a> is very similar to <a href="#fun%3AConfMsgWarn"><CODE>ConfMsgWarn</CODE> function</a>.
</dd><dt class="dt-description"></dt><dd class="dd-description"><CODE>AC_MSG_ERROR</CODE><a id="hevea_default576"></a> is very similar to <a href="#fun%3AConfMsgError"><CODE>ConfMsgError</CODE> function</a>.
</dd><dt class="dt-description"></dt><dd class="dd-description"><CODE>AC_TRY_COMPILE</CODE><a id="hevea_default577"></a> is somewhat similar to <a href="#fun%3ATryCompileC"><CODE>TryCompileC</CODE> function</a>,
except the <a href="#fun%3ATryCompileC"><CODE>TryCompileC</CODE> function</a> returns a boolean value and only works for <code>C</code>. Similarly,
</dd><dt class="dt-description"></dt><dd class="dd-description"><CODE>AC_TRY_LINK</CODE><a id="hevea_default578"></a> is approximated by <a href="#fun%3ATryLinkC"><CODE>TryLinkC</CODE> function</a>, and
</dd><dt class="dt-description"></dt><dd class="dd-description"><CODE>AC_TRY_RUN</CODE><a id="hevea_default579"></a> is approximated by <a href="#fun%3ATryRunC"><CODE>TryRunC</CODE> function</a>.
</dd></dl>
<!--TOC section id="sec537" Predefined configuration tests-->
<h2 class="section" id="sec537">14.3&#XA0;&#XA0;Predefined configuration tests</h2><!--SEC END --><p>
A number of configuration tests are already included in the standard library.
In order to use them in your project, simply <code>open</code> (see Section&#XA0;<a href="#section%3Ainclude">4.8</a>) the
corresponding build file in your <code>OMakefile</code> and the tests will run the first time OMake
is executed. Note that it is not a problem to <code>open</code> these files from more than one place in
your project &#X2014; if you do that, the test will still run only once.
</p>
<!--TOC subsection id="sec538" NCurses library configuration-->
<h3 class="subsection" id="sec538">14.3.1&#XA0;&#XA0;NCurses library configuration</h3><!--SEC END --><p>
Add <code>open configure/ncurses</code> line to your <code>OMakefile</code> to get access to the following
autoconfiguration variables.
</p>
<!--TOC paragraph id="sec539" NCURSES_AVAILABLE-->
<h5 class="paragraph" id="sec539">NCURSES_AVAILABLE</h5><!--SEC END --><p><a id="var:NCURSES_AVAILABLE"></a><a id="hevea_default580"></a><a id="hevea_var114"></a> A boolean flag that would be set when both
the <code>curses.h</code> header, the <code>term.h</code> header, and the <code>ncurses</code> library very found.</p>
<!--TOC paragraph id="sec540" NCURSES_TERMH_IN_NCURSES-->
<h5 class="paragraph" id="sec540">NCURSES_TERMH_IN_NCURSES</h5><!--SEC END --><p><a id="var:NCURSES_TERMH_IN_NCURSES"></a><a id="hevea_default581"></a><a id="hevea_var115"></a> A boolean flag that would be set
when <code>term.h</code> has to be included as <code>&lt;ncurses/term.h&gt;</code> instead of <code>&lt;term.h&gt;</code>.</p>
<!--TOC paragraph id="sec541" NCURSES_CFLAGS-->
<h5 class="paragraph" id="sec541">NCURSES_CFLAGS</h5><!--SEC END --><p><a id="var:NCURSES_CFLAGS"></a><a id="hevea_default582"></a><a id="hevea_var116"></a> The <code>CFLAGS</code> to use when compiling ncurses code.
Will include <code>-DNCURSES</code> and <code>-DTERMH_IN_NCURSES</code>, respectively
when <code>NCURSES_AVAILABLE</code> and <code>NCURSES_TERMH_IN_NCURSES</code> are true.</p>
<!--TOC paragraph id="sec542" NCURSES_CLIBS-->
<h5 class="paragraph" id="sec542">NCURSES_CLIBS</h5><!--SEC END --><p><a id="var:NCURSES_CLIBS"></a><a id="hevea_default583"></a><a id="hevea_var117"></a> The <code>LDFLAGS</code> to use when linking ncurses code.
Will normally contain <code>-lncurses</code> when ncurses is found and remain empty otherwise.
</p>
<!--TOC subsection id="sec543" ReadLine library configuration-->
<h3 class="subsection" id="sec543">14.3.2&#XA0;&#XA0;ReadLine library configuration</h3><!--SEC END --><p>
Add <code>open configure/readline</code> line to your <code>OMakefile</code> to get access to the following
autoconfiguration variables.
</p>
<!--TOC paragraph id="sec544" READLINE_AVAILABLE-->
<h5 class="paragraph" id="sec544">READLINE_AVAILABLE</h5><!--SEC END --><p><a id="var:READLINE_AVAILABLE"></a><a id="hevea_default584"></a><a id="hevea_var118"></a> A boolean flag that would be set when both
the <code>readline/readline.h</code> header, the <code>readline/history.h</code> header, and the <code>readline</code>
library very found.</p>
<!--TOC paragraph id="sec545" READLINE_GNU-->
<h5 class="paragraph" id="sec545">READLINE_GNU</h5><!--SEC END --><p><a id="var:READLINE_GNU"></a><a id="hevea_default585"></a><a id="hevea_var119"></a> A boolean flag that would be set
when the GNU version of the readline library is found (as opposed to the BSD one).</p>
<!--TOC paragraph id="sec546" READLINE_CFLAGS-->
<h5 class="paragraph" id="sec546">READLINE_CFLAGS</h5><!--SEC END --><p><a id="var:READLINE_CFLAGS"></a><a id="hevea_default586"></a><a id="hevea_var120"></a> The <code>CFLAGS</code> to use when compiling readline code.
Will include <code>-DREADLINE_ENABLED</code> and <code>-DREADLINE_GNU</code>, respectively
when <code>READLINE_AVAILABLE</code> and <code>READLINE_GNU</code> are true.</p>
<!--TOC paragraph id="sec547" READLINE_CLIBS-->
<h5 class="paragraph" id="sec547">READLINE_CLIBS</h5><!--SEC END --><p><a id="var:READLINE_CLIBS"></a><a id="hevea_default587"></a><a id="hevea_var121"></a> The <code>LDFLAGS</code> to use when linking readline code.
Will normally contain <code>-lncurses -lreadline</code> when readline is found and remain empty otherwise.
</p>
<!--TOC subsection id="sec548" Snprintf configuration-->
<h3 class="subsection" id="sec548">14.3.3&#XA0;&#XA0;Snprintf configuration</h3><!--SEC END --><p>
Add <code>open configure/snprintf</code> line to your <code>OMakefile</code> to get access to the following
autoconfiguration variables.
</p>
<!--TOC paragraph id="sec549" SNPRINTF_AVAILABLE-->
<h5 class="paragraph" id="sec549">SNPRINTF_AVAILABLE</h5><!--SEC END --><p><a id="var:SNPRINTF_AVAILABLE"></a><a id="hevea_default588"></a><a id="hevea_var122"></a> A boolean flag telling whether the snprintf
function is available in the standard C library.</p>
<!--TOC chapter id="sec550" The OSH shell-->
<h1 class="chapter" id="sec550">Chapter&#XA0;15&#XA0;&#XA0;The OSH shell</h1><!--SEC END --><p>
<a id="chapter:osh"></a>
</p><!--NAME osh.html-->
<p>OMake also includes a standalone command-line interpreter <span class="c001">osh</span> that can be used as an
interactive shell. The shell uses the same syntax, and provides the same features on all platforms
<span class="c001">omake</span> supports, including Win32.</p>
<!--TOC section id="sec551" Startup-->
<h2 class="section" id="sec551">15.1&#XA0;&#XA0;Startup</h2><!--SEC END --><p>On startup, <span class="c001">osh</span> reads the file <code>~/.oshrc</code> if it exists. The syntax of this file is the
same as an <span class="c001">OMakefile</span>. The following additional variables are significant.</p>
<!--TOC paragraph id="sec552" prompt-->
<h5 class="paragraph" id="sec552">prompt</h5><!--SEC END --><p><a id="var:prompt"></a><a id="hevea_default589"></a><a id="hevea_var123"></a> The <code>prompt</code> variable specifies the command-line prompt.
It can be a simple string.</p><pre class="verbatim">    prompt = osh&gt;
</pre><p>Or you may choose to define it as a function of no arguments.</p><pre class="verbatim">    prompt() =
        return $"&lt;$(USER):$(HOST) $(homename $(CWD))&gt;"
</pre><p>An example of the latter prompt is as follows.</p><pre class="verbatim">    &lt;jyh:kenai.yapper.org ~&gt;cd links/omake
    &lt;jyh:kenai.yapper.org ~/links/omake&gt;
</pre><p>If you include any "invisible" text in the prompt (such as various terminal
escape sequences), they must be wrapped using the
<a href="#fun%3Aprompt-invisible"><CODE>prompt-invisible</CODE> function</a>. For example, to create a bold prompt on
terminals that support it, you can use the following.
</p><pre class="verbatim">    prompt =
       bold-begin = $(prompt-invisible $(tgetstr bold))
       bold-end = $(prompt-invisible $(tgetstr sgr0))
       value $(bold-begin)$"osh&gt;"$(bold-end)
</pre>
<!--TOC paragraph id="sec553" ignoreeof-->
<h5 class="paragraph" id="sec553">ignoreeof</h5><!--SEC END --><p><a id="var:ignoreeof"></a><a id="hevea_default590"></a><a id="hevea_var124"></a>
If the <code>ignoreeof</code> is <code>true</code>, then <code>osh</code> will not exit on
a terminal end-of-file (usually <code>^D</code> on Unix systems).</p>
<!--TOC section id="sec554" Aliases-->
<h2 class="section" id="sec554">15.2&#XA0;&#XA0;Aliases</h2><!--SEC END --><p>
<a id="hevea_default591"></a></p><p>Command aliases are defined by adding functions to the <code>Shell.</code> object. The following alias
adds the <code>-AF</code> option to the <code>ls</code> command.</p><pre class="verbatim">    Shell. +=
       ls(argv) =
          "ls" -AF $(argv)
</pre><p>Quoted commands do not undergo alias expansion. The quotation <code>"ls"</code> prevents the alias from
being recursive.</p>
<!--TOC section id="sec555" Interactive syntax-->
<h2 class="section" id="sec555">15.3&#XA0;&#XA0;Interactive syntax</h2><!--SEC END --><p>The interactive syntax in <code>osh</code> is the same as the syntax of an <code>OMakefile</code>, with one
exception in regard to indentation. The line before an indented block must have a colon at the end
of the line. A block is terminated with a <code>.</code> on a line by itself, or <code>^D</code>. In the
following example, the first line <code>if true</code> has no body, because there is no colon.</p><pre class="verbatim">   # The following if has no body
   osh&gt;if true
   # The following if has a body
   osh&gt;if true:
   if&gt;       if true:
   if&gt;          println(Hello world)
   if&gt;          .
   Hello world
</pre><p>Note that <code>osh</code> makes some effort to modify the prompt while in an indented body, and it
auto-indents the text.</p><p>The colon signifier is also allowed in files, although it is not required.</p>
<!--TOC chapter id="sec556" Synopsis-->
<h1 class="chapter" id="sec556">Appendix&#XA0;A&#XA0;&#XA0;Synopsis</h1><!--SEC END --><p>
<a id="chapter:options"></a>
</p><!--NAME omake-options.html-->
<p><span class="c001">omake</span>
[<span class="c001">-j &lt;count&gt;</span>]
[<span class="c001">-k</span>]
[<span class="c001">-p</span>]
[<span class="c001">-P</span>]
[<span class="c001">-n</span>]
[<span class="c001">-s</span>] [<span class="c001">-S</span>]
[<span class="c001">-w</span>]
[<span class="c001">-t</span>]
[<span class="c001">-u</span>]
[<span class="c001">-U</span>]
[<span class="c001">-R</span>]
[<span class="c001">--verbose</span>]
[<span class="c001">--project</span>]
[<span class="c001">--depend</span>]
[<span class="c001">--progress</span>]
[<span class="c001">--print-status</span>]
[<span class="c001">--print-exit</span>]
[<span class="c001">--print-dependencies</span>]
[<span class="c001">--show-dependencies &lt;target&gt;</span>]
[<span class="c001">--all-dependencies</span>]
[<span class="c001">--verbose-dependencies</span>]
[<span class="c001">--force-dotomake</span>]
[<span class="c001">--dotomake &lt;dir&gt;</span>]
[<span class="c001">--flush-includes</span>]
[<span class="c001">--configure</span>]
[<span class="c001">--save-interval &lt;seconds&gt;</span>]
[<span class="c001">--install</span>]
[<span class="c001">--install-all</span>]
[<span class="c001">--install-force</span>]
[<span class="c001">--version</span>]
[<span class="c001">--absname</span>]
[<span class="c001">--output-normal</span>]
[<span class="c001">--output-postpone</span>]
[<span class="c001">--output-only-errors</span>]
[<span class="c001">--output-at-end</span>]
<span class="c001">filename...</span>
[<span class="c001">var-definition...</span>]</p>
<!--TOC section id="sec557" General usage-->
<h2 class="section" id="sec557">A.1&#XA0;&#XA0;General usage</h2><!--SEC END --><p>For Boolean options (for example, <code>-s</code>, <code>--progress</code>, etc.) the option can include a
prefix <code>--no</code>, which inverts the usual sense of the option. For example, the option
<code>--progress</code> means &#X201C;print a progress bar,&#X201D; while the option <code>--no--progress</code> means
&#X201C;do not print a progress bar.&#X201D;</p><p>If multiple instances of an option are specified, the final option determines the behavior of OMake.
In the following command line, the final <code>--no-S</code> cancels the earlier <code>-S</code>.</p><pre class="verbatim">    % omake -S --progress --no-S
</pre>
<!--TOC section id="sec558" Output control-->
<h2 class="section" id="sec558">A.2&#XA0;&#XA0;Output control</h2><!--SEC END -->
<!--TOC subsection id="sec559" <span class="c001">-s</span>-->
<h3 class="subsection" id="sec559">A.2.1&#XA0;&#XA0;<span class="c001">-s</span></h3><!--SEC END --><p><a id="hevea_default592"></a><a id="hevea_opt0"></a><a id="option:-s"></a> <code>-s</code></p><p>Never not print commands as they are executed (be &#X201C;silent&#X201D;).</p>
<!--TOC subsection id="sec560" <span class="c001">-S</span>-->
<h3 class="subsection" id="sec560">A.2.2&#XA0;&#XA0;<span class="c001">-S</span></h3><!--SEC END --><p><a id="hevea_default593"></a><a id="hevea_opt1"></a><a id="option:-S"></a> <code>-S</code></p><p>Do not print commands as they are executed <em>unless</em> they produce output and/or
fail. This is the default.</p>
<!--TOC subsection id="sec561" <span class="c001">-w</span>-->
<h3 class="subsection" id="sec561">A.2.3&#XA0;&#XA0;<span class="c001">-w</span></h3><!--SEC END --><p><a id="hevea_default594"></a><a id="hevea_opt2"></a><a id="option:-w"></a> <code>-w</code></p><p>Print directory information in <span class="c001">make</span> format as commands are executed.
This is mainly useful for editors that expect <span class="c001">make</span>-style
directory information for determining the location of errors.</p>
<!--TOC subsection id="sec562" <span class="c001">--progress</span>-->
<h3 class="subsection" id="sec562">A.2.4&#XA0;&#XA0;<span class="c001">--progress</span></h3><!--SEC END --><p><a id="hevea_default595"></a><a id="hevea_opt3"></a><a id="option:--progress"></a> <code>--progress</code></p><p>Print a progress indicator. This option is enabled by default when the OMake&#X2019;s output
(<code>stdout</code>) is on a terminal and disabled by default (except on Windows) when the OMake&#X2019;s
output is redirected.</p>
<!--TOC subsection id="sec563" <span class="c001">--print-status</span>-->
<h3 class="subsection" id="sec563">A.2.5&#XA0;&#XA0;<span class="c001">--print-status</span></h3><!--SEC END --><p><a id="hevea_default596"></a><a id="hevea_opt4"></a><a id="option:--print-status"></a> <code>--print-status</code></p><p>Print status lines (the <code>+</code> and <code>-</code> lines).</p>
<!--TOC subsection id="sec564" <span class="c001">--print-exit</span>-->
<h3 class="subsection" id="sec564">A.2.6&#XA0;&#XA0;<span class="c001">--print-exit</span></h3><!--SEC END --><p><a id="hevea_default597"></a><a id="hevea_opt5"></a><a id="option:--print-exit"></a> <code>--print-exit</code></p><p>Print termination codes when commands complete.</p>
<!--TOC subsection id="sec565" <span class="c001">--verbose</span>-->
<h3 class="subsection" id="sec565">A.2.7&#XA0;&#XA0;<span class="c001">--verbose</span></h3><!--SEC END --><p><a id="hevea_default598"></a><a id="hevea_opt6"></a><a id="option:--verbose"></a> <code>--verbose</code></p><p>Make OMake very verbose. This option is equivalent to
<code>--no-S --print-status --print-exit VERBOSE=true</code></p>
<!--TOC subsection id="sec566" <span class="c001">--output-normal</span>-->
<h3 class="subsection" id="sec566">A.2.8&#XA0;&#XA0;<span class="c001">--output-normal</span></h3><!--SEC END --><p><a id="hevea_default599"></a><a id="hevea_opt7"></a><a id="option:--output-normal"></a> <code>--output-normal</code></p><p>As rule commands are executed, relay their output to the OMake output right away. This is enabled
by default, unless <code>--output-postpone</code> or <code>--output-only-errors</code> is enabled.</p>
<!--TOC subsection id="sec567" <span class="c001">--output-postpone</span>-->
<h3 class="subsection" id="sec567">A.2.9&#XA0;&#XA0;<span class="c001">--output-postpone</span></h3><!--SEC END --><p><a id="hevea_default600"></a><a id="hevea_opt8"></a><a id="option:--output-postpone"></a> <code>--output-postpone</code></p><p>When a rule finishes, print the output as a single block. This is useful in combination <code>-j</code>
option (see Section&#XA0;<a href="#option%3A-j">A.3.12</a>), where the output of multiple subprocesses can be garbled. The
diversion is printed as a single coherent unit.</p><p>Note that enabling <code>--output-postpone</code> will by default disable the <code>--output-normal</code>
option. This might be problematic if you have a command that decides to ask for interactive input.
If the <code>--output-postpone</code> is enabled, but the <code>--output-normal</code> is not, the prompt of
such a command will not be visible and it may be hard to figure out why the build appears &#X201C;stuck&#X201D;.
You might also consider using the <code>--progress</code> flag (see Section&#XA0;<a href="#option%3A--progress">A.2.4</a>) so
that you can see when the build is active. </p>
<!--TOC subsection id="sec568" <span class="c001">--output-only-errors</span>-->
<h3 class="subsection" id="sec568">A.2.10&#XA0;&#XA0;<span class="c001">--output-only-errors</span></h3><!--SEC END --><p><a id="hevea_default601"></a><a id="hevea_opt9"></a><a id="option:--output-only-errors"></a> <code>--output-only-errors</code> </p><p>Similar to <code>--output-postpone</code>, except that the postponed output from commands that were
successful will be discarded. This can be useful in reducing unwanted output so that you can
concentrate on any errors.</p>
<!--TOC subsection id="sec569" <span class="c001">--output-at-end</span>-->
<h3 class="subsection" id="sec569">A.2.11&#XA0;&#XA0;<span class="c001">--output-at-end</span></h3><!--SEC END --><p><a id="hevea_default602"></a><a id="hevea_opt10"></a><a id="option:--output-at-end"></a> <code>--output-at-end</code></p><p>If any rules/commands fail, re-print the output of the failed commands when OMake finishes the
build. This is especially useful when any of the <code>-k</code>, <code>-p</code>, or <code>-P</code> options are
enabled.</p><p>This option is off by default. However, when <code>-k</code> is enabled &#X2014; either explicitly or via one
of the <code>-p</code>/<code>-P</code> options &#X2014; <code>--output-at-end</code> will be enabled by default.</p>
<!--TOC subsection id="sec570" <span class="c001">-o</span>-->
<h3 class="subsection" id="sec570">A.2.12&#XA0;&#XA0;<span class="c001">-o</span></h3><!--SEC END --><p><a id="hevea_default603"></a><a id="hevea_opt11"></a><a id="option:-o"></a> <code>-o [01jwWpPxXsS]</code></p><p>For brevity, the <code>-o</code> option is also provided to duplicate the above output options. The
<code>-o</code> option takes a argument consisting of a sequence of characters. The characters are read
from left-to-right; each specifies a set of output options. In general, an uppercase character turns
the option <em>on</em>; a lowercase character turns the option <em>off</em>.</p><dl class="description"><dt class="dt-description">
<span class="c004">0</span></dt><dd class="dd-description"> Equivalent to <code>-s --output-only-errors --no-progress</code><p>This option specifies that <code>omake</code> should be as quiet as possible. If any errors occur
during the build, the output is delayed until the build terminates. Output from successful commands
is discarded.</p></dd><dt class="dt-description"><span class="c004">1</span></dt><dd class="dd-description"> Equivalent to <code>-S --progress --output-only-errors</code><p>This is a slightly more relaxed version of &#X201C;quiet&#X201D; output. The output from successful commands is
discarded. The output from failed commands is printed immediately after the command complete. The
output from failed commands is displayed twice: once immediately after the command completes, and
again when the build completes. A progress bar is displayed so that you know when the build is
active. Include the &#X2018;<code>p</code>&#X2019; option if you want to turn off the progress bar (for example
<code>omake -o 1p</code>).</p></dd><dt class="dt-description"><span class="c004">2</span></dt><dd class="dd-description"> Equivalent to <code>--progress --output-postpone</code><p>The is even more relaxed, output from successful commands is printed.
This is often useful for deinterleaving the output when using <code>-j</code>.</p></dd><dt class="dt-description"><span class="c004">W</span></dt><dd class="dd-description"> Equivalent to <code>-w</code>
</dd><dt class="dt-description"><span class="c004">w</span></dt><dd class="dd-description"> Equivalent to <code>--no-w</code>
</dd><dt class="dt-description"><span class="c004">P</span></dt><dd class="dd-description"> Equivalent to <code>--progress</code>
</dd><dt class="dt-description"><span class="c004">p</span></dt><dd class="dd-description"> Equivalent to <code>--no--progress</code>
</dd><dt class="dt-description"><span class="c004">X</span></dt><dd class="dd-description"> Equivalent to <code>--print-exit</code>
</dd><dt class="dt-description"><span class="c004">x</span></dt><dd class="dd-description"> Equivalent to <code>--no-print-exit</code>
</dd><dt class="dt-description"><span class="c004">S</span></dt><dd class="dd-description"> Equivalent to <code>-S</code>
</dd><dt class="dt-description"><span class="c004">s</span></dt><dd class="dd-description"> Equivalent to <code>--no-S</code>
</dd></dl>
<!--TOC section id="sec571" Build options-->
<h2 class="section" id="sec571">A.3&#XA0;&#XA0;Build options</h2><!--SEC END -->
<!--TOC subsection id="sec572" <span class="c001">-k</span>-->
<h3 class="subsection" id="sec572">A.3.1&#XA0;&#XA0;<span class="c001">-k</span></h3><!--SEC END --><p><a id="hevea_default604"></a><a id="hevea_opt12"></a><a id="option:-k"></a> <code>-k</code></p><p>Do not abort when a build command fails; continue to build as much of the project as possible. This
option is implied by both <code>-p</code> and <code>-P</code> options. In turn, this option would imply the
<code>--output-at-end</code> option.</p>
<!--TOC subsection id="sec573" <span class="c001">-n</span>-->
<h3 class="subsection" id="sec573">A.3.2&#XA0;&#XA0;<span class="c001">-n</span></h3><!--SEC END --><p><a id="hevea_default605"></a><a id="hevea_opt13"></a><a id="option:-n"></a> <code>-n</code></p><p>This can be used to see what would happen if the project were to be built.</p>
<!--TOC subsection id="sec574" <span class="c001">-p</span>-->
<h3 class="subsection" id="sec574">A.3.3&#XA0;&#XA0;<span class="c001">-p</span></h3><!--SEC END --><p><a id="hevea_default606"></a><a id="hevea_opt14"></a><a id="option:-p"></a> <code>-p</code></p><p>Watch the filesystem for changes, and continue the build until it succeeds. If this
option is specified, <span class="c001">omake</span> will restart the build whenever source files are modified. Implies
<span class="c001">-k</span>.</p>
<!--TOC subsection id="sec575" <span class="c001">-P</span>-->
<h3 class="subsection" id="sec575">A.3.4&#XA0;&#XA0;<span class="c001">-P</span></h3><!--SEC END --><p><a id="hevea_default607"></a><a id="hevea_opt15"></a><a id="option:-P"></a> <code>-P</code></p><p>Watch the filesystem for changes forever. If this option is specified, <span class="c001">omake</span>
will restart the build whenever source files are modified. Implies
<span class="c001">-k</span>.</p>
<!--TOC subsection id="sec576" <span class="c001">-R</span>-->
<h3 class="subsection" id="sec576">A.3.5&#XA0;&#XA0;<span class="c001">-R</span></h3><!--SEC END --><p><a id="hevea_default608"></a><a id="hevea_opt16"></a><a id="option:-R"></a> <code>-R</code></p><p>Ignore the current directory and build the project from its root directory. When <span class="c001">omake</span> is
run in a subdirectory of a project and no explicit targets are given on the command line, it would
normally only build files within the current directory and its subdirectories (more precisely, it
builds all the <code>.DEFAULT</code> targets in the current directory and its subdirectories). If the
<span class="c001">-R</span> option is specified, the build is performed as if <span class="c001">omake</span> were run in the project
root.</p><p>In other words, with the <code>-R</code> option, all the relative targets specified on the command line
will be taken relative to the project root (instead of relative to the current directory). When no
targets are given on the command line, all the <code>.DEFAULT</code> targets in the project will be built
(regardless of the current directory).</p>
<!--TOC subsection id="sec577" <span class="c001">-t</span>-->
<h3 class="subsection" id="sec577">A.3.6&#XA0;&#XA0;<span class="c001">-t</span></h3><!--SEC END --><p><a id="hevea_default609"></a><a id="hevea_opt17"></a><a id="option:-t"></a> <code>-t</code></p><p>Update the <span class="c001">omake</span> database to force the project to be considered up-to-date.</p>
<!--TOC subsection id="sec578" <span class="c001">-U</span>-->
<h3 class="subsection" id="sec578">A.3.7&#XA0;&#XA0;<span class="c001">-U</span></h3><!--SEC END --><p><a id="hevea_default610"></a><a id="hevea_opt18"></a><a id="option:-U"></a> <code>-U</code></p><p>Do not trust cached build information. This will force the entire project to be rebuilt.</p>
<!--TOC subsection id="sec579" <span class="c001">--depend</span>-->
<h3 class="subsection" id="sec579">A.3.8&#XA0;&#XA0;<span class="c001">--depend</span></h3><!--SEC END --><p><a id="hevea_default611"></a><a id="hevea_opt19"></a><a id="option:--depend"></a> <code>--depend</code></p><p>Do not trust cached dependency information. This will force files to be rescanned
for dependency information.</p>
<!--TOC subsection id="sec580" <span class="c001">--configure</span>-->
<h3 class="subsection" id="sec580">A.3.9&#XA0;&#XA0;<span class="c001">--configure</span></h3><!--SEC END --><p><a id="hevea_default612"></a><a id="hevea_opt20"></a><a id="option:--configure"></a> <code>--configure</code></p><p>Re-run <code>static.</code> sections of the included omake files, instead of
trusting the cached results.</p>
<!--TOC subsection id="sec581" <span class="c001">--force-dotomake</span>-->
<h3 class="subsection" id="sec581">A.3.10&#XA0;&#XA0;<span class="c001">--force-dotomake</span></h3><!--SEC END --><p><a id="hevea_default613"></a><a id="hevea_opt21"></a><a id="option:--force-dotomake"></a> <code>--force-dotomake</code></p><p>Always use the <code>$HOME/.omake</code> for the <code>.omc</code> cache files.</p>
<!--TOC subsection id="sec582" <span class="c001">--dotomake</span>-->
<h3 class="subsection" id="sec582">A.3.11&#XA0;&#XA0;<span class="c001">--dotomake</span></h3><!--SEC END --><p><a id="hevea_default614"></a><a id="hevea_opt22"></a><a id="option:--dotomake"></a> <code>--dotomake &lt;dir&gt;</code></p><p>Use the specified directory instead of the <code>$HOME/.omake</code>
for the placement of the <code>.omc</code> cache files.</p>
<!--TOC subsection id="sec583" <span class="c001">-j</span>-->
<h3 class="subsection" id="sec583">A.3.12&#XA0;&#XA0;<span class="c001">-j</span></h3><!--SEC END --><p><a id="hevea_default615"></a><a id="hevea_opt23"></a><a id="option:-j"></a> <code>-j &lt;count&gt;</code></p><p>Run multiple build commands in parallel. The <span class="c001">count</span> specifies a
bound on the number of commands to run simultaneously. In addition, the count may specify servers
for remote execution of commands in the form <code>server=count</code>. For example, the option
<code>-j 2:small.host.org=1:large.host.org=4</code> would specify that up to 2 jobs can be executed
locally, 1 on the server <code>small.host.org</code> and 4 on <code>large.host.org</code>. Each remote server
must use the same filesystem location for the project.</p><p>Remote execution is currently an experimental feature. Remote filesystems like NFS do not provide
adequate file consistency for this to work.</p>
<!--TOC subsection id="sec584" <span class="c001">--print-dependencies</span>-->
<h3 class="subsection" id="sec584">A.3.13&#XA0;&#XA0;<span class="c001">--print-dependencies</span></h3><!--SEC END --><p><a id="hevea_default616"></a><a id="hevea_opt24"></a><a id="option:--print-dependencies"></a> <code>--print-dependencies</code></p><p>Print dependency information for the targets on the command line.</p>
<!--TOC subsection id="sec585" <span class="c001">--show-dependencies</span>-->
<h3 class="subsection" id="sec585">A.3.14&#XA0;&#XA0;<span class="c001">--show-dependencies</span></h3><!--SEC END --><p><a id="hevea_default617"></a><a id="hevea_opt25"></a><a id="option:--show-dependencies"></a> <code>--show-dependencies &lt;target&gt;</code></p><p>Print dependency information <em>if</em> the <code>target</code> is built.</p>
<!--TOC subsection id="sec586" <span class="c001">--all-dependencies</span>-->
<h3 class="subsection" id="sec586">A.3.15&#XA0;&#XA0;<span class="c001">--all-dependencies</span></h3><!--SEC END --><p><a id="hevea_default618"></a><a id="hevea_opt26"></a><a id="option:--all-dependencies"></a> <code>--all-dependencies</code></p><p>If either of the options <span class="c001">--print-dependencies</span> or
<span class="c001">--show-dependencies</span> is in effect, print transitive dependencies. That is, print all
dependencies recursively. If neither option <span class="c001">--print-dependencies</span>,
<span class="c001">--show-dependencies</span> is specified, this option has no effect.</p>
<!--TOC subsection id="sec587" <span class="c001">--verbose-dependencies</span>-->
<h3 class="subsection" id="sec587">A.3.16&#XA0;&#XA0;<span class="c001">--verbose-dependencies</span></h3><!--SEC END --><p><a id="hevea_default619"></a><a id="hevea_opt27"></a><a id="option:--verbose-dependencies"></a> <code>--verbose-dependencies</code></p><p>If either of the options <span class="c001">--print-dependencies</span> or
<span class="c001">--show-dependencies</span> is in effect, also print listings for each dependency. The output is
very verbose, consider redirecting to a file. If neither option <span class="c001">--print-dependencies</span>,
<span class="c001">--show-dependencies</span> is specified, this option has no effect.</p>
<!--TOC subsection id="sec588" <span class="c001">--install</span>-->
<h3 class="subsection" id="sec588">A.3.17&#XA0;&#XA0;<span class="c001">--install</span></h3><!--SEC END --><p><a id="hevea_default620"></a><a id="hevea_opt28"></a><a id="option:--install"></a> <code>--install</code></p><p>Install default files <span class="c001">OMakefile</span> and <span class="c001">OMakeroot</span> into the current directory. You would
typically do this to start a project in the current directory.</p>
<!--TOC subsection id="sec589" <span class="c001">--install-all</span>-->
<h3 class="subsection" id="sec589">A.3.18&#XA0;&#XA0;<span class="c001">--install-all</span></h3><!--SEC END --><p><a id="hevea_default621"></a><a id="hevea_opt29"></a><a id="option:--install-all"></a> <code>--install-all</code></p><p>In addition to installing files <span class="c001">OMakefile</span> and <span class="c001">OMakeroot</span>, install default
<span class="c001">OMakefile</span>s into each subdirectory of the current directory. <span class="c001">cvs</span>(1) rules are used for
filtering the subdirectory list. For example, <span class="c001">OMakefile</span>s are not copied into directories
called <code>CVS</code>, <code>RCCS</code>, etc.</p>
<!--TOC subsection id="sec590" <span class="c001">--install-force</span>-->
<h3 class="subsection" id="sec590">A.3.19&#XA0;&#XA0;<span class="c001">--install-force</span></h3><!--SEC END --><p><a id="hevea_default622"></a><a id="hevea_opt30"></a><a id="option:--install-force"></a> <code>--install-force</code></p><p>Normally, <span class="c001">omake</span> will prompt before it overwrites any existing <span class="c001">OMakefile</span>. If this
option is given, all files are forcibly overwritten without prompting.</p>
<!--TOC subsection id="sec591" <span class="c001">--absname</span>-->
<h3 class="subsection" id="sec591">A.3.20&#XA0;&#XA0;<span class="c001">--absname</span></h3><!--SEC END --><p><a id="hevea_default623"></a><a id="hevea_opt31"></a><a id="option:--absname"></a> <code>--absname</code></p><p>Filenames should expand to absolute pathnames.</p><p><span class="c004">N.B.</span> This is an experimental option. It may become deprecated.</p>
<!--TOC subsection id="sec592" <span class="c001">variable definition</span>-->
<h3 class="subsection" id="sec592">A.3.21&#XA0;&#XA0;<span class="c001">variable definition</span></h3><!--SEC END --><p><a id="hevea_default624"></a><a id="hevea_opt32"></a><a id="option:variable definition"></a> <code>name=[value]</code></p><p><span class="c001">omake</span> variables can also be defined on the command line in the form <code>name=value</code>. For
example, the <code>CFLAGS</code> variable might be defined on the command line with the argument
<code>CFLAGS="-Wall -g"</code>.</p>
<!--TOC section id="sec593" Additional options-->
<h2 class="section" id="sec593">A.4&#XA0;&#XA0;Additional options</h2><!--SEC END --><p>In addition, <span class="c001">omake</span> supports a number of debugging flags on the command line. Run
<code>omake --help</code> to get a summary of these flags.</p>
<!--TOC section id="sec594" Environment variables-->
<h2 class="section" id="sec594">A.5&#XA0;&#XA0;Environment variables</h2><!--SEC END -->
<!--TOC subsection id="sec595" <span class="c001">OMAKEFLAGS</span>-->
<h3 class="subsection" id="sec595">A.5.1&#XA0;&#XA0;<span class="c001">OMAKEFLAGS</span></h3><!--SEC END --><p>
<a id="hevea_default625"></a></p><p>If defines, the <code>OMAKEFLAGS</code> should specify a set of options exactly as they are specified on
the command line.</p>
<!--TOC subsection id="sec596" <span class="c001">OMAKELIB</span>-->
<h3 class="subsection" id="sec596">A.5.2&#XA0;&#XA0;<span class="c001">OMAKELIB</span></h3><!--SEC END --><p>
<a id="hevea_default626"></a></p><p>If defined, the <code>OMAKELIB</code> environment variable should refer to the installed location of the
OMake standard library. This is the directory that contains <code>Pervasives.om</code> etc. On a Unix
system, this is often <code>/usr/lib/omake</code> or <code>/usr/local/lib/omake</code>, and on Win32 systems it
is often <code>c:\Program Files\OMake\lib</code>.</p><p>If not defined, <code>omake</code> uses the default configured location. You should normally leave this
unset.</p>
<!--TOC section id="sec597" Functions-->
<h2 class="section" id="sec597">A.6&#XA0;&#XA0;Functions</h2><!--SEC END -->
<!--TOC subsection id="sec598" <span class="c001">OMakeFlags</span>-->
<h3 class="subsection" id="sec598">A.6.1&#XA0;&#XA0;<span class="c001">OMakeFlags</span></h3><!--SEC END --><p>The <code>OMakeFlags</code> function can be used within an <code>OMakefile</code> to modify
the set of options. The options should be specified exactly as they are on the command line. For
example, if you want some specific project to be silent and display a progress bar, you can add the
following line to your <code>OMakefile</code>.</p><pre class="verbatim">    OMakeFlags(-S --progress)
</pre><p>For options where it makes sense, the options are scoped like variables. For example, if you want
OMake to be silent for a single rule (instead of for the entire project), you can use scoping the
restrict the range of the option.</p><pre class="verbatim">    section
        # Do not display command output when foo is constructed
        OMakeFlags(-S)

        foo: fee
           echo "This is a generated file" &gt; foo
           cat fee &gt;&gt; foo
           chmod 555 foo
</pre>
<!--TOC section id="sec599" Option processing-->
<h2 class="section" id="sec599">A.7&#XA0;&#XA0;Option processing</h2><!--SEC END --><p>When <code>omake</code> is invoked, the options are processed in the following order.</p><ol class="enumerate" type=1><li class="li-enumerate">
All options specified by the <code>OMAKEFLAGS</code> environment variable are defined globally.
</li><li class="li-enumerate">All options from the command line are defined globally.
</li><li class="li-enumerate">Any individual calls the the <code>OMakeFlags</code> function modify the options locally.
</li></ol>
<!--TOC section id="sec600" .omakerc-->
<h2 class="section" id="sec600">A.8&#XA0;&#XA0;.omakerc</h2><!--SEC END --><p>
<a id="section:.omakerc"></a>
<a id="hevea_default627"></a></p><p>If the <code>$(HOME)/.omakerc</code> exists, it is read before any of the <code>OMakefiles</code> in your
project. The <code>.omakerc</code> file is frequently used for user-specific customization.
For example, instead of defining the <code>OMAKEFLAGS</code> environment variable, you could add
a line to your <code>.omakerc</code>.</p><pre class="verbatim">    $(HOME)/.omakerc:
        # My private options
        OMakeFlags(-S --progress)
</pre>
<!--TOC chapter id="sec601" OMake grammar-->
<h1 class="chapter" id="sec601">Appendix&#XA0;B&#XA0;&#XA0;OMake grammar</h1><!--SEC END --><p>
<a id="chapter:grammar"></a>
</p><!--NAME omake-grammar.html-->

<!--TOC section id="sec602" OMake lexical conventions-->
<h2 class="section" id="sec602">B.1&#XA0;&#XA0;OMake lexical conventions</h2><!--SEC END --><p>The OMake language is based on the language for GNU/BSD make, where there are few lexical
conventions. Strictly speaking, there are no keywords, and few special symbols.</p>
<!--TOC subsection id="sec603" Comments-->
<h3 class="subsection" id="sec603">B.1.1&#XA0;&#XA0;Comments</h3><!--SEC END --><p>Comments begin with the <code>#</code> character and continue to the end-of-line.
Text within a comment is unrestricted.</p><p>Examples.</p><pre class="verbatim">   # This is a comment
   # This $comment contains a quote " character
</pre>
<!--TOC subsection id="sec604" Special characters-->
<h3 class="subsection" id="sec604">B.1.2&#XA0;&#XA0;Special characters</h3><!--SEC END --><p>The following characters are special in some contexts.</p><pre class="verbatim">   $    (    )    ,    .   =    :    "    '    `    \    #
</pre><ul class="itemize"><li class="li-itemize">
<code>$</code> is used to denote a variable reference, or function application.
</li><li class="li-itemize">Parentheses <code>)</code>, <code>(</code> are argument deliminters.
</li><li class="li-itemize">The command <code>,</code> is an argument separator.
</li><li class="li-itemize">The period symbol <code>.</code> is a name separator.
</li><li class="li-itemize">The equality symbol <code>=</code> denotes a definition.
</li><li class="li-itemize">The colon symbol <code>:</code> is used to denote rules, and (optionally) to indicate
that an expression is followed by an indented body.
</li><li class="li-itemize">The quotation symbols <code>"</code> and <code>'</code> delimit character strings.
</li><li class="li-itemize">The symbol <code>#</code> is the first character of a constant.
</li><li class="li-itemize">The escape symbol <code>\</code> is special <em>only when</em> followed by another special
character. In this case, the special status of the second character is removed,
and the sequence denotes the second character. Otherwise, the <code>\</code> is not special.<p>Examples:</p><ul class="itemize"><li class="li-itemize">
<code>\$</code>: the <code>$</code> character (as a normal character).
</li><li class="li-itemize"><code>\#</code>: the <code>#</code> character (as a normal character).
</li><li class="li-itemize"><code>\\</code>: the <code>\</code> character (as a normal character).
</li><li class="li-itemize"><code>c\:\Windows\moo\#boo</code>: the string <code>c:\Windows\moo#boo</code>.
</li></ul></li></ul>
<!--TOC subsection id="sec605" Identifiers-->
<h3 class="subsection" id="sec605">B.1.3&#XA0;&#XA0;Identifiers</h3><!--SEC END --><p>Identifiers (variable names) are drawn from the ASCII alphanumeric characters as well as <code>_</code>,
<code>-</code>, <code>~</code>, <code>@</code>. Case is significant; the following identifiers are distinct:
<code>FOO</code>, <code>Foo</code>, <code>foo</code>. The identifier may begin with any of the valid characters,
including digits.</p><p>Using <code>egrep</code> notation, the regular expression for identifiers is defined as follows.</p><pre class="verbatim">    identifier ::= [-@~_A-Za-z0-9]+
</pre><p>The following are legal identifiers.</p><pre class="verbatim">    Xyz    hello_world    seventy@nine
    79-32  Gnus~Gnats     CFLAGS
</pre><p>The following are not legal identifiers.</p><pre class="verbatim">    x+y    hello&amp;world
</pre>
<!--TOC subsection id="sec606" Command identifiers-->
<h3 class="subsection" id="sec606">B.1.4&#XA0;&#XA0;Command identifiers</h3><!--SEC END --><p>The following words have special significance when they occur as the <em>first</em> word
of a program line. They are not otherwise special.</p><pre class="verbatim">    case     catch  class    declare    default
    do       else   elseif   export     extends
    finally  if     import   include    match
    open     raise  return   section    switch
    try      value  when     while
</pre>
<!--TOC subsection id="sec607" Variable references-->
<h3 class="subsection" id="sec607">B.1.5&#XA0;&#XA0;Variable references</h3><!--SEC END --><p>A variable reference is denoted with the <code>$</code> special character followed by an identifier. If
the identifier name has more than one character, it must be enclosed in parentheses. The
parenthesized version is most common. The following are legal variable references.</p><pre class="verbatim">    $(Xyz)    $(hello_world)   $(seventy@nine)
    $(79-32)  $(Gnus~Gnats)    $(CFLAGS)
</pre><p>Single-character references also include several additional identifiers, including <code>&amp;*&lt;^?][</code>.
The following are legal single-character references.</p><pre class="verbatim">   $@   $&amp;   $*   $&lt;   $^   $+   $?   $[   $]
   $A   $_   $a   $b   $x   $1   $2   $3
</pre><p>Note that a non-parenthesized variable reference is limited to a single character, even if it is
followed by additional legal identifier charqcters. Suppose the value of the <code>$x</code> variable is
17. The following examples illustrate evaluation.</p><pre class="verbatim">    $x           evaluates to    17
    foo$xbar     evaluates to    foo17bar
    foo$(x)bar   evaluates to    foo17bar
</pre><p>The special sequence <code>$$</code> represents the character literal <code>$</code>. That is, the
two-character sequences <code>\$</code> and <code>$$</code> are normally equalivalent.</p>
<!--TOC subsection id="sec608" String constants-->
<h3 class="subsection" id="sec608">B.1.6&#XA0;&#XA0;String constants</h3><!--SEC END --><p>
<a id="section:quotes"></a></p><p>Literal strings are defined with matching string delimiters. A left string delimiter begins with
the dollar-sign <code>$</code>, and a non-zero number of single-quote or double-quote characters. The
string is terminated with a matching sequence of quotation symbols. The delimiter quotation may not
be mixed; it must contain only single-quote characters, or double-quote characters. The following
are legal strings.</p><pre class="verbatim">    $'Hello world'
    $"""printf("Hello world\n")"""
    $''''
Large "block" of
text # spanning ''multiple'' lines''''
</pre><p>The string delimiters are <em>not</em> included in the string constant. In the single-quote form,
the contents of the string are interpreted verbatim&#X2013;there are no special characters.</p><p>The double-quote form permits expression evaluation within the string, denoted with the <code>$</code> symbol.
The following are some examples.</p><pre class="verbatim">    X = Hello
    Y = $""$X world""             # Hello world
    Z = $'''$X world'''           # $X world
    I = 3
    W = $"6 &gt; $(add $I, 2)"       # 6 &gt; 5
</pre><p>Note that quotation symbols without a leading <code>$</code> are not treated specially by OMake. The
quotation symbols is included in the sequence.</p><pre class="verbatim">    osh&gt;println('Hello world')
    'Hello world'
    osh&gt;println($'Hello world')
    Hello world
    osh&gt;X = Hello
    - : "Hello" : Sequence
    osh&gt;println('$X world')
    Hello world
</pre>
<!--TOC section id="sec609" The OMake grammar-->
<h2 class="section" id="sec609">B.2&#XA0;&#XA0;The OMake grammar</h2><!--SEC END --><p>OMake programs are constructed from expressions and statements. Generally, an input program
consists of a sequence of statements, each of which consists of one or more lines. Indentation is
significant&#X2013;if a statement consists of more than one line, the second and remaining lines (called
the <em>body</em>) are usually indented relative to the first line.</p>
<!--TOC subsection id="sec610" Expressions-->
<h3 class="subsection" id="sec610">B.2.1&#XA0;&#XA0;Expressions</h3><!--SEC END --><p>The following table lists the syntax for expressions.</p><table class="c000 cellpading0"><tr><td class="c007"><em>expr</em></td><td class="c005">::=</td><td class="c006">&nbsp;</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">&nbsp;</td><td class="c006"><em>(empty)</em></td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">&nbsp;</td><td class="c006">&#X2013; Text (see note)</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006"><em>text</em></td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006"><em>string-literal</em></td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">&nbsp;</td><td class="c006">&#X2013; Applications</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006"><em>dollar</em> <code>&lt;char&gt;</code></td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006"><em>dollar</em> <code>(</code> <em>pathid args</em> <code>)</code></td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">&nbsp;</td><td class="c006">&#X2013; Concatenation</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006"><em>expr expr</em></td></tr>
<tr><td class="c007">&nbsp;</td></tr>
<tr><td class="c007"><em>dollar</em></td><td class="c005">::=</td><td class="c006"><code>$</code> | <code>$`</code> | <code>$,</code>
</td></tr>
<tr><td class="c007"><em>pathid</em></td><td class="c005">::=</td><td class="c006">&nbsp;</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">&nbsp;</td><td class="c006"><em>id</em></td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006"><em>pathid</em> <code>.</code> <em>id</em></td></tr>
<tr><td class="c007">&nbsp;</td></tr>
<tr><td class="c007"><em>arg</em></td><td class="c005">::=</td><td class="c006"><em>expr</em> &#X2013; excluding special characters <code>)(,</code>)</td></tr>
<tr><td class="c007"><em>args</em></td><td class="c005">::=</td><td class="c006"><em>(empty)</em> | <em>arg</em>, ..., <em>arg</em>
</td></tr>
</table><p>An <em>expression</em> is a sequence composed of text, string-literals, variables references and
function applications. Text is any sequence of non-special characters.</p>
<!--TOC subsubsection id="sec611" Inline applications-->
<h4 class="subsubsection" id="sec611">B.2.1.1&#XA0;&#XA0;Inline applications</h4><!--SEC END --><p>An <em>application</em> is the application of a function to zero-or-more arguments. Inline
applications begin with one of the &#X201C;dollar&#X201D; sequences <code>$</code>, <code>$`</code>, or <code>$,</code>. The
application itself is specified as a single character (in which case it is a variable reference), or
it is a parenthesized list including a function identifier <em>pathid</em>, and zero-or-more
comma-separated arguments <em>args</em>. The arguments are themselves a variant of the expressions
where the special character <code>)(,</code> are not allowed (though any of these may be made non-special
with the <code>\</code> escape character). The following are some examples of valid expressions.</p><ul class="itemize"><li class="li-itemize">
<code>xyz abc</code><p>The text sequence &#X201C;<code>xyz abc</code>&#X201D;</p></li><li class="li-itemize"><code>xyz$wabc</code><p>A text sequence containing a reference to the variable <code>w</code>.</p></li><li class="li-itemize"><code>$(addsuffix .c, $(FILES))</code><p>An application of the function <code>addsuffix</code>, with first argument <code>.c</code>, and second argument <code>$(FILES)</code>.</p></li><li class="li-itemize"><code>$(a.b.c 12)</code><p>This is a method call. The variable <code>a</code> must evaluate to an object with a field <code>b</code>,
which must be an object with a method <code>c</code>. This method is called with argument <code>12</code>.
</p></li></ul><p>The additional dollar sequences specify evaluation order, <code>$`</code> (lazy) and <code>$,</code> (eager), as
discussed in the section on dollar modifiers (Section&#XA0;<a href="#section%3Adollar">B.3</a>).</p>
<!--TOC subsection id="sec612" Statements and programs-->
<h3 class="subsection" id="sec612">B.2.2&#XA0;&#XA0;Statements and programs</h3><!--SEC END --><p>The following table lists the syntax of statements and programs.</p><table class="c000 cellpading0"><tr><td class="c007"><em>params</em></td><td class="c005">::=</td><td class="c006"><em>(empty)</em> | <em>id</em>, ..., <em>id</em></td></tr>
<tr><td class="c007">&nbsp;</td></tr>
<tr><td class="c007"><em>target</em></td><td class="c005">::=</td><td class="c006"><em>expr</em> &#X2013; excluding special character <code>:</code></td></tr>
<tr><td class="c007">&nbsp;</td></tr>
<tr><td class="c007"><em>program</em></td><td class="c005">::=</td><td class="c006"><em>stmt</em> <code>&lt;eol&gt;</code> ... <code>&lt;eol&gt;</code> <em>stmt</em></td></tr>
<tr><td class="c007">&nbsp;</td></tr>
<tr><td class="c007"><em>stmt</em></td><td class="c005">::=</td><td class="c006">&nbsp;</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">&nbsp;</td><td class="c006">&#X2013; Special forms</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006"><span class="c001">command</span> <em>expr optcolon-body</em></td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006"><span class="c001">command</span> ( <em>args</em> ) <em>optcolon-body</em></td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006"><span class="c001">catch</span> <em>id</em> ( <em>id</em> ) <em>optcolon-body</em></td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006"><span class="c001">class</span> <em>id</em> ... <em>id</em></td></tr>
<tr><td class="c007">&nbsp;</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">&nbsp;</td><td class="c006">&#X2013; Variable definitions</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006"><em>pathid</em> {+}= <em>expr</em></td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006"><em>pathid</em> {+}= <code>&lt;eol&gt;</code> <em>indented-body</em></td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006"><em>pathid</em><code>[]</code> {+}= <em>expr</em></td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006"><em>pathid</em><code>[]</code> {+}= <code>&lt;eol&gt;</code> <em>indented-exprs</em></td></tr>
<tr><td class="c007">&nbsp;</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">&nbsp;</td><td class="c006">&#X2013; Functions</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006"><em>pathid</em>(<em>args</em>) <em>optcolon-body</em></td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006"><em>pathid</em>(<em>params</em>) = <code>&lt;eol&gt;</code> <em>indented-body</em></td></tr>
<tr><td class="c007">&nbsp;</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">&nbsp;</td><td class="c006">&#X2013; Objects</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006"><em>pathid</em> <code>.</code> {+}= <code>&lt;eol&gt;</code> <em>indented-body</em></td></tr>
<tr><td class="c007">&nbsp;</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">&nbsp;</td><td class="c006">&#X2013; Rules</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006"><em>target</em> <span class="c001">:</span> <em>target rule-options</em> <code>&lt;eol&gt;</code> <em>indented-body</em></td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006"><em>target</em> <span class="c001">::</span> <em>target rule-options</em> <code>&lt;eol&gt;</code> <em>indented-body</em></td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006"><em>target</em> <span class="c001">:</span> <em>target</em> <span class="c001">:</span> <em>target rule-options</em> <code>&lt;eol&gt;</code> <em>indented-body</em></td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006"><em>target</em> <span class="c001">::</span> <em>target</em> <span class="c001">:</span> <em>target rule-options</em> <code>&lt;eol&gt;</code> <em>indented-body</em></td></tr>
<tr><td class="c007">&nbsp;</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">&nbsp;</td><td class="c006">&#X2013; Shell commands</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006"><em>expr</em></td></tr>
<tr><td class="c007">&nbsp;</td></tr>
<tr><td class="c007"><em>indented-body</em></td><td class="c005">::=</td><td class="c006"><em>(empty)</em></td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006"><em>indented-stmt</em> <code>&lt;eol&gt;</code> ... <code>&lt;eol&gt;</code> <em>indented-stmt</em></td></tr>
<tr><td class="c007">&nbsp;</td></tr>
<tr><td class="c007"><em>indented-exprs</em></td><td class="c005">::=</td><td class="c006"><em>(empty)</em></td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006"><em>indented-expr</em> <code>&lt;eol&gt;</code> ... <code>&lt;eol&gt;</code> <em>indented-expr</em></td></tr>
<tr><td class="c007">&nbsp;</td></tr>
<tr><td class="c007"><em>optcolon-body</em></td><td class="c005">::=</td><td class="c006"><em>(empty)</em></td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006"><code>&lt;eol&gt;</code> <em>indented-body</em></td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006"><span class="c001">:</span> <code>&lt;eol&gt;</code> <em>indented-body</em></td></tr>
<tr><td class="c007">&nbsp;</td></tr>
<tr><td class="c007"><em>rule-option</em></td><td class="c005">::=</td><td class="c006"><em>:id: target</em></td></tr>
<tr><td class="c007"><em>rule-options</em></td><td class="c005">::=</td><td class="c006"><em>(empty)</em></td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006"><em>rule-options rule-option</em>
</td></tr>
</table>
<!--TOC subsubsection id="sec613" Special forms-->
<h4 class="subsubsection" id="sec613">B.2.2.1&#XA0;&#XA0;Special forms</h4><!--SEC END --><p>The special forms include the following.</p><p><a id="hevea_default628"></a><a id="hevea_default629"></a><a id="hevea_default630"></a><span class="c004">Conditionals</span> (see the section on conditionals &#X2014; Section&#XA0;<a href="#section%3Aconditionals">4.10</a>). The <code>if</code> command
should be followed by an expression that represents the condition, and an indented body. The
conditional may be followed by <code>elseif</code> and <code>else</code> blocks.</p><pre class="verbatim">    if expr
        indented-body
    elseif expr
        indented-body
    ...
    else
        indented-body
</pre><p><a id="hevea_default631"></a><span class="c004">matching</span> (see the section on matching &#X2014; Section&#XA0;<a href="#section%3Amatch">4.11</a>). The <code>switch</code> and
<code>match</code> commands perform pattern-matching. All cases are optional. Each case may include
<code>when</code> clauses that specify additional matching conditions.</p><pre class="verbatim">    match(expr)
    case expr
       indented-body
    when expr
       indented-body
    ...
    case expr
       indented-body
    default
       indented-body
</pre><p><a id="hevea_default632"></a><span class="c004">Exceptions</span> (see also the <a href="#fun%3Atry"><CODE>try</CODE> function</a> documentation). The <code>try</code> command
introduces an exception handler. Each <code>name</code> is the name of a class. All cases, including
<code>catch</code>, <code>default</code>, and <code>finally</code> are optional. The <code>catch</code> and <code>default</code>
clauses contain optional <code>when</code> clauses.</p><pre class="verbatim">    try
        indented-body
    catch name1(id1)
        indented-body
    when expr
        indented-body
    ...
    catch nameN(idN)
        indented-body
    default
        indented-body
    finally
        indented-body
</pre><p>The <code>raise</code> command is used to raise an exception.</p><pre class="verbatim">    raise expr
</pre><p><a id="hevea_default633"></a><span class="c004">section</span> (see the <code>section</code> description in Section&#XA0;<a href="#section%3Asection">4.9</a>). The <code>section</code> command
introduces a new scope.</p><pre class="verbatim">    section
        indented-body
</pre><p><a id="hevea_default634"></a><a id="hevea_default635"></a><span class="c004">include, open</span> (see also Section&#XA0;<a href="#section%3Ainclude">4.8</a>). The <code>include</code> command
performs file inclusion. The expression should evaluate to a file name.</p><p>The <code>open</code> form is like include, but it performs the inclusion only if the inclusion has not
already been performed. The <code>open</code> form is usually used to include library files. [jyh&#X2013; this
behavior will change in subsequent revisions.]</p><pre class="verbatim">    include expr
    open expr
</pre><p><a id="hevea_default636"></a><span class="c004">return</span> (see the description of functions in Section&#XA0;<a href="#section%3Afunctions">4.5</a>). The <code>return</code> command
terminates execution and returns a value from a function.</p><pre class="verbatim">    return expr
</pre><p><a id="hevea_default637"></a><span class="c004">value</span> (see the description of functions in Section&#XA0;<a href="#section%3Afunctions">4.5</a>). The <code>value</code> command is an identity.
Syntactically, it is used to coerce a n expression to a statement.</p><pre class="verbatim">    value expr
</pre><p><a id="hevea_default638"></a><span class="c004">export</span> (see the section on scoping &#X2014; Section&#XA0;<a href="#section%3Aexport">6.3</a>). The <code>export</code> command exports
a environment from a nested block. If no arguments are given, the entire environment is exported.
Otherwise, the export is limited to the specified identifiers.</p><pre class="verbatim">    export expr
</pre><p><a id="hevea_default639"></a><span class="c004">while</span> (see also the <a href="#fun%3Awhile"><CODE>while</CODE> function</a> description). The <code>while</code> command introduces a <code>while</code> loop.</p><pre class="verbatim">    while expr
        indented-body
</pre><p><a id="hevea_default640"></a><a id="hevea_default641"></a><span class="c004">class, extends</span> (see the section on objects &#X2014; Section&#XA0;<a href="#section%3Aobjects">4.12</a>). The <code>class</code> command
specifies an identifier for an object. The <code>extends</code> command specifies a parent object.</p><pre class="verbatim">    class id
    extends expr
</pre>
<!--TOC subsubsection id="sec614" Variable definitions-->
<h4 class="subsubsection" id="sec614">B.2.2.2&#XA0;&#XA0;Variable definitions</h4><!--SEC END --><p>See the section on variables (Section&#XA0;<a href="#section%3Avariables">4.1</a>). The simplest variable definition has the
following syntax. The <code>=</code> form is a new definition. The += form appends the value to
an existing definition.</p><pre class="verbatim">    id = expr
    id += expr

    osh&gt; X = 1
    - : "1" : Sequence
    osh&gt; X += 7
    - : "1" " " "7" : Sequence
</pre><p>A multi-line form is allowed, where the value is computed by an indented body.</p><pre class="verbatim">    id {+}=
        indented-body

    osh&gt; X =
             Y = HOME
             println(Y is $Y)
             getenv($Y)
    Y is HOME
    - : "/home/jyh" : Sequence
</pre><p>The name may be qualified qith one of the <code>public</code>, <code>prtected</code>, or <code>private</code>
modifiers. Public variables are dynamically scoped. Protected variables are fields in the current
object. Private variables are statically scoped.</p><p>[jyh: revision 0.9.9 introduces modular namespaces; the meaning of these qualifiers is slightly changed.]</p><pre class="verbatim">    public.X = $(addsuffix .c, 1 2 3)
    protected.Y = $(getenv HOME)
    private.Z = $"Hello world"
</pre>
<!--TOC subsubsection id="sec615" Applications and function definitions-->
<h4 class="subsubsection" id="sec615">B.2.2.3&#XA0;&#XA0;Applications and function definitions</h4><!--SEC END --><p>See the section on functions (Section&#XA0;<a href="#section%3Afunctions">4.5</a>). A function-application statement is specified as a
function name, followed a parenthesized list of comma-separated arguments.</p><pre class="verbatim">    osh&gt; println($"Hello world")

    osh&gt; FILES = 1 2 3
    - : 1 2 3
    osh&gt; addsuffix(.c, $(FILES))
    - : 1.c 2.c 3.c

    # The following forms are equivalent
    osh&gt; value $(println $"Hello world")
    osh&gt; value $(addsuffix .c, $(FILES))
    - : 1.c 2.c 3.c
</pre><p>If the function application has a body, the body is passed (lazily) to the function as its first
argument. [jyh: in revision 0.9.8 support is incomplete.] When using <code>osh</code>, the application
must be followed by a colon <code>:</code> to indicate that the application has a body.</p><pre class="verbatim">    # In its 3-argument form, the foreach function takes
    # a body, a variable, and an array.  The body is evaluated
    # for each element of the array, with the variable bound to
    # the element value.
    #
    # The colon is required only for interactive sessions.
    osh&gt; foreach(x =&gt; 1 2 3):
            add($x, 1)
    - : 2 3 4
</pre><p>Functions are defined in a similar form, where the parameter list is specified as a comma-separated
list of identifiers, and the body of the function is indented.</p><pre class="verbatim">    osh&gt; f(i, j) =
            add($i, $j)
    - : &lt;fun 2&gt;
    osh&gt; f(3, 7)
    - : 10 : Int
</pre>
<!--TOC subsubsection id="sec616" Objects-->
<h4 class="subsubsection" id="sec616">B.2.2.4&#XA0;&#XA0;Objects</h4><!--SEC END --><p>See the section on objects (Section&#XA0;<a href="#section%3Aobjects">4.12</a>). Objects are defined as an identifier with a
terminal period. The body of the object is indented.</p><pre class="verbatim">    Obj. =
        class Obj

        X = 1
        Y = $(sub $X, 12)
        new(i, j) =
           X = $i
           Y = $j
           value $(this)
        F() =
           add($X, $Y)
        println($Y)
</pre><p>The body of the object has the usual form of an indented body, but new variable definitions are
added to the object, not the global environment. The object definition above defines an object with
(at least) the fields <code>X</code> and <code>Y</code>, and methods <code>new</code> and <code>F</code>. The name of the
object is defined with the <code>class</code> command as <code>Obj</code>.</p><p>The <code>Obj</code> itself has fields <code>X = 1</code> and <code>Y = -11</code>. The <code>new</code> method has the
typical form of a constructor-style method, where the fields of the object are initialized to new
values, and the new object returned (<code>$(this)</code> refers to the current object).</p><p>The <code>F</code> method returns the sum of the two fields <code>X</code> and <code>Y</code>.</p><p>When used in an object definition, the += form adds the new definitions to an existing object.</p><pre class="verbatim">   pair. =
      x = 1
      y = 2

   pair. +=
      y = $(add $y, 3)
   # pair now has fields (x = 1, and y = 5)
</pre><p>The <code>extends</code> form specifies inheritance. Multiple inheritance is allowed. At evaluation
time, the <code>extends</code> directive performs inclusion of the entire parent object.</p><pre class="verbatim">   pair. =
      x = 1
      y = 2

   depth. =
      z = 3
      zoom(dz) =
         z = $(add $z, $(dz))
         return $(this)

   triple. =
      extends $(pair)
      extends $(depth)

      crazy() =
         zoom($(mul $x, $y))
</pre><p>In this example, the <code>triple</code> object has three fields x, y, and z; and two methods <code>zoom</code>
and <code>crazy</code>.</p>
<!--TOC subsubsection id="sec617" Rules-->
<h4 class="subsubsection" id="sec617">B.2.2.5&#XA0;&#XA0;Rules</h4><!--SEC END --><p>See the chapter on rules (Chapter&#XA0;<a href="#chapter%3Arules">8</a>). A rule has the following parts.
</p><ol class="enumerate" type=1><li class="li-enumerate">
A sequence of targets;
</li><li class="li-enumerate">one or two colons;
</li><li class="li-enumerate">a sequence of <em>dependencies</em> and <em>rule options</em>;
</li><li class="li-enumerate">and an indented body.
</li></ol><p>The targets are the files to be built, and the dependencies are the files it depends on. If two
colons are specified, it indicates that there may be multiple rules to build the given targets;
otherwise only one rule is allowed.</p><p>If the target contains a <code>%</code> character, the rule is called <em>implicit</em>, and is considered
whenever a file matching that pattern is to be built. For example, the following rule specifies a
default rule for compiling OCaml files.</p><pre class="verbatim">    %.cmo: %.ml %.mli
       $(OCAMLC) -c $&lt;
</pre><p>This rule would be consulted as a default way of building any file with a <code>.cmo</code> suffix. The
dependencies list is also constructed based on the pattern match. For example, if this rule were
used to build a file <code>foo.cmo</code>, then the dependency list would be <code>foo.ml foo.mli</code>.</p><p>There is also a three-part version of a rule, where the rule specification has three parts.</p><pre class="verbatim">    targets : patterns : dependencies rule-options
       indented-body
</pre><p>In this case, the patterns <em>must</em> contain a single <code>%</code> character. Three-part rules are
also considered <em>implicit</em>. For example, the following defines a default rule for the
<code>clean</code> target.</p><pre class="verbatim">    .PHONY: clean
    
    clean: %:
        rm -f *$(EXT_OBJ) *$(EXT_LIB)
</pre><p>Three-part implicit rules are inherited by the subdirectories in the exact same way as with
the usual two-part implicit rules.</p><p>There are several special targets, including the following.</p><ul class="itemize"><li class="li-itemize">
<code>.PHONY</code> : declare a &#X201C;phony&#X201D; target. That is, the target does not correspond to a file.
</li><li class="li-itemize"><code>.ORDER</code> : declare a rule for dependency ordering.
</li><li class="li-itemize"><code>.INCLUDE</code> : define a rule to generate a file for textual inclusion.
</li><li class="li-itemize"><code>.SUBDIRS</code> : specify subdirectories that are part of the project.
</li><li class="li-itemize"><code>.SCANNER</code> : define a rule for dependency scanning.
</li></ul><p>There are several rule options.</p><ul class="itemize"><li class="li-itemize">
<code>:optional: dependencies</code> the subsequent dependencies are optional, it is acceptable if they do not exist.
</li><li class="li-itemize"><code>:exists: dependencies</code> the subsequent dependencies must exist, but changes to not affect
whether this rule is considered out-of-date.
</li><li class="li-itemize"><code>:effects: targets</code> the subsequent files are side-effects of the rule. That is, they may be
created and/or modified while the rule is executing. Rules with overlapping side-effects are never
executed in parallel.
</li><li class="li-itemize"><code>:scanner: name</code> the subsequent name is the name of the <code>.SCANNER</code> rule for the target to be built.
</li><li class="li-itemize"><code>:value: expr</code> the <code>expr</code> is a &#X201C;value&#X201D; dependency. The rule is considered
out-of-date whenever the value of the <code>expr</code> changes.
</li></ul><p>Several variables are defined during rule evaluation.</p><ul class="itemize"><li class="li-itemize">
<code>$*</code><a id="hevea_default642"></a><a id="hevea_var125"></a> : the name of the target with the outermost suffix removed.
</li><li class="li-itemize"><code>$&gt;</code><a id="hevea_default643"></a><a id="hevea_var126"></a> : the name of the target with all suffixes removed.
</li><li class="li-itemize"><code>$@</code><a id="hevea_default644"></a><a id="hevea_var127"></a> : the name of the target.
</li><li class="li-itemize"><code>$^</code><a id="hevea_default645"></a><a id="hevea_var128"></a> : the explicit file dependencies, sorted alphabetically, with duplicates removed.
</li><li class="li-itemize"><code>$+</code><a id="hevea_default646"></a><a id="hevea_var129"></a> : all explicit file dependencies, with order preserved.
</li><li class="li-itemize"><code>$&lt;</code><a id="hevea_default647"></a><a id="hevea_var130"></a> : the first explicit file dependency.
</li><li class="li-itemize"><code>$&amp;</code><a id="hevea_default648"></a><a id="hevea_var131"></a> : the free values of the rule (often used in <code>:value:</code> dependencies).
</li></ul>
<!--TOC subsubsection id="sec618" Shell commands-->
<h4 class="subsubsection" id="sec618">B.2.2.6&#XA0;&#XA0;Shell commands</h4><!--SEC END --><p>See the chapter on shell commands (Chapter&#XA0;<a href="#chapter%3Ashell">11</a>).</p><p>While it is possible to give a precise specification of shell commands, the informal description is
simpler. Any non-empty statement where each prefix is <em>not</em> one of the other statements, is
considered to be a shell command. Here are some examples.</p><pre class="verbatim">    ls                                 -- shell command
    echo Hello world &gt; /dev/null       -- shell command
    echo(Hello world)                  -- function application
    echo(Hello world) &gt; /dev/null      -- syntax error
    echo Hello: world                  -- rule
    X=1 getenv X                       -- variable definition
    env X=1 getenv X                   -- shell command
    if true                            -- special form
    \if true                           -- shell command
    "if" true                          -- shell command
</pre>
<!--TOC section id="sec619" Dollar modifiers-->
<h2 class="section" id="sec619">B.3&#XA0;&#XA0;Dollar modifiers</h2><!--SEC END --><p>
<a id="section:dollar"></a></p><p>Inline applications have a function and zero-or-more arguments. Evaluation is normally strict: when
an application is evaluated, the function identifier is evaluated to a function, the arguments are
then evaluated and the function is called with the evaluated arguments.</p><p>The additional &#X201C;dollar&#X201D; sequences specify additional control over evaluation. The token <code>$`</code>
defines a &#X201C;lazy&#X201D; application, where evaluation is delayed until a value is required. The
<code>$,</code> sequence performs an &#X201C;eager&#X201D; application within a lazy context.</p><p>To illustrate, consider the expression <code>$(addsuffix .c, $(FILES))</code>. The <code>addsuffix</code>
function appends its first argument to each value in its second argument. The following <code>osh</code>
interaction demonstrates the normal bahavior.</p><pre class="verbatim">osh&gt; FILES[] = a b c
- : &lt;array a b c&gt;
osh&gt; X = $(addsuffix .c, $(FILES))
- : &lt;array ...&gt;
osh&gt; FILES[] = 1 2 3 # redefine FILES
- : &lt;array 1 2 3&gt;
osh&gt; println($"$X")  # force the evaluation and print
a.c b.c c.c
</pre><p>When the lazy operator <code>$`</code> is used instead, evaluation is delayed until it is printed. In the
following sample, the value for <code>X</code> has changed to the <code>$(apply ..)</code> form, but otherwise
the result is unchanged because it it printed immediately.</p><pre class="verbatim">osh&gt; FILES[] = a b c
- : &lt;array a b c&gt;
osh&gt; SUF = .c
- : ".c"
osh&gt; X = $`(addsuffix $(SUF), $(FILES))
- : $(apply global.addsuffix ...)
osh&gt; println($"$X")  # force the evaluation and print
a.c b.c c.c
</pre><p>However, consider what happens if we redefine the <code>FILES</code> variable after the definition for
<code>X</code>. In the following sample, the result changes because evaluation occurs <em>after</em> the
values for <code>FILES</code> has been redefined.</p><pre class="verbatim">osh&gt; FILES[] = a b c
- : &lt;array a b c&gt;
osh&gt; SUF = .c
- : ".c"
osh&gt; X = $`(addsuffix $(SUF), $(FILES))
- : $(apply global.addsuffix ...)
osh&gt; SUF = .x
osh&gt; FILES[] = 1 2 3
osh&gt; println($"$X")  # force the evaluation and print
1.x 2.x 3.x
</pre><p>In some cases, more explicit control is desired over evaluation. For example, we may wish to
evaluate <code>SUF</code> early, but allow for changes to the <code>FILES</code> variable. The <code>$,(SUF)</code>
expression forces early evaluation.</p><pre class="verbatim">osh&gt; FILES[] = a b c
- : &lt;array a b c&gt;
osh&gt; SUF = .c
- : ".c"
osh&gt; X = $`(addsuffix $,(SUF), $(FILES))
- : $(apply global.addsuffix ...)
osh&gt; SUF = .x
osh&gt; FILES[] = 1 2 3
osh&gt; println($"$X")  # force the evaluation and print
1.c 2.c 3.c
</pre>
<!--TOC section id="sec620" Programming syntax-->
<h2 class="section" id="sec620">B.4&#XA0;&#XA0;Programming syntax</h2><!--SEC END --><p>
<a id="section:program-syntax"></a></p><p><span class="c003">This feature was introduced in version 0.9.8.6.</span></p><p>The standard OMake language is designed to make it easy to specify strings. By default, all values
are strings, and strings are any sequence of text and variable references; quote symbols are not
necessary.</p><pre class="verbatim">    CFLAGS += -g -Wall
</pre><p>The tradeoff is that variable references are a bit longer, requiring the syntax <code>$(...)</code>.</p><p>The &#X201C;<em>program syntax</em>&#X201D; inverts this behavior. The main differences are the following.</p><ol class="enumerate" type=1><li class="li-enumerate">
Identifiers represent variables.
</li><li class="li-enumerate">Strings must be quoted.
</li><li class="li-enumerate">Function application is written <code>f(exp1, ..., expN)</code>.
</li></ol><p>It is only the syntax of expressions that changes. The large scale program is as before: a program
is a sequence of definitions, commands, indentation is significant, etc. However, the syntax of expressions
changes, where an expression is 1) the value on the right of a variable definition <code>Var = &lt;exp&gt;</code>, or 2)
an argument to a function.</p><p>The following table lists the syntax for expressions.</p><table class="c000 cellpading0"><tr><td class="c007">e</td><td class="c005">::=</td><td class="c006">0, 1, 2, ...</td><td class="c006">integers</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006">0.1, 1E+23, ...</td><td class="c006">floating-point constants</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006">x, ABC, ...</td><td class="c006">identifiers</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006">id<code>::</code>id</td><td class="c006">scoped name</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006">id.id. ... id</td><td class="c006">projection</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006"><code>-</code> e</td><td class="c006">negation</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006">e <code>+</code> e | e <code>-</code> e | e <code>*</code> e | e <code>/</code> e | e <code>%</code> e</td><td class="c006">arithmetic</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006">e <code>^</code> e | e <code>&amp;</code> e | e <code>|</code> e</td><td class="c006">bitwise operations</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006">e <code>&lt;&lt;</code> e | e <code>&gt;&gt;</code> e | e <code>&gt;&gt;&gt;</code> e</td><td class="c006">shifting</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006">e <code>&amp;&amp;</code> e | e <code>||</code> e</td><td class="c006">Boolean operations</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006">e <code>&lt;</code> e | e <code>&lt;=</code> e | e <code>=</code> e | e <code>&gt;=</code> e | e <code>&gt;</code> e</td><td class="c006">comparisons</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006">e<code>(</code>e<code>,</code> ...<code>,</code> e<code>)</code></td><td class="c006">function application</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006">e<code>[</code>e<code>]</code></td><td class="c006">array subscripting</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006"><code>(</code> e <code>)</code></td><td class="c006">parenthesized expressions</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006"><code>"</code> ... <code>"</code> | <code>'</code> ... <code>'</code></td><td class="c006">strings</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006"><code>$"</code> ... <code>"</code> | <code>$'</code> ... <code>'</code></td><td class="c006">strings</td></tr>
<tr><td class="c007">&nbsp;</td><td class="c005">|</td><td class="c006"><code>$(</code> ... <code>)</code></td><td class="c006">variables and applications
</td></tr>
</table><p>Note that the <code>$</code>-style expressions are still permitted.</p>
<!--TOC subsection id="sec621" Examples-->
<h3 class="subsection" id="sec621">B.4.1&#XA0;&#XA0;Examples</h3><!--SEC END --><p>The program-syntax is specified with the directive <code>program-syntax</code>, which is scoped in the normal way.</p><pre class="verbatim">    program-syntax

    i = 0
    l[] =
    while i &lt; 10
        l[] += i
        i = i + 1
    println($"The indexes are: $l")
</pre><p>You can mix normal and program syntax.</p><pre class="verbatim">program-syntax

add2(i) =
    eprintln($"add2($i)")
    return i + 2

mul2(i, j) =
    eprintln($"mul2($i, $j)")
    return i * j

println(mul2(mul2(3, 4), $(add2 1 &lt;&lt; 20)))
</pre><!--TOC chapter id="sec622" Index-->
<h1 class="chapter" id="sec622">Index</h1><!--SEC END --><p></p><table class="c000 cellpading0"><tr><td class="c008"><ul class="indexenv"><li class="li-indexenv">
&#X2013;absname, <a href="#hevea_default623">A.3.20</a>
</li><li class="li-indexenv">&#X2013;all-dependencies, <a href="#hevea_default618">A.3.15</a>
</li><li class="li-indexenv">&#X2013;configure, <a href="#hevea_default612">A.3.9</a>
</li><li class="li-indexenv">&#X2013;depend, <a href="#hevea_default611">A.3.8</a>
</li><li class="li-indexenv">&#X2013;dotomake, <a href="#hevea_default614">A.3.11</a>
</li><li class="li-indexenv">&#X2013;force-dotomake, <a href="#hevea_default613">A.3.10</a>
</li><li class="li-indexenv">&#X2013;install, <a href="#hevea_default620">A.3.17</a>
</li><li class="li-indexenv">&#X2013;install-all, <a href="#hevea_default621">A.3.18</a>
</li><li class="li-indexenv">&#X2013;install-force, <a href="#hevea_default622">A.3.19</a>
</li><li class="li-indexenv">&#X2013;output-at-end, <a href="#hevea_default602">A.2.11</a>
</li><li class="li-indexenv">&#X2013;output-normal, <a href="#hevea_default599">A.2.8</a>
</li><li class="li-indexenv">&#X2013;output-only-errors, <a href="#hevea_default601">A.2.10</a>
</li><li class="li-indexenv">&#X2013;output-postpone, <a href="#hevea_default600">A.2.9</a>
</li><li class="li-indexenv">&#X2013;print-dependencies, <a href="#hevea_default616">A.3.13</a>
</li><li class="li-indexenv">&#X2013;print-exit, <a href="#hevea_default597">A.2.6</a>
</li><li class="li-indexenv">&#X2013;print-status, <a href="#hevea_default596">A.2.5</a>
</li><li class="li-indexenv">&#X2013;progress, <a href="#hevea_default595">A.2.4</a>
</li><li class="li-indexenv">&#X2013;show-dependencies, <a href="#hevea_default617">A.3.14</a>
</li><li class="li-indexenv">&#X2013;verbose, <a href="#hevea_default598">A.2.7</a>
</li><li class="li-indexenv">&#X2013;verbose-dependencies, <a href="#hevea_default619">A.3.16</a>
</li><li class="li-indexenv">-j, <a href="#hevea_default615">A.3.12</a>
</li><li class="li-indexenv">-k, <a href="#hevea_default604">A.3.1</a>
</li><li class="li-indexenv">-n, <a href="#hevea_default605">A.3.2</a>
</li><li class="li-indexenv">-o, <a href="#hevea_default603">A.2.12</a>
</li><li class="li-indexenv">-P, <a href="#hevea_default607">A.3.4</a>
</li><li class="li-indexenv">-p, <a href="#hevea_default606">A.3.3</a>
</li><li class="li-indexenv">-R, <a href="#hevea_default608">A.3.5</a>
</li><li class="li-indexenv">-S, <a href="#hevea_default593">A.2.2</a>
</li><li class="li-indexenv">-s, <a href="#hevea_default592">A.2.1</a>
</li><li class="li-indexenv">-t, <a href="#hevea_default609">A.3.6</a>
</li><li class="li-indexenv">-U, <a href="#hevea_default610">A.3.7</a>
</li><li class="li-indexenv">-w, <a href="#hevea_default594">A.2.3</a>
<br>
<br>
</li><li class="li-indexenv">.BUILD_BEGIN, <a href="#hevea_default415">13.1</a>
</li><li class="li-indexenv">.BUILD_FAILURE, <a href="#hevea_default417">13.1</a>
</li><li class="li-indexenv">.BUILD_SUCCESS, <a href="#hevea_default416">13.1</a>
</li><li class="li-indexenv">.BUILDORDER, <a href="#hevea_default232">10.3.6</a>
</li><li class="li-indexenv">.DEFAULT, <a href="#hevea_default57">8.7</a>, <a href="#hevea_default65">8.12.1</a>
</li><li class="li-indexenv">.INCLUDE, <a href="#hevea_default59">8.9</a>
</li><li class="li-indexenv">.MEMO, <a href="#hevea_default29">4.15.1.1</a>
</li><li class="li-indexenv">.ORDER, <a href="#hevea_default231">10.3.6</a>
</li><li class="li-indexenv">.omakerc, <a href="#hevea_default627">A.8</a>
</li><li class="li-indexenv">.PHONY, <a href="#hevea_default40">6.3</a>, <a href="#hevea_default60">8.10</a>, <a href="#hevea_default63">8.11.3</a>, <a href="#hevea_default64">8.12.1</a>, <a href="#hevea_default66">8.12.2</a>
</li><li class="li-indexenv">.RULE, <a href="#hevea_default39">6.3</a>
</li><li class="li-indexenv">.SCANNER, <a href="#hevea_default8">3.4.3</a>, <a href="#hevea_default55">8.6</a>, <a href="#hevea_default62">8.11.2</a>
</li><li class="li-indexenv">.STATIC, <a href="#hevea_default28">4.15.1</a>
</li><li class="li-indexenv">.SUBDIRS, <a href="#hevea_default6">3</a>, <a href="#hevea_default58">8.8</a>
</li><li class="li-indexenv">.SUBDIRS bodies, <a href="#hevea_default10">3.5</a>
<br>
<br>
</li><li class="li-indexenv">:effects:, <a href="#hevea_default53">8.5.2</a>
</li><li class="li-indexenv">:exists:, <a href="#hevea_default52">8.5.1</a>
</li><li class="li-indexenv">:key:, <a href="#hevea_default30">4.15.1.2</a>
</li><li class="li-indexenv">:scanner:, <a href="#hevea_default56">8.6.1</a>
</li><li class="li-indexenv">:value:, <a href="#hevea_default54">8.5.3</a>
<br>
<br>
</li><li class="li-indexenv">$&amp;, <a href="#hevea_default648">B.2.2.5</a>
</li><li class="li-indexenv">$*, <a href="#hevea_default42">8</a>, <a href="#hevea_default642">B.2.2.5</a>
</li><li class="li-indexenv">$+, <a href="#hevea_default45">8</a>, <a href="#hevea_default646">B.2.2.5</a>
</li><li class="li-indexenv">$&lt;, <a href="#hevea_default46">8</a>, <a href="#hevea_default647">B.2.2.5</a>
</li><li class="li-indexenv">$&gt;, <a href="#hevea_default643">B.2.2.5</a>
</li><li class="li-indexenv">$@, <a href="#hevea_default43">8</a>, <a href="#hevea_default644">B.2.2.5</a>
</li><li class="li-indexenv">$^, <a href="#hevea_default44">8</a>, <a href="#hevea_default645">B.2.2.5</a>
<br>
<br>
</li><li class="li-indexenv">ABORT_ON_COMMAND_ERROR, <a href="#hevea_default435">13.4.1</a>
</li><li class="li-indexenv">ABORT_ON_DEPENDENCY_ERRORS, <a href="#hevea_default528">13.6.4</a>
</li><li class="li-indexenv">AC_MSG_CHECKING, <a href="#hevea_default573">14.2</a>
</li><li class="li-indexenv">AC_MSG_ERROR, <a href="#hevea_default576">14.2</a>
</li><li class="li-indexenv">AC_MSG_RESULT, <a href="#hevea_default574">14.2</a>
</li><li class="li-indexenv">AC_MSG_WARN, <a href="#hevea_default575">14.2</a>
</li><li class="li-indexenv">AC_TRY_COMPILE, <a href="#hevea_default577">14.2</a>
</li><li class="li-indexenv">AC_TRY_LINK, <a href="#hevea_default578">14.2</a>
</li><li class="li-indexenv">AC_TRY_RUN, <a href="#hevea_default579">14.2</a>
</li><li class="li-indexenv">AR, <a href="#hevea_default460">13.5.2</a>
</li><li class="li-indexenv">Array, <a href="#hevea_default374">12.1.7</a>
</li><li class="li-indexenv">AS, <a href="#hevea_default457">13.5.2</a>
</li><li class="li-indexenv">ASFLAGS, <a href="#hevea_default458">13.5.2</a>
</li><li class="li-indexenv">ASOUT, <a href="#hevea_default459">13.5.2</a>
</li><li class="li-indexenv">absname, <a href="#hevea_default204">10.1.9</a>
</li><li class="li-indexenv">accept, <a href="#hevea_default292">10.8.31</a>
</li><li class="li-indexenv">add, <a href="#hevea_default163">9.4.3</a>
</li><li class="li-indexenv">add-project-directories, <a href="#hevea_default254">10.6.2</a>
</li><li class="li-indexenv">add-wrapper, <a href="#hevea_default141">9.3.29</a>
</li><li class="li-indexenv">addprefix, <a href="#hevea_default139">9.3.27</a>
</li><li class="li-indexenv">addprefixes, <a href="#hevea_default135">9.3.23</a>
</li><li class="li-indexenv">addsuffix, <a href="#hevea_default132">9.3.21</a>
</li><li class="li-indexenv">addsuffixes, <a href="#hevea_default134">9.3.23</a>
</li><li class="li-indexenv">aliases, <a href="#hevea_default591">15.2</a>
</li><li class="li-indexenv">and, <a href="#hevea_default84">9.2.3</a>
</li><li class="li-indexenv">apply, <a href="#hevea_default187">9.5.2</a>
</li><li class="li-indexenv">applya, <a href="#hevea_default188">9.5.3</a>
</li><li class="li-indexenv">array, <a href="#hevea_default104">9.3.1</a>
</li><li class="li-indexenv">arrays, <a href="#hevea_default11">4.3</a>
</li><li class="li-indexenv">asr, <a href="#hevea_default174">9.4.3</a>
</li><li class="li-indexenv">awk, <a href="#hevea_default9">3.4.3</a>, <a href="#hevea_default313">10.11.5</a>
<br>
<br>
</li><li class="li-indexenv">BIBTEX, <a href="#hevea_default541">13.7.1</a>
</li><li class="li-indexenv">BUILD_SUMMARY, <a href="#hevea_default80">9.1</a>
</li><li class="li-indexenv">BYTE_ENABLED, <a href="#hevea_default512">13.6.2</a>
</li><li class="li-indexenv">basename, <a href="#hevea_default199">10.1.4</a>
</li><li class="li-indexenv">bg, <a href="#hevea_default362">11.10.2</a>, <a href="#hevea_default393">12.1.22</a>
</li><li class="li-indexenv">bind, <a href="#hevea_default290">10.8.29</a>
</li><li class="li-indexenv">break, <a href="#hevea_default157">9.3.45</a>
</li><li class="li-indexenv">build, <a href="#hevea_default429">13.3.6</a>
</li><li class="li-indexenv">build model, <a href="#hevea_default3">3</a>
<br>
<br>
</li><li class="li-indexenv">CAMLP4, <a href="#hevea_default498">13.6.2</a>
</li><li class="li-indexenv">CC, <a href="#hevea_default449">13.5.2</a>
</li><li class="li-indexenv">CCOUT, <a href="#hevea_default456">13.5.2</a>
</li><li class="li-indexenv">CDLL_IMPLIES_STATIC, <a href="#hevea_default471">13.5.4.1</a>
</li><li class="li-indexenv">CFLAGS, <a href="#hevea_default452">13.5.2</a>
</li><li class="li-indexenv">CGeneratedFiles, <a href="#hevea_default467">13.5.3.1</a>
</li><li class="li-indexenv">Channel, <a href="#hevea_default382">12.1.15</a>
</li><li class="li-indexenv">CheckCHeader, <a href="#hevea_default568">14.1.6</a>
</li><li class="li-indexenv">CheckCLib, <a href="#hevea_default570">14.1.7</a>
</li><li class="li-indexenv">CheckProg, <a href="#hevea_default572">14.1.8</a>
</li><li class="li-indexenv">CL_FOUND, <a href="#hevea_default447">13.5.1.2</a>
</li><li class="li-indexenv">ConfMsgChecking, <a href="#hevea_default558">14.1.1</a>
</li><li class="li-indexenv">ConfMsgError, <a href="#hevea_default561">14.1.2</a>
</li><li class="li-indexenv">ConfMsgFound, <a href="#hevea_default563">14.1.3</a>
</li><li class="li-indexenv">ConfMsgResult, <a href="#hevea_default559">14.1.1</a>
</li><li class="li-indexenv">ConfMsgWarn, <a href="#hevea_default560">14.1.2</a>
</li><li class="li-indexenv">ConfMsgYesNo, <a href="#hevea_default562">14.1.3</a>
</li><li class="li-indexenv">CPP, <a href="#hevea_default451">13.5.2</a>
</li><li class="li-indexenv">CProgram, <a href="#hevea_default479">13.5.4.5</a>
</li><li class="li-indexenv">CProgramCopy, <a href="#hevea_default480">13.5.4.6</a>
</li><li class="li-indexenv">CProgramInstall, <a href="#hevea_default481">13.5.4.7</a>
</li><li class="li-indexenv">CWD, <a href="#hevea_default432">13.4.1</a>
</li><li class="li-indexenv">CXX, <a href="#hevea_default450">13.5.2</a>
</li><li class="li-indexenv">CXXFLAGS, <a href="#hevea_default453">13.5.2</a>
</li><li class="li-indexenv">CXXProgram, <a href="#hevea_default482">13.5.4.8</a>
</li><li class="li-indexenv">CXXProgramInstall, <a href="#hevea_default483">13.5.4.8</a>
</li><li class="li-indexenv">c-escaped, <a href="#hevea_default121">9.3.15</a>
</li><li class="li-indexenv">capitalize, <a href="#hevea_default149">9.3.37</a>
</li><li class="li-indexenv">case, <a href="#hevea_default91">9.2.6</a>
</li><li class="li-indexenv">cat, <a href="#hevea_default310">10.11.2</a>, <a href="#hevea_default412">12.1.22</a>
</li><li class="li-indexenv">cats and dogs, <a href="#hevea_default7">3.4</a>
</li><li class="li-indexenv">cd, <a href="#hevea_default360">11.9.2</a>, <a href="#hevea_default392">12.1.22</a>
</li><li class="li-indexenv">channel-name, <a href="#hevea_default273">10.8.12</a>
</li><li class="li-indexenv">chmod, <a href="#hevea_default248">10.5.9</a>, <a href="#hevea_default411">12.1.22</a>
</li><li class="li-indexenv">chown, <a href="#hevea_default249">10.5.10</a>
</li><li class="li-indexenv">class, <a href="#hevea_default640">B.2.2.1</a>
</li><li class="li-indexenv">classes, <a href="#hevea_default25">4.13</a>
</li><li class="li-indexenv">close, <a href="#hevea_default265">10.8.5</a>
</li><li class="li-indexenv">cmp-versions, <a href="#hevea_default420">13.2.3</a>
</li><li class="li-indexenv">compare, <a href="#hevea_default194">9.7.4</a>
</li><li class="li-indexenv">concat, <a href="#hevea_default106">9.3.3</a>
</li><li class="li-indexenv">conditionals, <a href="#hevea_default20">4.10</a>
</li><li class="li-indexenv">connect, <a href="#hevea_default293">10.8.32</a>
</li><li class="li-indexenv">constants, <a href="#hevea_default31">4.16</a>
</li><li class="li-indexenv">cp, <a href="#hevea_default408">12.1.22</a>
</li><li class="li-indexenv">create-lazy-map, <a href="#hevea_default190">9.5.4</a>
</li><li class="li-indexenv">create-map, <a href="#hevea_default189">9.5.4</a>
<br>
<br>
</li><li class="li-indexenv">DefineCommandVars, <a href="#hevea_default421">13.2.4</a>
</li><li class="li-indexenv">DIRSEP, <a href="#hevea_default439">13.4.2</a>
</li><li class="li-indexenv">Dir, <a href="#hevea_default381">12.1.14</a>
</li><li class="li-indexenv">DVIPDFM, <a href="#hevea_default545">13.7.1</a>
</li><li class="li-indexenv">DVIPDFMFLAGS, <a href="#hevea_default546">13.7.1</a>
</li><li class="li-indexenv">DVIPS, <a href="#hevea_default543">13.7.1</a>
</li><li class="li-indexenv">DVIPSFLAGS, <a href="#hevea_default544">13.7.1</a>
</li><li class="li-indexenv">DynamicCLibrary, <a href="#hevea_default470">13.5.4.1</a>
</li><li class="li-indexenv">DynamicCLibraryCopy, <a href="#hevea_default473">13.5.4.2</a>
</li><li class="li-indexenv">DynamicCLibraryInstall, <a href="#hevea_default475">13.5.4.3</a>
</li><li class="li-indexenv">DynamicCXXLibrary, <a href="#hevea_default487">13.5.4.9</a>
</li><li class="li-indexenv">DynamicCXXLibraryCopy, <a href="#hevea_default488">13.5.4.9</a>
</li><li class="li-indexenv">DynamicCXXLibraryInstall, <a href="#hevea_default489">13.5.4.9</a>
</li><li class="li-indexenv">declare, <a href="#hevea_default37">5.7</a>
</li><li class="li-indexenv">decode-uri, <a href="#hevea_default127">9.3.17</a>
</li><li class="li-indexenv">default, <a href="#hevea_default92">9.2.6</a>
</li><li class="li-indexenv">defined, <a href="#hevea_default96">9.2.10</a>
</li><li class="li-indexenv">defined-env, <a href="#hevea_default97">9.2.11</a>
</li><li class="li-indexenv">dependencies, <a href="#hevea_default422">13.3.1</a>
</li><li class="li-indexenv">dependencies-all, <a href="#hevea_default423">13.3.1</a>
</li><li class="li-indexenv">dependencies-proper, <a href="#hevea_default424">13.3.1</a>
</li><li class="li-indexenv">digest, <a href="#hevea_default211">10.2.5</a>, <a href="#hevea_default404">12.1.22</a>
</li><li class="li-indexenv">digest-in-path, <a href="#hevea_default216">10.2.7</a>
</li><li class="li-indexenv">digest-in-path-optional, <a href="#hevea_default217">10.2.7</a>
</li><li class="li-indexenv">digest-optional, <a href="#hevea_default212">10.2.5</a>
</li><li class="li-indexenv">digest-string, <a href="#hevea_default213">10.2.5</a>
</li><li class="li-indexenv">dir, <a href="#hevea_default196">10.1.1</a>
</li><li class="li-indexenv">dirname, <a href="#hevea_default200">10.1.5</a>
</li><li class="li-indexenv">dirof, <a href="#hevea_default202">10.1.7</a>
</li><li class="li-indexenv">div, <a href="#hevea_default166">9.4.3</a>
</li><li class="li-indexenv">dup, <a href="#hevea_default274">10.8.13</a>
</li><li class="li-indexenv">dup2, <a href="#hevea_default275">10.8.14</a>
<br>
<br>
</li><li class="li-indexenv">EMPTY, <a href="#hevea_default433">13.4.1</a>
</li><li class="li-indexenv">EXE, <a href="#hevea_default444">13.4.2</a>
</li><li class="li-indexenv">EXT_ASM, <a href="#hevea_default443">13.4.2</a>
</li><li class="li-indexenv">EXT_DLL, <a href="#hevea_default442">13.4.2</a>
</li><li class="li-indexenv">EXT_LIB, <a href="#hevea_default441">13.4.2</a>
</li><li class="li-indexenv">EXT_OBJ, <a href="#hevea_default440">13.4.2</a>
</li><li class="li-indexenv">Exception, <a href="#hevea_default386">12.1.19</a>
</li><li class="li-indexenv">echo, <a href="#hevea_default359">11.9.1</a>, <a href="#hevea_default390">12.1.22</a>
</li><li class="li-indexenv">else, <a href="#hevea_default88">9.2.5</a>, <a href="#hevea_default630">B.2.2.1</a>
</li><li class="li-indexenv">elseif, <a href="#hevea_default87">9.2.5</a>, <a href="#hevea_default629">B.2.2.1</a>
</li><li class="li-indexenv">encode-uri, <a href="#hevea_default128">9.3.17</a>
</li><li class="li-indexenv">eprint, <a href="#hevea_default299">10.9</a>
</li><li class="li-indexenv">eprintln, <a href="#hevea_default302">10.9</a>
</li><li class="li-indexenv">eprintv, <a href="#hevea_default305">10.10</a>
</li><li class="li-indexenv">eprintvln, <a href="#hevea_default308">10.10</a>
</li><li class="li-indexenv">eq, <a href="#hevea_default179">9.4.4</a>
</li><li class="li-indexenv">equal, <a href="#hevea_default83">9.2.2</a>
</li><li class="li-indexenv">exists-in-path, <a href="#hevea_default210">10.2.4</a>
</li><li class="li-indexenv">exit, <a href="#hevea_default95">9.2.9</a>, <a href="#hevea_default398">12.1.22</a>
</li><li class="li-indexenv">export, <a href="#hevea_default38">6.3</a>, <a href="#hevea_default155">9.3.43</a>, <a href="#hevea_default638">B.2.2.1</a>
</li><li class="li-indexenv">extends, <a href="#hevea_default641">B.2.2.1</a>
<br>
<br>
</li><li class="li-indexenv">File, <a href="#hevea_default380">12.1.13</a>
</li><li class="li-indexenv">Float, <a href="#hevea_default372">12.1.5</a>
</li><li class="li-indexenv">Fun, <a href="#hevea_default376">12.1.9</a>
</li><li class="li-indexenv">fg, <a href="#hevea_default363">11.10.3</a>, <a href="#hevea_default394">12.1.22</a>
</li><li class="li-indexenv">fgets, <a href="#hevea_default296">10.8.35</a>
</li><li class="li-indexenv">file, <a href="#hevea_default195">10.1.1</a>
</li><li class="li-indexenv">file-check-sort, <a href="#hevea_default233">10.3.7</a>
</li><li class="li-indexenv">file-exists, <a href="#hevea_default218">10.3.1</a>
</li><li class="li-indexenv">file-sort, <a href="#hevea_default228">10.3.6</a>
</li><li class="li-indexenv">filter, <a href="#hevea_default147">9.3.35</a>
</li><li class="li-indexenv">filter-exists, <a href="#hevea_default222">10.3.3</a>
</li><li class="li-indexenv">filter-out, <a href="#hevea_default148">9.3.36</a>
</li><li class="li-indexenv">filter-proper-targets, <a href="#hevea_default224">10.3.3</a>
</li><li class="li-indexenv">filter-targets, <a href="#hevea_default223">10.3.3</a>
</li><li class="li-indexenv">find, <a href="#hevea_default257">10.7.2</a>, <a href="#hevea_default414">12.1.22</a>
</li><li class="li-indexenv">find-build-targets, <a href="#hevea_default426">13.3.3</a>
</li><li class="li-indexenv">find-in-path, <a href="#hevea_default214">10.2.6</a>
</li><li class="li-indexenv">find-in-path-optional, <a href="#hevea_default215">10.2.6</a>
</li><li class="li-indexenv">find-ocaml-targets-in-path-optional, <a href="#hevea_default227">10.3.5</a>
</li><li class="li-indexenv">find-targets-in-path, <a href="#hevea_default225">10.3.4</a>
</li><li class="li-indexenv">find-targets-in-path-optional, <a href="#hevea_default226">10.3.4</a>
</li><li class="li-indexenv">float, <a href="#hevea_default161">9.4.2</a>
</li><li class="li-indexenv">flush, <a href="#hevea_default272">10.8.11</a>
</li><li class="li-indexenv">fopen, <a href="#hevea_default264">10.8.4</a>
</li><li class="li-indexenv">foreach, <a href="#hevea_default191">9.6.1</a>
</li><li class="li-indexenv">fprint, <a href="#hevea_default297">10.9</a>
</li><li class="li-indexenv">fprintln, <a href="#hevea_default300">10.9</a>
</li><li class="li-indexenv">fprintv, <a href="#hevea_default303">10.10</a>
</li><li class="li-indexenv">fprintvln, <a href="#hevea_default306">10.10</a>
</li><li class="li-indexenv">fsubst, <a href="#hevea_default314">10.11.6</a>
</li><li class="li-indexenv">fullname, <a href="#hevea_default203">10.1.8</a>
</li><li class="li-indexenv">fun, <a href="#hevea_default186">9.5.1</a>
</li><li class="li-indexenv">functions, <a href="#hevea_default13">4.5</a>
<br>
<br>
</li><li class="li-indexenv">GCC_FOUND, <a href="#hevea_default445">13.5.1.1</a>
</li><li class="li-indexenv">Group, <a href="#hevea_default330">10.11.20</a>
</li><li class="li-indexenv">GXX_FOUND, <a href="#hevea_default446">13.5.1.1</a>
</li><li class="li-indexenv">ge, <a href="#hevea_default180">9.4.4</a>
</li><li class="li-indexenv">get-registry, <a href="#hevea_default101">9.2.15</a>
</li><li class="li-indexenv">getchar, <a href="#hevea_default294">10.8.33</a>
</li><li class="li-indexenv">getenv, <a href="#hevea_default98">9.2.12</a>
</li><li class="li-indexenv">getgrgid, <a href="#hevea_default336">10.11.21</a>
</li><li class="li-indexenv">getgrnam, <a href="#hevea_default335">10.11.21</a>
</li><li class="li-indexenv">gethostbyname, <a href="#hevea_default284">10.8.23</a>
</li><li class="li-indexenv">getprotobyname, <a href="#hevea_default286">10.8.25</a>
</li><li class="li-indexenv">getpwents, <a href="#hevea_default329">10.11.19</a>
</li><li class="li-indexenv">getpwnam, <a href="#hevea_default327">10.11.18</a>
</li><li class="li-indexenv">getpwuid, <a href="#hevea_default328">10.11.18</a>
</li><li class="li-indexenv">gets, <a href="#hevea_default295">10.8.34</a>
</li><li class="li-indexenv">getservbyname, <a href="#hevea_default288">10.8.27</a>
</li><li class="li-indexenv">gettimeofday, <a href="#hevea_default344">10.11.27</a>
</li><li class="li-indexenv">getvar, <a href="#hevea_default102">9.2.16</a>
</li><li class="li-indexenv">glob, <a href="#hevea_default234">10.4.1</a>
</li><li class="li-indexenv">global., <a href="#hevea_default34">5.3</a>
</li><li class="li-indexenv">gmtime, <a href="#hevea_default355">10.11.29</a>
</li><li class="li-indexenv">gr_gid, <a href="#hevea_default333">10.11.20</a>
</li><li class="li-indexenv">gr_group, <a href="#hevea_default332">10.11.20</a>
</li><li class="li-indexenv">gr_mem, <a href="#hevea_default334">10.11.20</a>
</li><li class="li-indexenv">gr_name, <a href="#hevea_default331">10.11.20</a>
</li><li class="li-indexenv">grep, <a href="#hevea_default311">10.11.3</a>, <a href="#hevea_default405">12.1.22</a>
</li><li class="li-indexenv">gt, <a href="#hevea_default181">9.4.4</a>
<br>
<br>
</li><li class="li-indexenv">HOME, <a href="#hevea_default77">9.1</a>
</li><li class="li-indexenv">HOST, <a href="#hevea_default75">9.1</a>
</li><li class="li-indexenv">Host, <a href="#hevea_default283">10.8.22</a>
</li><li class="li-indexenv">hexify, <a href="#hevea_default125">9.3.16</a>
</li><li class="li-indexenv">history, <a href="#hevea_default367">11.11.1</a>, <a href="#hevea_default403">12.1.22</a>
</li><li class="li-indexenv">homename, <a href="#hevea_default205">10.1.10</a>
</li><li class="li-indexenv">html-escaped, <a href="#hevea_default119">9.3.14</a>
</li><li class="li-indexenv">html-pre-escaped, <a href="#hevea_default120">9.3.14</a>
</li><li class="li-indexenv">html-string, <a href="#hevea_default131">9.3.20</a>
<br>
<br>
</li><li class="li-indexenv">INCLUDES, <a href="#hevea_default454">13.5.2</a>
</li><li class="li-indexenv">INSTALL, <a href="#hevea_default437">13.4.2</a>
</li><li class="li-indexenv">InChannel, <a href="#hevea_default383">12.1.16</a>
</li><li class="li-indexenv">InetAddr, <a href="#hevea_default282">10.8.21</a>
</li><li class="li-indexenv">Int, <a href="#hevea_default371">12.1.4</a>
</li><li class="li-indexenv">id-escaped, <a href="#hevea_default122">9.3.15</a>
</li><li class="li-indexenv">if, <a href="#hevea_default21">4.10</a>, <a href="#hevea_default86">9.2.5</a>, <a href="#hevea_default628">B.2.2.1</a>
</li><li class="li-indexenv">ignoreeof, <a href="#hevea_default590">15.1</a>
</li><li class="li-indexenv">in, <a href="#hevea_default198">10.1.3</a>
</li><li class="li-indexenv">include, <a href="#hevea_default17">4.8</a>, <a href="#hevea_default634">B.2.2.1</a>
</li><li class="li-indexenv">inheritance, <a href="#hevea_default26">4.14</a>
</li><li class="li-indexenv">input-line, <a href="#hevea_default267">10.8.6</a>
</li><li class="li-indexenv">int, <a href="#hevea_default160">9.4.1</a>
</li><li class="li-indexenv">intersection, <a href="#hevea_default144">9.3.32</a>
</li><li class="li-indexenv">intersects, <a href="#hevea_default145">9.3.33</a>
<br>
<br>
</li><li class="li-indexenv">jobs, <a href="#hevea_default361">11.10.1</a>, <a href="#hevea_default391">12.1.22</a>
</li><li class="li-indexenv">join, <a href="#hevea_default114">9.3.11</a>
<br>
<br>
</li><li class="li-indexenv">keyword arguments, <a href="#hevea_default16">4.5.1</a>
</li><li class="li-indexenv">kill, <a href="#hevea_default366">11.10.6</a>, <a href="#hevea_default397">12.1.22</a>
<br>
<br>
</li><li class="li-indexenv">LATEX, <a href="#hevea_default538">13.7.1</a>
</li><li class="li-indexenv">LATEXFLAGS, <a href="#hevea_default540">13.7.1</a>
</li><li class="li-indexenv">LaTeXDocument, <a href="#hevea_default550">13.7.2.1</a>
</li><li class="li-indexenv">LaTeXDocumentCopy, <a href="#hevea_default556">13.7.2.3</a>
</li><li class="li-indexenv">LaTeXDocumentInstall, <a href="#hevea_default557">13.7.2.4</a>
</li><li class="li-indexenv">LD, <a href="#hevea_default461">13.5.2</a>
</li><li class="li-indexenv">LDFLAGS, <a href="#hevea_default462">13.5.2</a>
</li><li class="li-indexenv">LDFLAGS_DLL, <a href="#hevea_default463">13.5.2</a>
</li><li class="li-indexenv">LDOUT, <a href="#hevea_default464">13.5.2</a>
</li></ul></td><td class="c008"><ul class="indexenv"><li class="li-indexenv">LEX, <a href="#hevea_default466">13.5.2</a>
</li><li class="li-indexenv">Lexer, <a href="#hevea_default317">10.11.9</a>
</li><li class="li-indexenv">LIB_FOUND, <a href="#hevea_default448">13.5.1.2</a>
</li><li class="li-indexenv">LIBS, <a href="#hevea_default455">13.5.2</a>
</li><li class="li-indexenv">LocalCGeneratedFiles, <a href="#hevea_default468">13.5.3.1</a>
</li><li class="li-indexenv">LocalOCamlGeneratedFiles, <a href="#hevea_default530">13.6.5.1</a>
</li><li class="li-indexenv">LocalTeXGeneratedFiles, <a href="#hevea_default555">13.7.2.2</a>
</li><li class="li-indexenv">Location, <a href="#hevea_default385">12.1.18</a>
</li><li class="li-indexenv">land, <a href="#hevea_default169">9.4.3</a>
</li><li class="li-indexenv">le, <a href="#hevea_default178">9.4.4</a>
</li><li class="li-indexenv">length, <a href="#hevea_default107">9.3.4</a>
</li><li class="li-indexenv">lex, <a href="#hevea_default315">10.11.7</a>
</li><li class="li-indexenv">lex-search, <a href="#hevea_default316">10.11.8</a>
</li><li class="li-indexenv">link, <a href="#hevea_default243">10.5.6</a>
</li><li class="li-indexenv">link-order sorting, <a href="#hevea_default229">10.3.6</a>
</li><li class="li-indexenv">listen, <a href="#hevea_default291">10.8.30</a>
</li><li class="li-indexenv">ln-or-cp, <a href="#hevea_default402">12.1.22</a>
</li><li class="li-indexenv">lnot, <a href="#hevea_default168">9.4.3</a>
</li><li class="li-indexenv">localtime, <a href="#hevea_default356">10.11.29</a>
</li><li class="li-indexenv">lockf, <a href="#hevea_default281">10.8.20</a>
</li><li class="li-indexenv">lor, <a href="#hevea_default170">9.4.3</a>
</li><li class="li-indexenv">lowercase, <a href="#hevea_default152">9.3.40</a>
</li><li class="li-indexenv">ls, <a href="#hevea_default235">10.4.2</a>
</li><li class="li-indexenv">lseek, <a href="#hevea_default269">10.8.8</a>
</li><li class="li-indexenv">lsl, <a href="#hevea_default172">9.4.3</a>
</li><li class="li-indexenv">lsr, <a href="#hevea_default173">9.4.3</a>
</li><li class="li-indexenv">lstat, <a href="#hevea_default240">10.5.3</a>
</li><li class="li-indexenv">lt, <a href="#hevea_default177">9.4.4</a>
</li><li class="li-indexenv">lxor, <a href="#hevea_default171">9.4.3</a>
<br>
<br>
</li><li class="li-indexenv">MACHINE, <a href="#hevea_default74">9.1</a>
</li><li class="li-indexenv">MAKEINDEX, <a href="#hevea_default542">13.7.1</a>
</li><li class="li-indexenv">Map, <a href="#hevea_default369">12.1.2</a>
</li><li class="li-indexenv">MENHIR_AVAILABLE, <a href="#hevea_default493">13.6.1</a>
</li><li class="li-indexenv">MENHIR_ENABLED, <a href="#hevea_default514">13.6.2</a>
</li><li class="li-indexenv">MENHIR_FLAGS, <a href="#hevea_default523">13.6.3</a>
</li><li class="li-indexenv">mapprefix, <a href="#hevea_default140">9.3.28</a>
</li><li class="li-indexenv">mapsuffix, <a href="#hevea_default133">9.3.22</a>
</li><li class="li-indexenv">match, <a href="#hevea_default22">4.11</a>, <a href="#hevea_default90">9.2.6</a>, <a href="#hevea_default631">B.2.2.1</a>
</li><li class="li-indexenv">max, <a href="#hevea_default176">9.4.3</a>
</li><li class="li-indexenv">mem, <a href="#hevea_default143">9.3.31</a>
</li><li class="li-indexenv">min, <a href="#hevea_default175">9.4.3</a>
</li><li class="li-indexenv">mkdir, <a href="#hevea_default237">10.5.1</a>, <a href="#hevea_default407">12.1.22</a>
</li><li class="li-indexenv">mkfifo, <a href="#hevea_default279">10.8.18</a>
</li><li class="li-indexenv">mktime, <a href="#hevea_default357">10.11.30</a>
</li><li class="li-indexenv">mod, <a href="#hevea_default167">9.4.3</a>
</li><li class="li-indexenv">mul, <a href="#hevea_default165">9.4.3</a>
</li><li class="li-indexenv">mv, <a href="#hevea_default409">12.1.22</a>
<br>
<br>
</li><li class="li-indexenv">NATIVE_ENABLED, <a href="#hevea_default513">13.6.2</a>
</li><li class="li-indexenv">NCURSES_AVAILABLE, <a href="#hevea_default580">14.3.1</a>
</li><li class="li-indexenv">NCURSES_CFLAGS, <a href="#hevea_default582">14.3.1</a>
</li><li class="li-indexenv">NCURSES_CLIBS, <a href="#hevea_default583">14.3.1</a>
</li><li class="li-indexenv">NCURSES_TERMH_IN_NCURSES, <a href="#hevea_default581">14.3.1</a>
</li><li class="li-indexenv">NODENAME, <a href="#hevea_default72">9.1</a>
</li><li class="li-indexenv">Node, <a href="#hevea_default379">12.1.12</a>
</li><li class="li-indexenv">Number, <a href="#hevea_default370">12.1.3</a>
</li><li class="li-indexenv">neg, <a href="#hevea_default162">9.4.3</a>
</li><li class="li-indexenv">normalize-time, <a href="#hevea_default358">10.11.30</a>
</li><li class="li-indexenv">not, <a href="#hevea_default82">9.2.1</a>
</li><li class="li-indexenv">nth, <a href="#hevea_default108">9.3.5</a>
</li><li class="li-indexenv">nth-hd, <a href="#hevea_default110">9.3.7</a>
</li><li class="li-indexenv">nth-tl, <a href="#hevea_default111">9.3.8</a>
<br>
<br>
</li><li class="li-indexenv">Object, <a href="#hevea_default368">12.1.1</a>
</li><li class="li-indexenv">OCAML_BYTE_LINK_FLAGS, <a href="#hevea_default520">13.6.3</a>
</li><li class="li-indexenv">OCAML_CLIBS, <a href="#hevea_default526">13.6.4</a>
</li><li class="li-indexenv">OCAML_LIB_FLAGS, <a href="#hevea_default527">13.6.4</a>
</li><li class="li-indexenv">OCAML_LIBS, <a href="#hevea_default524">13.6.4</a>
</li><li class="li-indexenv">OCAML_LINK_FLAGS, <a href="#hevea_default522">13.6.3</a>
</li><li class="li-indexenv">OCAML_NATIVE_LINK_FLAGS, <a href="#hevea_default521">13.6.3</a>
</li><li class="li-indexenv">OCAML_OTHER_LIBS, <a href="#hevea_default525">13.6.4</a>
</li><li class="li-indexenv">OCAMLC, <a href="#hevea_default496">13.6.2</a>
</li><li class="li-indexenv">OCAMLCFLAGS, <a href="#hevea_default517">13.6.3</a>
</li><li class="li-indexenv">OCAMLDEP, <a href="#hevea_default503">13.6.2</a>
</li><li class="li-indexenv">OCAMLDEP_MODULES_AVAILABLE, <a href="#hevea_default492">13.6.1</a>
</li><li class="li-indexenv">OCAMLDEP_MODULES_ENABLED, <a href="#hevea_default504">13.6.2</a>
</li><li class="li-indexenv">OCAMLDEPFLAGS, <a href="#hevea_default515">13.6.3</a>
</li><li class="li-indexenv">OCAMLFIND, <a href="#hevea_default509">13.6.2</a>
</li><li class="li-indexenv">OCAMLFIND_EXISTS, <a href="#hevea_default491">13.6.1</a>
</li><li class="li-indexenv">OCAMLFINDFLAGS, <a href="#hevea_default510">13.6.2</a>
</li><li class="li-indexenv">OCAMLFLAGS, <a href="#hevea_default519">13.6.3</a>
</li><li class="li-indexenv">OCAMLINCLUDES, <a href="#hevea_default508">13.6.2</a>
</li><li class="li-indexenv">OCAMLLEX, <a href="#hevea_default499">13.6.2</a>
</li><li class="li-indexenv">OCAMLLEXFLAGS, <a href="#hevea_default500">13.6.2</a>
</li><li class="li-indexenv">OCAMLLIB, <a href="#hevea_default494">13.6.1</a>
</li><li class="li-indexenv">OCAMLLINK, <a href="#hevea_default506">13.6.2</a>
</li><li class="li-indexenv">OCAMLMKTOP, <a href="#hevea_default505">13.6.2</a>
</li><li class="li-indexenv">OCAMLOPT, <a href="#hevea_default497">13.6.2</a>
</li><li class="li-indexenv">OCAMLOPT_EXISTS, <a href="#hevea_default490">13.6.1</a>
</li><li class="li-indexenv">OCAMLOPTFLAGS, <a href="#hevea_default518">13.6.3</a>
</li><li class="li-indexenv">OCAMLOPTLINK, <a href="#hevea_default507">13.6.2</a>
</li><li class="li-indexenv">OCAMLPACKS, <a href="#hevea_default511">13.6.2</a>
</li><li class="li-indexenv">OCAMLPPFLAGS, <a href="#hevea_default516">13.6.3</a>
</li><li class="li-indexenv">OCAMLYACC, <a href="#hevea_default501">13.6.2</a>
</li><li class="li-indexenv">OCAMLYACCFLAGS, <a href="#hevea_default502">13.6.2</a>
</li><li class="li-indexenv">OCamlGeneratedFiles, <a href="#hevea_default529">13.6.5.1</a>
</li><li class="li-indexenv">OCamlLibrary, <a href="#hevea_default531">13.6.6.1</a>
</li><li class="li-indexenv">OCamlLibraryCopy, <a href="#hevea_default533">13.6.6.3</a>
</li><li class="li-indexenv">OCamlLibraryInstall, <a href="#hevea_default534">13.6.6.4</a>
</li><li class="li-indexenv">OCamlPackage, <a href="#hevea_default532">13.6.6.2</a>
</li><li class="li-indexenv">OCamlProgram, <a href="#hevea_default535">13.6.6.5</a>
</li><li class="li-indexenv">OCamlProgramCopy, <a href="#hevea_default536">13.6.6.6</a>
</li><li class="li-indexenv">OCamlProgramInstall, <a href="#hevea_default537">13.6.6.7</a>
</li><li class="li-indexenv">OMAKE_VERSION, <a href="#hevea_default67">9.1</a>
</li><li class="li-indexenv">OMAKEFLAGS, <a href="#hevea_default625">A.5.1</a>
</li><li class="li-indexenv">OMAKELIB, <a href="#hevea_default626">A.5.2</a>
</li><li class="li-indexenv">OMAKEPATH, <a href="#hevea_default69">9.1</a>
</li><li class="li-indexenv">OMakeFlags, <a href="#hevea_default418">13.2.1</a>
</li><li class="li-indexenv">OMakefile, <a href="#hevea_default0">2.8</a>, <a href="#hevea_default4">3</a>
</li><li class="li-indexenv">OMakeroot, <a href="#hevea_default1">2.8</a>, <a href="#hevea_default5">3</a>, <a href="#hevea_default430">13.4</a>
</li><li class="li-indexenv">OMakeVersion, <a href="#hevea_default419">13.2.2</a>
</li><li class="li-indexenv">OS_VERSION, <a href="#hevea_default73">9.1</a>
</li><li class="li-indexenv">OSTYPE, <a href="#hevea_default70">9.1</a>
</li><li class="li-indexenv">OutChannel, <a href="#hevea_default384">12.1.17</a>
</li><li class="li-indexenv">objects, <a href="#hevea_default24">4.12</a>
</li><li class="li-indexenv">ocaml-escaped, <a href="#hevea_default118">9.3.14</a>
</li><li class="li-indexenv">open, <a href="#hevea_default18">4.8</a>, <a href="#hevea_default635">B.2.2.1</a>
</li><li class="li-indexenv">open-in-string, <a href="#hevea_default261">10.8.2</a>
</li><li class="li-indexenv">open-out-string, <a href="#hevea_default262">10.8.3</a>
</li><li class="li-indexenv">or, <a href="#hevea_default85">9.2.4</a>
</li><li class="li-indexenv">out-contents, <a href="#hevea_default263">10.8.3</a>
<br>
<br>
</li><li class="li-indexenv">PATHSEP, <a href="#hevea_default438">13.4.2</a>
</li><li class="li-indexenv">Parser, <a href="#hevea_default318">10.11.13</a>
</li><li class="li-indexenv">Passwd, <a href="#hevea_default319">10.11.17</a>
</li><li class="li-indexenv">PDFLATEX, <a href="#hevea_default547">13.7.1</a>
</li><li class="li-indexenv">PDFLATEXFLAGS, <a href="#hevea_default548">13.7.1</a>
</li><li class="li-indexenv">PID, <a href="#hevea_default78">9.1</a>
</li><li class="li-indexenv">Protocol, <a href="#hevea_default285">10.8.24</a>
</li><li class="li-indexenv">pipe, <a href="#hevea_default278">10.8.17</a>
</li><li class="li-indexenv">print, <a href="#hevea_default298">10.9</a>
</li><li class="li-indexenv">println, <a href="#hevea_default301">10.9</a>
</li><li class="li-indexenv">printv, <a href="#hevea_default304">10.10</a>
</li><li class="li-indexenv">printvln, <a href="#hevea_default307">10.10</a>
</li><li class="li-indexenv">private., <a href="#hevea_default32">5.1</a>
</li><li class="li-indexenv">project-directories, <a href="#hevea_default427">13.3.4</a>
</li><li class="li-indexenv">prompt, <a href="#hevea_default589">15.1</a>
</li><li class="li-indexenv">prompt-invisible, <a href="#hevea_default343">10.11.26</a>
</li><li class="li-indexenv">prompt-invisible-begin, <a href="#hevea_default341">10.11.25</a>
</li><li class="li-indexenv">prompt-invisible-end, <a href="#hevea_default342">10.11.25</a>
</li><li class="li-indexenv">protected., <a href="#hevea_default35">5.4</a>
</li><li class="li-indexenv">public., <a href="#hevea_default36">5.5</a>
</li><li class="li-indexenv">pw_dir, <a href="#hevea_default325">10.11.17</a>
</li><li class="li-indexenv">pw_gecos, <a href="#hevea_default324">10.11.17</a>
</li><li class="li-indexenv">pw_gid, <a href="#hevea_default323">10.11.17</a>
</li><li class="li-indexenv">pw_name, <a href="#hevea_default320">10.11.17</a>
</li><li class="li-indexenv">pw_passwd, <a href="#hevea_default321">10.11.17</a>
</li><li class="li-indexenv">pw_shell, <a href="#hevea_default326">10.11.17</a>
</li><li class="li-indexenv">pw_uid, <a href="#hevea_default322">10.11.17</a>
</li><li class="li-indexenv">pwd, <a href="#hevea_default406">12.1.22</a>
<br>
<br>
</li><li class="li-indexenv">quotations, <a href="#hevea_default12">4.4</a>
</li><li class="li-indexenv">quote, <a href="#hevea_default129">9.3.18</a>
</li><li class="li-indexenv">quote-argv, <a href="#hevea_default130">9.3.19</a>
</li><li class="li-indexenv">quoted strings, <a href="#hevea_default41">7.2</a>
<br>
<br>
</li><li class="li-indexenv">READLINE_AVAILABLE, <a href="#hevea_default584">14.3.2</a>
</li><li class="li-indexenv">READLINE_CFLAGS, <a href="#hevea_default586">14.3.2</a>
</li><li class="li-indexenv">READLINE_CLIBS, <a href="#hevea_default587">14.3.2</a>
</li><li class="li-indexenv">READLINE_GNU, <a href="#hevea_default585">14.3.2</a>
</li><li class="li-indexenv">ROOT, <a href="#hevea_default431">13.4.1</a>
</li><li class="li-indexenv">Rule, <a href="#hevea_default377">12.1.10</a>
</li><li class="li-indexenv">RunCProg, <a href="#hevea_default567">14.1.5</a>
</li><li class="li-indexenv">RuntimeException, <a href="#hevea_default387">12.1.20</a>
</li><li class="li-indexenv">raise, <a href="#hevea_default94">9.2.8</a>
</li><li class="li-indexenv">random, <a href="#hevea_default158">9.3.46</a>
</li><li class="li-indexenv">random-init, <a href="#hevea_default159">9.3.46</a>
</li><li class="li-indexenv">read, <a href="#hevea_default266">10.8.6</a>
</li><li class="li-indexenv">readlink, <a href="#hevea_default246">10.5.8</a>
</li><li class="li-indexenv">readlink-raw, <a href="#hevea_default247">10.5.8</a>
</li><li class="li-indexenv">regular expressions, <a href="#hevea_default309">10.11.1</a>
</li><li class="li-indexenv">rehash, <a href="#hevea_default209">10.2.3</a>, <a href="#hevea_default401">12.1.22</a>
</li><li class="li-indexenv">remove-project-directories, <a href="#hevea_default255">10.6.3</a>
</li><li class="li-indexenv">removeprefix, <a href="#hevea_default136">9.3.24</a>
</li><li class="li-indexenv">removesuffix, <a href="#hevea_default137">9.3.25</a>
</li><li class="li-indexenv">rename, <a href="#hevea_default242">10.5.5</a>
</li><li class="li-indexenv">replace-nth, <a href="#hevea_default109">9.3.6</a>
</li><li class="li-indexenv">replacesuffixes, <a href="#hevea_default138">9.3.26</a>
</li><li class="li-indexenv">return, <a href="#hevea_default14">4.5</a>, <a href="#hevea_default636">B.2.2.1</a>
</li><li class="li-indexenv">rev, <a href="#hevea_default113">9.3.10</a>
</li><li class="li-indexenv">rewind, <a href="#hevea_default270">10.8.9</a>
</li><li class="li-indexenv">rm, <a href="#hevea_default410">12.1.22</a>
</li><li class="li-indexenv">rootname, <a href="#hevea_default201">10.1.6</a>
</li><li class="li-indexenv">rule, <a href="#hevea_default428">13.3.5</a>
</li><li class="li-indexenv">rule, options, <a href="#hevea_default51">8.5</a>
</li><li class="li-indexenv">rule, scoping, <a href="#hevea_default61">8.11</a>
</li><li class="li-indexenv">rules, bounded implicit, <a href="#hevea_default48">8.2</a>
</li><li class="li-indexenv">rules, implicit, <a href="#hevea_default47">8.1</a>
<br>
<br>
</li><li class="li-indexenv">SCANNER_MODE, <a href="#hevea_default436">13.4.1</a>
</li><li class="li-indexenv">Sequence, <a href="#hevea_default373">12.1.6</a>
</li><li class="li-indexenv">Service, <a href="#hevea_default287">10.8.26</a>
</li><li class="li-indexenv">Shell, <a href="#hevea_default389">12.1.22</a>
</li><li class="li-indexenv">SNPRINTF_AVAILABLE, <a href="#hevea_default588">14.3.3</a>
</li><li class="li-indexenv">STDLIB, <a href="#hevea_default68">9.1</a>
</li><li class="li-indexenv">STDROOT, <a href="#hevea_default434">13.4.1</a>
</li><li class="li-indexenv">Stat, <a href="#hevea_default238">10.5.2</a>
</li><li class="li-indexenv">StaticCLibrary, <a href="#hevea_default469">13.5.4.1</a>
</li><li class="li-indexenv">StaticCLibraryCopy, <a href="#hevea_default472">13.5.4.2</a>
</li><li class="li-indexenv">StaticCLibraryInstall, <a href="#hevea_default474">13.5.4.3</a>
</li><li class="li-indexenv">StaticCObject, <a href="#hevea_default476">13.5.4.4</a>
</li><li class="li-indexenv">StaticCObjectCopy, <a href="#hevea_default477">13.5.4.4</a>
</li><li class="li-indexenv">StaticCObjectInstall, <a href="#hevea_default478">13.5.4.4</a>
</li><li class="li-indexenv">StaticCXXLibrary, <a href="#hevea_default484">13.5.4.9</a>
</li><li class="li-indexenv">StaticCXXLibraryCopy, <a href="#hevea_default485">13.5.4.9</a>
</li><li class="li-indexenv">StaticCXXLibraryInstall, <a href="#hevea_default486">13.5.4.9</a>
</li><li class="li-indexenv">String, <a href="#hevea_default375">12.1.8</a>
</li><li class="li-indexenv">SYSNAME, <a href="#hevea_default71">9.1</a>
</li><li class="li-indexenv">scan, <a href="#hevea_default312">10.11.4</a>
</li><li class="li-indexenv">section, <a href="#hevea_default19">4.9</a>, <a href="#hevea_default49">8.3</a>, <a href="#hevea_default633">B.2.2.1</a>
</li><li class="li-indexenv">section rule, <a href="#hevea_default50">8.4</a>
</li><li class="li-indexenv">select, <a href="#hevea_default280">10.8.19</a>
</li><li class="li-indexenv">sequence-forall, <a href="#hevea_default192">9.7.1</a>
</li><li class="li-indexenv">sequence-sort, <a href="#hevea_default193">9.7.3</a>
</li><li class="li-indexenv">set, <a href="#hevea_default142">9.3.30</a>
</li><li class="li-indexenv">set-close-on-exec-mode, <a href="#hevea_default277">10.8.16</a>
</li><li class="li-indexenv">set-diff, <a href="#hevea_default146">9.3.34</a>
</li><li class="li-indexenv">set-nonblock, <a href="#hevea_default276">10.8.15</a>
</li><li class="li-indexenv">setenv, <a href="#hevea_default99">9.2.13</a>
</li><li class="li-indexenv">setvar, <a href="#hevea_default103">9.2.17</a>
</li><li class="li-indexenv">shell, <a href="#hevea_default154">9.3.42</a>
</li><li class="li-indexenv">socket, <a href="#hevea_default289">10.8.28</a>
</li><li class="li-indexenv">sorting (link-order), <a href="#hevea_default230">10.3.6</a>
</li><li class="li-indexenv">split, <a href="#hevea_default105">9.3.2</a>
</li><li class="li-indexenv">sql-escaped, <a href="#hevea_default123">9.3.15</a>
</li><li class="li-indexenv">stat, <a href="#hevea_default239">10.5.3</a>
</li><li class="li-indexenv">stat-reset, <a href="#hevea_default221">10.3.2</a>
</li><li class="li-indexenv">static., <a href="#hevea_default27">4.15</a>
</li><li class="li-indexenv">stderr, <a href="#hevea_default260">10.8.1</a>
</li><li class="li-indexenv">stdin, <a href="#hevea_default258">10.8.1</a>
</li><li class="li-indexenv">stdout, <a href="#hevea_default259">10.8.1</a>
</li><li class="li-indexenv">stop, <a href="#hevea_default364">11.10.4</a>, <a href="#hevea_default395">12.1.22</a>
</li><li class="li-indexenv">string, <a href="#hevea_default115">9.3.12</a>
</li><li class="li-indexenv">string-escaped, <a href="#hevea_default117">9.3.14</a>
</li><li class="li-indexenv">string-length, <a href="#hevea_default116">9.3.13</a>
</li><li class="li-indexenv">sub, <a href="#hevea_default164">9.4.3</a>
</li><li class="li-indexenv">subdirs, <a href="#hevea_default236">10.4.3</a>
</li><li class="li-indexenv">subrange, <a href="#hevea_default112">9.3.9</a>
</li><li class="li-indexenv">suffix, <a href="#hevea_default206">10.1.11</a>
</li><li class="li-indexenv">switch, <a href="#hevea_default23">4.11</a>, <a href="#hevea_default89">9.2.6</a>
</li><li class="li-indexenv">symlink, <a href="#hevea_default244">10.5.7</a>
</li><li class="li-indexenv">symlink-raw, <a href="#hevea_default245">10.5.7</a>
</li><li class="li-indexenv">system, <a href="#hevea_default153">9.3.41</a>
<br>
<br>
</li><li class="li-indexenv">TARGETS, <a href="#hevea_default79">9.1</a>
</li><li class="li-indexenv">Target, <a href="#hevea_default378">12.1.11</a>
</li><li class="li-indexenv">TETEX2_ENABLED, <a href="#hevea_default539">13.7.1</a>
</li><li class="li-indexenv">TEXDEPS, <a href="#hevea_default552">13.7.2.1</a>
</li><li class="li-indexenv">TEXINPUTS, <a href="#hevea_default551">13.7.2.1</a>
</li><li class="li-indexenv">TEXVARS, <a href="#hevea_default553">13.7.2.1</a>
</li><li class="li-indexenv">TeXGeneratedFiles, <a href="#hevea_default554">13.7.2.2</a>
</li><li class="li-indexenv">Tm, <a href="#hevea_default345">10.11.28</a>
</li><li class="li-indexenv">TryCompileC, <a href="#hevea_default564">14.1.4</a>
</li><li class="li-indexenv">TryLinkC, <a href="#hevea_default565">14.1.4</a>
</li><li class="li-indexenv">TryRunC, <a href="#hevea_default566">14.1.4</a>
</li><li class="li-indexenv">target, <a href="#hevea_default425">13.3.2</a>
</li><li class="li-indexenv">target-exists, <a href="#hevea_default219">10.3.1</a>
</li><li class="li-indexenv">target-is-proper, <a href="#hevea_default220">10.3.1</a>
</li><li class="li-indexenv">tell, <a href="#hevea_default271">10.8.10</a>
</li><li class="li-indexenv">test, <a href="#hevea_default256">10.7.1</a>, <a href="#hevea_default413">12.1.22</a>
</li><li class="li-indexenv">tgetstr, <a href="#hevea_default337">10.11.22</a>
</li><li class="li-indexenv">this., <a href="#hevea_default33">5.2</a>
</li><li class="li-indexenv">tm_hour, <a href="#hevea_default348">10.11.28</a>
</li><li class="li-indexenv">tm_isdst, <a href="#hevea_default354">10.11.28</a>
</li><li class="li-indexenv">tm_mday, <a href="#hevea_default349">10.11.28</a>
</li><li class="li-indexenv">tm_min, <a href="#hevea_default347">10.11.28</a>
</li><li class="li-indexenv">tm_mon, <a href="#hevea_default350">10.11.28</a>
</li><li class="li-indexenv">tm_sec, <a href="#hevea_default346">10.11.28</a>
</li><li class="li-indexenv">tm_wday, <a href="#hevea_default352">10.11.28</a>
</li><li class="li-indexenv">tm_yday, <a href="#hevea_default353">10.11.28</a>
</li><li class="li-indexenv">tm_year, <a href="#hevea_default351">10.11.28</a>
</li><li class="li-indexenv">tmpfile, <a href="#hevea_default197">10.1.2</a>
</li><li class="li-indexenv">truncate, <a href="#hevea_default251">10.5.12</a>
</li><li class="li-indexenv">try, <a href="#hevea_default93">9.2.7</a>, <a href="#hevea_default632">B.2.2.1</a>
<br>
<br>
</li><li class="li-indexenv">UnbuildableException, <a href="#hevea_default388">12.1.21</a>
</li><li class="li-indexenv">USE_OCAMLFIND, <a href="#hevea_default495">13.6.2</a>
</li><li class="li-indexenv">USEPDFLATEX, <a href="#hevea_default549">13.7.1</a>
</li><li class="li-indexenv">USER, <a href="#hevea_default76">9.1</a>
</li><li class="li-indexenv">uge, <a href="#hevea_default184">9.4.4</a>
</li><li class="li-indexenv">ugt, <a href="#hevea_default185">9.4.4</a>
</li><li class="li-indexenv">ule, <a href="#hevea_default183">9.4.4</a>
</li><li class="li-indexenv">ult, <a href="#hevea_default182">9.4.4</a>
</li><li class="li-indexenv">umask, <a href="#hevea_default252">10.5.13</a>
</li><li class="li-indexenv">uncapitalize, <a href="#hevea_default150">9.3.38</a>
</li><li class="li-indexenv">unhexify, <a href="#hevea_default126">9.3.16</a>
</li><li class="li-indexenv">unlink, <a href="#hevea_default241">10.5.4</a>
</li><li class="li-indexenv">unsetenv, <a href="#hevea_default100">9.2.14</a>
</li><li class="li-indexenv">uppercase, <a href="#hevea_default151">9.3.39</a>
</li><li class="li-indexenv">uri-escaped, <a href="#hevea_default124">9.3.15</a>
</li><li class="li-indexenv">utimes, <a href="#hevea_default250">10.5.11</a>
<br>
<br>
</li><li class="li-indexenv">VERBOSE, <a href="#hevea_default81">9.1</a>
</li><li class="li-indexenv">VerboseCheckCHeader, <a href="#hevea_default569">14.1.6</a>
</li><li class="li-indexenv">VerboseCheckCLib, <a href="#hevea_default571">14.1.7</a>
</li><li class="li-indexenv">value, <a href="#hevea_default15">4.5</a>, <a href="#hevea_default637">B.2.2.1</a>
</li><li class="li-indexenv">variable definition, <a href="#hevea_default624">A.3.21</a>
</li><li class="li-indexenv">vmount, <a href="#hevea_default2">2.9</a>, <a href="#hevea_default253">10.6.1</a>
<br>
<br>
</li><li class="li-indexenv">wait, <a href="#hevea_default365">11.10.5</a>, <a href="#hevea_default396">12.1.22</a>
</li><li class="li-indexenv">where, <a href="#hevea_default208">10.2.2</a>, <a href="#hevea_default400">12.1.22</a>
</li><li class="li-indexenv">which, <a href="#hevea_default207">10.2.1</a>, <a href="#hevea_default399">12.1.22</a>
</li><li class="li-indexenv">while, <a href="#hevea_default156">9.3.44</a>, <a href="#hevea_default639">B.2.2.1</a>
</li><li class="li-indexenv">write, <a href="#hevea_default268">10.8.7</a>
<br>
<br>
</li><li class="li-indexenv">xterm-escape, <a href="#hevea_default340">10.11.24</a>
</li><li class="li-indexenv">xterm-escape-begin, <a href="#hevea_default338">10.11.23</a>
</li><li class="li-indexenv">xterm-escape-end, <a href="#hevea_default339">10.11.23</a>
<br>
<br>
</li><li class="li-indexenv">YACC, <a href="#hevea_default465">13.5.2</a>
</li></ul></td></tr>
</table><!--NAME omake-all-index.html-->
<!--TOC chapter id="sec623" Index of variables-->
<h1 class="chapter" id="sec623">Index of variables</h1><!--SEC END --><p></p><table class="c000 cellpading0"><tr><td class="c008"><ul class="indexenv"><li class="li-indexenv">
&amp;, <a href="#hevea_var131">B.2.2.5</a>
</li><li class="li-indexenv">*, <a href="#hevea_var0">8</a>, <a href="#hevea_var125">B.2.2.5</a>
</li><li class="li-indexenv">+, <a href="#hevea_var3">8</a>, <a href="#hevea_var129">B.2.2.5</a>
</li><li class="li-indexenv">&lt;, <a href="#hevea_var4">8</a>, <a href="#hevea_var130">B.2.2.5</a>
</li><li class="li-indexenv">&gt;, <a href="#hevea_var126">B.2.2.5</a>
</li><li class="li-indexenv">@, <a href="#hevea_var1">8</a>, <a href="#hevea_var127">B.2.2.5</a>
</li><li class="li-indexenv">^, <a href="#hevea_var2">8</a>, <a href="#hevea_var128">B.2.2.5</a>
<br>
<br>
</li><li class="li-indexenv">ABORT_ON_COMMAND_ERROR, <a href="#hevea_var27">13.4.1</a>
</li><li class="li-indexenv">ABORT_ON_DEPENDENCY_ERRORS, <a href="#hevea_var98">13.6.4</a>
</li><li class="li-indexenv">AR, <a href="#hevea_var52">13.5.2</a>
</li><li class="li-indexenv">AS, <a href="#hevea_var49">13.5.2</a>
</li><li class="li-indexenv">ASFLAGS, <a href="#hevea_var50">13.5.2</a>
</li><li class="li-indexenv">ASOUT, <a href="#hevea_var51">13.5.2</a>
<br>
<br>
</li><li class="li-indexenv">BIBTEX, <a href="#hevea_var102">13.7.1</a>
</li><li class="li-indexenv">BUILD_SUMMARY, <a href="#hevea_var18">9.1</a>
</li><li class="li-indexenv">BYTE_ENABLED, <a href="#hevea_var82">13.6.2</a>
<br>
<br>
</li><li class="li-indexenv">CAMLP4, <a href="#hevea_var68">13.6.2</a>
</li><li class="li-indexenv">CC, <a href="#hevea_var41">13.5.2</a>
</li><li class="li-indexenv">CCOUT, <a href="#hevea_var48">13.5.2</a>
</li><li class="li-indexenv">CDLL_IMPLIES_STATIC, <a href="#hevea_var59">13.5.4.1</a>
</li><li class="li-indexenv">CFLAGS, <a href="#hevea_var44">13.5.2</a>
</li><li class="li-indexenv">CL_FOUND, <a href="#hevea_var39">13.5.1.2</a>
</li><li class="li-indexenv">CPP, <a href="#hevea_var43">13.5.2</a>
</li><li class="li-indexenv">CWD, <a href="#hevea_var24">13.4.1</a>
</li><li class="li-indexenv">CXX, <a href="#hevea_var42">13.5.2</a>
</li><li class="li-indexenv">CXXFLAGS, <a href="#hevea_var45">13.5.2</a>
<br>
<br>
</li><li class="li-indexenv">DIRSEP, <a href="#hevea_var31">13.4.2</a>
</li><li class="li-indexenv">DVIPDFM, <a href="#hevea_var106">13.7.1</a>
</li><li class="li-indexenv">DVIPDFMFLAGS, <a href="#hevea_var107">13.7.1</a>
</li><li class="li-indexenv">DVIPS, <a href="#hevea_var104">13.7.1</a>
</li><li class="li-indexenv">DVIPSFLAGS, <a href="#hevea_var105">13.7.1</a>
<br>
<br>
</li><li class="li-indexenv">EMPTY, <a href="#hevea_var25">13.4.1</a>
</li><li class="li-indexenv">EXE, <a href="#hevea_var36">13.4.2</a>
</li><li class="li-indexenv">EXT_ASM, <a href="#hevea_var35">13.4.2</a>
</li><li class="li-indexenv">EXT_DLL, <a href="#hevea_var34">13.4.2</a>
</li><li class="li-indexenv">EXT_LIB, <a href="#hevea_var33">13.4.2</a>
</li><li class="li-indexenv">EXT_OBJ, <a href="#hevea_var32">13.4.2</a>
<br>
<br>
</li><li class="li-indexenv">GCC_FOUND, <a href="#hevea_var37">13.5.1.1</a>
</li><li class="li-indexenv">GXX_FOUND, <a href="#hevea_var38">13.5.1.1</a>
<br>
<br>
</li><li class="li-indexenv">HOME, <a href="#hevea_var15">9.1</a>
</li><li class="li-indexenv">HOST, <a href="#hevea_var13">9.1</a>
<br>
<br>
</li><li class="li-indexenv">INCLUDES, <a href="#hevea_var46">13.5.2</a>
</li><li class="li-indexenv">INSTALL, <a href="#hevea_var29">13.4.2</a>
</li><li class="li-indexenv">ignoreeof, <a href="#hevea_var124">15.1</a>
<br>
<br>
</li><li class="li-indexenv">LATEX, <a href="#hevea_var99">13.7.1</a>
</li><li class="li-indexenv">LATEXFLAGS, <a href="#hevea_var101">13.7.1</a>
</li><li class="li-indexenv">LD, <a href="#hevea_var53">13.5.2</a>
</li><li class="li-indexenv">LDFLAGS, <a href="#hevea_var54">13.5.2</a>
</li><li class="li-indexenv">LDFLAGS_DLL, <a href="#hevea_var55">13.5.2</a>
</li><li class="li-indexenv">LDOUT, <a href="#hevea_var56">13.5.2</a>
</li><li class="li-indexenv">LEX, <a href="#hevea_var58">13.5.2</a>
</li><li class="li-indexenv">LIB_FOUND, <a href="#hevea_var40">13.5.1.2</a>
</li><li class="li-indexenv">LIBS, <a href="#hevea_var47">13.5.2</a>
<br>
<br>
</li><li class="li-indexenv">MACHINE, <a href="#hevea_var12">9.1</a>
</li><li class="li-indexenv">MAKEINDEX, <a href="#hevea_var103">13.7.1</a>
</li><li class="li-indexenv">MENHIR_AVAILABLE, <a href="#hevea_var63">13.6.1</a>
</li><li class="li-indexenv">MENHIR_ENABLED, <a href="#hevea_var84">13.6.2</a>
</li><li class="li-indexenv">MENHIR_FLAGS, <a href="#hevea_var93">13.6.3</a>
<br>
<br>
</li><li class="li-indexenv">NATIVE_ENABLED, <a href="#hevea_var83">13.6.2</a>
</li><li class="li-indexenv">NCURSES_AVAILABLE, <a href="#hevea_var114">14.3.1</a>
</li><li class="li-indexenv">NCURSES_CFLAGS, <a href="#hevea_var116">14.3.1</a>
</li><li class="li-indexenv">NCURSES_CLIBS, <a href="#hevea_var117">14.3.1</a>
</li></ul></td><td class="c008"><ul class="indexenv"><li class="li-indexenv">NCURSES_TERMH_IN_NCURSES, <a href="#hevea_var115">14.3.1</a>
</li><li class="li-indexenv">NODENAME, <a href="#hevea_var10">9.1</a>
<br>
<br>
</li><li class="li-indexenv">OCAML_BYTE_LINK_FLAGS, <a href="#hevea_var90">13.6.3</a>
</li><li class="li-indexenv">OCAML_CLIBS, <a href="#hevea_var96">13.6.4</a>
</li><li class="li-indexenv">OCAML_LIB_FLAGS, <a href="#hevea_var97">13.6.4</a>
</li><li class="li-indexenv">OCAML_LIBS, <a href="#hevea_var94">13.6.4</a>
</li><li class="li-indexenv">OCAML_LINK_FLAGS, <a href="#hevea_var92">13.6.3</a>
</li><li class="li-indexenv">OCAML_NATIVE_LINK_FLAGS, <a href="#hevea_var91">13.6.3</a>
</li><li class="li-indexenv">OCAML_OTHER_LIBS, <a href="#hevea_var95">13.6.4</a>
</li><li class="li-indexenv">OCAMLC, <a href="#hevea_var66">13.6.2</a>
</li><li class="li-indexenv">OCAMLCFLAGS, <a href="#hevea_var87">13.6.3</a>
</li><li class="li-indexenv">OCAMLDEP, <a href="#hevea_var73">13.6.2</a>
</li><li class="li-indexenv">OCAMLDEP_MODULES_AVAILABLE, <a href="#hevea_var62">13.6.1</a>
</li><li class="li-indexenv">OCAMLDEP_MODULES_ENABLED, <a href="#hevea_var74">13.6.2</a>
</li><li class="li-indexenv">OCAMLDEPFLAGS, <a href="#hevea_var85">13.6.3</a>
</li><li class="li-indexenv">OCAMLFIND, <a href="#hevea_var79">13.6.2</a>
</li><li class="li-indexenv">OCAMLFIND_EXISTS, <a href="#hevea_var61">13.6.1</a>
</li><li class="li-indexenv">OCAMLFINDFLAGS, <a href="#hevea_var80">13.6.2</a>
</li><li class="li-indexenv">OCAMLFLAGS, <a href="#hevea_var89">13.6.3</a>
</li><li class="li-indexenv">OCAMLINCLUDES, <a href="#hevea_var78">13.6.2</a>
</li><li class="li-indexenv">OCAMLLEX, <a href="#hevea_var69">13.6.2</a>
</li><li class="li-indexenv">OCAMLLEXFLAGS, <a href="#hevea_var70">13.6.2</a>
</li><li class="li-indexenv">OCAMLLIB, <a href="#hevea_var64">13.6.1</a>
</li><li class="li-indexenv">OCAMLLINK, <a href="#hevea_var76">13.6.2</a>
</li><li class="li-indexenv">OCAMLMKTOP, <a href="#hevea_var75">13.6.2</a>
</li><li class="li-indexenv">OCAMLOPT, <a href="#hevea_var67">13.6.2</a>
</li><li class="li-indexenv">OCAMLOPT_EXISTS, <a href="#hevea_var60">13.6.1</a>
</li><li class="li-indexenv">OCAMLOPTFLAGS, <a href="#hevea_var88">13.6.3</a>
</li><li class="li-indexenv">OCAMLOPTLINK, <a href="#hevea_var77">13.6.2</a>
</li><li class="li-indexenv">OCAMLPACKS, <a href="#hevea_var81">13.6.2</a>
</li><li class="li-indexenv">OCAMLPPFLAGS, <a href="#hevea_var86">13.6.3</a>
</li><li class="li-indexenv">OCAMLYACC, <a href="#hevea_var71">13.6.2</a>
</li><li class="li-indexenv">OCAMLYACCFLAGS, <a href="#hevea_var72">13.6.2</a>
</li><li class="li-indexenv">OMAKE_VERSION, <a href="#hevea_var5">9.1</a>
</li><li class="li-indexenv">OMAKEPATH, <a href="#hevea_var7">9.1</a>
</li><li class="li-indexenv">OS_VERSION, <a href="#hevea_var11">9.1</a>
</li><li class="li-indexenv">OSTYPE, <a href="#hevea_var8">9.1</a>
<br>
<br>
</li><li class="li-indexenv">PATHSEP, <a href="#hevea_var30">13.4.2</a>
</li><li class="li-indexenv">PDFLATEX, <a href="#hevea_var108">13.7.1</a>
</li><li class="li-indexenv">PDFLATEXFLAGS, <a href="#hevea_var109">13.7.1</a>
</li><li class="li-indexenv">PID, <a href="#hevea_var16">9.1</a>
</li><li class="li-indexenv">prompt, <a href="#hevea_var123">15.1</a>
<br>
<br>
</li><li class="li-indexenv">READLINE_AVAILABLE, <a href="#hevea_var118">14.3.2</a>
</li><li class="li-indexenv">READLINE_CFLAGS, <a href="#hevea_var120">14.3.2</a>
</li><li class="li-indexenv">READLINE_CLIBS, <a href="#hevea_var121">14.3.2</a>
</li><li class="li-indexenv">READLINE_GNU, <a href="#hevea_var119">14.3.2</a>
</li><li class="li-indexenv">ROOT, <a href="#hevea_var23">13.4.1</a>
<br>
<br>
</li><li class="li-indexenv">SCANNER_MODE, <a href="#hevea_var28">13.4.1</a>
</li><li class="li-indexenv">SNPRINTF_AVAILABLE, <a href="#hevea_var122">14.3.3</a>
</li><li class="li-indexenv">STDLIB, <a href="#hevea_var6">9.1</a>
</li><li class="li-indexenv">STDROOT, <a href="#hevea_var26">13.4.1</a>
</li><li class="li-indexenv">SYSNAME, <a href="#hevea_var9">9.1</a>
</li><li class="li-indexenv">stderr, <a href="#hevea_var22">10.8.1</a>
</li><li class="li-indexenv">stdin, <a href="#hevea_var20">10.8.1</a>
</li><li class="li-indexenv">stdout, <a href="#hevea_var21">10.8.1</a>
<br>
<br>
</li><li class="li-indexenv">TARGETS, <a href="#hevea_var17">9.1</a>
</li><li class="li-indexenv">TETEX2_ENABLED, <a href="#hevea_var100">13.7.1</a>
</li><li class="li-indexenv">TEXDEPS, <a href="#hevea_var112">13.7.2.1</a>
</li><li class="li-indexenv">TEXINPUTS, <a href="#hevea_var111">13.7.2.1</a>
</li><li class="li-indexenv">TEXVARS, <a href="#hevea_var113">13.7.2.1</a>
<br>
<br>
</li><li class="li-indexenv">USE_OCAMLFIND, <a href="#hevea_var65">13.6.2</a>
</li><li class="li-indexenv">USEPDFLATEX, <a href="#hevea_var110">13.7.1</a>
</li><li class="li-indexenv">USER, <a href="#hevea_var14">9.1</a>
<br>
<br>
</li><li class="li-indexenv">VERBOSE, <a href="#hevea_var19">9.1</a>
<br>
<br>
</li><li class="li-indexenv">YACC, <a href="#hevea_var57">13.5.2</a>
</li></ul></td></tr>
</table><!--NAME omake-var-index.html-->
<!--TOC chapter id="sec624" Index of functions and special forms-->
<h1 class="chapter" id="sec624">Index of functions and special forms</h1><!--SEC END --><p></p><table class="c000 cellpading0"><tr><td class="c008"><ul class="indexenv"><li class="li-indexenv">
absname, <a href="#hevea_fun123">10.1.9</a>
</li><li class="li-indexenv">accept, <a href="#hevea_fun199">10.8.31</a>
</li><li class="li-indexenv">add, <a href="#hevea_fun82">9.4.3</a>
</li><li class="li-indexenv">add-project-directories, <a href="#hevea_fun168">10.6.2</a>
</li><li class="li-indexenv">add-wrapper, <a href="#hevea_fun60">9.3.29</a>
</li><li class="li-indexenv">addprefix, <a href="#hevea_fun58">9.3.27</a>
</li><li class="li-indexenv">addprefixes, <a href="#hevea_fun54">9.3.23</a>
</li><li class="li-indexenv">addsuffix, <a href="#hevea_fun51">9.3.21</a>
</li><li class="li-indexenv">addsuffixes, <a href="#hevea_fun53">9.3.23</a>
</li><li class="li-indexenv">and, <a href="#hevea_fun7">9.2.3</a>
</li><li class="li-indexenv">apply, <a href="#hevea_fun106">9.5.2</a>
</li><li class="li-indexenv">applya, <a href="#hevea_fun107">9.5.3</a>
</li><li class="li-indexenv">array, <a href="#hevea_fun23">9.3.1</a>
</li><li class="li-indexenv">asr, <a href="#hevea_fun93">9.4.3</a>
</li><li class="li-indexenv">awk, <a href="#hevea_fun219">10.11.5</a>
<br>
<br>
</li><li class="li-indexenv">basename, <a href="#hevea_fun118">10.1.4</a>
</li><li class="li-indexenv">bg, <a href="#hevea_fun243">11.10.2</a>
</li><li class="li-indexenv">bind, <a href="#hevea_fun197">10.8.29</a>
</li><li class="li-indexenv">break, <a href="#hevea_fun76">9.3.45</a>
</li><li class="li-indexenv">build, <a href="#hevea_fun260">13.3.6</a>
<br>
<br>
</li><li class="li-indexenv">CGeneratedFiles, <a href="#hevea_fun261">13.5.3.1</a>
</li><li class="li-indexenv">CheckCHeader, <a href="#hevea_fun307">14.1.6</a>
</li><li class="li-indexenv">CheckCLib, <a href="#hevea_fun309">14.1.7</a>
</li><li class="li-indexenv">CheckProg, <a href="#hevea_fun311">14.1.8</a>
</li><li class="li-indexenv">ConfMsgChecking, <a href="#hevea_fun297">14.1.1</a>
</li><li class="li-indexenv">ConfMsgError, <a href="#hevea_fun300">14.1.2</a>
</li><li class="li-indexenv">ConfMsgFound, <a href="#hevea_fun302">14.1.3</a>
</li><li class="li-indexenv">ConfMsgResult, <a href="#hevea_fun298">14.1.1</a>
</li><li class="li-indexenv">ConfMsgWarn, <a href="#hevea_fun299">14.1.2</a>
</li><li class="li-indexenv">ConfMsgYesNo, <a href="#hevea_fun301">14.1.3</a>
</li><li class="li-indexenv">CProgram, <a href="#hevea_fun272">13.5.4.5</a>
</li><li class="li-indexenv">CProgramCopy, <a href="#hevea_fun273">13.5.4.6</a>
</li><li class="li-indexenv">CProgramInstall, <a href="#hevea_fun274">13.5.4.7</a>
</li><li class="li-indexenv">CXXProgram, <a href="#hevea_fun275">13.5.4.8</a>
</li><li class="li-indexenv">CXXProgramInstall, <a href="#hevea_fun276">13.5.4.8</a>
</li><li class="li-indexenv">c-escaped, <a href="#hevea_fun40">9.3.15</a>
</li><li class="li-indexenv">capitalize, <a href="#hevea_fun68">9.3.37</a>
</li><li class="li-indexenv">cat, <a href="#hevea_fun216">10.11.2</a>
</li><li class="li-indexenv">cd, <a href="#hevea_fun241">11.9.2</a>
</li><li class="li-indexenv">channel-name, <a href="#hevea_fun184">10.8.12</a>
</li><li class="li-indexenv">chmod, <a href="#hevea_fun162">10.5.9</a>
</li><li class="li-indexenv">chown, <a href="#hevea_fun163">10.5.10</a>
</li><li class="li-indexenv">close, <a href="#hevea_fun176">10.8.5</a>
</li><li class="li-indexenv">cmp-versions, <a href="#hevea_fun251">13.2.3</a>
</li><li class="li-indexenv">compare, <a href="#hevea_fun113">9.7.4</a>
</li><li class="li-indexenv">concat, <a href="#hevea_fun25">9.3.3</a>
</li><li class="li-indexenv">connect, <a href="#hevea_fun200">10.8.32</a>
</li><li class="li-indexenv">create-lazy-map, <a href="#hevea_fun109">9.5.4</a>
</li><li class="li-indexenv">create-map, <a href="#hevea_fun108">9.5.4</a>
<br>
<br>
</li><li class="li-indexenv">DefineCommandVars, <a href="#hevea_fun252">13.2.4</a>
</li><li class="li-indexenv">DynamicCLibrary, <a href="#hevea_fun264">13.5.4.1</a>
</li><li class="li-indexenv">DynamicCLibraryCopy, <a href="#hevea_fun266">13.5.4.2</a>
</li><li class="li-indexenv">DynamicCLibraryInstall, <a href="#hevea_fun268">13.5.4.3</a>
</li><li class="li-indexenv">DynamicCXXLibrary, <a href="#hevea_fun280">13.5.4.9</a>
</li><li class="li-indexenv">DynamicCXXLibraryCopy, <a href="#hevea_fun281">13.5.4.9</a>
</li><li class="li-indexenv">DynamicCXXLibraryInstall, <a href="#hevea_fun282">13.5.4.9</a>
</li><li class="li-indexenv">decode-uri, <a href="#hevea_fun46">9.3.17</a>
</li><li class="li-indexenv">defined, <a href="#hevea_fun15">9.2.10</a>
</li><li class="li-indexenv">defined-env, <a href="#hevea_fun16">9.2.11</a>
</li><li class="li-indexenv">dependencies, <a href="#hevea_fun253">13.3.1</a>
</li><li class="li-indexenv">dependencies-all, <a href="#hevea_fun254">13.3.1</a>
</li><li class="li-indexenv">dependencies-proper, <a href="#hevea_fun255">13.3.1</a>
</li><li class="li-indexenv">digest, <a href="#hevea_fun130">10.2.5</a>
</li><li class="li-indexenv">digest-in-path, <a href="#hevea_fun135">10.2.7</a>
</li><li class="li-indexenv">digest-in-path-optional, <a href="#hevea_fun136">10.2.7</a>
</li><li class="li-indexenv">digest-optional, <a href="#hevea_fun131">10.2.5</a>
</li><li class="li-indexenv">digest-string, <a href="#hevea_fun132">10.2.5</a>
</li><li class="li-indexenv">dir, <a href="#hevea_fun115">10.1.1</a>
</li><li class="li-indexenv">dirname, <a href="#hevea_fun119">10.1.5</a>
</li><li class="li-indexenv">dirof, <a href="#hevea_fun121">10.1.7</a>
</li><li class="li-indexenv">div, <a href="#hevea_fun85">9.4.3</a>
</li><li class="li-indexenv">dup, <a href="#hevea_fun185">10.8.13</a>
</li><li class="li-indexenv">dup2, <a href="#hevea_fun186">10.8.14</a>
<br>
<br>
</li><li class="li-indexenv">echo, <a href="#hevea_fun240">11.9.1</a>
</li><li class="li-indexenv">encode-uri, <a href="#hevea_fun47">9.3.17</a>
</li><li class="li-indexenv">eprint, <a href="#hevea_fun206">10.9</a>
</li><li class="li-indexenv">eprintln, <a href="#hevea_fun209">10.9</a>
</li><li class="li-indexenv">eprintv, <a href="#hevea_fun212">10.10</a>
</li><li class="li-indexenv">eprintvln, <a href="#hevea_fun215">10.10</a>
</li><li class="li-indexenv">eq, <a href="#hevea_fun98">9.4.4</a>
</li><li class="li-indexenv">equal, <a href="#hevea_fun6">9.2.2</a>
</li><li class="li-indexenv">exists-in-path, <a href="#hevea_fun129">10.2.4</a>
</li><li class="li-indexenv">exit, <a href="#hevea_fun14">9.2.9</a>
</li><li class="li-indexenv">export, <a href="#hevea_fun74">9.3.43</a>
<br>
<br>
</li><li class="li-indexenv">fg, <a href="#hevea_fun244">11.10.3</a>
</li><li class="li-indexenv">fgets, <a href="#hevea_fun203">10.8.35</a>
</li><li class="li-indexenv">file, <a href="#hevea_fun114">10.1.1</a>
</li><li class="li-indexenv">file-check-sort, <a href="#hevea_fun148">10.3.7</a>
</li><li class="li-indexenv">file-exists, <a href="#hevea_fun137">10.3.1</a>
</li><li class="li-indexenv">file-sort, <a href="#hevea_fun147">10.3.6</a>
</li><li class="li-indexenv">filter, <a href="#hevea_fun66">9.3.35</a>
</li><li class="li-indexenv">filter-exists, <a href="#hevea_fun141">10.3.3</a>
</li><li class="li-indexenv">filter-out, <a href="#hevea_fun67">9.3.36</a>
</li><li class="li-indexenv">filter-proper-targets, <a href="#hevea_fun143">10.3.3</a>
</li><li class="li-indexenv">filter-targets, <a href="#hevea_fun142">10.3.3</a>
</li><li class="li-indexenv">find, <a href="#hevea_fun171">10.7.2</a>
</li><li class="li-indexenv">find-build-targets, <a href="#hevea_fun257">13.3.3</a>
</li><li class="li-indexenv">find-in-path, <a href="#hevea_fun133">10.2.6</a>
</li><li class="li-indexenv">find-in-path-optional, <a href="#hevea_fun134">10.2.6</a>
</li><li class="li-indexenv">find-ocaml-targets-in-path-optional, <a href="#hevea_fun146">10.3.5</a>
</li><li class="li-indexenv">find-targets-in-path, <a href="#hevea_fun144">10.3.4</a>
</li><li class="li-indexenv">find-targets-in-path-optional, <a href="#hevea_fun145">10.3.4</a>
</li><li class="li-indexenv">float, <a href="#hevea_fun80">9.4.2</a>
</li><li class="li-indexenv">flush, <a href="#hevea_fun183">10.8.11</a>
</li><li class="li-indexenv">fopen, <a href="#hevea_fun175">10.8.4</a>
</li><li class="li-indexenv">foreach, <a href="#hevea_fun110">9.6.1</a>
</li><li class="li-indexenv">fprint, <a href="#hevea_fun204">10.9</a>
</li><li class="li-indexenv">fprintln, <a href="#hevea_fun207">10.9</a>
</li><li class="li-indexenv">fprintv, <a href="#hevea_fun210">10.10</a>
</li><li class="li-indexenv">fprintvln, <a href="#hevea_fun213">10.10</a>
</li><li class="li-indexenv">fsubst, <a href="#hevea_fun220">10.11.6</a>
</li><li class="li-indexenv">fullname, <a href="#hevea_fun122">10.1.8</a>
</li><li class="li-indexenv">fun, <a href="#hevea_fun105">9.5.1</a>
<br>
<br>
</li><li class="li-indexenv">ge, <a href="#hevea_fun99">9.4.4</a>
</li><li class="li-indexenv">get-registry, <a href="#hevea_fun20">9.2.15</a>
</li><li class="li-indexenv">getchar, <a href="#hevea_fun201">10.8.33</a>
</li><li class="li-indexenv">getenv, <a href="#hevea_fun17">9.2.12</a>
</li><li class="li-indexenv">getgrgid, <a href="#hevea_fun227">10.11.21</a>
</li><li class="li-indexenv">getgrnam, <a href="#hevea_fun226">10.11.21</a>
</li><li class="li-indexenv">gethostbyname, <a href="#hevea_fun193">10.8.23</a>
</li><li class="li-indexenv">getprotobyname, <a href="#hevea_fun194">10.8.25</a>
</li><li class="li-indexenv">getpwents, <a href="#hevea_fun225">10.11.19</a>
</li><li class="li-indexenv">getpwnam, <a href="#hevea_fun223">10.11.18</a>
</li><li class="li-indexenv">getpwuid, <a href="#hevea_fun224">10.11.18</a>
</li><li class="li-indexenv">gets, <a href="#hevea_fun202">10.8.34</a>
</li><li class="li-indexenv">getservbyname, <a href="#hevea_fun195">10.8.27</a>
</li><li class="li-indexenv">gettimeofday, <a href="#hevea_fun235">10.11.27</a>
</li><li class="li-indexenv">getvar, <a href="#hevea_fun21">9.2.16</a>
</li><li class="li-indexenv">glob, <a href="#hevea_fun149">10.4.1</a>
</li><li class="li-indexenv">gmtime, <a href="#hevea_fun236">10.11.29</a>
</li><li class="li-indexenv">grep, <a href="#hevea_fun217">10.11.3</a>
</li><li class="li-indexenv">gt, <a href="#hevea_fun100">9.4.4</a>
<br>
<br>
</li><li class="li-indexenv">hexify, <a href="#hevea_fun44">9.3.16</a>
</li><li class="li-indexenv">history, <a href="#hevea_fun248">11.11.1</a>
</li><li class="li-indexenv">homename, <a href="#hevea_fun124">10.1.10</a>
</li><li class="li-indexenv">html-escaped, <a href="#hevea_fun38">9.3.14</a>
</li><li class="li-indexenv">html-pre-escaped, <a href="#hevea_fun39">9.3.14</a>
</li><li class="li-indexenv">html-string, <a href="#hevea_fun50">9.3.20</a>
<br>
<br>
</li><li class="li-indexenv">id-escaped, <a href="#hevea_fun41">9.3.15</a>
</li><li class="li-indexenv">if, <a href="#hevea_fun9">9.2.5</a>
</li><li class="li-indexenv">in, <a href="#hevea_fun117">10.1.3</a>
</li><li class="li-indexenv">include, <a href="#hevea_fun0">4.8</a>
</li><li class="li-indexenv">input-line, <a href="#hevea_fun178">10.8.6</a>
</li><li class="li-indexenv">int, <a href="#hevea_fun79">9.4.1</a>
</li><li class="li-indexenv">intersection, <a href="#hevea_fun63">9.3.32</a>
</li><li class="li-indexenv">intersects, <a href="#hevea_fun64">9.3.33</a>
<br>
<br>
</li><li class="li-indexenv">jobs, <a href="#hevea_fun242">11.10.1</a>
</li><li class="li-indexenv">join, <a href="#hevea_fun33">9.3.11</a>
<br>
<br>
</li><li class="li-indexenv">kill, <a href="#hevea_fun247">11.10.6</a>
<br>
<br>
</li><li class="li-indexenv">LaTeXDocument, <a href="#hevea_fun292">13.7.2.1</a>
</li><li class="li-indexenv">LaTeXDocumentCopy, <a href="#hevea_fun295">13.7.2.3</a>
</li><li class="li-indexenv">LaTeXDocumentInstall, <a href="#hevea_fun296">13.7.2.4</a>
</li><li class="li-indexenv">LocalCGeneratedFiles, <a href="#hevea_fun262">13.5.3.1</a>
</li><li class="li-indexenv">LocalOCamlGeneratedFiles, <a href="#hevea_fun284">13.6.5.1</a>
</li><li class="li-indexenv">LocalTeXGeneratedFiles, <a href="#hevea_fun294">13.7.2.2</a>
</li><li class="li-indexenv">land, <a href="#hevea_fun88">9.4.3</a>
</li></ul></td><td class="c008"><ul class="indexenv"><li class="li-indexenv">le, <a href="#hevea_fun97">9.4.4</a>
</li><li class="li-indexenv">length, <a href="#hevea_fun26">9.3.4</a>
</li><li class="li-indexenv">lex, <a href="#hevea_fun221">10.11.7</a>
</li><li class="li-indexenv">lex-search, <a href="#hevea_fun222">10.11.8</a>
</li><li class="li-indexenv">link, <a href="#hevea_fun157">10.5.6</a>
</li><li class="li-indexenv">listen, <a href="#hevea_fun198">10.8.30</a>
</li><li class="li-indexenv">lnot, <a href="#hevea_fun87">9.4.3</a>
</li><li class="li-indexenv">localtime, <a href="#hevea_fun237">10.11.29</a>
</li><li class="li-indexenv">lockf, <a href="#hevea_fun192">10.8.20</a>
</li><li class="li-indexenv">lor, <a href="#hevea_fun89">9.4.3</a>
</li><li class="li-indexenv">lowercase, <a href="#hevea_fun71">9.3.40</a>
</li><li class="li-indexenv">ls, <a href="#hevea_fun150">10.4.2</a>
</li><li class="li-indexenv">lseek, <a href="#hevea_fun180">10.8.8</a>
</li><li class="li-indexenv">lsl, <a href="#hevea_fun91">9.4.3</a>
</li><li class="li-indexenv">lsr, <a href="#hevea_fun92">9.4.3</a>
</li><li class="li-indexenv">lstat, <a href="#hevea_fun154">10.5.3</a>
</li><li class="li-indexenv">lt, <a href="#hevea_fun96">9.4.4</a>
</li><li class="li-indexenv">lxor, <a href="#hevea_fun90">9.4.3</a>
<br>
<br>
</li><li class="li-indexenv">mapprefix, <a href="#hevea_fun59">9.3.28</a>
</li><li class="li-indexenv">mapsuffix, <a href="#hevea_fun52">9.3.22</a>
</li><li class="li-indexenv">match, <a href="#hevea_fun1">4.11</a>, <a href="#hevea_fun11">9.2.6</a>
</li><li class="li-indexenv">max, <a href="#hevea_fun95">9.4.3</a>
</li><li class="li-indexenv">mem, <a href="#hevea_fun62">9.3.31</a>
</li><li class="li-indexenv">min, <a href="#hevea_fun94">9.4.3</a>
</li><li class="li-indexenv">mkdir, <a href="#hevea_fun152">10.5.1</a>
</li><li class="li-indexenv">mkfifo, <a href="#hevea_fun190">10.8.18</a>
</li><li class="li-indexenv">mktime, <a href="#hevea_fun238">10.11.30</a>
</li><li class="li-indexenv">mod, <a href="#hevea_fun86">9.4.3</a>
</li><li class="li-indexenv">mul, <a href="#hevea_fun84">9.4.3</a>
<br>
<br>
</li><li class="li-indexenv">neg, <a href="#hevea_fun81">9.4.3</a>
</li><li class="li-indexenv">normalize-time, <a href="#hevea_fun239">10.11.30</a>
</li><li class="li-indexenv">not, <a href="#hevea_fun5">9.2.1</a>
</li><li class="li-indexenv">nth, <a href="#hevea_fun27">9.3.5</a>
</li><li class="li-indexenv">nth-hd, <a href="#hevea_fun29">9.3.7</a>
</li><li class="li-indexenv">nth-tl, <a href="#hevea_fun30">9.3.8</a>
<br>
<br>
</li><li class="li-indexenv">OCamlGeneratedFiles, <a href="#hevea_fun283">13.6.5.1</a>
</li><li class="li-indexenv">OCamlLibrary, <a href="#hevea_fun285">13.6.6.1</a>
</li><li class="li-indexenv">OCamlLibraryCopy, <a href="#hevea_fun287">13.6.6.3</a>
</li><li class="li-indexenv">OCamlLibraryInstall, <a href="#hevea_fun288">13.6.6.4</a>
</li><li class="li-indexenv">OCamlPackage, <a href="#hevea_fun286">13.6.6.2</a>
</li><li class="li-indexenv">OCamlProgram, <a href="#hevea_fun289">13.6.6.5</a>
</li><li class="li-indexenv">OCamlProgramCopy, <a href="#hevea_fun290">13.6.6.6</a>
</li><li class="li-indexenv">OCamlProgramInstall, <a href="#hevea_fun291">13.6.6.7</a>
</li><li class="li-indexenv">OMakeFlags, <a href="#hevea_fun249">13.2.1</a>
</li><li class="li-indexenv">OMakeVersion, <a href="#hevea_fun250">13.2.2</a>
</li><li class="li-indexenv">ocaml-escaped, <a href="#hevea_fun37">9.3.14</a>
</li><li class="li-indexenv">open-in-string, <a href="#hevea_fun172">10.8.2</a>
</li><li class="li-indexenv">open-out-string, <a href="#hevea_fun173">10.8.3</a>
</li><li class="li-indexenv">or, <a href="#hevea_fun8">9.2.4</a>
</li><li class="li-indexenv">out-contents, <a href="#hevea_fun174">10.8.3</a>
<br>
<br>
</li><li class="li-indexenv">pipe, <a href="#hevea_fun189">10.8.17</a>
</li><li class="li-indexenv">print, <a href="#hevea_fun205">10.9</a>
</li><li class="li-indexenv">println, <a href="#hevea_fun208">10.9</a>
</li><li class="li-indexenv">printv, <a href="#hevea_fun211">10.10</a>
</li><li class="li-indexenv">printvln, <a href="#hevea_fun214">10.10</a>
</li><li class="li-indexenv">project-directories, <a href="#hevea_fun258">13.3.4</a>
</li><li class="li-indexenv">prompt-invisible, <a href="#hevea_fun234">10.11.26</a>
</li><li class="li-indexenv">prompt-invisible-begin, <a href="#hevea_fun232">10.11.25</a>
</li><li class="li-indexenv">prompt-invisible-end, <a href="#hevea_fun233">10.11.25</a>
<br>
<br>
</li><li class="li-indexenv">quote, <a href="#hevea_fun48">9.3.18</a>
</li><li class="li-indexenv">quote-argv, <a href="#hevea_fun49">9.3.19</a>
<br>
<br>
</li><li class="li-indexenv">RunCProg, <a href="#hevea_fun306">14.1.5</a>
</li><li class="li-indexenv">raise, <a href="#hevea_fun13">9.2.8</a>
</li><li class="li-indexenv">random, <a href="#hevea_fun77">9.3.46</a>
</li><li class="li-indexenv">random-init, <a href="#hevea_fun78">9.3.46</a>
</li><li class="li-indexenv">read, <a href="#hevea_fun177">10.8.6</a>
</li><li class="li-indexenv">readlink, <a href="#hevea_fun160">10.5.8</a>
</li><li class="li-indexenv">readlink-raw, <a href="#hevea_fun161">10.5.8</a>
</li><li class="li-indexenv">rehash, <a href="#hevea_fun128">10.2.3</a>
</li><li class="li-indexenv">remove-project-directories, <a href="#hevea_fun169">10.6.3</a>
</li><li class="li-indexenv">removeprefix, <a href="#hevea_fun55">9.3.24</a>
</li><li class="li-indexenv">removesuffix, <a href="#hevea_fun56">9.3.25</a>
</li><li class="li-indexenv">rename, <a href="#hevea_fun156">10.5.5</a>
</li><li class="li-indexenv">replace-nth, <a href="#hevea_fun28">9.3.6</a>
</li><li class="li-indexenv">replacesuffixes, <a href="#hevea_fun57">9.3.26</a>
</li><li class="li-indexenv">rev, <a href="#hevea_fun32">9.3.10</a>
</li><li class="li-indexenv">rewind, <a href="#hevea_fun181">10.8.9</a>
</li><li class="li-indexenv">rootname, <a href="#hevea_fun120">10.1.6</a>
</li><li class="li-indexenv">rule, <a href="#hevea_fun259">13.3.5</a>
<br>
<br>
</li><li class="li-indexenv">StaticCLibrary, <a href="#hevea_fun263">13.5.4.1</a>
</li><li class="li-indexenv">StaticCLibraryCopy, <a href="#hevea_fun265">13.5.4.2</a>
</li><li class="li-indexenv">StaticCLibraryInstall, <a href="#hevea_fun267">13.5.4.3</a>
</li><li class="li-indexenv">StaticCObject, <a href="#hevea_fun269">13.5.4.4</a>
</li><li class="li-indexenv">StaticCObjectCopy, <a href="#hevea_fun270">13.5.4.4</a>
</li><li class="li-indexenv">StaticCObjectInstall, <a href="#hevea_fun271">13.5.4.4</a>
</li><li class="li-indexenv">StaticCXXLibrary, <a href="#hevea_fun277">13.5.4.9</a>
</li><li class="li-indexenv">StaticCXXLibraryCopy, <a href="#hevea_fun278">13.5.4.9</a>
</li><li class="li-indexenv">StaticCXXLibraryInstall, <a href="#hevea_fun279">13.5.4.9</a>
</li><li class="li-indexenv">scan, <a href="#hevea_fun218">10.11.4</a>
</li><li class="li-indexenv">section, <a href="#hevea_fun3">8.3</a>
</li><li class="li-indexenv">section rule, <a href="#hevea_fun4">8.4</a>
</li><li class="li-indexenv">select, <a href="#hevea_fun191">10.8.19</a>
</li><li class="li-indexenv">sequence-forall, <a href="#hevea_fun111">9.7.1</a>
</li><li class="li-indexenv">sequence-sort, <a href="#hevea_fun112">9.7.3</a>
</li><li class="li-indexenv">set, <a href="#hevea_fun61">9.3.30</a>
</li><li class="li-indexenv">set-close-on-exec-mode, <a href="#hevea_fun188">10.8.16</a>
</li><li class="li-indexenv">set-diff, <a href="#hevea_fun65">9.3.34</a>
</li><li class="li-indexenv">set-nonblock, <a href="#hevea_fun187">10.8.15</a>
</li><li class="li-indexenv">setenv, <a href="#hevea_fun18">9.2.13</a>
</li><li class="li-indexenv">setvar, <a href="#hevea_fun22">9.2.17</a>
</li><li class="li-indexenv">shell, <a href="#hevea_fun73">9.3.42</a>
</li><li class="li-indexenv">socket, <a href="#hevea_fun196">10.8.28</a>
</li><li class="li-indexenv">split, <a href="#hevea_fun24">9.3.2</a>
</li><li class="li-indexenv">sql-escaped, <a href="#hevea_fun42">9.3.15</a>
</li><li class="li-indexenv">stat, <a href="#hevea_fun153">10.5.3</a>
</li><li class="li-indexenv">stat-reset, <a href="#hevea_fun140">10.3.2</a>
</li><li class="li-indexenv">stop, <a href="#hevea_fun245">11.10.4</a>
</li><li class="li-indexenv">string, <a href="#hevea_fun34">9.3.12</a>
</li><li class="li-indexenv">string-escaped, <a href="#hevea_fun36">9.3.14</a>
</li><li class="li-indexenv">string-length, <a href="#hevea_fun35">9.3.13</a>
</li><li class="li-indexenv">sub, <a href="#hevea_fun83">9.4.3</a>
</li><li class="li-indexenv">subdirs, <a href="#hevea_fun151">10.4.3</a>
</li><li class="li-indexenv">subrange, <a href="#hevea_fun31">9.3.9</a>
</li><li class="li-indexenv">suffix, <a href="#hevea_fun125">10.1.11</a>
</li><li class="li-indexenv">switch, <a href="#hevea_fun2">4.11</a>, <a href="#hevea_fun10">9.2.6</a>
</li><li class="li-indexenv">symlink, <a href="#hevea_fun158">10.5.7</a>
</li><li class="li-indexenv">symlink-raw, <a href="#hevea_fun159">10.5.7</a>
</li><li class="li-indexenv">system, <a href="#hevea_fun72">9.3.41</a>
<br>
<br>
</li><li class="li-indexenv">TeXGeneratedFiles, <a href="#hevea_fun293">13.7.2.2</a>
</li><li class="li-indexenv">TryCompileC, <a href="#hevea_fun303">14.1.4</a>
</li><li class="li-indexenv">TryLinkC, <a href="#hevea_fun304">14.1.4</a>
</li><li class="li-indexenv">TryRunC, <a href="#hevea_fun305">14.1.4</a>
</li><li class="li-indexenv">target, <a href="#hevea_fun256">13.3.2</a>
</li><li class="li-indexenv">target-exists, <a href="#hevea_fun138">10.3.1</a>
</li><li class="li-indexenv">target-is-proper, <a href="#hevea_fun139">10.3.1</a>
</li><li class="li-indexenv">tell, <a href="#hevea_fun182">10.8.10</a>
</li><li class="li-indexenv">test, <a href="#hevea_fun170">10.7.1</a>
</li><li class="li-indexenv">tgetstr, <a href="#hevea_fun228">10.11.22</a>
</li><li class="li-indexenv">tmpfile, <a href="#hevea_fun116">10.1.2</a>
</li><li class="li-indexenv">truncate, <a href="#hevea_fun165">10.5.12</a>
</li><li class="li-indexenv">try, <a href="#hevea_fun12">9.2.7</a>
<br>
<br>
</li><li class="li-indexenv">uge, <a href="#hevea_fun103">9.4.4</a>
</li><li class="li-indexenv">ugt, <a href="#hevea_fun104">9.4.4</a>
</li><li class="li-indexenv">ule, <a href="#hevea_fun102">9.4.4</a>
</li><li class="li-indexenv">ult, <a href="#hevea_fun101">9.4.4</a>
</li><li class="li-indexenv">umask, <a href="#hevea_fun166">10.5.13</a>
</li><li class="li-indexenv">uncapitalize, <a href="#hevea_fun69">9.3.38</a>
</li><li class="li-indexenv">unhexify, <a href="#hevea_fun45">9.3.16</a>
</li><li class="li-indexenv">unlink, <a href="#hevea_fun155">10.5.4</a>
</li><li class="li-indexenv">unsetenv, <a href="#hevea_fun19">9.2.14</a>
</li><li class="li-indexenv">uppercase, <a href="#hevea_fun70">9.3.39</a>
</li><li class="li-indexenv">uri-escaped, <a href="#hevea_fun43">9.3.15</a>
</li><li class="li-indexenv">utimes, <a href="#hevea_fun164">10.5.11</a>
<br>
<br>
</li><li class="li-indexenv">VerboseCheckCHeader, <a href="#hevea_fun308">14.1.6</a>
</li><li class="li-indexenv">VerboseCheckCLib, <a href="#hevea_fun310">14.1.7</a>
</li><li class="li-indexenv">vmount, <a href="#hevea_fun167">10.6.1</a>
<br>
<br>
</li><li class="li-indexenv">wait, <a href="#hevea_fun246">11.10.5</a>
</li><li class="li-indexenv">where, <a href="#hevea_fun127">10.2.2</a>
</li><li class="li-indexenv">which, <a href="#hevea_fun126">10.2.1</a>
</li><li class="li-indexenv">while, <a href="#hevea_fun75">9.3.44</a>
</li><li class="li-indexenv">write, <a href="#hevea_fun179">10.8.7</a>
<br>
<br>
</li><li class="li-indexenv">xterm-escape, <a href="#hevea_fun231">10.11.24</a>
</li><li class="li-indexenv">xterm-escape-begin, <a href="#hevea_fun229">10.11.23</a>
</li><li class="li-indexenv">xterm-escape-end, <a href="#hevea_fun230">10.11.23</a>
</li></ul></td></tr>
</table><!--NAME omake-fun-index.html-->
<!--TOC chapter id="sec625" Index of objects-->
<h1 class="chapter" id="sec625">Index of objects</h1><!--SEC END --><p></p><table class="c000 cellpading0"><tr><td class="c008"><ul class="indexenv"><li class="li-indexenv">
Array, <a href="#hevea_obj16">12.1.7</a>
<br>
<br>
</li><li class="li-indexenv">Channel, <a href="#hevea_obj24">12.1.15</a>
<br>
<br>
</li><li class="li-indexenv">Dir, <a href="#hevea_obj23">12.1.14</a>
<br>
<br>
</li><li class="li-indexenv">Exception, <a href="#hevea_obj28">12.1.19</a>
<br>
<br>
</li><li class="li-indexenv">File, <a href="#hevea_obj22">12.1.13</a>
</li><li class="li-indexenv">Float, <a href="#hevea_obj14">12.1.5</a>
</li><li class="li-indexenv">Fun, <a href="#hevea_obj18">12.1.9</a>
<br>
<br>
</li><li class="li-indexenv">Group, <a href="#hevea_obj8">10.11.20</a>
<br>
<br>
</li><li class="li-indexenv">Host, <a href="#hevea_obj2">10.8.22</a>
<br>
<br>
</li><li class="li-indexenv">InChannel, <a href="#hevea_obj25">12.1.16</a>
</li><li class="li-indexenv">InetAddr, <a href="#hevea_obj1">10.8.21</a>
</li><li class="li-indexenv">Int, <a href="#hevea_obj13">12.1.4</a>
<br>
<br>
</li><li class="li-indexenv">Lexer, <a href="#hevea_obj5">10.11.9</a>
</li><li class="li-indexenv">Location, <a href="#hevea_obj27">12.1.18</a>
<br>
<br>
</li><li class="li-indexenv">Map, <a href="#hevea_obj11">12.1.2</a>
</li></ul></td><td class="c008"><ul class="indexenv"><li class="li-indexenv">Node, <a href="#hevea_obj21">12.1.12</a>
</li><li class="li-indexenv">Number, <a href="#hevea_obj12">12.1.3</a>
<br>
<br>
</li><li class="li-indexenv">Object, <a href="#hevea_obj10">12.1.1</a>
</li><li class="li-indexenv">OutChannel, <a href="#hevea_obj26">12.1.17</a>
<br>
<br>
</li><li class="li-indexenv">Parser, <a href="#hevea_obj6">10.11.13</a>
</li><li class="li-indexenv">Passwd, <a href="#hevea_obj7">10.11.17</a>
</li><li class="li-indexenv">Protocol, <a href="#hevea_obj3">10.8.24</a>
<br>
<br>
</li><li class="li-indexenv">Rule, <a href="#hevea_obj19">12.1.10</a>
</li><li class="li-indexenv">RuntimeException, <a href="#hevea_obj29">12.1.20</a>
<br>
<br>
</li><li class="li-indexenv">Sequence, <a href="#hevea_obj15">12.1.6</a>
</li><li class="li-indexenv">Service, <a href="#hevea_obj4">10.8.26</a>
</li><li class="li-indexenv">Shell, <a href="#hevea_obj31">12.1.22</a>
</li><li class="li-indexenv">Stat, <a href="#hevea_obj0">10.5.2</a>
</li><li class="li-indexenv">String, <a href="#hevea_obj17">12.1.8</a>
<br>
<br>
</li><li class="li-indexenv">Target, <a href="#hevea_obj20">12.1.11</a>
</li><li class="li-indexenv">Tm, <a href="#hevea_obj9">10.11.28</a>
<br>
<br>
</li><li class="li-indexenv">UnbuildableException, <a href="#hevea_obj30">12.1.21</a>
</li></ul></td></tr>
</table><!--NAME omake-obj-index.html-->
<!--TOC chapter id="sec626" Index of special targets-->
<h1 class="chapter" id="sec626">Index of special targets</h1><!--SEC END --><p></p><table class="c000 cellpading0"><tr><td class="c008"><ul class="indexenv"><li class="li-indexenv">
.BUILD_BEGIN, <a href="#hevea_target14">13.1</a>
</li><li class="li-indexenv">.BUILD_FAILURE, <a href="#hevea_target16">13.1</a>
</li><li class="li-indexenv">.BUILD_SUCCESS, <a href="#hevea_target15">13.1</a>
</li><li class="li-indexenv">.BUILDORDER, <a href="#hevea_target13">10.3.6</a>
</li><li class="li-indexenv">.DEFAULT, <a href="#hevea_target3">8.7</a>, <a href="#hevea_target10">8.12.1</a>
</li><li class="li-indexenv">.INCLUDE, <a href="#hevea_target5">8.9</a>
</li></ul></td><td class="c008"><ul class="indexenv"><li class="li-indexenv">.MEMO, <a href="#hevea_target1">4.15.1.1</a>
</li><li class="li-indexenv">.ORDER, <a href="#hevea_target12">10.3.6</a>
</li><li class="li-indexenv">.PHONY, <a href="#hevea_target6">8.10</a>, <a href="#hevea_target8">8.11.3</a>, <a href="#hevea_target9">8.12.1</a>, <a href="#hevea_target11">8.12.2</a>
</li><li class="li-indexenv">.SCANNER, <a href="#hevea_target2">8.6</a>, <a href="#hevea_target7">8.11.2</a>
</li><li class="li-indexenv">.STATIC, <a href="#hevea_target0">4.15.1</a>
</li><li class="li-indexenv">.SUBDIRS, <a href="#hevea_target4">8.8</a>
</li></ul></td></tr>
</table><!--NAME omake-target-index.html-->
<!--TOC chapter id="sec627" Index of options-->
<h1 class="chapter" id="sec627">Index of options</h1><!--SEC END --><p></p><table class="c000 cellpading0"><tr><td class="c008"><ul class="indexenv"><li class="li-indexenv">
&#X2013;absname, <a href="#hevea_opt31">A.3.20</a>
</li><li class="li-indexenv">&#X2013;all-dependencies, <a href="#hevea_opt26">A.3.15</a>
</li><li class="li-indexenv">&#X2013;configure, <a href="#hevea_opt20">A.3.9</a>
</li><li class="li-indexenv">&#X2013;depend, <a href="#hevea_opt19">A.3.8</a>
</li><li class="li-indexenv">&#X2013;dotomake, <a href="#hevea_opt22">A.3.11</a>
</li><li class="li-indexenv">&#X2013;force-dotomake, <a href="#hevea_opt21">A.3.10</a>
</li><li class="li-indexenv">&#X2013;install, <a href="#hevea_opt28">A.3.17</a>
</li><li class="li-indexenv">&#X2013;install-all, <a href="#hevea_opt29">A.3.18</a>
</li><li class="li-indexenv">&#X2013;install-force, <a href="#hevea_opt30">A.3.19</a>
</li><li class="li-indexenv">&#X2013;output-at-end, <a href="#hevea_opt10">A.2.11</a>
</li><li class="li-indexenv">&#X2013;output-normal, <a href="#hevea_opt7">A.2.8</a>
</li><li class="li-indexenv">&#X2013;output-only-errors, <a href="#hevea_opt9">A.2.10</a>
</li><li class="li-indexenv">&#X2013;output-postpone, <a href="#hevea_opt8">A.2.9</a>
</li><li class="li-indexenv">&#X2013;print-dependencies, <a href="#hevea_opt24">A.3.13</a>
</li><li class="li-indexenv">&#X2013;print-exit, <a href="#hevea_opt5">A.2.6</a>
</li><li class="li-indexenv">&#X2013;print-status, <a href="#hevea_opt4">A.2.5</a>
</li><li class="li-indexenv">&#X2013;progress, <a href="#hevea_opt3">A.2.4</a>
</li></ul></td><td class="c008"><ul class="indexenv"><li class="li-indexenv">&#X2013;show-dependencies, <a href="#hevea_opt25">A.3.14</a>
</li><li class="li-indexenv">&#X2013;verbose, <a href="#hevea_opt6">A.2.7</a>
</li><li class="li-indexenv">&#X2013;verbose-dependencies, <a href="#hevea_opt27">A.3.16</a>
</li><li class="li-indexenv">-j, <a href="#hevea_opt23">A.3.12</a>
</li><li class="li-indexenv">-k, <a href="#hevea_opt12">A.3.1</a>
</li><li class="li-indexenv">-n, <a href="#hevea_opt13">A.3.2</a>
</li><li class="li-indexenv">-o, <a href="#hevea_opt11">A.2.12</a>
</li><li class="li-indexenv">-P, <a href="#hevea_opt15">A.3.4</a>
</li><li class="li-indexenv">-p, <a href="#hevea_opt14">A.3.3</a>
</li><li class="li-indexenv">-R, <a href="#hevea_opt16">A.3.5</a>
</li><li class="li-indexenv">-S, <a href="#hevea_opt1">A.2.2</a>
</li><li class="li-indexenv">-s, <a href="#hevea_opt0">A.2.1</a>
</li><li class="li-indexenv">-t, <a href="#hevea_opt17">A.3.6</a>
</li><li class="li-indexenv">-U, <a href="#hevea_opt18">A.3.7</a>
</li><li class="li-indexenv">-w, <a href="#hevea_opt2">A.2.3</a>
<br>
<br>
</li><li class="li-indexenv">variable definition, <a href="#hevea_opt32">A.3.21</a>
</li></ul></td></tr>
</table><!--NAME omake-option-index.html-->

<!--TOC chapter id="sec628" References-->
<h1 class="chapter" id="sec628">Appendix&#XA0;C&#XA0;&#XA0;References</h1><!--SEC END --><p>
<a id="chapter:references"></a>
</p><!--NAME omake-references.html-->

<!--TOC section id="sec629" See Also-->
<h2 class="section" id="sec629">C.1&#XA0;&#XA0;See Also</h2><!--SEC END --><p>omake(1) (Chapter&#XA0;<a href="#chapter%3Aomake">1</a>),
osh(1) (Chapter&#XA0;<a href="#chapter%3Aosh">15</a>),
make(1)</p>
<!--TOC section id="sec630" Version-->
<h2 class="section" id="sec630">C.2&#XA0;&#XA0;Version</h2><!--SEC END --><p>Version: 0.9.8.6 of 21<sup>st</sup>July,&#XA0;2013.</p>
<!--TOC section id="sec631" License and Copyright-->
<h2 class="section" id="sec631">C.3&#XA0;&#XA0;License and Copyright</h2><!--SEC END --><p>&#XA9; 2003-2006, Mojave Group, Caltech</p><p>This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; version 2
of the License.</p><p>This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU General Public License for more details.</p><p>You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</p>
<!--TOC section id="sec632" Author-->
<h2 class="section" id="sec632">C.4&#XA0;&#XA0;Author</h2><!--SEC END --><p>Jason Hickey, Aleksey Nogin, <em>et. al.</em>					<br>
Caltech 256-80					<br>
Pasadena, CA 91125, USA				<br>
Email: <span class="c001">omake-devel@metaprl.org</span>		<br>
WWW: <a href="http://www.cs.caltech.edu/~jyh"><span class="c001">http://www.cs.caltech.edu/~jyh</span></a> and <a href="http://nogin.org/"><span class="c001">http://nogin.org/</span></a></p><!--CUT END -->
<!--HTMLFOOT-->

<table class="c000 cellpading0"><tr><td class="c006">Jump to:</td><td class="c005">&#XA0;&#XA0;</td><td class="c006"><a href="../index.html">OMake Home</a>
&bull;&nbsp;<a href="omake.html">Guide Home</a>
&bull;&nbsp;<a href="omake-doc.html">Guide (single-page)</a>
&bull;&nbsp;<a href="omake-toc.html">Contents (short)</a>
&bull;&nbsp;<a href="omake-contents.html">Contents (long)</a></td></tr>
<tr><td class="c006">Index:</td><td class="c005">&#XA0;&#XA0;</td><td class="c006"><a href="omake-all-index.html">All</a>
&bull;&nbsp;<a href="omake-var-index.html">Variables</a>
&bull;&nbsp;<a href="omake-fun-index.html">Functions</a>
&bull;&nbsp;<a href="omake-obj-index.html">Objects</a>
&bull;&nbsp;<a href="omake-target-index.html">Targets</a>
&bull;&nbsp;<a href="omake-option-index.html">Options</a>
</td></tr>
</table>
<!--ENDHTML-->
<!--FOOTER-->
<hr style="height:2"><blockquote class="quote"><em>This document was translated from L<sup>A</sup>T<sub>E</sub>X by
</em><a href="http://hevea.inria.fr/index.html"><em>H<span style="font-size:small"><sup>E</sup></span>V<span style="font-size:small"><sup>E</sup></span>A</em></a><em>.</em></blockquote></body>
</html>
